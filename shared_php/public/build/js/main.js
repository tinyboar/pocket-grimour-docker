"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["js/main"],{

/***/ "./assets/js/classes/BluffDialog.js":
/*!******************************************!*\
  !*** ./assets/js/classes/BluffDialog.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BluffDialog)
/* harmony export */ });
/* harmony import */ var _Dialog_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _CharacterToken_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CharacterToken.js */ "./assets/js/classes/CharacterToken.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

function _get() { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }




/**
 * A version of {@link Dialog} with extra abilities for displaying a token.
 */

var BluffDialog = /*#__PURE__*/function (_Dialog) {
  _inherits(BluffDialog, _Dialog);

  var _super = _createSuper(BluffDialog);

  function BluffDialog() {
    _classCallCheck(this, BluffDialog);

    return _super.apply(this, arguments);
  }

  _createClass(BluffDialog, [{
    key: "display",
    value:
    /**
     * Displays the given character within {@link BluffDialog#dialog}.
     *
     * @param {CharacterToken} character
     *        Character to display.
     * @param {Boolean} isOrphan
     *        true if the "orphan" note should be shown, false otherwise.
     */
    function display(character) {
      var isOrphan = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var dialog = this.dialog;
      var showTokenButton = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#bluff-show-token", dialog);
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#bluff-show-name", dialog).textContent = character.getName();
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#bluff-show-ability", dialog).textContent = character.getAbility();
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#bluff-show-orphan", dialog).hidden = !isOrphan;
      showTokenButton.disabled = character.isEmpty();
      showTokenButton.dataset.characterId = character.getId();
    }
  }], [{
    key: "createFromTrigger",
    value:
    /**
     * @inheritDoc
     */
    function createFromTrigger(trigger) {
      trigger.dataset.dialog = trigger.dataset.bluffDialog;

      _get(_getPrototypeOf(BluffDialog), "createFromTrigger", this).call(this, trigger);
    }
  }]);

  return BluffDialog;
}(_Dialog_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./assets/js/classes/BluffSet.js":
/*!***************************************!*\
  !*** ./assets/js/classes/BluffSet.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BluffSet)
/* harmony export */ });
/* harmony import */ var _CharacterToken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CharacterToken */ "./assets/js/classes/CharacterToken.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }


/**
 * Manages the set of 3 demon bluffs, handling the tokens.
 */

var BluffSet = /*#__PURE__*/function () {
  function BluffSet() {
    _classCallCheck(this, BluffSet);

    /**
     * The characters in this set.
     * @type {CharacterToken[]}
     */
    this.characters = [this.getEmptyCharacter(), this.getEmptyCharacter(), this.getEmptyCharacter()];
    /**
     * The index of the current character being set or checked.
     * @type {Number}
     */

    this.index = 0;
  }
  /**
   * Gets the {@link CharacterToken} for the empty character.
   *
   * @return {CharacterToken}
   *         A clone of the "empty character" token.
   * @throws {Error}
   *         {@link BluffSet.emptyCharacter} must be defined.
   */


  _createClass(BluffSet, [{
    key: "getEmptyCharacter",
    value: function getEmptyCharacter() {
      var emptyCharacter = this.constructor.emptyCharacter;

      if (!emptyCharacter) {
        throw new Error("The \"No character\" character needs to be set.");
      }

      return emptyCharacter.clone();
    }
    /**
     * Validates the given index so that we know it's a number between 0 and
     * the number of characters in {@link BluffSet#characters}.
     *
     * @param  {Number} index
     *         Index to validate.
     * @return {Number}
     *         Validated index.
     * @throws {RangeError}
     *         `index` must be between 0 and the length of
     *         {@link BluffSet#characters}.
     */

  }, {
    key: "validateIndex",
    value: function validateIndex(index) {
      index = Number(index);

      if (index < 0 || index >= this.characters.length) {
        throw new RangeError("BluffSet invalid index ".concat(index));
      }

      return index;
    }
    /**
     * Exposes {@link BluffsSet#characters}, but clones the array so that
     * manipulating the response from this method doesn't affect the original
     * data.
     *
     * @return {CharacterToken[]}
     *         Copy of {@link BluffsSet#characters}.
     */

  }, {
    key: "getCharacters",
    value: function getCharacters() {
      return _toConsumableArray(this.characters);
    }
    /**
     * Gets the character at the requested index. If the index isn't given,
     * {@link BluffsSet#index} is used instead. The index is validated using
     * {@link BluffSet#validateIndex}.
     *
     * @param  {Number} [index]
     *         Optional index. If ommitted, {@link BluffsSet#index} is used.
     * @return {CharacterToken}
     *         The character at the given index.
     */

  }, {
    key: "getCharacter",
    value: function getCharacter() {
      var index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.index;
      return this.characters[this.validateIndex(index)];
    }
    /**
     * Sets the character at the given index. If the index is ommitted,
     * {@link BluffsSet#index} is used instead. The index is validated using
     * {@link BluffSet#validateIndex}.
     *
     * @param {CharacterToken} character
     *        Character to set.
     * @param {Number} [index]
     *        Optional index. If ommitted, {@link BluffsSet#index} is used.
     */

  }, {
    key: "setCharacter",
    value: function setCharacter(character) {
      var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.index;

      if (!character) {
        character = this.getEmptyCharacter();
      }

      this.characters[this.validateIndex(index)] = character;
    }
    /**
     * Unsets the character. This is done by looking up the index of the
     * character form within {@link BluffSet#characters} and passing it to
     * {@link BluffSet#unsetCharacterByIndex}.
     *
     * @param {CharacterToken} character
     *        The character to unset.
     */

  }, {
    key: "unsetCharacter",
    value: function unsetCharacter(character) {
      this.unsetCharacterByIndex(this.characters.indexOf(character));
    }
    /**
     * Unsets the character at the given index. This is done by setting the
     * character in {@link BluffSet#character} at the given index to a clone of
     * the "empty" character. The given index is validated using
     * {@link BluffSet#validateIndex}.
     *
     * @param {Number} index
     *        Index of the character to unset.
     */

  }, {
    key: "unsetCharacterByIndex",
    value: function unsetCharacterByIndex(index) {
      this.characters[this.validateIndex(index)] = this.getEmptyCharacter();
    }
    /**
     * Sets {@link BluffSet#index}. The given index is validated using
     * {@link BluffSet#validateIndex}.
     *
     * @param {Number} index
     *        The index to set.
     */

  }, {
    key: "setIndex",
    value: function setIndex(index) {
      this.index = this.validateIndex(index);
    }
    /**
     * Exposes {@link BluffSet#index}.
     *
     * @return {Number}
     *         The current index.
     */

  }, {
    key: "getIndex",
    value: function getIndex() {
      return this.index;
    }
    /**
     * Returns an array containing the IDs of the characters in
     * {@link BluffSet#characters}.
     *
     * @return {String[]}
     *         The IDs of the characters in this set.
     */

  }, {
    key: "serialise",
    value: function serialise() {
      return this.characters.map(function (character) {
        return character.getId();
      });
    }
  }], [{
    key: "setEmptyCharacter",
    value:
    /**
     * Sets the {@link CharacterToken} for an empty character - this is used as
     * the default character in the bluffs before one is set.
     *
     * @param {CharacterToken} emptyCharacter
     */
    function setEmptyCharacter(emptyCharacter) {
      /**
       * The empty character token.
       * @type {CharacterToken}
       */
      this.emptyCharacter = emptyCharacter;
    }
  }]);

  return BluffSet;
}();



/***/ }),

/***/ "./assets/js/classes/BluffsGroup.js":
/*!******************************************!*\
  !*** ./assets/js/classes/BluffsGroup.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BluffsGroup)
/* harmony export */ });
/* harmony import */ var _BluffSet_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BluffSet.js */ "./assets/js/classes/BluffSet.js");
/* harmony import */ var _CharacterToken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CharacterToken */ "./assets/js/classes/CharacterToken.js");
/* harmony import */ var _Template__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Template */ "./assets/js/classes/Template.js");
/* harmony import */ var _SettableTitle__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./SettableTitle */ "./assets/js/classes/SettableTitle.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }






/**
 * Manages the DOM elements that manage the group of 3 demon bluffs.
 */

var BluffsGroup = /*#__PURE__*/function () {
  /**
   * @param {BluffSet} bluffSet
   *        The set of Demon Bluffs for this group.
   */
  function BluffsGroup(bluffSet) {
    _classCallCheck(this, BluffsGroup);

    /**
     * The index of this group of Demon Bluffs - mainly controlled by the
     * parent {@link BluffsGroups} class.
     * @type {Number}
     */
    this.index = 0;
    /**
     * The set of Demon Bluffs for this group.
     * @type {BluffSet}
     */

    this.bluffSet = bluffSet;
  }
  /**
   * Sets the element that contains this group of Demon Bluffs.
   *
   * @param {HTMLElement} element
   */


  _createClass(BluffsGroup, [{
    key: "setElement",
    value: function setElement(element) {
      /**
       * The element that contains this group of Demon Bluffs.
       * @type {HTMLElement}
       */
      this.element = element;
    }
    /**
     * Exposes {@link BluffsGroup#element}.
     *
     * @return {HTMLElement}
     *         The element that contains this group of Demon Bluffs.
     */

  }, {
    key: "getElement",
    value: function getElement() {
      return this.element;
    }
    /**
     * Sets {@link BluffsGroup#index}.
     *
     * @param {Number} index
     *        Index to set.
     */

  }, {
    key: "setIndex",
    value: function setIndex(index) {
      this.index = index;

      if (this.element) {
        this.element.dataset.groupId = this.index;
      }
    }
    /**
     * Returns an object that reflects the current state of this group of
     * Demon Bluffs. It does this by calling {@link BluffSet#serialise} on
     * {@link BluffsGroup#bluffSet} and {@link SettableTitle#getTitle} on
     * {@link BluffsGroup#settableTitle}.
     *
     * @return {Object}
     */

  }, {
    key: "serialise",
    value: function serialise() {
      var bluffSet = this.bluffSet,
          settableTitle = this.settableTitle;
      return {
        name: (settableTitle === null || settableTitle === void 0 ? void 0 : settableTitle.getTitle()) || "",
        set: bluffSet.serialise()
      };
    }
    /**
     * Draws the HTML elements for this group of Demon Bluffs.
     *
     * @return {DocumentFragment}
     *         The fragment of the drawn elements.
     */

  }, {
    key: "draw",
    value: function draw() {
      var _this = this;

      return this.constructor.template.draw({
        ".js--demon-bluffs--group": function jsDemonBluffsGroup(element) {
          element.dataset.groupId = _this.index;
        }
      });
    }
    /**
     * Gets a CSS selector that identifies {@link BluffsGroup#element}.
     *
     * @return {String}
     *         CSS selector that identifies {@link BluffsGroup#element}.
     */

  }, {
    key: "getSelector",
    value: function getSelector() {
      return ".js--demon-bluffs--group[data-group-id=\"".concat(this.index, "\"]");
    }
    /**
     * The set index is the current index in {@link BluffsGroup#bluffSet}. This
     * function accesses it.
     *
     * @return {Number}
     *         The set index.
     */

  }, {
    key: "getSetIndex",
    value: function getSetIndex() {
      return this.bluffSet.getIndex();
    }
    /**
     * The set index is the current index in {@link BluffsGroup#bluffSet}. This
     * function sets it.
     *
     * @param {Number}
     *        The set index to set.
     */

  }, {
    key: "setSetIndex",
    value: function setSetIndex(index) {
      return this.bluffSet.setIndex(index);
    }
    /**
     * Sets the character in {@link BluffsGroup#bluffSet}. Optionally, the index
     * of the character can be defined, rather than using
     * {@link BluffsGroup#setSetIndex} first.
     *
     * @param {CharacterToken} character
     *        Character to set.
     * @param {Number} [index]
     *        Optional index for the character.
     */

  }, {
    key: "setCharacter",
    value: function setCharacter(character, index) {
      this.bluffSet.setCharacter(character, index);
    }
    /**
     * Gets the character from {@link BluffsGroup#bluffSet}, either at the index
     * requested or its own internal index if `index` is ommitted.
     *
     * @param  {Number} [index]
     *         Optional index for the character to return.
     * @return {CharacterToken}
     *         The character token requested.
     */

  }, {
    key: "getCharacter",
    value: function getCharacter(index) {
      return this.bluffSet.getCharacter(index);
    }
    /**
     * Makes {@link BluffsGroup#element} visible by scrolling it into view.
     *
     * @throws {Error}
     *         {@link BluffsGroup#element} must be set.
     */

  }, {
    key: "display",
    value: function display() {
      var element = this.element;

      if (!element) {
        throw new Error("Cannot display group because there is no element");
      }

      element.scrollIntoView({
        block: "nearest"
      });
    }
    /**
     * Finishes the seting up of this group of Demon Bluffs and dispatches an
     * event to announce that it's ready.
     */

  }, {
    key: "ready",
    value: function ready() {
      var element = this.element,
          bluffSet = this.bluffSet,
          READY = this.constructor.READY;

      if (!element) {
        return;
      }

      this.display();
      bluffSet.getCharacters().forEach(function (character, index) {
        var button = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)(".js--demon-bluffs--bluff[data-index=\"".concat(index, "\"]"), element);
        (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.empty)(button).append(character.drawToken());
      });
      element.dispatchEvent(new CustomEvent(READY, {
        bubbles: true,
        cancelable: false,
        detail: {
          bluffGroup: this
        }
      }));
    }
    /**
     * Removes {@link BluffsGroup#element} from the DOM, if it exists.
     */

  }, {
    key: "remove",
    value: function remove() {
      var _this$element;

      (_this$element = this.element) === null || _this$element === void 0 ? void 0 : _this$element.remove();
    }
    /**
     * Redraws the button for the character that was most recently updated in
     * {@link BluffsGroup#bluffSet}.
     */

  }, {
    key: "redrawButton",
    value: function redrawButton() {
      var element = this.element,
          bluffSet = this.bluffSet;
      var setIndex = bluffSet.getIndex();
      var character = bluffSet.getCharacter(setIndex);
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.empty)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)(".js--demon-bluffs--bluff[data-index=\"".concat(setIndex, "\"]"), element)).append(character.drawToken());
    }
    /**
     * Sets the {@link SettableTitle} instance that will allow the name of this
     * group of Demon Bluffs to be set. If there's a value in
     * {@link BluffsGroup#settableTitleTitle} then it's passed to the instance
     * before that property is deleted.
     *
     * @param {SettableTitle} settableTitle
     *        SettableTitle instance for this group of Demon Bluffs.
     */

  }, {
    key: "setSettableTitle",
    value: function setSettableTitle(settableTitle) {
      this.settableTitle = settableTitle;

      if (this.settableTitleTitle) {
        settableTitle.setTitle(this.settableTitleTitle);
        delete this.settableTitleTitle;
      }
    }
    /**
     * Sets the title of this group of Demon Bluffs. The title is passed to
     * {@link BluffsGroup#settableTitle} if it's set, or stored in
     * {@link BluffsGroup#settableTitleTitle} if it isn't.
     *
     * @param {String} title
     *        Title to set.
     */

  }, {
    key: "setTitle",
    value: function setTitle(title) {
      var settableTitle = this.settableTitle;

      if (settableTitle) {
        settableTitle.setTitle(title);
      } else {
        /**
         * The title that should be set when
         * {@link BluffsGroup#settableTitle} is created. This property only
         * exists if {@link BluffsGroup#setTitle} is called before
         * {@link BluffsGroup#settableTitle} is created and it's removed as
         * soon as it can be.
         * @type {String}
         */
        this.settableTitleTitle = title;
      }
    }
  }], [{
    key: "READY",
    get:
    /**
     * The name of an event that's triggered when the group has been created.
     */
    function get() {
      return "bluff-group-ready";
    }
    /**
     * Sets the Template that will draw the Demon Bluff group.
     *
     * @param {Template} template
     */

  }, {
    key: "setTemplate",
    value: function setTemplate(template) {
      /**
       * The Template that will draw the Demon Bluff group.
       * @type {Template}
       */
      this.template = template;
    }
  }]);

  return BluffsGroup;
}();



/***/ }),

/***/ "./assets/js/classes/BluffsGroups.js":
/*!*******************************************!*\
  !*** ./assets/js/classes/BluffsGroups.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BluffsGroups)
/* harmony export */ });
/* harmony import */ var _BluffsGroup__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./BluffsGroup */ "./assets/js/classes/BluffsGroup.js");
/* harmony import */ var _CharacterToken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CharacterToken */ "./assets/js/classes/CharacterToken.js");
/* harmony import */ var _utils_objects__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/objects */ "./assets/js/utils/objects.js");
function _construct(Parent, args, Class) { if (_isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }




/**
 * The top-down controller for all groups of demon bluffs.
 */

var BluffsGroups = /*#__PURE__*/function () {
  /**
   * Sets up the class.
   *
   * @param {HTMLElement} container
   *        The element that contains all Demon Bluffs groups.
   */
  function BluffsGroups(container) {
    var _this = this;

    _classCallCheck(this, BluffsGroups);

    /**
     * A collection of all the groups of Demon Bluffs.
     * @type {BluffsGroup[]}
     */
    this.groups = [];
    /**
     * The element that contains all Demon Bluffs elements.
     * @type {HTMLElement}
     */

    this.container = container;
    /**
     * The index of the group within {@link BluffsGroups#groups} of the
     * currently visible group.
     * @type {Number}
     */

    this.visibleGroupIndex = 0;
    /**
     * A flag that allows updates to be announced - if this setting is
     * `true` then updates are announced, if `false` then they're not.
     * @type {Boolean}
     */

    this.announceUpdates = true;
    /**
     * An observer that checks to see when a group of Demon Bluffs becomes
     * visible and triggers an event, which we can listen to in order to set
     * {@link BluffsGroups#visibleGroupIndex}.
     * @type {IntersectionObserver}
     */

    this.observer = new IntersectionObserver(function (entries) {
      entries.forEach(function (_ref) {
        var target = _ref.target,
            intersectionRatio = _ref.intersectionRatio;

        if (intersectionRatio >= 0.9) {
          target.dispatchEvent(new CustomEvent(_this.constructor.VISIBLE, {
            bubbles: true,
            cancelable: false
          }));
        }
      });
    }, {
      root: container,
      threshold: [0.9, 0.95, 1]
    });
  }
  /**
   * A function that creates an empty group. This starts as an empty function
   * to keep the various classes loosely coupled.
   */


  _createClass(BluffsGroups, [{
    key: "createEmptyGroup",
    value: function createEmptyGroup() {
      return;
    }
    /**
     * Creates an empty group and passes it to {@link BluffsGroups#add}.
     */

  }, {
    key: "addEmpty",
    value: function addEmpty() {
      this.add(this.createEmptyGroup());
    }
    /**
     * Adds a group to {@link BluffsGroups#groups} and sets it up correctly. If
     * the group already exists, no action is taken. Since a change has taken
     * place, the update is announced using
     * {@link BluffsGroups#maybeAnnounceUpdate}.
     *
     * @param  {BluffsGroup} group
     *         The group to add.
     * @throws {Error}
     *         `group` cannot be `null` or `undefined` (which it would be if
     *         {@link BluffsGroups#createEmptyGroup} hasn't been replaced).
     */

  }, {
    key: "add",
    value: function add(group) {
      if (!group) {
        throw new Error("Cannot add a non-existent group");
      }

      if (this.has(group)) {
        return;
      }

      group.setIndex(this.groups.push(group) - 1);
      this.container.append(group.draw());
      group.setElement(this.container.querySelector(group.getSelector()));
      this.observer.observe(group.getElement());
      group.ready();
      this.maybeAnnounceUpdate();
    }
    /**
     * Checks to see if the given group is within {@link BluffsGroups#groups}.
     *
     * @param  {BluffsGroup} group
     *         Group to check for.
     * @return {Boolean}
     *         `true` if the group already exists, `false` otherwise.
     */

  }, {
    key: "has",
    value: function has(group) {
      return this.groups.includes(group);
    }
    /**
     * Gets the index of the given group from within
     * {@link BluffsGroups#groups}.
     *
     * @param  {BluffsGroup} group
     *         Group whose index should be returned.
     * @return {Number}
     *         The index of the group or -1 if the group cannot be found.
     */

  }, {
    key: "getIndex",
    value: function getIndex(group) {
      return this.groups.indexOf(group);
    }
    /**
     * Removes the given group from {@link BluffsGroups#groups}. This function
     * works by passing the results of {@link BluffsGroups#getIndex} to
     * {@link BluffsGroups#removeByIndex}.
     *
     * @param {BluffGroup} group
     *        Group to remove.
     */

  }, {
    key: "remove",
    value: function remove(group) {
      this.removeByIndex(this.getIndex(group));
    }
    /**
     * Removes the group from {@link BluffsGroups#groups} that's at the given
     * index. Some validation is done to make sure that the given index is a
     * number between 0 and the number of groups - no action is taken if the
     * index fails these tests.
     *
     * @param {Number} index
     *        Index of the group to remove.
     */

  }, {
    key: "removeByIndex",
    value: function removeByIndex(index) {
      var groups = this.groups;
      index = Number(index);

      if (index < 0 || index >= groups.length) {
        return;
      }

      var group = groups[index];
      this.observer.unobserve(group.getElement());
      group.remove();
      groups.splice(index, 1);
      this.updateIndicies();
      this.maybeAnnounceUpdate();
    }
    /**
     * Loops over all the groups within {@link BluffsGroups#groups} and removes
     * them all. It does this by passing each index to
     * {@link BluffsGroups#removeByIndex}.
     */

  }, {
    key: "removeAll",
    value: function removeAll() {
      var groups = this.groups;
      var length = groups.length;

      while (length) {
        length -= 1;
        this.removeByIndex(length);
      }
    }
    /**
     * Updates all the indicies of the groups within {@link BluffsGroups#groups}
     * so that they match the array itself.
     */

  }, {
    key: "updateIndicies",
    value: function updateIndicies() {
      this.groups.forEach(function (group, index) {
        return group.setIndex(index);
      });
    }
    /**
     * Exposes {@link BluffsGroups#visibleGroupIndex}.
     *
     * @returns {Number}
     */

  }, {
    key: "getVisibleGroupIndex",
    value: function getVisibleGroupIndex() {
      return this.visibleGroupIndex;
    }
    /**
     * Sets {@link BluffsGroups#visibleGroupIndex}. Some validation is done to
     * make sure that the given index is a number between 0 and the number of
     * groups - an error is thrown if this isn't the case. Because this has
     * updated the data, the update is announced using
     * {@link BluffsGroups#maybeAnnounceUpdate}.
     *
     * @param  {Number} index
     *         Index of the visible group.
     * @throws {RangeError}
     *         `index` must be a number between 0 and the number of groups.
     */

  }, {
    key: "setVisibleGroupIndex",
    value: function setVisibleGroupIndex(index) {
      index = Number(index);

      if (index < 0 || index > this.groups.length) {
        throw new RangeError("Visible index ".concat(index, " is out of range"));
      }

      this.visibleGroupIndex = index;
      this.maybeAnnounceUpdate();
    }
    /**
     * Gets the visible group - it does this by getting the item in
     * {@link BluffsGroups#groups} at {@link BluffsGroups#visibleGroupIndex}. If
     * a group can't be found at that location, an error is thrown.
     *
     * @return {BluffsGroup}
     *         The currently visible group of Demon Bluffs.
     * @throws {Error}
     *         A visible group must exist.
     */

  }, {
    key: "getVisibleGroup",
    value: function getVisibleGroup() {
      var group = this.groups[this.visibleGroupIndex];

      if (!group) {
        throw new Error("Cannot find group at index ".concat(this.visibleGroupIndex));
      }

      return group;
    }
    /**
     * The inner index is the index of the Demon Bluff within the currently
     * visible group of Demon Bluffs. This function sets it.
     *
     * @param {Number} index
     *        Inner index to set.
     */

  }, {
    key: "setInnerIndex",
    value: function setInnerIndex(index) {
      this.getVisibleGroup().setSetIndex(index);
    }
    /**
     * The inner index is the index of the Demon Bluff within the currently
     * visible group of Demon Bluffs. This function gets it.
     *
     * @return {Number}
     *         Inner index.
     */

  }, {
    key: "getInnerIndex",
    value: function getInnerIndex() {
      return this.getVisibleGroup().getSetIndex();
    }
    /**
     * Sets the character for the Demon Bluff of the currently visible group of
     * bluffs. Because a change will have happened, the update is announced
     * using {@link BluffsGroups#maybeAnnounceUpdate}.
     *
     * @param {CharacterToken} character
     *        The character to set.
     */

  }, {
    key: "setCharacter",
    value: function setCharacter(character) {
      this.getVisibleGroup().setCharacter(character);
      this.maybeAnnounceUpdate();
    }
    /**
     * Redraws the currently visible group of demon bluffs, updating the buttons
     * to reflect the current state.
     */

  }, {
    key: "redraw",
    value: function redraw() {
      this.getVisibleGroup().redrawButton();
    }
    /**
     * Gets an object reflecting the current state of the demon bluffs. It does
     * this by calling {@link BluffsGroup#serialise} on all groups within
     * {@link BluffsGroups#groups}.
     *
     * @returns {Object}
     *          Serialised state of the Demon Bluffs.
     */

  }, {
    key: "serialise",
    value: function serialise() {
      return {
        index: this.visibleGroupIndex,
        groups: this.groups.map(function (group) {
          return group.serialise();
        })
      };
    }
    /**
     * Disables the update announcements.
     */

  }, {
    key: "disableAnnouncements",
    value: function disableAnnouncements() {
      this.announceUpdates = false;
    }
    /**
     * Enables the update announcements.
     */

  }, {
    key: "enableAnnouncements",
    value: function enableAnnouncements() {
      this.announceUpdates = true;
    }
    /**
     * Checks {@link BluffsGroups.announceUpdates} to see if updates should be
     * announced, doing nothing if they shouldn't.
     */

  }, {
    key: "maybeAnnounceUpdate",
    value: function maybeAnnounceUpdate() {
      if (!this.announceUpdates) {
        return;
      }

      this.announceUpdate();
    }
    /**
     * A function that executes when an update should be announced. This is done
     * to keep the classes loosely coupled.
     */

  }, {
    key: "announceUpdate",
    value: function announceUpdate() {
      return;
    }
    /**
     * Takes the character ID and converts it into a {@link CharacterToken}.
     * This function starts as an empty function so that it can be replaced and
     * still keep the classes loosely coupled.
     *
     * @param  {String} id
     *         The ID of the character whose token should be returned.
     * @return {CharacterToken}
     *         The character token instance for the given ID.
     */

  }, {
    key: "convertId",
    value: function convertId(id) {
      return;
    }
    /**
     * A function that executes when the class is ready, creating the groups
     * defined in {@link BluffsGroups.readyData}.
     */

  }, {
    key: "ready",
    value: function ready(_ref2) {
      var _this2 = this;

      var index = _ref2.index,
          groups = _ref2.groups;
      this.removeAll();
      groups.forEach(function (_ref3) {
        var name = _ref3.name,
            set = _ref3.set;

        var group = _this2.createEmptyGroup();

        if (!group) {
          throw new Error("Cannot create an empty group");
        }

        group.setTitle(name);
        set.forEach(function (id, index) {
          group.setCharacter(_this2.convertId(id), index);
        });

        _this2.add(group);
      });
      this.setVisibleGroupIndex(index);
      this.getVisibleGroup().display();
    }
  }], [{
    key: "VISIBLE",
    get:
    /**
     * The name of an event that's triggered on each group when they become
     * visible. We use this to work out {@link BluffsGroups#visibleGroupIndex}.
     * @type {String}
     */
    function get() {
      return "bluff-group-visible";
    }
    /**
     * Returns a copy of the empty data.
     *
     * @return {Object}
     *         A copy of the empty data.
     */

  }, {
    key: "getEmptyData",
    value: function getEmptyData() {
      return (0,_utils_objects__WEBPACK_IMPORTED_MODULE_2__.deepClone)({
        index: 0,
        groups: [{
          set: []
        }]
      });
    }
    /**
     * Exposes {@link BluffsGroups.instance}.
     *
     * @return {BluffsGroups}
     *         The singleton instance.
     */

  }, {
    key: "get",
    value: function get() {
      return this.instance;
    }
    /**
     * Helper function for creating a new instance and storing it in
     * {@link BluffsGroups.instance}.
     *
     * @param  {HTMLElement} container
     *         The element that contains all Demon Bluffs groups.
     * @return {BluffsGroups}
     *         Instance.
     */

  }, {
    key: "create",
    value: function create() {
      var bluffs = this.instance;

      if (!bluffs) {
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }

        bluffs = _construct(this, args);
        /**
         * An instance that was created using {@link BluffsGroups.create}
         * and can be accessed using {@link BluffsGroups.get}.
         * @type {BluffsGroups}
         */

        this.instance = bluffs;
      }

      return bluffs;
    }
  }]);

  return BluffsGroups;
}();



/***/ }),

/***/ "./assets/js/classes/CharacterToken.js":
/*!*********************************************!*\
  !*** ./assets/js/classes/CharacterToken.js ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ CharacterToken)
/* harmony export */ });
/* harmony import */ var _Token_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Token.js */ "./assets/js/classes/Token.js");
/* harmony import */ var _Template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _Jinx_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Jinx.js */ "./assets/js/classes/Jinx.js");
/* harmony import */ var _ReminderToken_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./ReminderToken.js */ "./assets/js/classes/ReminderToken.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

function _get() { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }






var emptyProperty = Symbol("empty");
var customProperty = Symbol("custom");
/**
 * A version of {@link Token} that handles character information.
 */

var CharacterToken = /*#__PURE__*/function (_Token) {
  _inherits(CharacterToken, _Token);

  var _super = _createSuper(CharacterToken);

  function CharacterToken() {
    _classCallCheck(this, CharacterToken);

    return _super.apply(this, arguments);
  }

  _createClass(CharacterToken, [{
    key: "processData",
    value:
    /**
     * @inheritDoc
     */
    function processData(data) {
      // Provide some default values so that .get() methods don't worry about
      // missing data and instead worry about typos.
      return _objectSpread({
        id: "",
        name: "",
        edition: "",
        team: "",
        firstNight: 0,
        firstNightReminder: "",
        otherNight: 0,
        otherNightReminder: "",
        reminders: [],
        setup: false,
        ability: "",
        image: "",
        special: null
      }, data);
    }
    /**
     * @inheritDoc
     */

  }, {
    key: "setup",
    value: function setup() {
      /**
       * A flag showing whether or not the character is dead.
       * @type {Boolean}
       */
      this.isDead = false;
      /**
       * A flag showing whether or not the character is upside down,
       * indicating that the character is the opposite alignment (or on the
       * evil team if it's a traveller).
       * @type {Boolean}
       */

      this.isUpsideDown = false;
      /**
       * A flag showing whether or not the character has a ghost vote.
       * @type {Boolean}
       */

      this.hasGhostVote = true;
      /**
       * A collection of all jinxes that may affect this character.
       * @type {Array.<Jinx>}
       */

      this.jinxes = [];
      /**
       * Collection of all reminders that this character uses.
       * @type {Array.<ReminderToken>}
       */

      this.reminders = [];
    }
    /**
     * @inheritDoc
     */

  }, {
    key: "clone",
    value: function clone() {
      var clone = _get(_getPrototypeOf(CharacterToken.prototype), "clone", this).call(this);

      this.getReminders().forEach(function (reminder) {
        clone.addReminder(reminder.clone());
      });
      this.getJinxes().forEach(function (jinx) {
        clone.addJinx(jinx);
      });
      return clone;
    }
    /**
     * Adds a reminder for this character.
     *
     * @param {ReminderToken} reminder
     *        Instance of {@link ReminderToken} for the reminder.
     */

  }, {
    key: "addReminder",
    value: function addReminder(reminder) {
      this.reminders.push(reminder);
    }
    /**
     * Gets the reminders that this character has. The returned array may be
     * empty if the character doesn't have any reminders.
     *
     * @return {Array.<ReminderToken>}
     *         All the reminders for this character.
     */

  }, {
    key: "getReminders",
    value: function getReminders() {
      return this.reminders;
    }
    /**
     * Toggles the dead state for this character. The state can be forced by
     * passing a boolean to this method.
     *
     * @param  {Boolean} [state]
     *         Optional state to set. If ommitted, the state is toggled.
     * @return {Boolean}
     *         The new state.
     */

  }, {
    key: "toggleDead",
    value: function toggleDead(state) {
      if (state === undefined) {
        state = !this.isDead;
      }

      this.isDead = state;

      if (state) {
        this.toggleGhostVote(true);
      }

      return this.getIsDead();
    }
    /**
     * Exposes {@link CharacterToken#isDead}.
     *
     * @return {Boolean}
     *         true if the character is dead, false otherwise.
     */

  }, {
    key: "getIsDead",
    value: function getIsDead() {
      return Boolean(this.isDead);
    }
    /**
     * Toggles the upside-down state for this character. The state can be forced
     * by passing a boolean to this method.
     *
     * @param  {Boolean} [state]
     *         Optional state to set. If ommitted, the state is toggled.
     * @return {Boolean}
     *         The new state.
     */

  }, {
    key: "rotate",
    value: function rotate(state) {
      if (state === undefined) {
        state = !this.isUpsideDown;
      }

      this.isUpsideDown = state;
      return this.getIsUpsideDown();
    }
    /**
     * Exposes {@link CharacterToken#isUpsideDown}.
     *
     * @return {Boolean}
     *         true if the character is upside-down, false otherwise.
     */

  }, {
    key: "getIsUpsideDown",
    value: function getIsUpsideDown() {
      return Boolean(this.isUpsideDown);
    }
    /**
     * Toggles whether or not the player has a ghost vote. The state can be
     * forced by passing a boolean to this method.
     *
     * @param  {Boolean} [state]
     *         Optional state to set. If ommitted, the state is toggled.
     * @return {Boolean}
     *         The new state.
     */

  }, {
    key: "toggleGhostVote",
    value: function toggleGhostVote(state) {
      if (state === undefined) {
        state = !this.hasGhostVote;
      }

      this.hasGhostVote = state;
      return this.getHasGhostVote();
    }
    /**
     * Exposes {@link CharacterToken#hasGhostVote}.
     *
     * @return {Boolean}
     *         true if the character has a ghost vote, false otherwise.
     */

  }, {
    key: "getHasGhostVote",
    value: function getHasGhostVote() {
      return Boolean(this.hasGhostVote);
    }
    /**
     * Checks to see if the given character matches this one. It may not be the
     * same object, it may be a clone.
     *
     * @param  {CharacterToken} character
     *         Character to check.
     * @return {Boolean}
     *         true if the character matches, false if it doesn't.
     */

  }, {
    key: "matches",
    value: function matches(character) {
      return character === this || character.getId() === this.getId();
    }
    /**
     * Adds a jinx top {@link CharacterToken#jinxes}.
     *
     * @param {Jinx} jinx
     *        Jinx to add.
     */

  }, {
    key: "addJinx",
    value: function addJinx(jinx) {
      jinx.setTarget(this);
      this.jinxes.push(jinx);
    }
    /**
     * Sets any jinxes that match any of the given characters "ready".
     *
     * @param {Array.<CharacterToken>} characters
     *        Characters that may be tricks in a jinx.
     */

  }, {
    key: "readyAllJinxes",
    value: function readyAllJinxes(characters) {
      var _this = this;

      characters.forEach(function (character) {
        _this.toggleJinxReady(character, true);
      });
    }
    /**
     * Sets all jinxes in {@link CharacterToken#jinxes} to unready.
     */

  }, {
    key: "unreadyAllJinxes",
    value: function unreadyAllJinxes() {
      this.jinxes.forEach(function (jinx) {
        return jinx.toggleReady(false);
      });
    }
    /**
     * Toggles the ready state of a jinx. Optionally the state can be defined.
     *
     * @param {CharacterToken} character
     *        Character that has a jinx with this character.
     * @param {Boolean} [state]
     *        Optional state to force. If ommitted, the state is toggled.
     */

  }, {
    key: "toggleJinxReady",
    value: function toggleJinxReady(character, state) {
      this.jinxes.forEach(function (jinx) {
        if (jinx.matches(character)) {
          jinx.toggleReady(state);
        }
      });
    }
    /**
     * Toggles the active state of a jinx. Optionally the state can be defined.
     *
     * @param {CharacterToken} trick
     *        Character that has a jinx with this character.
     * @param {Boolean} [state]
     *        Optional state to force. If ommitted, the state is toggled.
     */

  }, {
    key: "toggleJinxTrick",
    value: function toggleJinxTrick(trick, state) {
      this.jinxes.forEach(function (jinx) {
        if (jinx.matches(trick)) {
          jinx.toggleTrick(state);
        }
      });
    }
    /**
     * Sets the target state for all the jinxes in
     * {@link CharacterToken#jinxes}.
     *
     * @param {Boolean} [state]
     *        Optional state to set. If ommited, the state of each of the jinxes
     *        will be toggled.
     */

  }, {
    key: "toggleJinxTarget",
    value: function toggleJinxTarget(state) {
      this.jinxes.forEach(function (jinx) {
        return jinx.toggleTarget(state);
      });
    }
    /**
     * Exposes {@link CharacterToken#jinxes}.
     *
     * @return {Array.<Jinx>}
     *         Collection of all jinxes.
     */

  }, {
    key: "getJinxes",
    value: function getJinxes() {
      return this.jinxes;
    }
    /**
     * Exposes all the ready jinxes.
     *
     * @return {Array.<Jinx>}
     *         Collection of all ready jinxes.
     */

  }, {
    key: "getReadyJinxes",
    value: function getReadyJinxes() {
      return this.jinxes.filter(function (jinx) {
        return jinx.isReady();
      });
    }
    /**
     * Exposes all the active jinxes.
     *
     * @return {Array.<Jinx>}
     *         Collection of all active jinxes.
     */

  }, {
    key: "getActiveJinxes",
    value: function getActiveJinxes() {
      return this.jinxes.filter(function (jinx) {
        return jinx.isActive();
      });
    }
    /**
     * Checks to see if this is the empty character token.
     *
     * @return {Boolean}
     *         true if this is the empty character token, false otherwise.
     */

  }, {
    key: "isEmpty",
    value: function isEmpty() {
      return Boolean(this.data[emptyProperty]);
    }
    /**
     * Checks to see if this is a custom character token.
     *
     * @return {Boolean}
     *         true if this is a custom character token, false otherwise.
     */

  }, {
    key: "isCustom",
    value: function isCustom() {
      return Boolean(this.data[customProperty]);
    }
    /**
     * Gets the special data for this character, if it exists.
     *
     * @param  {String} type
     *         The special type.
     * @param  {String} name
     *         The special name.
     * @return {Object|undefined}
     *         Either the special object or undefined if the special cannot be
     *         found.
     */

  }, {
    key: "getSpecialData",
    value: function getSpecialData(type, name) {
      var special = this.data.special;
      var isArray = Array.isArray(special);

      if (!special || isArray && !special.length) {
        return;
      }

      return special.find(function (data) {
        return data.type === type && data.name === name;
      });
    }
    /**
     * Checks to see if the character has any special data matching the given
     * type and name.
     *
     * @param  {String} type
     *         The special type.
     * @param  {String} name
     *         The special name.
     * @return {Boolean}
     *         true if the special exists, false if it doesn't.
     */

  }, {
    key: "hasSpecialData",
    value: function hasSpecialData(type, name) {
      return Boolean(this.getSpecialData(type, name));
    }
    /**
     * Draws the token that can be shown on the grimoire.
     *
     * @return {DocumentFragment}
     *         Populated token.
     */

  }, {
    key: "drawToken",
    value: function drawToken() {
      var _this$data = this.data,
          name = _this$data.name,
          image = _this$data.image,
          _this$data$reminders = _this$data.reminders,
          reminders = _this$data$reminders === void 0 ? [] : _this$data$reminders,
          _this$data$remindersG = _this$data.remindersGlobal,
          remindersGlobal = _this$data$remindersG === void 0 ? [] : _this$data$remindersG,
          firstNight = _this$data.firstNight,
          otherNight = _this$data.otherNight,
          setup = _this$data.setup;
      return this.constructor.templates.token.draw({
        ".js--character--leaves": function jsCharacterLeaves(element) {
          element.classList.toggle("character--setup", setup);
          element.classList.toggle("character--left-1", firstNight);
          element.classList.toggle("character--right-1", otherNight);
          var top = reminders.length + remindersGlobal.length;
          element.classList.toggle("character--top-".concat(top), top);
        },
        ".js--character--image": function jsCharacterImage(element) {
          element.src = image;
        },
        ".js--character--name": function jsCharacterName(element) {
          element.textContent = name;
        }
      });
    }
    /**
     * Draws the character token list item.
     *
     * @return {DocumentFragment}
     *         Populated character token list item.
     */

  }, {
    key: "drawList",
    value: function drawList() {
      var _this2 = this;

      var id = this.data.id;
      return this.constructor.templates.list.draw({
        ".js--character-list--button": function jsCharacterListButton(element) {
          element.dataset.tokenId = id;
        },
        ".js--character-list--token": function jsCharacterListToken(element) {
          element.append(_this2.drawToken());
        }
      });
    }
    /**
     * Draws the character's icon, name, and ability for the "Select Characters"
     * dialog box.
     *
     * @return {DocumentFragment}
     *         Populated select entry.
     */

  }, {
    key: "drawSelect",
    value: function drawSelect() {
      var _this$data2 = this.data,
          id = _this$data2.id,
          name = _this$data2.name,
          image = _this$data2.image,
          ability = _this$data2.ability,
          setup = _this$data2.setup;
      return this.constructor.templates.select.draw({
        ".js--character-select--image": function jsCharacterSelectImage(element) {
          element.src = image;
        },
        ".js--character-select--name": function jsCharacterSelectName(element) {
          element.textContent = name;
          element.classList.toggle("is-setup", setup);
        },
        ".js--character-select--ability": function jsCharacterSelectAbility(element) {
          element.textContent = ability;
        },
        ".js--character-select--input": function jsCharacterSelectInput(element) {
          element.value = id;
          element.closest("label").htmlFor = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.identify)(element);
        },
        ".js--character-select--count": function jsCharacterSelectCount(element) {
          element.name += id;
          element.dataset["for"] = id;
        }
      });
    }
    /**
     * Draws the entry in the Night Order lists for this token.
     *
     * @param  {Boolean} [isFirst=true]
     *         A flag for whether the entry should be for the first night (true)
     *         or other nights (false). Defaults to true.
     * @return {DocumentFragment}
     *         Populated night order entry.
     */

  }, {
    key: "drawNightOrder",
    value: function drawNightOrder() {
      var isFirst = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;
      var _this$data3 = this.data,
          id = _this$data3.id,
          name = _this$data3.name,
          image = _this$data3.image,
          firstNight = _this$data3.firstNight,
          firstNightReminder = _this$data3.firstNightReminder,
          otherNight = _this$data3.otherNight,
          otherNightReminder = _this$data3.otherNightReminder;
      return this.constructor.templates.nightOrder.draw({
        ".js--night-info--wrapper": function jsNightInfoWrapper(element) {
          element.dataset.id = id;
          element.dataset.order = isFirst ? firstNight : otherNight;
        },
        ".js--night-info--icon": function jsNightInfoIcon(element) {
          element.src = image;
        },
        ".js--night-info--role": function jsNightInfoRole(element) {
          element.textContent = name;
        },
        ".js--night-info--ability": function jsNightInfoAbility(element) {
          element.textContent = isFirst ? firstNightReminder : otherNightReminder;
        }
      });
    }
  }], [{
    key: "empty",
    get:
    /**
     * A property that we use to work out if this token is the empty character.
     * @type {Symbol}
     * @constant
     */
    function get() {
      return emptyProperty;
    }
    /**
     * A property that we use to work out if this token is a custom character.
     * @type {Symbol}
     * @constant
     */

  }, {
    key: "custom",
    get: function get() {
      return customProperty;
    }
    /**
     * Sets the templates that will be access when drawing views.
     *
     * @param {Object} templates
     *        A map of keys to {@link Template} instances.
     */

  }, {
    key: "setTemplates",
    value: function setTemplates(templates) {
      /**
       * The templates that all instances will access.
       * @type {Object}
       */
      this.templates = templates;
    }
  }]);

  return CharacterToken;
}(_Token_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./assets/js/classes/Draggable.js":
/*!****************************************!*\
  !*** ./assets/js/classes/Draggable.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Draggable)
/* harmony export */ });
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/**
 * A class that allows elements to be draggable.
 */
var Draggable = /*#__PURE__*/function () {
  /**
   * Default settings for {@link Draggable#settings}.
   * @type {Object}
   */

  /**
   * @param {Element} container
   *        The container in which all the draggable elements will be.
   * @param {Object} [settings]
   *        Optional settings for the class instance.
   */
  function Draggable(container, settings) {
    _classCallCheck(this, Draggable);

    /**
     * Container in which all the draggable elements will be. Elements can
     * only be dropped within this container.
     * @type {Element}
     */
    this.container = container;
    /**
     * Settings for the instance.
     * @type {Object}
     */

    this.settings = Object.assign({}, Draggable.defaults, settings || {});
    /**
     * A collection of all the draggable children within
     * {@link Draggable#container}.
     * @type {Set.<Element>}
     */

    this.children = new Set();
    /**
     * The child currently be dragged, if there is one.
     * @type {Element|null}
     */

    this.dragged = null;
    this.createHandlers();
    this.addEventListeners();
  }
  /**
   * Creates the {@link Draggable#onChildDragStart} and
   * {@link Draggable#onChildDragEnd} methods.
   */


  _createClass(Draggable, [{
    key: "createHandlers",
    value: function createHandlers() {
      var _this = this;

      var _this$settings = this.settings,
          dragClass = _this$settings.dragClass,
          dragSelector = _this$settings.dragSelector;
      /**
       * Handles the user starting to drag a child element. This is a
       * generated method, rather than being part of the prototype, so that it
       * can be added/removed by reference in {@link Draggable#addChild} and
       * {@link Draggable#removeChild}.
       *
       * @param {Event} event
       *        Either a "dragstart" or a "touchstart" event.
       */

      this.onChildDragStart = function (event) {
        var target = event.target,
            dataTransfer = event.dataTransfer; // When using touch events, the target can be a [draggable] child.

        var child = target.closest(dragSelector);
        child.classList.add(dragClass); // dataTransfer property only exists with "drop" events.

        if (dataTransfer) {
          dataTransfer.effectAllowed = "move";
          dataTransfer.setData("text/plain", null); // Needed for Firefox.
        }

        _this.dragged = child;
      };
      /**
       * Handles the user no longer dragging a child element. This is a
       * generated method, rather than being part of the prototype, so that it
       * can be added/removed by reference in {@link Draggable#addChild} and
       * {@link Draggable#removeChild}.
       *
       * @param {Event} event
       *        Either a "dragend" or a "touchend" event.
       */


      this.onChildDragEnd = function (event) {
        var _event$target$closest;

        (_event$target$closest = event.target.closest(dragSelector)) === null || _event$target$closest === void 0 ? void 0 : _event$target$closest.classList.remove(dragClass);
      };
    }
    /**
     * Identifies the within the given collection of children that is closest to
     * the given X and Y co-ordinates.
     *
     * @param  {Element[]} children
     *         Collection of elements to check.
     * @param  {Number} x
     *         X co-ordinate.
     * @param  {Number} y
     *         Y co-ordinate.
     * @return {Element|undefined}
     *         Either the closest element, or undefined if the children
     *         parameter is an empty list.
     */

  }, {
    key: "getClosestElement",
    value: function getClosestElement(children, x, y) {
      return _toConsumableArray(children).reduce(function (closest, child) {
        var box = child.getBoundingClientRect();
        var xDistance = x - box.left - box.width / 2;
        var yDistance = y - box.top - box.height / 2;
        var offset = Math.sqrt(Math.pow(xDistance, 2) + Math.pow(yDistance, 2));

        if (offset < closest.offset) {
          return {
            offset: offset,
            element: child
          };
        }

        return closest;
      }, {
        offset: Number.POSITIVE_INFINITY
      }).element;
    }
    /**
     * Checks to see if the given target element is before or after the source
     * element in the DOM list.
     *
     * @param  {Element} target
     *         Target element to check.
     * @param  {Element} source
     *         Source element to check against.
     * @return {Boolean}
     *         true if the target is before the source, false otherwise.
     * @see    https://stackoverflow.com/a/28962290/557019
     */

  }, {
    key: "isBefore",
    value: function isBefore(target, source) {
      if (target.parentNode === source.parentNode) {
        for (var current = target.previousSibling; current && current.nodeType !== Node.DOCUMENT_NODE; current = current.previousSibling) {
          if (current === source) {
            return true;
          }
        }
      }

      return false;
    }
    /**
     * Handles the moving of the element currently stored in
     * {@link Draggable#dragged} - if there is no element stored there then this
     * function ends early.
     *
     * @param {Event} event
     *        Either a "dragover" or a "touchmove" event.
     */

  }, {
    key: "move",
    value: function move(event) {
      var dataTransfer = event.dataTransfer,
          targetTouches = event.targetTouches;
      var pointer = targetTouches ? targetTouches[0] : event;
      var dragged = this.dragged,
          children = this.children,
          container = this.container;

      if (!pointer || !dragged) {
        return;
      }

      event.preventDefault(); // dataTransfer is only a property with "drop" events.

      if (dataTransfer) {
        dataTransfer.dropEffect = "move";
      }

      var closest = this.getClosestElement(children, pointer.clientX, pointer.clientY);

      if (!closest) {
        return;
      }

      container.insertBefore(dragged, this.isBefore(dragged, closest) ? closest : closest.nextElementSibling);
    }
    /**
     * Adds event listeners to {@link Draggable#container}.
     */

  }, {
    key: "addEventListeners",
    value: function addEventListeners() {
      var _this2 = this;

      var container = this.container;
      container.addEventListener("dragover", function (e) {
        return _this2.move(e);
      });
      container.addEventListener("touchmove", function (e) {
        return _this2.move(e);
      });
      container.addEventListener("drop", function (e) {
        return e.preventDefault();
      });
    }
    /**
     * Handles a child element being added to {@link Draggable#container}.
     *
     * @param {Element} child
     *        The child element that has been added.
     */

  }, {
    key: "addChild",
    value: function addChild(child) {
      child.classList.add(this.settings.childClass);
      child.setAttribute("draggable", true);
      child.addEventListener("dragstart", this.onChildDragStart);
      child.addEventListener("dragend", this.onChildDragEnd);
      child.addEventListener("touchstart", this.onChildDragStart);
      child.addEventListener("touchend", this.onChildDragEnd);
      this.children.add(child);
    }
    /**
     * Handles a child element being removed from {@link Draggable#container}.
     *
     * @param {Element} child
     *        The child element that has been removed.
     */

  }, {
    key: "removeChild",
    value: function removeChild(child) {
      var children = this.children;

      if (!children.has(child)) {
        return;
      }

      child.classList.remove(this.settings.childClass);
      child.removeAttribute("draggable");
      child.removeEventListener("dragstart", this.onChildDragStart);
      child.removeEventListener("dragend", this.onChildDragEnd);
      child.removeEventListener("touchstart", this.onChildDragStart);
      child.removeEventListener("touchend", this.onChildDragEnd);
      children["delete"](child);
    }
    /**
     * A helper function for children stored in {@link Draggable#children} from
     * {@link Draggable#container}.
     */

  }, {
    key: "removeAllChildren",
    value: function removeAllChildren() {
      var _this3 = this;

      _toConsumableArray(this.children).forEach(function (child) {
        return _this3.removeChild(child);
      });
    }
  }]);

  return Draggable;
}();

_defineProperty(Draggable, "defaults", {
  childClass: "is-draggable",
  dragClass: "is-dragging",
  dragSelector: "[draggable]"
});



/***/ }),

/***/ "./assets/js/classes/InfoToken.js":
/*!****************************************!*\
  !*** ./assets/js/classes/InfoToken.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ InfoToken)
/* harmony export */ });
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");
/* harmony import */ var _utils_strings_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/strings.js */ "./assets/js/utils/strings.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }



/**
 * Handles info tokens.
 */

var InfoToken = /*#__PURE__*/function () {
  /**
   * @param {Object} data
   *        Data for the info token.
   */
  function InfoToken(data) {
    _classCallCheck(this, InfoToken);

    /**
     * Interpretted data - see {@link InfoToken.interpret}.
     * @type {Object}
     */
    this.data = this.constructor.interpret(data);
  }
  /**
   * A helper function for drawing all the elements.
   */


  _createClass(InfoToken, [{
    key: "draw",
    value: function draw() {
      this.drawTrigger();
      this.drawDialog();
    }
    /**
     * Draws the button and adds it to the correct holder.
     */

  }, {
    key: "drawTrigger",
    value: function drawTrigger() {
      var _this$data = this.data,
          text = _this$data.text,
          id = _this$data.id,
          colour = _this$data.colour,
          custom = _this$data.custom;
      var _this$constructor = this.constructor,
          holders = _this$constructor.holders,
          templates = _this$constructor.templates;
      var holder = holders[custom ? "custom" : "button"];
      var trigger = templates.button.draw({
        ".js--info-token--button": function jsInfoTokenButton(element) {
          element.textContent = text;
          element.style.setProperty("--bg-colour", colour);
          element.dataset.dialog = "#".concat(id);
        }
      });
      holder.append(trigger);
      /**
       * The wrapper list item that holds the button that triggers
       * {@link InfoToken#dialog}.
       * @type {Element}
       */

      this.trigger = holder.lastElementChild;
    }
    /**
     * Draws the dialog and adds it to the correct holder.
     */

  }, {
    key: "drawDialog",
    value: function drawDialog() {
      var _this$data2 = this.data,
          markup = _this$data2.markup,
          id = _this$data2.id,
          colour = _this$data2.colour,
          custom = _this$data2.custom;
      var _this$constructor2 = this.constructor,
          holders = _this$constructor2.holders,
          templates = _this$constructor2.templates;
      var holder = holders.dialog;
      var dialog = templates.dialog.draw({
        ".js--info-token--dialog": function jsInfoTokenDialog(element) {
          element.id = id;
          element.style.setProperty("--colour", colour);
        },
        ".js--info-token--dialog-text": function jsInfoTokenDialogText(element) {
          element.innerHTML = markup;
        },
        ".js--info-token--actions": function jsInfoTokenActions(element) {
          element.hidden = !custom;
        }
      });
      holder.append(dialog);
      /**
       * The dialog element for this info token.
       * @type {Element}
       */

      this.dialog = holder.lastElementChild;
    }
    /**
     * Exposes a copy of {@link InfoToken#data}.
     *
     * @return {Object}
     *         A copy of the info token's data.
     */

  }, {
    key: "getData",
    value: function getData() {
      return _objectSpread({}, this.data);
    }
    /**
     * Exposes the "raw" key from {@link InfoToken#data}.
     *
     * @return {String}
     *         The raw markdown.
     */

  }, {
    key: "getRaw",
    value: function getRaw() {
      return this.data.raw;
    }
    /**
     * Exposes {@link InfoToken#trigger}
     *
     * @return {Element}
     *         Trigger element.
     */

  }, {
    key: "getTrigger",
    value: function getTrigger() {
      return this.trigger;
    }
    /**
     * Exposes {@link InfoToken#dialog}
     *
     * @return {Element}
     *         Dialog element.
     */

  }, {
    key: "getDialog",
    value: function getDialog() {
      return this.dialog;
    }
    /**
     * Updates the contents of the info token based on the raw input given.
     *
     * @param {String} raw
     *        Markdown that should be updated.
     */

  }, {
    key: "updateRaw",
    value: function updateRaw(raw) {
      var data = this.data,
          dialog = this.dialog,
          trigger = this.trigger;
      var markup = (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_1__.markdown2html)(raw);
      var text = (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_1__.striptags)(markup);
      data.raw = raw;
      data.text = text;
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_0__.lookupOne)(".js--info-token--button", trigger).textContent = text;
      data.markup = markup;
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_0__.lookupOne)(".js--info-token--dialog-text", dialog).innerHTML = markup;
    }
    /**
     * Removes the elements that were added to the DOM for this info token.
     */

  }, {
    key: "remove",
    value: function remove() {
      this.dialog.remove();
      this.trigger.remove();
    }
  }], [{
    key: "ID_PREFIX",
    get:
    /**
     * The prefix for the ID of any info token dialog.
     * @type {String}
     */
    function get() {
      return "info-token-";
    }
    /**
     * Stores templates that all info tokens will refer to.
     *
     * @param {Object} templates
     *        A list of all templates that the info tokens will refer to.
     */

  }, {
    key: "setTemplates",
    value: function setTemplates(templates) {
      /**
       * A list of all templates that this info tokens will refer to.
       * @type {Object}
       */
      this.templates = templates;
    }
    /**
     * Stores holders that all info tokens will draw to.
     *
     * @param {Object} templates
     *        A list of all templates that the info tokens will refer to.
     */

  }, {
    key: "setHolders",
    value: function setHolders(holders) {
      /**
       * A list of all holders that this info tokens will draw to.
       * @type {Object}
       */
      this.holders = holders;
    }
    /**
     * Converts the text into a unique ID.
     *
     * @param  {String} text
     *         Text to act as a prefix for the ID.
     * @return {String}
     *         Unique ID.
     */

  }, {
    key: "makeId",
    value: function makeId(text) {
      var lower = text.replace(/\W/g, "").toLowerCase();
      return (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_0__.identify)({}, "".concat(this.ID_PREFIX).concat(lower, "-"));
    }
    /**
     * Interprets the given object to make sure it has the correct keys for the
     * data.
     *
     * @param  {Object} data
     *         Data to interpret.
     * @param  {String} [raw]
     *         The raw text to convert into markup (markdown).
     * @param  {String} markup
     *         Markup for the dialog box.
     * @param  {String} [id]
     *         ID for the dialog box. If ommitted, one will be generated - see
     *         {@link InfoToken.makeId}.
     * @param  {String} [colour="grey"]
     *         Colour of the button and dialog box.
     * @param  {Boolean} [custom=false]
     *         Whether or not the info token is custom-made.
     * @return {Object}
     *         Interpretted data.
     */

  }, {
    key: "interpret",
    value: function interpret(_ref) {
      var raw = _ref.raw,
          markup = _ref.markup,
          id = _ref.id,
          colour = _ref.colour,
          custom = _ref.custom;

      if (raw && !markup) {
        markup = (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_1__.markdown2html)(raw);
      }

      var text = (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_1__.striptags)(markup);

      if (!id) {
        id = this.makeId(text);
      }

      var prefix = this.ID_PREFIX;

      if (!id.startsWith(prefix)) {
        id = "".concat(prefix).concat(id);
      }

      return {
        raw: raw,
        text: text,
        markup: markup,
        id: id,
        colour: "var(--".concat(colour || "grey", ")"),
        custom: Boolean(custom)
      };
    }
  }]);

  return InfoToken;
}();



/***/ }),

/***/ "./assets/js/classes/Jinx.js":
/*!***********************************!*\
  !*** ./assets/js/classes/Jinx.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Jinx)
/* harmony export */ });
/* harmony import */ var _CharacterToken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CharacterToken */ "./assets/js/classes/CharacterToken.js");
/* harmony import */ var _Observer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Observer */ "./assets/js/classes/Observer.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }



/**
 * Manages a Jinx.
 *
 * The comments in the code might use a few terms to describe a jinx. Here's a
 * glossary:
 *
 * Theoretical.
 * The jinx exists but isn't part of this script.
 * For example: the Cerenovus is jinxed with the Goblin. If the Cerenovus is on
 * the current script but the Goblin is not then the jinx is theoretical.
 *
 * Ready.
 * The jinx is on the script.
 * For example: the Chambermaid is jinxed with the Mathematician. If both
 * characters are on the script then the jinx is ready, but not necessarily
 * active.
 *
 * Active.
 * Both characters that form this jinx have been selected.
 * For example, the Butler is jinxed with the Cannibal. If both tokens are in
 * the grimoire then the jinx is active.
 *
 * Target.
 * The character that has the jinx.
 * For example: the Pit-Hag is jinxed with the Heretic. The Pit-Hag is the
 * target. On a character sheet, the target is the larger icon above the smaller
 * jinxes.
 *
 * Trick.
 * The character that is jinxed with the target.
 * For example: the Lycanthrope is jinxed with the Gambler. The Gambler is the
 * trick. On a character sheet, the trick is the smaller icon under the main
 * character.
 */

var Jinx = /*#__PURE__*/function () {
  /**
   * @param {CharacterToken|undefined} trick
   *        The character that the source character will be jinxed with. If
   *        the jinx is between 2 homebrew characters and only one is defined
   *        in the data, `trick` may be undefined.
   * @param {String} reason
   *        The reason for the jinx.
   */
  function Jinx(trick, reason) {
    _classCallCheck(this, Jinx);

    /**
     * The character that the source character is jinxed with.
     * @type {CharacterToken|undefined}
     */
    this.trick = trick;
    /**
     * The reason for the jinx.
     * @type {String}
     */

    this.reason = reason;
    /**
     * The state of this jinx.
     * @type {Object}
     */

    this.state = {
      ready: false,
      trick: false,
      target: false,
      active: false
    };
  }
  /**
   * Sets the target of the jinx, which is to say the larger icon on the
   * character sheet.
   *
   * @param {CharacterToken} target
   *        The jinx target.
   */


  _createClass(Jinx, [{
    key: "setTarget",
    value: function setTarget(target) {
      this.target = target;
    }
    /**
     * Sets an observer which can trigger events as the state changes.
     *
     * @param {Observer} observer
     *        Observer that will dispatch events at key moments.
     */

  }, {
    key: "setObserver",
    value: function setObserver(observer) {
      this.observer = observer;
    }
    /**
     * Helper function for toggling a state from within {@link Jinx#state}.
     * Optionally the state can be forced. If the state is the same, no action
     * is taken. Don't call this method directly, use one of the helper
     * functions {@link Jinx#toggleReady}, {@link Jinx#toggleTrick}, or
     * {@link Jinx#toggleTarget}.
     *
     * @param  {String} name
     *         Name of the state to toggle.
     * @param  {Boolean} [forceState]
     *         The state to force. If ommitted, the state is simply toggled.
     * @return {Boolean}
     *         The new state.
     * @throws {ReferenceError}
     *         The name of the state must be recognised.
     */

  }, {
    key: "toggleState",
    value: function toggleState(name, forceState) {
      var state = this.state;

      if (!Object.prototype.hasOwnProperty.call(state, name)) {
        throw new ReferenceError("Unrecognised state \"".concat(name, "\""));
      }

      if (forceState === undefined) {
        forceState = !state[name];
      }

      if (forceState !== state[name]) {
        var _this$observer;

        state[name] = forceState; // Next line can trigger: toggle-jinx-ready, toggle-jinx-trick, toggle-jinx-target, toggle-jinx-active

        (_this$observer = this.observer) === null || _this$observer === void 0 ? void 0 : _this$observer.trigger("toggle-jinx-".concat(name), {
          jinx: this,
          state: forceState
        });
      }

      return forceState;
    }
    /**
     * Toggles the ready state. A jinx is considered "ready" when it's on the
     * script, but not necessarily active. Optionally the state can be forced
     * with the same logic as {@link Jinx#toggleState}.
     *
     * @param {Boolean} [forceState]
     *        The optional state to force.
     */

  }, {
    key: "toggleReady",
    value: function toggleReady(forceState) {
      if (this.toggleState("ready", forceState) === false) {
        this.toggleState("active", false);
      }
    }
    /**
     * Exposes whether or not this jinx is ready.
     *
     * @return {Boolean}
     *         true if the jinx is ready, false otherwise.
     */

  }, {
    key: "isReady",
    value: function isReady() {
      return this.state.ready;
    }
    /**
     * Activates the jinx by making sure that both the "ready" and "active"
     * states are set.
     */

  }, {
    key: "activate",
    value: function activate() {
      this.toggleReady(true);
      this.toggleState("active", true);
    }
    /**
     * Toggles the trick state. The jinx's trick is the character that the
     * target is jinxed with (the smaller icon on the character sheet). If the
     * trick state is true then that character has been selected for the game.
     * If the trick and target states are both active, the jinx will be
     * activated. Optionally the trick's state can be forced with the same logic
     * as {@link Jinx#toggleState}.
     *
     * @param {Boolean} [forceState]
     *        The optional state to force.
     */

  }, {
    key: "toggleTrick",
    value: function toggleTrick(forceState) {
      if (this.toggleState("trick", forceState) && this.state.target) {
        this.activate();
      } else {
        this.toggleState("active", false);
      }
    }
    /**
    * Toggles the target state. The jinx's target is the character that the
    * target has the jinx (the larger icon on the character sheet). If the
    * target state is true then that character has been selected for the game.
    * If the trick and target states are both active, the jinx will be
    * activated. Optionally the target's state can be forced with the same logic
    * as {@link Jinx#toggleState}.
     *
     * @param {Boolean} [forceState]
     *        The optional state to force.
     */

  }, {
    key: "toggleTarget",
    value: function toggleTarget(forceState) {
      if (this.toggleState("target", forceState) && this.state.trick) {
        this.activate();
      } else {
        this.toggleState("active", false);
      }
    }
    /**
     * Exposes whether or not this jinx is active.
     *
     * @return {Boolean}
     *         true if the jinx is active, false otherwise.
     */

  }, {
    key: "isActive",
    value: function isActive() {
      return Boolean(this.trick) && this.state.ready && this.state.active; // return this.isReady() && this.state.trick && this.state.target;
    }
    /**
     * Checks to see if {@link Jinx#trick} matches the given character.
     *
     * @param  {CharacterToken} character
     *         Character to test for.
     * @return {Boolean}
     *         true if the character matches, false if it doesn't.
     */

  }, {
    key: "matches",
    value: function matches(character) {
      return Boolean(this.trick) && this.trick.matches(character);
    }
    /**
     * Exposes {@link Jinx#target}.
     *
     * @return {CharacterToken}
     *         The target character for the jinx.
     */

  }, {
    key: "getTarget",
    value: function getTarget() {
      return this.target;
    }
    /**
     * Exposes {@link Jinx#trick}.
     *
     * @return {CharacterToken|undefined}
     *         The character that the source character is jinxed with, if we
     *         know it.
     */

  }, {
    key: "getTrick",
    value: function getTrick() {
      return this.trick;
    }
    /**
     * Exposes {@link Jinx#reason}
     *
     * @return {String}
     *         The reason for the jinx.
     */

  }, {
    key: "getReason",
    value: function getReason() {
      return this.reason;
    }
    /**
     * Exposes {@link Jinx#isHomebrew}
     *
     * @returns {Boolean}
     *          true if the Jinx is homebrew, false if it's not.
     */

  }, {
    key: "getIsHomebrew",
    value: function getIsHomebrew() {
      return Boolean(this.isHomebrew);
    }
    /**
     * Sets whether or not this Jinx is from a homebrew role.
     *
     * @param {Boolean} isHomebrew
     *        true if the Jinx comes from a homebrew source, false otherwise.
     */

  }, {
    key: "setIsHomebrew",
    value: function setIsHomebrew(isHomebrew) {
      /**
       * Whether or not this Jinx has ceom from a homebrew role or not.
       * @type {Boolean}
       */
      this.isHomebrew = isHomebrew;
    }
    /**
     * Sets the template that can be used to draw the jinx.
     *
     * @param {Template} template
     *        The template that will draw the jinx.
     */

  }, {
    key: "setTemplate",
    value: function setTemplate(template) {
      /**
       * The template to draw the jinx.
       * @type {Template}
       */
      this.template = template;
    }
    /**
     * Helper function for drawing the jinx character icon.
     *
     * @param {Element} element
     *        Image element to modify.
     * @param {CharacterToken} character
     *        Character whose data should be sued to populate the image.
     */

  }, {
    key: "getId",
    value:
    /**
     * Gets an ID for the jinx.
     *
     * @return {String}
     *         An ID for the jinx.
     */
    function getId() {
      var _this$trick;

      return "jinx--".concat(this.target.getId(), "-").concat(((_this$trick = this.trick) === null || _this$trick === void 0 ? void 0 : _this$trick.getId()) || '_unknown_');
    }
    /**
     * Draws the jinx.
     *
     * @return {DocumentFragment}
     *         The jinx markup.
     */

  }, {
    key: "draw",
    value: function draw() {
      var _this = this;

      var target = this.target,
          trick = this.trick,
          reason = this.reason,
          template = this.template,
          drawImg = this.constructor.drawImg; // if (!template) {
      //     throw new Error("Jinx template has not been set.");
      // }

      return template.draw({
        ".js--jinx-table--jinx": function jsJinxTableJinx(element) {
          element.id = _this.getId();
        },
        ".js--jinx-table--target": function jsJinxTableTarget(element) {
          drawImg(element, target);
        },
        ".js--jinx-table--target-name": function jsJinxTableTargetName(element) {
          element.textContent = target.getName();
        },
        ".js--jinx-table--trick": function jsJinxTableTrick(element) {
          drawImg(element, trick);
        },
        ".js--jinx-table--trick-name": function jsJinxTableTrickName(element) {
          element.textContent = (trick === null || trick === void 0 ? void 0 : trick.getName()) || '';
        },
        ".js--jinx-table--reason": function jsJinxTableReason(element) {
          element.textContent = reason;
        }
      });
    }
  }], [{
    key: "drawImg",
    value: function drawImg(element, character) {
      if (!character) {
        return;
      }

      element.src = character.getImage();
      element.alt = character.getName();
      element.title = character.getName();
    }
  }]);

  return Jinx;
}();



/***/ }),

/***/ "./assets/js/classes/Names.js":
/*!************************************!*\
  !*** ./assets/js/classes/Names.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Names)
/* harmony export */ });
/* harmony import */ var _Template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _constants_language_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../constants/language.js */ "./assets/js/constants/language.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }



/**
 * Keeps track of the player names.
 */

var Names = /*#__PURE__*/function () {
  /**
   * Creates the names.
   */
  function Names() {
    _classCallCheck(this, Names);

    /**
     * A collection of the names that have been saved. The names are always
     * stored in alphabetical order, based on the current locale.
     * @type {Array.<String>}
     */
    this.names = [];
  }
  /**
   * Sets {@link Names#template}. The current instance is returned to allow
   * for chaining.
   *
   * @param {Template} template
   *        The template that will be used to populate datalists.
   */


  _createClass(Names, [{
    key: "setTemplate",
    value: function setTemplate(template) {
      /**
       * The template that's used to populate datalists.
       * @type {Template}
       */
      this.template = template;
      return this;
    }
    /**
     * Sets {@link Names#observer}. The current instance is returned to allow
     * for chaining.
     *
     * @param {Observer} observer
     *        Observer that will trigger events at key moments.
     */

  }, {
    key: "setObserver",
    value: function setObserver(observer) {
      /**
       * Observer that will trigger events at key moments.
       * @type {Observer}
       */
      this.observer = observer;
      return this;
    }
    /**
     * Adds a name to {@link Names#names} but only if the name isn't already in
     * that list. If the list changes then an event is triggered.
     *
     * @param  {String} name
     *         Name to add.
     */

  }, {
    key: "add",
    value: function add(name) {
      var names = this.names,
          observer = this.observer;
      var length = names.length;

      if (name && !names.includes(name)) {
        names.push(name);
        this.alphabetise();
        observer.trigger("names-added", {
          name: name,
          names: _toConsumableArray(names)
        });
      }
    }
    /**
     * Sorts {@link Names#names} alphabetically based on the current language.
     * @return {[type]} [description]
     */

  }, {
    key: "alphabetise",
    value: function alphabetise() {
      this.names.sort(function (a, b) {
        return a.localeCompare(b, _constants_language_js__WEBPACK_IMPORTED_MODULE_1__.LANGUAGE);
      });
    }
    /**
     * Removes all names from {@link Names#names}.
     */

  }, {
    key: "clear",
    value: function clear() {
      this.names.length = 0;
      observer.trigger("names-cleared");
    }
    /**
     * A helper function that sets the value of the given element to the given
     * constant. As a separate function, it doesn't need to be re-created each
     * time that {@link Names#drawList} is called.
     *
     * @param {Element} element
     *        Element whose value should be set.
     * @param {String} content
     *        Content of the value to set.
     */
    // static setValue(element, content) {
    //     element.value = content;
    // }

    /**
     * Draws a list of elements for each entry in {@link Names#names}.
     *
     * @return {Array.<Element>}
     *         Element for each of the names.
     * @throws {Error}
     *         The template {@link Names#template} must be set.
     */

  }, {
    key: "drawList",
    value: function drawList() {
      var constructor = this.constructor,
          names = this.names,
          template = this.template;

      if (!template) {
        throw new Error("Cannot draw a list because the template is not set");
      }

      return names.map(function (name) {
        return template.draw({
          ".js--player-name--option": function jsPlayerNameOption(element) {
            element.value = name;
          }
        });
      });
    }
    /**
     * Binds a handler to an event that's triggered on {@link Names#observer}.
     *
     * @param {String} eventName
     *        Name of the event to listen for.
     * @param {Function} handler
     *        Handler to execute when the event is heard.
     */

  }, {
    key: "on",
    value: function on(eventName, handler) {
      this.observer.on(eventName, handler);
    }
  }], [{
    key: "create",
    value:
    /**
     * Creates a version of {@link Names}. The instance is cached and stored so
     * that it can be returned each time this function is called instead of
     * creating a new object.
     *
     * @return {Names}
     *         Instance of {@link Names}.
     */
    function create() {
      if (!this.instance) {
        /**
         * An instance of {@link Names} that can be returned each time
         * instead of being re-created.
         * @type {this}
         */
        this.instance = new this();
      }

      return this.instance;
    }
  }]);

  return Names;
}();



/***/ }),

/***/ "./assets/js/classes/NightOrder.js":
/*!*****************************************!*\
  !*** ./assets/js/classes/NightOrder.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ NightOrder)
/* harmony export */ });
/* harmony import */ var _CharacterToken__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CharacterToken */ "./assets/js/classes/CharacterToken.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }



/**
 * A class that manages the night order lists.
 */

var NightOrder = /*#__PURE__*/function () {
  function NightOrder() {
    _classCallCheck(this, NightOrder);

    /**
     * Whether or not to show the dead characters.
     * @type {Boolean}
     */
    this.showDead = false;
    /**
     * Whether or not to show the characters that are current not in play.
     * @type {Boolean}
     */

    this.showNotInPlay = false;
    /**
     * The data that will display the night order lists.
     * @type {Array.<Object>}
     */

    this.data = [];
    /**
     * Holders for the night order elements.
     */

    this.holders = {
      first: null,
      other: null
    };
  }
  /**
   * Sets the holders.
   * @param {Object} holders
   */


  _createClass(NightOrder, [{
    key: "setHolders",
    value: function setHolders(holders) {
      this.holders = holders;
    }
    /**
     * Resets the lists so that the elements have been removed and the data
     * cleared.
     */

  }, {
    key: "reset",
    value: function reset() {
      var data = this.data;
      data.forEach(function (_ref) {
        var first = _ref.first,
            other = _ref.other;

        if (first) {
          first.placeholder.remove();
          first.element.remove();
        }

        if (other) {
          other.placeholder.remove();
          other.element.remove();
        }
      });
      data.length = 0;
    }
    /**
     * Updates {@link NightOrder#showDead}.
     *
     * @param {Boolean} showDead
     *        true to show the dead characters, false to hide them.
     */

  }, {
    key: "setShowDead",
    value: function setShowDead(showDead) {
      this.showDead = showDead;
      this.drawAllCharacters();
    }
    /**
     * Updates {@link NightOrder#showNotInPlay}.
     *
     * @param {Boolean} showNotInPlay
     *        true to show the not-in-play characters, false to hide them.
     */

  }, {
    key: "setShowNotInPlay",
    value: function setShowNotInPlay(showNotInPlay) {
      this.showNotInPlay = showNotInPlay;
      this.drawAllCharacters();
    }
    /**
     * Sets the characters that are in the lists.
     *
     * @param {Array.<CharacterToken>} characters
     *        All characters to set.
     */

  }, {
    key: "setCharacters",
    value: function setCharacters(characters) {
      var _this = this;

      characters.forEach(function (character) {
        return _this.setCharacter(character);
      });
    }
    /**
     * Sets an individual character, adding it to the list.
     *
     * @param {CharacterToken} character
     *        The character to set.
     */

  }, {
    key: "setCharacter",
    value: function setCharacter(character) {
      var data = {
        character: character,
        alive: 0,
        inPlay: 0
      };
      var firstNight = character.getFirstNight();
      var otherNight = character.getOtherNight();
      var id = character.getId();

      if (firstNight) {
        data.first = {
          order: firstNight,
          placeholder: document.createComment(id),
          element: character.drawNightOrder(true).firstElementChild
        };
      }

      if (otherNight) {
        data.other = {
          order: otherNight,
          placeholder: document.createComment(id),
          element: character.drawNightOrder(false).firstElementChild
        };
      }

      this.data.push(data);
    }
    /**
     * Place the characters element/placeholder in the correct place in the
     * appropriate night order list.
     * This is only needed after adding a character using
     * {@link NightOrder#setCharacter} manually - the order for all regular
     * characters in the script should be correctly set in
     * {@link NightOrder#drawNightOrder}.
     *
     * @param {CharacterToken} character
     *        The character to correctly place.
     */

  }, {
    key: "placeInOrder",
    value: function placeInOrder(character) {
      var _this2 = this;

      var index = this.getDataIndex(character);

      if (index < 0) {
        return;
      }

      [["first", "getFirstNight"], ["other", "getOtherNight"]].forEach(function (_ref2) {
        var _ref3 = _slicedToArray(_ref2, 2),
            property = _ref3[0],
            method = _ref3[1];

        var data = _this2.data[index][property];

        if (!data) {
          return;
        }

        var next = _this2.data.filter(function (datum) {
          return datum[property];
        }).sort(function (a, b) {
          return a[property].order - b[property].order;
        }).find(function (_ref4) {
          var order = _ref4.order;
          return order > character[method]();
        });

        var insertable = _this2.shouldShow(data) ? data.element : data.placeholder;

        if (next) {
          _this2.holders[property].insertBefore(insertable, next.element.parentElement ? next.element : next.placeholder);
        } else {
          _this2.holders[property].append(insertable);
        }
      });
    }
    /**
     * Removes the given character from the data and removes all its elements
     * from the night order lists.
     *
     * @param {CharacterToken} character
     *        The character to remove.
     */

  }, {
    key: "unsetCharacter",
    value: function unsetCharacter(character) {
      var _this3 = this;

      var index = this.getDataIndex(character);

      if (index < 0) {
        return;
      }

      ["first", "other"].forEach(function (property) {
        var data = _this3.data[index][property];

        if (!data) {
          return;
        }

        data.placeholder.remove();
        data.element.remove();
      });
      this.data.splice(index, 1);
    }
    /**
     * Draws the night order list for either the first night or the other
     * nights.
     *
     * @param  {Boolean} isFirstNight
     *         true to draw the first night, false to draw the other nights.
     * @return {DocumentFragment}
     *         A document fragment with the night order list.
     */

  }, {
    key: "drawNightOrder",
    value: function drawNightOrder(isFirstNight) {
      var _this4 = this;

      var data = this.data;
      var property = isFirstNight ? "first" : "other";
      return data.filter(function (datum) {
        return datum[property];
      }).sort(function (a, b) {
        return a[property].order - b[property].order;
      }).reduce(function (fragment, data) {
        var _data$property = data[property],
            element = _data$property.element,
            placeholder = _data$property.placeholder;
        fragment.append(_this4.shouldShow(data) ? element : placeholder);
        return fragment;
      }, document.createDocumentFragment());
    }
    /**
     * Draws all night order elements.
     */

  }, {
    key: "drawAllNightOrders",
    value: function drawAllNightOrders() {
      var _this5 = this;

      Object.entries(this.holders).forEach(function (_ref5) {
        var _ref6 = _slicedToArray(_ref5, 2),
            name = _ref6[0],
            element = _ref6[1];

        if (!element) {
          return;
        }

        (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_1__.empty)(element).append(_this5.drawNightOrder(name === "first"));
      });
    }
    /**
     * Helper function for drawing or updating a character's entry in the night
     * order lists based on the character itself.
     *
     * @param {CharacterToken} character
     *        Character whose entry should be drawn or updated.
     */

  }, {
    key: "drawCharacter",
    value: function drawCharacter(character) {
      this.drawCharacterByData(this.getData(character));
    }
    /**
     * Draws or updates the entry in the night order lists for the character
     * with the given data.
     *
     * @param {Object} data
     *        Data whose character should have their night order lists updated.
     */

  }, {
    key: "drawCharacterByData",
    value: function drawCharacterByData(data) {
      var _this6 = this;

      var shouldShow = this.shouldShow(data);
      ["first", "other"].forEach(function (property) {
        if (!data[property]) {
          return;
        }

        var _data$property2 = data[property],
            placeholder = _data$property2.placeholder,
            element = _data$property2.element;
        element.classList.toggle("is-in-play", _this6.isInPlay(data));
        element.classList.toggle("is-dead", _this6.isDead(data));

        if (shouldShow && placeholder.parentElement) {
          placeholder.replaceWith(element);
        } else if (!shouldShow && element.parentElement) {
          element.replaceWith(placeholder);
        }
      });
    }
    /**
     * A helper function for drawing or updating all entries in the night order
     * lists.
     */

  }, {
    key: "drawAllCharacters",
    value: function drawAllCharacters() {
      var _this7 = this;

      this.data.forEach(function (data) {
        return _this7.drawCharacterByData(data);
      });
    }
    /**
     * Checks to see if the given data represents a character that's fully dead
     * (i.e. there are no character tokens for this character that are still
     * alive).
     *
     * @param  {Object} data
     *         Data to check.
     * @return {Boolean}
     *         true if the character is fully dead, false otherwise.
     */

  }, {
    key: "isDead",
    value: function isDead(data) {
      return data.inPlay > 0 && data.alive === 0;
    }
    /**
     * Checks to see if the given data has any characters in play.
     *
     * @param  {Object} data
     *         Data to check.
     * @return {Boolean}
     *         true if any characters are in play, false otherwise.
     */

  }, {
    key: "isInPlay",
    value: function isInPlay(data) {
      return data.inPlay > 0;
    }
    /**
     * Checks to see if the given data suggests that the character's entry in
     * the night order lists should be showing.
     *
     * @param  {Object} data
     *         Data to check.
     * @return {Boolean}
     *         true if the entries should be showing, false otherwise.
     */

  }, {
    key: "shouldShow",
    value: function shouldShow(data) {
      var showDead = this.showDead,
          showNotInPlay = this.showNotInPlay;
      var isDead = this.isDead(data);
      var isInPlay = this.isInPlay(data);
      return isInPlay && !isDead || !isInPlay && showNotInPlay || isDead && showDead;
    }
    /**
     * Gets the index in {@link NightOrder#data} for the data that represents
     * the given character.
     *
     * @param  {CharacterToken} character
     *         Character whose data's index should be returned.
     * @return {Number}
     *         Index of the character within the data.
     */

  }, {
    key: "getDataIndex",
    value: function getDataIndex(character) {
      var id = character.getId();
      return this.data.findIndex(function (data) {
        return data.character.getId() === id;
      });
    }
    /**
     * Helper function for getting the item within {@link NightOrder#data} that
     * represents the given character. If the character cannot be found an error
     * is thrown.
     *
     * @param  {CharacterToken} character
     *         Character whose data should be returned.
     * @return {Object}
     *         Data for the given character.
     * @throws {ReferenceError}
     *         The character must exist within the data.
     */

  }, {
    key: "getData",
    value: function getData(character) {
      var index = this.getDataIndex(character);

      if (index < 0) {
        throw new ReferenceError("Cannot find character \"".concat(character.getId(), "\""));
      }

      return this.data[index];
    }
    /**
     * Checks to see if the given character exists within the data.
     *
     * @param  {CharacterToken} character
     *         Character to check for.
     * @return {Boolean}
     *         true if the character exists, false otherwise.
     */

  }, {
    key: "hasCharacter",
    value: function hasCharacter(character) {
      return this.getDataIndex(character) > -1;
    }
    /**
     * Updates {@link NightOrder#data} for the given character to register that
     * it has been added in play.
     *
     * @param {CharacterToken} character
     *        Character whose data should be updated.
     */

  }, {
    key: "addCharacter",
    value: function addCharacter(character) {
      var data = this.getData(character);
      this.adjustInPlay(data, 1);

      if (!character.getIsDead()) {
        this.adjustAlive(data, 1);
      }

      this.drawCharacterByData(data);
    }
    /**
     * Updates {@link NightOrder#data} for the given character to register that
     * it has been removed from play.
     *
     * @param {CharacterToken} character
     *        Character whose data should be updated.
     */

  }, {
    key: "removeCharacter",
    value: function removeCharacter(character) {
      var data = this.getData(character);

      if (!character.getIsDead()) {
        this.adjustAlive(data, -1);
      }

      this.adjustInPlay(data, -1);
      this.drawCharacterByData(data);
    }
    /**
     * Updates {@link NightOrder#data} for the given character to register that
     * the character has either died or been revived.
     *
     * @param {CharacterToken} character
     *        Character whose data should be updated.
     * @param {Boolean} isDead
     *        true if the character is dead, false otherwise.
     */

  }, {
    key: "toggleDead",
    value: function toggleDead(character, isDead) {
      var data = this.getData(character);
      this.adjustAlive(data, isDead ? -1 : 1);
      this.drawCharacterByData(data);
    }
    /**
     * Adjusts the data's "alive" value based on the quantity given. The final
     * result is limited so that it cannot exceed the "inPlay" value and cannot
     * drop below 0.
     *
     * @param {Object} data
     *        Data to update.
     * @param {Number} quantity
     *        Amount to update the data by. If this value is negative then the
     *        value will be reduced.
     */

  }, {
    key: "adjustAlive",
    value: function adjustAlive(data, quantity) {
      data.alive = Math.min(data.inPlay, Math.max(data.alive + quantity, 0));
    }
    /**
     * Adjusts the data's "inPlay" value based on the quantity given. The final
     * result is limited so that it cannot drop below 0.
     *
     * @param {Object} data
     *        Data to update.
     * @param {Number} quantity
     *        Amount to update the data by. If this value is negative then the
     *        value will be reduced.
     */

  }, {
    key: "adjustInPlay",
    value: function adjustInPlay(data, quantity) {
      data.inPlay = Math.max(0, data.inPlay + quantity);
    }
  }]);

  return NightOrder;
}();



/***/ }),

/***/ "./assets/js/classes/Observer.js":
/*!***************************************!*\
  !*** ./assets/js/classes/Observer.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Observer)
/* harmony export */ });
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

/**
 * Listens for and dispatches events.
 */
var Observer = /*#__PURE__*/function () {
  /**
   * Creates the observer.
   */
  function Observer() {
    _classCallCheck(this, Observer);

    /**
     * A dummy element that has the events bound to it.
     * @type {Element}
     */
    this.dummy = document.createElement("div");
  }
  /**
   * Listens for an event and binds the given handler to it.
   *
   * @param {String} eventName
   *        Name of the event to listen for.
   * @param {Function} handler
   *        Handler to execute when the event is heard.
   */


  _createClass(Observer, [{
    key: "on",
    value: function on(eventName, handler) {
      this.dummy.addEventListener(eventName, handler);
    }
    /**
     * Removes a handler from the given event.
     *
     * @param {String} eventName
     *        Name of the event.
     * @param {Function} handler
     *        Handler to remove from the event.
     */

  }, {
    key: "off",
    value: function off(eventName, handler) {
      this.dummy.removeEventListener(eventName, handler);
    }
    /**
     * Creates an event.
     *
     * @param  {String} eventName
     *         Name of the event to create.
     * @param  {?} [detail]
     *         Optional detail for the event.
     * @return {CustomEvent}
     *         Event that was created.
     */

  }, {
    key: "create",
    value: function create(eventName, detail) {
      return new CustomEvent(eventName, {
        bubbles: true,
        cancelable: true,
        detail: detail
      });
    }
    /**
     * Dispatches an event and returns it.
     *
     * @param  {CustomEvent|String} eventName
     *         Either the event to trigger or the name of the event to trigger.
     * @param  {?} [detail]
     *         Optional detail for the event. This parameter is only used if the
     *         eventName parameter is a string and the event is created.
     * @return {CustomEvent}
     *         Event that was dispatched.
     */

  }, {
    key: "trigger",
    value: function trigger(eventName, detail) {
      var event = typeof eventName === "string" ? this.create(eventName, detail) : eventName;
      this.dummy.dispatchEvent(event);
      return event;
    }
  }], [{
    key: "create",
    value:
    /**
     * A cache of all observers created using {@link Observer.create}.
     * @type {Object}
     */

    /**
     * A helper function for creating/getting observers.
     *
     * @param  {String} name
     *         Name of the observer.
     * @return {Observer}
     *         Observer instance.
     */
    function create(name) {
      var observers = this.observers;

      if (!observers[name]) {
        observers[name] = new this();
      }

      return observers[name];
    }
  }]);

  return Observer;
}();

_defineProperty(Observer, "observers", Object.create(null));



/***/ }),

/***/ "./assets/js/classes/Pad.js":
/*!**********************************!*\
  !*** ./assets/js/classes/Pad.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Pad)
/* harmony export */ });
/* harmony import */ var _Tokens_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Tokens.js */ "./assets/js/classes/Tokens.js");
/* harmony import */ var _Template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _Observer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _CharacterToken_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CharacterToken.js */ "./assets/js/classes/CharacterToken.js");
/* harmony import */ var _ReminderToken_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./ReminderToken.js */ "./assets/js/classes/ReminderToken.js");
/* harmony import */ var _Positioner_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Positioner.js */ "./assets/js/classes/Positioner.js");
/* harmony import */ var _TokenStore_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");
/* harmony import */ var _utils_numbers_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../utils/numbers.js */ "./assets/js/utils/numbers.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }










/**
 * Handles tokens being added to the main pad section.
 */

var Pad = /*#__PURE__*/function () {
  /**
   * @param {Element} element
   *        The main pad element.
   * @param {Observer} observer
   *        An observer that will trigger events at key times.
   */
  function Pad(element, observer) {
    _classCallCheck(this, Pad);

    /**
     * The main pad element.
     * @type {Element}
     */
    this.element = element;
    /**
     * An observer that can trigger events at key times.
     * @type {Observer}
     */

    this.observer = observer;
    /**
     * The class that allows the tokens to be dragged around.
     * @type {Tokens}
     */

    this.tokens = new _Tokens_js__WEBPACK_IMPORTED_MODULE_0__["default"](element, observer);
    /**
     * The template for adding a token to the pad.
     * @type {Template}
     */

    this.template = _Template_js__WEBPACK_IMPORTED_MODULE_1__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_7__.lookupOne)("#token-template")); // NOTE: should this be passed to the class instead of being created
    // here?

    /**
     * All characters that have been added.
     * @type {Array.<Object>}
     */

    this.characters = [];
    /**
     * All reminders that have been added.
     * @type {Array.<Object>}
     */

    this.reminders = [];
    /**
     * The positioner that will lay out the tokens automatically.
     * @type {Positioner}
     */

    this.positioner = null;
    /**
     * The co-ordinates for each of the tokens.
     * @type {Array.<Array>}
     */

    this.coords = [];
    /**
     * The TokenStore that wil be used for working out the dimensions of the
     * tokens, so that co-ordinates can be correctly calculated.
     * @type {TokenStore}
     */

    this.tokenStore = null;
  }
  /**
   * Adds a character to the {@link Pad#element}. This method is for internal
   * use only because it doesn't trigger any events - use
   * {@link Pad#addCharacter} instead.
   *
   * @param  {CharacterToken} character
   *         The character to add.
   * @return {Object}
   *         An object with the token and the character that was added.
   */


  _createClass(Pad, [{
    key: "drawCharacter",
    value: function drawCharacter(character) {
      var element = this.element,
          characters = this.characters,
          template = this.template;
      element.append(template.draw({
        ".js--token--wrapper": function jsTokenWrapper(element) {
          element.append(character.drawToken());
          element.dataset.token = "character";
        }
      }));
      var token = element.lastElementChild;
      var info = Object.freeze({
        character: character,
        token: token
      });
      characters.push(info);
      return info;
    }
    /**
     * Adds a character to the {@link Pad#element}.
     *
     * @param  {CharacterToken} character
     *         The character to add.
     * @return {Object}
     *         An object with the token and the character that was added.
     */

  }, {
    key: "addCharacter",
    value: function addCharacter(character) {
      var info = this.drawCharacter(character);
      this.observer.trigger("character-add", info);
      return info;
    }
    /**
     * Adds a new character to {@link Pad#element} (see
     * {@link Pad#addCharacter}) and moves it to the correct location.
     *
     * @param  {CharacterToken} character
     *         The character to add.
     * @return {Object}
     *         An object with the token and the character that was added.
     */

  }, {
    key: "addNewCharacter",
    value: function addNewCharacter(character) {
      var tokens = this.tokens,
          characters = this.characters,
          coords = this.coords,
          OFFSET = this.constructor.OFFSET;

      if (!coords) {
        throw new Error("Co-ordinates have not been generated");
      }

      var info = this.addCharacter(character);
      var index = characters.length - 1;

      var _ref = (coords === null || coords === void 0 ? void 0 : coords[index]) || [OFFSET * index, OFFSET, index],
          _ref2 = _slicedToArray(_ref, 2),
          left = _ref2[0],
          top = _ref2[1];

      tokens.moveTo(info.token, left, top, tokens.advanceZIndex());
      return info;
    }
    /**
     * Exposes the ability to move a token to the correct place.
     *
     * @param {Element} token
     *        Token to move.
     * @param {Number} left
     *        Left position, in pixels.
     * @param {Number} top
     *        Top position, in pixels.
     * @param {Number} [zIndex]
     *        Optional z-index.
     */

  }, {
    key: "moveToken",
    value: function moveToken(token, left, top, zIndex) {
      this.tokens.moveTo(token, left, top, zIndex);
    }
    /**
     * Exposes the given token's position. See {@link Tokens#getPosition}.
     *
     * @param  {Element} token
     *         Token whose position should be returned.
     * @return {Object}
     *         Co-ordinates for the token.
     */

  }, {
    key: "getTokenPosition",
    value: function getTokenPosition(token) {
      return this.tokens.getPosition(token);
    }
    /**
     * Removes a character from {@link Pad#element}. This method is for internal
     * use only because it doesn't trigger the events - use
     * {@link Pad#removeCharacter} instead.
     *
     * @param {CharacterToken} character
     *        The character to remove.
     */

  }, {
    key: "undrawCharacter",
    value: function undrawCharacter(character) {
      var characters = this.characters,
          preserveReference = this.preserveReference;
      var index = characters.findIndex(function (info) {
        return info.character === character;
      });

      if (index < 0) {
        return;
      }

      var token = characters[index].token;
      token.remove();

      if (!preserveReference) {
        characters.splice(index, 1);
      }

      return token;
    }
    /**
     * Removes a character from {@link Pad#element}.
     *
     * @param {CharacterToken} character
     *        The character to remove.
     */

  }, {
    key: "removeCharacter",
    value: function removeCharacter(character) {
      var token = this.undrawCharacter(character);

      if (token) {
        this.observer.trigger("character-remove", {
          character: character,
          token: token
        });
      }
    }
    /**
     * Gets the {@link CharacterToken} instance associated with the given
     * element. If an instance isn't found, undefined is returned.
     *
     * @param  {Element} token
     *         The token element whose data should be returned.
     * @return {CharacterToken|undefined}
     *         The matching character data, or undefined if there is no match.
     */

  }, {
    key: "getCharacterByToken",
    value: function getCharacterByToken(token) {
      var _this$characters$find;

      return (_this$characters$find = this.characters.find(function (info) {
        return info.token === token;
      })) === null || _this$characters$find === void 0 ? void 0 : _this$characters$find.character;
    }
    /**
     * A helper function for removing a character by the token rather than the
     * {@link CharacterToken} instance.
     *
     * @param {Element} token
     *        The token whose character should be removed.
     */

  }, {
    key: "removeCharacterByToken",
    value: function removeCharacterByToken(token) {
      this.removeCharacter(this.getCharacterByToken(token));
    }
    /**
     * Gets the information about the character from the character itself.
     *
     * @param  {CharacterToken} character
     *         The character whose information should be returned.
     * @return {Object}
     *         Information about the character.
     */

  }, {
    key: "getInfoByCharacter",
    value: function getInfoByCharacter(character) {
      return this.characters.find(function (info) {
        return info.character === character;
      });
    }
    /**
     * Toggles the dead state for the character that's been given.
     *
     * @param {CharacterToken} character
     *        The character whose dead state should be toggled.
     * @param {Boolean} [deadState]
     *        Optional dead state to set.
     */

  }, {
    key: "toggleDead",
    value: function toggleDead(character, deadState) {
      var _ref3 = this.getInfoByCharacter(character) || {},
          token = _ref3.token;

      if (!token) {
        return;
      }

      var isDead = character.toggleDead(deadState);
      this.constructor.getToken(token).classList.toggle("is-dead", isDead);
      this.observer.trigger("shroud-toggle", {
        isDead: isDead,
        token: token,
        character: character
      }); // Revived players get their ghost vote back.
      // https://discord.com/channels/569683781800296501/719898820942626817/1056935809263079535

      if (!isDead) {
        this.setGhostVote(character, true);
      }
    }
    /**
     * A helper function for toggling the dead state of a character by their
     * element rather than the {@link CharacterToken} instance.
     *
     * @param {Element} token
     *        Element whose associated character should have their dead state
     *        toggled.
     * @param {Boolean} [deadState]
     *        Optional dead state to set.
     */

  }, {
    key: "toggleDeadByToken",
    value: function toggleDeadByToken(token, deadState) {
      this.toggleDead(this.getCharacterByToken(token), deadState);
    }
    /**
     * Toggles the rotated state for the character that's been given.
     *
     * @param {CharacterToken} character
     *        The character whose rotated state should be toggled.
     * @param {Boolean} [rotateState]
     *        Optional rotated state to set.
     */

  }, {
    key: "rotate",
    value: function rotate(character, rotateState) {
      var _ref4 = this.getInfoByCharacter(character) || {},
          token = _ref4.token;

      if (!token) {
        return;
      }

      var isUpsideDown = character.rotate(rotateState);
      this.constructor.getToken(token).classList.toggle("is-upside-down", isUpsideDown);
      this.observer.trigger("rotate-toggle", {
        isUpsideDown: isUpsideDown,
        token: token,
        character: character
      });
    }
    /**
     * A helper function for toggling the rotated state of a character by their
     * element rather than the {@link CharacterToken} instance.
     *
     * @param {Element} token
     *        Element whose associated character should have their rotated state
     *        toggled.
     * @param {Boolean} [rotateState]
     *        Optional rotated state to set.
     */

  }, {
    key: "rotateByToken",
    value: function rotateByToken(token, rotateState) {
      this.rotate(this.getCharacterByToken(token), rotateState);
    }
    /**
     * Gets the player name for the character that's been given.
     *
     * @param  {CharacterToken} character
     *         The character whose name should be returned.
     * @return {String}
     *         The name of the player, or an empty string if there is no name or
     *         the character token can't be found.
     */

  }, {
    key: "getPlayerName",
    value: function getPlayerName(character) {
      var info = this.characters.find(function (info) {
        return info.character === character;
      });

      if (!info) {
        return "";
      }

      var nameTag = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_7__.lookupOneCached)(".js--character--player-name", this.constructor.getToken(info.token));
      return (nameTag === null || nameTag === void 0 ? void 0 : nameTag.textContent) || "";
    }
    /**
     * A helper function for getting the name of the player by the element
     * rather than the {@link CharacterToken} instance.
     *
     * @param  {Element} token
     *         The token element.
     * @return {String}
     *         The player name or an empty string.
     */

  }, {
    key: "getPlayerNameForToken",
    value: function getPlayerNameForToken(token) {
      return this.getPlayerName(this.getCharacterByToken(token));
    }
    /**
     * Sets the player name for the character that's been given.
     *
     * @param {CharacterToken} character
     *        The character to set the player name for.
     * @param {String} name
     *        The player name to display with the character token.
     */

  }, {
    key: "setPlayerName",
    value: function setPlayerName(character, name) {
      var _ref5 = this.getInfoByCharacter(character) || {},
          token = _ref5.token;

      if (!token) {
        return;
      }

      var nameTag = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_7__.lookupOneCached)(".js--character--player-name", this.constructor.getToken(token));

      if (!nameTag) {
        return;
      }

      name = (name || "").trim();
      nameTag.textContent = name;
      this.observer.trigger("set-player-name", {
        name: name,
        token: token,
        character: character
      });
    }
    /**
     * A helper function for setting the player name of a character by their
     * element rather than the {@link CharacterToken} instance.
     *
     * @param {Element} token
     *        The token element.
     * @param {String} name
     *        The player name to display with the character token.
     */

  }, {
    key: "setPlayerNameForToken",
    value: function setPlayerNameForToken(token, name) {
      this.setPlayerName(this.getCharacterByToken(token), name);
    }
    /**
     * Toggles the ghost vote state for the character that's been given.
     *
     * @param {CharacterToken} character
     *        The character whose ghost vote state should be toggled.
     * @param {Boolean} [ghostVoteState]
     *        Optional ghost vote state to set.
     */

  }, {
    key: "setGhostVote",
    value: function setGhostVote(character, ghostVoteState) {
      // Prevent the value in the store breaking the ghost vote visibility if
      // the character token is not dead.
      if (!ghostVoteState && !character.getIsDead()) {
        return;
      }

      var _ref6 = this.getInfoByCharacter(character) || {},
          token = _ref6.token;

      if (!token) {
        return;
      }

      var hasGhostVote = character.toggleGhostVote(ghostVoteState);
      this.constructor.getToken(token).classList.toggle("is-voteless", !hasGhostVote);
      this.observer.trigger("ghost-vote-toggle", {
        hasGhostVote: hasGhostVote,
        token: token,
        character: character
      });
    }
    /**
     * A helper function for toggling the ghost vote state of a character by
     * their element rather than the {@link CharacterToken} instance.
     *
     * @param {Element} token
     *        Element whose associated character should have their ghost vote
     *        state toggled.
     * @param {Boolean} [ghostVoteState]
     *        Optional ghost vote state to set.
     */

  }, {
    key: "setGhostVoteForToken",
    value: function setGhostVoteForToken(token, ghostVoteState) {
      this.setGhostVote(this.getCharacterByToken(token), ghostVoteState);
    }
    /**
     * Adds a reminder to {@link Pad#element}.
     *
     * @param  {ReminderToken} reminder
     *         The reminder to add.
     * @return {Object}
     *         An object with the token and the reminder that was added.
     */

  }, {
    key: "addReminder",
    value: function addReminder(reminder) {
      var element = this.element,
          reminders = this.reminders,
          observer = this.observer,
          template = this.template;
      element.append(template.draw({
        ".js--token--wrapper": function jsTokenWrapper(element) {
          element.append(reminder.drawToken());
          element.dataset.token = "reminder";
          element.dataset.reminder = reminder.getId();
        }
      }));
      var token = element.lastElementChild;
      var info = Object.freeze({
        reminder: reminder,
        token: token
      });
      reminders.push(info);
      observer.trigger("reminder-add", info);
      return info;
    }
    /**
     * Removes the reminder from {@link Pad#element}.
     *
     * @param {ReminderToken} reminder
     *        The reminder to remove.
     */

  }, {
    key: "removeReminder",
    value: function removeReminder(reminder) {
      var reminders = this.reminders,
          observer = this.observer;
      var index = reminders.findIndex(function (info) {
        return info.reminder === reminder;
      });

      if (index < 0) {
        return;
      }

      var token = reminders[index].token;
      token.remove();

      if (!this.preserveReference) {
        reminders.splice(index, 1);
      }

      observer.trigger("reminder-remove", {
        reminder: reminder,
        token: token
      });
    }
    /**
     * Gets the {@link ReminderToken} that's associated with the given element.
     * If no match can be found, undefined is returned.
     *
     * @param  {Element} token
     *         The token element whose associated reminder data should be
     *         returned.
     * @return {ReminderToken|undefined}
     *         The matching data or undefined if no match can be found.
     */

  }, {
    key: "getReminderByToken",
    value: function getReminderByToken(token) {
      var _this$reminders$find;

      return (_this$reminders$find = this.reminders.find(function (info) {
        return info.token === token;
      })) === null || _this$reminders$find === void 0 ? void 0 : _this$reminders$find.reminder;
    }
    /**
     * A helper function for removing a reminder by the token element rather
     * than the {@link ReminderToken} instance.
     *
     * @param {Element} token
     *        The reminder element.
     */

  }, {
    key: "removeReminderByToken",
    value: function removeReminderByToken(token) {
      this.removeReminder(this.getReminderByToken(token));
    }
    /**
     * Removes all characters and tokens from {@link Pad#element} and calls
     * {@link Tokens#reset}.
     */

  }, {
    key: "reset",
    value: function reset() {
      var _this = this;

      var characters = this.characters,
          reminders = this.reminders;
      /**
       * A flag that prevents the arrays {@link Pad#characters} and
       * {@link Pad#reminders} being modified through
       * {@link Pad#removeCharacter} and {@link Pad#removeReminder}.
       * Preserving the reference allows the characters and reminders to be
       * removed with a loop and without entries being skipped.
       * @type {Boolean}
       */

      this.preserveReference = true;
      characters.forEach(function (_ref7) {
        var character = _ref7.character;

        _this.removeCharacter(character);
      });
      characters.length = 0;
      reminders.forEach(function (_ref8) {
        var reminder = _ref8.reminder;

        _this.removeReminder(reminder);
      });
      reminders.length = 0;
      this.preserveReference = false;
      this.tokens.reset();
    }
    /**
     * Helper function for executing {@link Tokens#updatePadDimensions} on
     * {@link Pad#tokens}.
     */

  }, {
    key: "updateDimensions",
    value: function updateDimensions() {
      this.tokens.updatePadDimensions();
    }
    /**
     * Helper function for executing {@link Tokens#zetZIndex} on
     * {@link Pad#tokens}.
     *
     * @param {Number} zIndex
     *        Z-index to set.
     */

  }, {
    key: "setZIndex",
    value: function setZIndex(zIndex) {
      this.tokens.setZIndex(zIndex);
    }
    /**
     * Sets the positioner that will place the tokens correctly.
     *
     * @param {Positioner} positioner
     *        Positioner that will correctly place the tokens.
     */

  }, {
    key: "setPositioner",
    value: function setPositioner(positioner) {
      this.positioner = positioner;
    }
    /**
     * Generates the co-ordinates for each of the tokens and stores them in
     * {@link Pad#coords}
     */

  }, {
    key: "generateCoords",
    value: function generateCoords() {
      this.coords = this.positioner.generateCoords();
    }
    /**
     * Works out the dimensions of {@link Par#element} in pixels.
     *
     * @return {Object}
     *         An object with width and height properties.
     */

  }, {
    key: "getPadDimensions",
    value: function getPadDimensions() {
      var _this$element$getBoun = this.element.getBoundingClientRect(),
          width = _this$element$getBoun.width,
          height = _this$element$getBoun.height;

      return {
        width: width,
        height: height
      };
    }
    /**
     * Sets {@link Pad#tokenStore}.
     *
     * @param {TokenStore}
     *        The token store.
     */

  }, {
    key: "setTokenStore",
    value: function setTokenStore(tokenStore) {
      this.tokenStore = tokenStore;
    }
    /**
     * Gets the dimensions of a token, including its drop shadow.
     *
     * @return {Object}
     *         An object with width and height properties.
     */

  }, {
    key: "getTokenDimensions",
    value: function getTokenDimensions() {
      var dimensions = {
        width: 0,
        height: 0
      };

      if (!this.tokenStore) {
        console.warn("Cannot test dimensions because tokenStore is not set");
        return dimensions;
      }

      var noCharacter = this.tokenStore.getEmptyCharacter();

      var _this$drawCharacter = this.drawCharacter(noCharacter),
          token = _this$drawCharacter.token;

      var _token$getBoundingCli = token.getBoundingClientRect(),
          tokenWidth = _token$getBoundingCli.width,
          tokenHeight = _token$getBoundingCli.height; // Add the shadow.


      var scale = Number(window.getComputedStyle(token, null).getPropertyValue("--token-size") || 1);
      var tokenCharacter = token.querySelector(".js--character");
      var styles = window.getComputedStyle(tokenCharacter, null);
      var shadowOffset = styles.getPropertyValue("--shadow-offset");
      var shadowAmount = parseFloat(shadowOffset) * scale;

      if (shadowOffset.trim().replace(/[\d\.]/g, "") === "em") {
        shadowAmount *= parseFloat(styles.getPropertyValue("font-size"));
      }

      dimensions.width = tokenWidth + shadowAmount;
      dimensions.height = tokenHeight + shadowAmount;
      this.undrawCharacter(noCharacter);
      return dimensions;
    }
    /**
     * Updates {@link Pad#positioner} with the details that have been passed in
     * before re-generating the co-ordinates.
     *
     * @param  {Object} settings
     *         Settings to use to update the positioner.
     * @param  {Boolean} [settings.container]
     *         true if the container size should be sent to the positioner.
     * @param  {Boolean} [settings.tokens]
     *         true if the token size should be sent to the positioner.
     * @param  {Number|String} [settings.total]
     *         The total number of tokens expected.
     * @param  {String} [settings.layout]
     *         The layout that should be used to position the tokens.
     * @param  {Boolean} [settings.generate = true]
     *         Whether or not to re-generate the co-ordinates.
     * @throws {ReferenceError}
     *         {@link Pad#positioner} must be set before this function is used.
     */

  }, {
    key: "updatePositioner",
    value: function updatePositioner(_ref9) {
      var container = _ref9.container,
          tokens = _ref9.tokens,
          total = _ref9.total,
          layout = _ref9.layout,
          _ref9$generate = _ref9.generate,
          generate = _ref9$generate === void 0 ? true : _ref9$generate;
      var positioner = this.positioner;

      if (!positioner) {
        throw new ReferenceError("The positioner has not been set");
      }

      if (container) {
        positioner.setContainerSize(this.getPadDimensions());
      }

      if (tokens) {
        positioner.setTokenSize(this.getTokenDimensions());
      }

      if (layout) {
        positioner.setLayout(layout);
      }

      if (total && (0,_utils_numbers_js__WEBPACK_IMPORTED_MODULE_8__.isNumeric)(total)) {
        positioner.setTotal(total);
      }

      if (generate) {
        this.generateCoords();
      }
    }
  }], [{
    key: "getToken",
    value:
    /**
     * Returns the actual character token from the given token button.
     *
     * @param  {Element} button
     *         Button whose token should be returned.
     * @return {Element}
     *         Token that was found.
     * @throws {ReferenceError}
     *         The given button must contain a token.
     */
    function getToken(button) {
      var token = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_7__.lookupOneCached)(".js--character", button);

      if (!token) {
        throw new ReferenceError("Unable to find character token");
      }

      return token;
    }
  }]);

  return Pad;
}();



/***/ }),

/***/ "./assets/js/classes/Positioner.js":
/*!*****************************************!*\
  !*** ./assets/js/classes/Positioner.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Positioner)
/* harmony export */ });
/* harmony import */ var _utils_numbers_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/numbers.js */ "./assets/js/utils/numbers.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



var Positioner = /*#__PURE__*/function () {
  /**
   * A collection of layout methods that work out the co-ordinates for tokens.
   * @type {Object}
   */
  function Positioner() {
    _classCallCheck(this, Positioner);

    this.setDefaults();
  }
  /**
   * Sets the default values for various parts.
   */


  _createClass(Positioner, [{
    key: "setDefaults",
    value: function setDefaults() {
      var topLeft = {
        width: 0,
        height: 0
      };
      this.setContainerSize(topLeft);
      this.setTokenSize(topLeft);
      this.setTotal(0);
    }
    /**
     * Sets the container size.
     *
     * @param {Object} size
     *        Container size.
     * @param {Number|String} size.width
     *        Width of the container, in pixels.
     * @param {Number|String} size.height
     *        Height of the container, in pixels.
     */

  }, {
    key: "setContainerSize",
    value: function setContainerSize(_ref) {
      var width = _ref.width,
          height = _ref.height;

      /**
       * The width of the container, in pixels.
       * @type {Number}
       */
      this.width = Number(width) || 0;
      /**
       * The height of the container, in pixels.
       * @type {Number}
       */

      this.height = Number(height) || 0;
    }
    /**
     * Sets the token size.
     *
     * @param {Object} size
     *        Token size.
     * @param {Number|String} size.width
     *        Width of the token, in pixels.
     * @param {Number|String} size.height
     *        Height of the token, in pixels.
     */

  }, {
    key: "setTokenSize",
    value: function setTokenSize(_ref2) {
      var width = _ref2.width,
          height = _ref2.height;

      /**
       * The width of the tokens, in pixels.
       * @type {Number}
       */
      this.tokenWidth = Number(width) || 0;
      /**
       * The height of the tokens, in pixels.
       * @type {Number}
       */

      this.tokenHeight = Number(height) || 0;
    }
    /**
     * Sets the total number of tokens.
     *
     * @param {Number|String}
     *        The total number of expected tokens.
     */

  }, {
    key: "setTotal",
    value: function setTotal(total) {
      /**
       * The total number of expected tokens.
       * @type {Number}
       */
      this.total = Number(total) || 0;
    }
    /**
     * Sets the layout that will be used to work out the co-ordinates of the
     * tokens.
     *
     * @param {String} layout
     *        The layout that should be used.
     */

  }, {
    key: "setLayout",
    value: function setLayout(layout) {
      this.layout = layout;
    }
    /**
     * Gets the data needed to work out the co-ordinates for the tokens.
     *
     * @return {Object}
     *         Data needed to work out the co-ordinates.
     */

  }, {
    key: "getData",
    value: function getData() {
      return Object.freeze({
        width: this.width,
        height: this.height,
        tokenWidth: this.tokenWidth,
        tokenHeight: this.tokenHeight,
        total: this.total
      });
    }
    /**
     * Generates the co-ordinates for the tokens.
     *
     * @return {Array.<Array>}
     *         Co-ordinates for the tokens.
     * @throws {ReferenceError}
     *         {@link Positioner#layout} should be a key in
     *         {@link Positioner.layouts}.
     */

  }, {
    key: "generateCoords",
    value: function generateCoords() {
      var layouts = this.constructor.layouts,
          layout = this.layout;
      var method = layouts[layout];

      if (!method) {
        throw new ReferenceError("Unrecognised layout type \"".concat(layout, "\""));
      }

      return method(this.getData());
    }
  }]);

  return Positioner;
}();

_defineProperty(Positioner, "layouts", {
  // https://stackoverflow.com/a/6972434
  ellipse: function ellipse(data) {
    var width = data.width,
        height = data.height,
        tokenWidth = data.tokenWidth,
        tokenHeight = data.tokenHeight,
        total = data.total;
    var coordinates = [];
    var radiusX = (width - tokenWidth) / 2;
    var radiusY = (height - tokenHeight) / 2;

    function dp(radians) {
      return Math.sqrt(Math.pow(radiusX * Math.sin(radians), 2) + Math.pow(radiusY * Math.cos(radians), 2));
    }

    var precision = 0.001;
    var offset = Math.PI * -0.5;
    var circ = 0;

    for (var radians = 0 + offset; radians < Math.PI * 2 + offset; radians += precision) {
      circ += dp(radians);
    }

    var nextPoint = 0;
    var run = 0;

    for (var radians = 0 + offset; radians < Math.PI * 2 + offset; radians += precision) {
      if (total * run / circ >= nextPoint) {
        nextPoint++;
        var pointX = radiusX + Math.cos(radians) * radiusX;
        var pointY = radiusY + Math.sin(radians) * radiusY;
        coordinates.push([pointX, pointY]);
      }

      run += dp(radians);
    }

    return coordinates;
  },
  diagonal: function diagonal(data) {
    var width = data.width,
        height = data.height,
        tokenWidth = data.tokenWidth,
        tokenHeight = data.tokenHeight,
        total = data.total;
    var coordinates = [];
    var xIncrement = (width - tokenWidth) / total;
    var yIncrement = (height - tokenHeight) / total;
    (0,_utils_numbers_js__WEBPACK_IMPORTED_MODULE_0__.times)(total, function (index) {
      coordinates[index] = [xIncrement * index, yIncrement * index];
    });
    return coordinates;
  },
  horizontal: function horizontal(data) {
    return Positioner.layouts.diagonal(data).map(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
          x = _ref4[0],
          y = _ref4[1];

      return [x, 0];
    });
  },
  vertical: function vertical(data) {
    return Positioner.layouts.diagonal(data).map(function (_ref5) {
      var _ref6 = _slicedToArray(_ref5, 2),
          x = _ref6[0],
          y = _ref6[1];

      return [0, y];
    });
  }
});



/***/ }),

/***/ "./assets/js/classes/ProcessList.js":
/*!******************************************!*\
  !*** ./assets/js/classes/ProcessList.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ProcessList)
/* harmony export */ });
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

/**
 * A list of processes that can be executed.
 */
var ProcessList = /*#__PURE__*/function () {
  function ProcessList() {
    _classCallCheck(this, ProcessList);

    /**
     * A list of all the processes in the list.
     * @type {Array.<Object>}
     */
    this.list = [];
  }
  /**
   * Adds an item to {@link ProcessList#list}.
   *
   * @param {Object} item
   *        Item to add.
   */


  _createClass(ProcessList, [{
    key: "add",
    value: function add(item) {
      this.list.push(item);
    }
    /**
     * Checks to see if the given item is already in {@link ProcessList#list}.
     *
     * @param  {Object} item
     *         Object to look for.
     * @return {Boolean}
     *         true if the item is already in the list, false otherwise.
     */

  }, {
    key: "has",
    value: function has(item) {
      return this.list.includes(item);
    }
    /**
     * Adds an item to {@link ProcessList#list} but only if it's not already
     * there.
     *
     * @param {Object} item
     *        Item to add.
     */

  }, {
    key: "addUnique",
    value: function addUnique(item) {
      if (!this.has(item)) {
        this.add(item);
      }
    }
    /**
     * Removes an item from {@link ProcessList#list}. If the item is not in the
     * list then no action is taken.
     *
     * @param {Object} item
     *        Item to remove.
     */

  }, {
    key: "remove",
    value: function remove(item) {
      var index = this.list.indexOf(item);

      if (index > -1) {
        this.list.splice(index, 1);
      }
    }
    /**
     * Gets the last item from {@link ProcessList#list}. If there is nothing in
     * the list then undefined is returned.
     *
     * @return {Object|undefined}
     *         Either the last item in the list or undefined.
     */

  }, {
    key: "last",
    value: function last() {
      return this.list[this.list.length - 1];
    }
    /**
     * Executes the given method on the given process. If the process doesn't
     * exist or the given method name isn't a function then no action is taken.
     *
     * @param {Object} process
     *        The process whose method should be executed.
     * @param {String} method
     *        The name of the method to execute.
     * @param {...?} args
     *        Arguments to pass to the method.
     */

  }], [{
    key: "execute",
    value: function execute(process, method) {
      if (typeof (process === null || process === void 0 ? void 0 : process[method]) === "function") {
        for (var _len = arguments.length, args = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
          args[_key - 2] = arguments[_key];
        }

        process[method].apply(process, args);
      }
    }
  }]);

  return ProcessList;
}();



/***/ }),

/***/ "./assets/js/classes/ReminderToken.js":
/*!********************************************!*\
  !*** ./assets/js/classes/ReminderToken.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ ReminderToken)
/* harmony export */ });
/* harmony import */ var _Token_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Token.js */ "./assets/js/classes/Token.js");
/* harmony import */ var _Template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Template.js */ "./assets/js/classes/Template.js");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }



/**
 * A version of {@link Token} for reminder tokens.
 * @extends Token
 */

var ReminderToken = /*#__PURE__*/function (_Token) {
  _inherits(ReminderToken, _Token);

  var _super = _createSuper(ReminderToken);

  function ReminderToken() {
    _classCallCheck(this, ReminderToken);

    return _super.apply(this, arguments);
  }

  _createClass(ReminderToken, [{
    key: "processData",
    value:
    /**
     * @inheritDoc
     */
    function processData(data) {
      // Provide some default values so that .get() methods don't worry about
      // missing data and instead worry about typos.
      return _objectSpread({
        id: "",
        text: "",
        image: "",
        characterId: "",
        characterName: "",
        isGlobal: false
      }, data);
    }
    /**
     * Draws the reminder token.
     *
     * @return {DocumentFragment}
     *         Populated token.
     */

  }, {
    key: "drawToken",
    value: function drawToken() {
      var _this$data = this.data,
          image = _this$data.image,
          text = _this$data.text,
          characterName = _this$data.characterName;
      return this.constructor.templates.token.draw({
        ".js--reminder--name": function jsReminderName(element) {
          element.textContent = characterName;
        },
        ".js--reminder--text": function jsReminderText(element) {
          element.textContent = text;
        },
        ".js--reminder--image": function jsReminderImage(element) {
          element.src = image;
        }
      });
    }
    /**
     * Draws the reminder list item.
     *
     * @return {DocumentFragment}
     *         Populated reminder list item.
     */

  }, {
    key: "drawList",
    value: function drawList() {
      var _this = this;

      var _this$data2 = this.data,
          id = _this$data2.id,
          isGlobal = _this$data2.isGlobal;
      return this.constructor.templates.list.draw({
        ".js--reminder-list--item,.js--reminder-list--button": function jsReminderListItemJsReminderListButton(element) {
          element.dataset.reminderId = id;
        },
        ".js--reminder-list--item": function jsReminderListItem(element) {
          element.classList.toggle("is-global", isGlobal);
        },
        ".js--reminder-list--button": function jsReminderListButton(element) {
          element.append(_this.drawToken());
        },
        ".js--reminder-list--checkbox": function jsReminderListCheckbox(element) {
          element.value = id;
        }
      });
    }
  }], [{
    key: "setTemplates",
    value:
    /**
     * Sets the templates that will be access when drawing views.
     *
     * @param {Object} templates
     *        A map of keys to {@link Template} instances.
     */
    function setTemplates(templates) {
      /**
       * The templates that all instances will access.
       * @type {Object}
       */
      this.templates = templates;
    }
    /**
     * A collection of all global reminders - reminders that aren't attached to
     * any character but might still be useful for play.
     * @type {Array.<ReminderToken>}
     */

  }, {
    key: "addGlobal",
    value:
    /**
     * Adds a reminder to {@link ReminderToken.global}.
     *
     * @param {ReminderToken} reminder
     *        Global reminder to add.
     */
    function addGlobal(reminder) {
      this.global.push(reminder);
    }
    /**
     * Exposes {@link ReminderToken.global}.
     *
     * @return {Array.<ReminderToken>}
     *         All global reminders.
     */

  }, {
    key: "getGlobal",
    value: function getGlobal() {
      return this.global;
    }
  }]);

  return ReminderToken;
}(_Token_js__WEBPACK_IMPORTED_MODULE_0__["default"]);

_defineProperty(ReminderToken, "global", []);



/***/ }),

/***/ "./assets/js/classes/SelectDialog.js":
/*!*******************************************!*\
  !*** ./assets/js/classes/SelectDialog.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SelectDialog)
/* harmony export */ });
/* harmony import */ var _Dialog_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _ProcessList_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ProcessList.js */ "./assets/js/classes/ProcessList.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

function _get() { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }




/**
 * A version of {@link Dialog} that handles the "Select character" dialog.
 */

var SelectDialog = /*#__PURE__*/function (_Dialog) {
  _inherits(SelectDialog, _Dialog);

  var _super = _createSuper(SelectDialog);

  /**
   * @inheritdoc
   */
  function SelectDialog(dialog) {
    var _this;

    _classCallCheck(this, SelectDialog);

    _this = _super.call(this, dialog);
    /**
     * A list of all the processes that this dialog might handle.
     * @type {ProcessList}
     */

    _this.processList = new _ProcessList_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
    return _this;
  }
  /**
   * Adds a process to {@link SelectDialog#processList} - see
   * {@link ProcessList#addUnique}.
   *
   * @param {Object} process
   *        Process to add.
   */


  _createClass(SelectDialog, [{
    key: "addProcess",
    value: function addProcess(process) {
      this.processList.addUnique(process);
    }
    /**
     * Remove a process from {@link SelectDialog#processList} - see
     * {@link ProcessList#remove}.
     *
     * @param {Object} process
     *        Process to remove.
     */

  }, {
    key: "removeProcess",
    value: function removeProcess(process) {
      this.processList.remove(process);
    }
    /**
     * @inheritdoc
     */

  }, {
    key: "addListeners",
    value: function addListeners() {
      var _this2 = this;

      _get(_getPrototypeOf(SelectDialog.prototype), "addListeners", this).call(this);

      this.dialog.addEventListener("click", function (_ref) {
        var target = _ref.target;
        var button = target.closest("[data-token-id]");

        if (!button) {
          return;
        }

        _ProcessList_js__WEBPACK_IMPORTED_MODULE_1__["default"].execute(_this2.processList.last(), "click", button.dataset.tokenId);
      });
      this.on(this.constructor.HIDE, function () {
        _ProcessList_js__WEBPACK_IMPORTED_MODULE_1__["default"].execute(_this2.processList.last(), "hide");
      });
    }
    /**
     * Gets a cached instance of {@link SelectDialog}, allowing it to act like a
     * singleton.
     *
     * @return {SelectDialog}
     *         An instance.
     */

  }], [{
    key: "get",
    value: function get() {
      return this.create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#character-list"));
    }
  }]);

  return SelectDialog;
}(_Dialog_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./assets/js/classes/SettableTitle.js":
/*!********************************************!*\
  !*** ./assets/js/classes/SettableTitle.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SettableTitle)
/* harmony export */ });
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

/**
 * Manages a title that can be set.
 */
var SettableTitle = /*#__PURE__*/function () {
  /**
   * @param  {HTMLElement} title
   *         The title element that will display normally displayed.
   * @param  {HTMLElement} input
   *         The input element that will allow the title to be set.
   * @throws {Error}
   *         `title` and `input` must exist and `input` must have a `list`.
   */
  function SettableTitle(title, input) {
    _classCallCheck(this, SettableTitle);

    /**
     * The title element that will display normally displayed.
     * @type {HTMLElement}
     */
    this.title = title;
    /**
     * The input element that will allow the title to be set.
     * @type {HTMLElement}
     */

    this.input = input;
    /**
     * The data list for {@link SettableTitle#input}.
     * @type {HTMLElement}
     */

    this.list = input.list;

    if (!this.title || !this.input || !this.list) {
      throw new Error("Settable title not properly configured");
    }
    /**
     * The form that enwraps {@link SettableTitle#input}. This element might
     * not exist.
     * @type {HTMLElement|null}
     */


    this.form = input.form;
    /**
     * The option within {@link SettableTitle#list} that displays the
     * original, starting value of the title.
     * @type {HTMLElement}
     */

    this.start = this.list.querySelector(".js--settable-title--start");
    this.start.value = title.textContent;
    /**
     * The option within {@link SettableTitle#list} that displays the
     * value that the user most recently inputted.
     * @type {HTMLElement}
     */

    this.previous = this.list.querySelector(".js--settable-title--previous");
    this.addListeners();
  }
  /**
   * Adds event listeners to key elements.
   */


  _createClass(SettableTitle, [{
    key: "addListeners",
    value: function addListeners() {
      var _this = this;

      var title = this.title,
          input = this.input,
          form = this.form;
      title.addEventListener("click", function () {
        _this.showInput();

        input.focus();
      });
      input.addEventListener("focus", function () {
        input.value = "";
      });
      input.addEventListener("blur", function () {
        _this.hideInput();

        _this.updatePrevious();
      });
      input.addEventListener("input", function () {
        _this.setTitle(input.value);

        _this.announceUpdate();
      });
      form === null || form === void 0 ? void 0 : form.addEventListener("submit", function (e) {
        e.preventDefault();
        e.stopPropagation();
        input.blur();
      });
    }
    /**
     * Checks to see if {@link SettableTitle#input} is currently visible.
     *
     * @return {Boolean}
     *         `true` if {@link SettableTitle#input} is currently visible,
     *         `false` otherwise.
     */

  }, {
    key: "isShowingInput",
    value: function isShowingInput() {
      return !this.input.hidden;
    }
    /**
     * Toggles the visibility of {@link SettableTitle#input} (and, by extension,
     * {@link SettableTitle#title}). Optionally, the visibility state can be
     * forced by passing a boolean to this function. If this function attempts
     * to set the visibility state to the same as the current state, no action
     * is taken.
     *
     * @param {Boolean} [forceState]
     *        Optional state to force. If ommitted, the visibility is simply
     *        toggled.
     */

  }, {
    key: "toggleInput",
    value: function toggleInput(forceState) {
      if (forceState === undefined) {
        forceState = !this.isShowingInput();
      }

      if (forceState === this.isShowingInput()) {
        return;
      }

      var title = this.title,
          input = this.input;
      title.hidden = forceState;
      input.hidden = !forceState;
    }
    /**
     * A helper function that makes the input visible. See
     * {@link SettableTitle#toggleInput}.
     */

  }, {
    key: "showInput",
    value: function showInput() {
      this.toggleInput(true);
    }
    /**
     * A helper function that makes the input invisible. See
     * {@link SettableTitle#toggleInput}.
     */

  }, {
    key: "hideInput",
    value: function hideInput() {
      this.toggleInput(false);
    }
    /**
     * Updates the value of {@link SettableTitle#previous} if it exists and the
     * value is not empty.
     */

  }, {
    key: "updatePrevious",
    value: function updatePrevious() {
      var input = this.input,
          previous = this.previous;

      if (previous && input.value) {
        previous.value = input.value;
      }
    }
    /**
     * Sets the text of {@link SettableTitle#title} to the given title. If the
     * given title is empty, the value returned by
     * {@link SettableTitle#getStartText} is used instead.
     *
     * @param {String} title
     *        Title to set.
     */

  }, {
    key: "setTitle",
    value: function setTitle(title) {
      this.title.textContent = title || this.getStartText();
    }
    /**
     * Exposes the current text of {@link SettableTitle#title}.
     *
     * @return {String}
     *         Current text of {@link SettableTitle#title}.
     */

  }, {
    key: "getTitle",
    value: function getTitle() {
      return this.title.textContent;
    }
    /**
     * Exposes {@link SettableTitle#form}.
     *
     * @return {HTMLElement|null}
     *         Form element.
     */

  }, {
    key: "getForm",
    value: function getForm() {
      return this.form;
    }
    /**
     * Sets the text of {@link SettableTitle#start}. If that element doesn't
     * exist then no action is taken.
     *
     * @param {String} text
     *        Starting text.
     */

  }, {
    key: "setStartText",
    value: function setStartText(text) {
      var start = this.start;

      if (start) {
        start.value = text;
      }
    }
    /**
     * Gets the text of {@link SettableTitle#start}. If that text cannot be
     * worked out, an empty string is returned.
     *
     * @return {String}
     *         Starting text.
     */

  }, {
    key: "getStartText",
    value: function getStartText() {
      var _this$start;

      return ((_this$start = this.start) === null || _this$start === void 0 ? void 0 : _this$start.value) || "";
    }
    /**
     * A function that's executed whenever the value of
     * {@link SettableTitle#input} is updated.
     */

  }, {
    key: "announceUpdate",
    value: function announceUpdate() {
      return;
    }
  }]);

  return SettableTitle;
}();



/***/ }),

/***/ "./assets/js/classes/Store.js":
/*!************************************!*\
  !*** ./assets/js/classes/Store.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Store)
/* harmony export */ });
/* harmony import */ var _Token_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Token.js */ "./assets/js/classes/Token.js");
/* harmony import */ var _CharacterToken_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./CharacterToken.js */ "./assets/js/classes/CharacterToken.js");
/* harmony import */ var _InfoToken_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./InfoToken.js */ "./assets/js/classes/InfoToken.js");
/* harmony import */ var _Observer_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _utils_objects_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/objects.js */ "./assets/js/utils/objects.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }







/**
 * Stores data in localStorage so it can be quickly retrieved.
 */

var Store = /*#__PURE__*/function () {
  /**
   * Create an instance of {@link Store}. The key is the key used for
   * localStorage.
   *
   * @param {String} key
   *        Storage key.
   */
  function Store(key) {
    _classCallCheck(this, Store);

    /**
     * Storage key.
     * @type {String}
     */
    this.key = key;
    /**
     * The stored data.
     * @type {Object}
     */

    this.data = this.read();
    /**
     * All the token elements that are being remembered.
     * @type {Array.<Element>}
     */

    this.tokens = [];
    /**
     * The info tokens that have been added.
     * @type {Array.<String>}
     */

    this.infoTokens = [];
    /**
     * An observer that works behind-the-scenes to allow other code to
     * listen to changes in the store.
     */

    this.observer = new _Observer_js__WEBPACK_IMPORTED_MODULE_3__["default"]();
  }

  _createClass(Store, [{
    key: "addListener",
    value: function addListener(listener) {
      this.observer.on("written", listener);
    }
    /**
     * Writes {@link Store#data} to localStorage.
     */

  }, {
    key: "write",
    value: function write() {
      window.localStorage.setItem(this.key, JSON.stringify(this.data));
      this.observer.trigger("written", this.get());
    }
    /**
     * Reads the data from localStorage.
     *
     * @return {Object}
     *         The stored data.
     */

  }, {
    key: "read",
    value: function read() {
      return _objectSpread(_objectSpread({}, (0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_4__.deepClone)(this.constructor.defaults)), JSON.parse(window.localStorage.getItem(this.key)) || {});
    }
    /**
     * Deletes the information for the given key from {@link Store#data},
     * setting that key back to its default value.
     *
     * @param {String} key
     *        Key for the data to remove.
     */

  }, {
    key: "delete",
    value: function _delete(key) {
      var defaults = this.constructor.defaults;

      if (!Object.prototype.hasOwnProperty.call(defaults, key)) {
        return;
      }

      this.data[key] = (0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_4__.deepClone)(defaults[key]);

      if (key === "tokens") {
        this.tokens.length = 0;
        this.data.bluffs = (0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_4__.deepClone)(defaults.bluffs);
      }

      if (key === "info_tokens") {
        this.infoTokens.length = 0;
      }

      this.write();
    }
    /**
     * Restores all the data in {@link Store#data} to its default value.
     */

  }, {
    key: "deleteAll",
    value: function deleteAll() {
      var _this = this;

      Object.keys(this.constructor.defaults).forEach(function (key) {
        return _this["delete"](key);
      });
    }
    /**
     * Gets a copy of {@link Store#data} that can't be modified.
     *
     * @return {Object}
     *         The stored data.
     */

  }, {
    key: "get",
    value: function get() {
      return (0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_4__.deepFreeze)((0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_4__.deepClone)(this.data));
    }
    /**
     * Gets the results from a lookup.
     *
     * @param  {String} url
     *         URL for the lookup.
     * @return {?}
     *         The data from the URL.
     */

  }, {
    key: "getLookup",
    value: function getLookup(url) {
      return this.data.lookup[url];
    }
    /**
     * Saves the given results for the given lookup.
     *
     * @param {String} url
     *        URL that fetches information.
     * @param {?} results
     *        Results from the lookup.
     */

  }, {
    key: "setLookup",
    value: function setLookup(url, results) {
      this.data.lookup[url] = results;
      this.write();
    }
    /**
     * Stores the character list and the name of the script.
     *
     * @param {String|undefined} name
     *        Name of the script, which may be blank.
     * @param {Array.<String>} characters
     *        Array of all the character IDs that are in this script.
     * @param {String|null} game
     *        The ID of the homebrew game being used. This will be null for any
     *        game that only consists of recognised characters.
     */

  }, {
    key: "setCharacters",
    value: function setCharacters(name, characters, game) {
      var data = {
        characters: characters
      };

      if (name) {
        data.name = name;
      }

      if (game) {
        data.game = game;
      }

      this.data.characters = data;
      this.write();
    }
    /**
     * Adds a token to the store so it's existence can be remembered.
     *
     * @param {Token} token
     *        Token to add.
     */

  }, {
    key: "addToken",
    value: function addToken(token) {
      var data = this.data,
          tokens = this.tokens;
      var index = tokens.length;
      tokens.push(token);
      data.tokens[index] = {
        id: token.getId()
      };
      this.write();
      return index;
    }
    /**
     * Removes the token so it's no longer remembered.
     *
     * @param {Token} token
     *        Token to stop remembering.
     */

  }, {
    key: "removeToken",
    value: function removeToken(token) {
      var data = this.data,
          tokens = this.tokens;
      var index = tokens.indexOf(token);

      if (index < 0) {
        return;
      }

      data.tokens.splice(index, 1);
      tokens.splice(index, 1);
      this.write();
    }
    /**
     * Stores the location of the given token.
     *
     * @param {Token} token
     *        Token whose position should be stored.
     * @param {Number} left
     *        The X position of the token.
     * @param {Number} top
     *        The Y position of the token.
     * @param {Number} zIndex
     *        The Z position of the token.
     */

  }, {
    key: "moveToken",
    value: function moveToken(token, left, top, zIndex) {
      var data = this.data,
          tokens = this.tokens;
      var index = tokens.indexOf(token);

      if (index < 0) {
        index = this.addToken(token);
      }

      Object.assign(data.tokens[index], {
        left: left,
        top: top,
        zIndex: zIndex
      });
      this.write();
    }
    /**
     * Updates the Z position of the given token.
     *
     * @param {Token} token
     *        Token whose Z position should be updated.
     * @param {Number} zIndex
     *        The Z positiong of the token.
     */

  }, {
    key: "alignToken",
    value: function alignToken(token, zIndex) {
      var data = this.data,
          tokens = this.tokens;
      var index = tokens.indexOf(token);

      if (index < 0) {
        index = this.addToken(token);
      }

      data.tokens[index].zIndex = zIndex;
      this.write();
    }
    /**
     * Toggles the "dead" state of the given character.
     *
     * @param {CharacterToken} token
     *        Character whose dead state should be updated in the store.
     * @param {Boolean} isDead
     *        The dead state to store.
     */

  }, {
    key: "toggleDead",
    value: function toggleDead(token, isDead) {
      var data = this.data,
          tokens = this.tokens;
      var index = tokens.indexOf(token);

      if (index < 0) {
        return;
      }

      data.tokens[index].isDead = isDead;

      if (isDead) {
        this.setGhostVote(token, true);
      } else {
        this.write();
      }
    }
    /**
     * Toggles the "upside-down" state of the given character.
     *
     * @param {CharacterToken} token
     *        Character whose upside-down state should be updated in the store.
     * @param {Boolean} isDead
     *        The upside-down state to store.
     */

  }, {
    key: "rotate",
    value: function rotate(token, isUpsideDown) {
      var data = this.data,
          tokens = this.tokens;
      var index = tokens.indexOf(token);

      if (index < 0) {
        return;
      }

      data.tokens[index].isUpsideDown = isUpsideDown;
      this.write();
    }
    /**
     * Sets the player name for the given character.
     *
     * @param {CharacterToken} token
     *        Character whose player name should be updated in the store.
     * @param {String} name
     *        The player name of this character.
     */

  }, {
    key: "setPlayerName",
    value: function setPlayerName(token, name) {
      var data = this.data,
          tokens = this.tokens;
      var index = tokens.indexOf(token);

      if (index < 0) {
        return;
      }

      data.tokens[index].playerName = name;

      if (!data.names.includes(name)) {
        data.names.push(name);
      }

      this.write();
    }
    /**
     * Sets whether or not the given character has a ghost vote.
     *
     * @param {CharacterToken} token
     *        Character whose ghost vote should be updated in the store.
     * @param {Boolean} hasGhostVote
     *        The ghost vote state to store.
     */

  }, {
    key: "setGhostVote",
    value: function setGhostVote(token, hasGhostVote) {
      var data = this.data,
          tokens = this.tokens;
      var index = tokens.indexOf(token);

      if (index < 0) {
        return;
      }

      data.tokens[index].ghostVote = hasGhostVote;
      this.write();
    }
    /**
     * Saves the state of the given input.
     *
     * @param {Element} input
     *        Input element whose value or checked state should be saved.
     */

  }, {
    key: "saveInput",
    value: function saveInput(input) {
      var _ref = input || {},
          name = _ref.name,
          form = _ref.form,
          type = _ref.type,
          value = _ref.value,
          checked = _ref.checked,
          nodeName = _ref.nodeName;

      if (!name || type === "file") {
        return;
      }

      var selector = "".concat(nodeName.toLowerCase(), "[name=\"").concat(name, "\"]");
      var isCheckbox = type === "checkbox";

      if (isCheckbox && input.hasAttribute("value")) {
        selector += "[value=\"".concat(value, "\"]");
      }

      var formId = form === null || form === void 0 ? void 0 : form.id;

      if (formId) {
        selector = "#".concat(formId, " ").concat(selector);
      }

      this.data.inputs[selector] = isCheckbox ? checked : value;
      this.write();
    }
    /**
     * Removes all inputs from the data that don't exist. This can be useful for
     * times when a lot of inputs have been removed, such as when the list of
     * characters has changed.
     */

  }, {
    key: "removeStaleInputs",
    value: function removeStaleInputs() {
      var data = this.data;
      data.inputs = Object.fromEntries(Object.entries(data.inputs).filter(function (_ref2) {
        var _ref3 = _slicedToArray(_ref2, 1),
            selector = _ref3[0];

        return (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_5__.lookup)(selector).length;
      }));
      this.write();
    }
    /**
     * Saves information about the open/closed state of the given details
     * element.
     *
     * @param {Element} details
     *        The details element whose open/closed state should be saved.
     */

  }, {
    key: "saveDetails",
    value: function saveDetails(details) {
      var _ref4 = details || {},
          id = _ref4.id,
          open = _ref4.open;

      if (!id) {
        return;
      }

      this.data.details["#".concat(id)] = open;
      this.write();
    }
    /**
     * Adds a custom info token to the data.
     *
     * @param {InfoToken} infoToken
     *        The custom info token to save.
     */

  }, {
    key: "saveInfoToken",
    value: function saveInfoToken(infoToken, index) {
      var infoTokens = this.infoTokens,
          data = this.data;

      if (infoTokens.includes(infoToken)) {
        return;
      }

      if (typeof index === "number") {
        infoTokens[index] = infoToken;
      } else {
        infoTokens.push(infoToken);
        data.infoTokens.push(infoToken.getRaw());
      }

      this.write();
    }
    /**
     * Updates the stored data for the given info token. If the info token is
     * not recognised, no action is taken.
     *
     * @param {InfoToken} infoToken
     *        Info token whose data should be updated.
     */

  }, {
    key: "updateInfoToken",
    value: function updateInfoToken(infoToken) {
      var index = this.infoTokens.indexOf(infoToken);

      if (index > -1) {
        this.data.infoTokens[index] = infoToken.getRaw();
        this.write();
      }
    }
    /**
     * Removes the given info token from the stored data. If the info token is
     * not recognised then no action is taken.
     *
     * @param {InfoToken} infoToken
     *        Info token to be removed.
     */

  }, {
    key: "removeInfoToken",
    value: function removeInfoToken(infoToken) {
      var infoTokens = this.infoTokens,
          data = this.data;
      var index = infoTokens.indexOf(infoToken);

      if (index > -1) {
        infoTokens.splice(index, 1);
        data.infoTokens.splice(index, 1);
        this.write();
      }
    }
    /**
     * Saves the height of the pad.
     *
     * @param {String} height
     *        Height of the pad, in pixels.
     */

  }, {
    key: "setHeight",
    value: function setHeight(height) {
      this.data.height = height;
      this.write();
    }
    /**
     * Saves information about the bluffs
     *
     * @param {Object} bluffs
     *        The serialised data about the bluffs. See
     *        {@link BluffsGroup#serialise}.
     */

  }, {
    key: "setBluffs",
    value: function setBluffs(bluffs) {
      this.data.bluffs = bluffs;
      this.write();
    }
    /**
     * Saves the current version.
     *
     * @param {String} version
     *        The version number, in semver.
     */

  }, {
    key: "setVersion",
    value: function setVersion(version) {
      this.data.version = version;
      this.write();
    }
    /**
     * Exposes the currently saved version.
     *
     * @return {String}
     *         The saved version number, in semver.
     */

  }, {
    key: "getVersion",
    value: function getVersion() {
      return this.data.version;
    }
    /**
     * Sets the user ID. I use this to watch sessions and debug any errors. It
     * should be unique and contain no identifiable information.
     *
     * @param {String} user
     *        A string identifying the user.
     */

  }, {
    key: "setUser",
    value: function setUser(user) {
      this.data.user = user;
      this.write();
    }
    /**
     * Gets the user ID.
     *
     * @return {String}
     *         A string identifying the user.
     */

  }, {
    key: "getUser",
    value: function getUser() {
      return this.data.user;
    }
  }], [{
    key: "create",
    value:
    /**
     * The default, empty information from localStorage.
     * @type {Object}
     */

    /**
     * A cache of any instances created.
     * @type {Object}
     */

    /**
     * Creates an instance of {@link Store} and stores it in {@link Store.cache}
     * so that it can be retrieved later. If an instance already exists for the
     * given key, it's returned intead of beaing created anew.
     *
     * @param  {String} key
     *         Storage key.
     * @return {Store}
     *         Store instance.
     */
    function create(key) {
      var cache = this.cache;

      if (!cache[key]) {
        cache[key] = new this(key);
      }

      return cache[key];
    }
  }]);

  return Store;
}();

_defineProperty(Store, "defaults", {
  lookup: {},
  characters: {},
  bluffs: {},
  tokens: [],
  inputs: {},
  details: {},
  infoTokens: [],
  names: [],
  height: "",
  version: "",
  user: ""
});

_defineProperty(Store, "cache", Object.create(null));



/***/ }),

/***/ "./assets/js/classes/Template.js":
/*!***************************************!*\
  !*** ./assets/js/classes/Template.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Template)
/* harmony export */ });
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }


/**
 * A class that helps work with templates.
 */

var Template = /*#__PURE__*/function () {
  /**
   * @param {Element} template
   *        Template element.
   */
  function Template(template) {
    _classCallCheck(this, Template);

    /**
     * Template element.
     * @type {Element}
     */
    this.template = template;
  }
  /**
   * Clones the contents in {@link Template#template} and populates it based
   * on the information given.
   *
   * The population is an array of arrays. Each inner array has 2 or 3 items:
   * 0: A CSS selector identifying the parts of the template to populate.
   * 1: The contents that should be added to anything matching the selector.
   * 2: A function that takes the element and content and describes how to
   *    populate that content. If ommitted, {@link Template.setText} is used.
   *
   * @param  {Object} populates
   *         An object of selectors to the functions that will populate the
   *         matching elements.
   * @return {DocumentFragment}
   *         The populated template.
   */


  _createClass(Template, [{
    key: "draw",
    value: function draw(populates) {
      var clone = this.template.content.cloneNode(true);
      Object.entries(populates).forEach(function (_ref) {
        var _ref2 = _slicedToArray(_ref, 2),
            selector = _ref2[0],
            populate = _ref2[1];

        (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_0__.lookup)(selector, clone).forEach(function (element) {
          return populate(element);
        });
      });
      return clone;
    }
  }], [{
    key: "create",
    value:
    /**
     * A cache of the template IDs to {@link Template} instances.
     * @type {Object}
     */

    /**
     * A function that creates an instance of {@link Template} but also saves it
     * in {@link Template.cache} so that it can be accessed again. If the
     * instance already exists, it is returned instead of being re-created.
     *
     * @param  {Element} template
     *         Template element that the instance should help work with.
     * @return {Template}
     *         Template instance.
     */
    function create(template) {
      var cache = this.cache;
      var key = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_0__.identify)(template);

      if (!cache[key]) {
        cache[key] = new this(template);
      }

      return cache[key];
    }
  }]);

  return Template;
}();

_defineProperty(Template, "cache", Object.create(null));



/***/ }),

/***/ "./assets/js/classes/Token.js":
/*!************************************!*\
  !*** ./assets/js/classes/Token.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Token)
/* harmony export */ });
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

/**
 * An abstract class designed for working with the token data. This class has
 * magic methods, starting with "get", that access information from the data.
 * @abstract
 */
var Token = /*#__PURE__*/function () {
  /**
   * @param {Object} data
   *        Data to access.
   */
  function Token(data) {
    _classCallCheck(this, Token);

    /**
     * The data to access.
     * @type {Object}
     */
    this.data = this.processData(data);
    this.setup();
    var constructor = this.constructor;
    return new Proxy(this, {
      get: function get(target, property) {
        if (!(property in target) && property.startsWith("get")) {
          target[property] = function () {
            return target.getData(constructor.convertProperty(property));
          };
        }

        return target[property];
      }
    });
  }
  /**
   * A function called before the magic methods are created, allowing
   * sub-classes to adjust the setup.
   */


  _createClass(Token, [{
    key: "setup",
    value: function setup() {
      return;
    }
    /**
     * Processes the data. This method mainly exists so that it can be easily
     * modified in sub-classes.
     *
     * @param  {Object} data
     *         Original data.
     * @return {Object}
     *         Processed data.
     */

  }, {
    key: "processData",
    value: function processData(data) {
      return data;
    }
    /**
     * Creates a new instance of {@link Token} with the same data.
     *
     * @return {Token}
     *         A cloned instance.
     */

  }, {
    key: "clone",
    value: function clone() {
      return new this.constructor(this.data);
    }
    /**
     * Checks to see if the key exists within the data.
     *
     * @param  {String} key
     *         Key for the data to check for.
     * @return {Boolean}
     *         true if the data has the given key, false if it doesn't.
     */

  }, {
    key: "hasData",
    value: function hasData(key) {
      return Object.prototype.hasOwnProperty.call(this.data, key);
    }
    /**
     * Gets the key from {@link Template#data} and returns the value.
     *
     * @param  {String} key
     *         Key for the data to access.
     * @return {?}
     *         Corresponding data.
     * @throws {ReferenceError}
     *         The given key must exist in {@link Token#data}.
     */

  }, {
    key: "getData",
    value: function getData(key) {
      if (!this.hasData(key)) {
        throw new ReferenceError("Unrecognised property \"".concat(key, "\""));
      }

      return this.data[key];
    }
    /**
     * Returns a clone of {@link Token#data}, although any Symbol that was added
     * will be missing.
     *
     * @return {Object}
     *         Cloned data.
     */

  }, {
    key: "getAllData",
    value: function getAllData() {
      return JSON.parse(JSON.stringify(this.data));
    }
  }], [{
    key: "convertProperty",
    value:
    /**
     * Helper function that converts a property into a data key. For example,
     * "getLoremIpsum" is converted into "loremIpsum".
     *
     * @param  {String} property
     *         Property to convert.
     * @return {String}
     *         Converted property.
     */
    function convertProperty(property) {
      var clipped = property.replace(/^get/, "");
      return clipped.charAt(0).toLowerCase() + clipped.slice(1);
    }
  }]);

  return Token;
}();



/***/ }),

/***/ "./assets/js/classes/TokenDialog.js":
/*!******************************************!*\
  !*** ./assets/js/classes/TokenDialog.js ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ TokenDialog)
/* harmony export */ });
/* harmony import */ var _Dialog_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _TokenStore_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _Template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _CharacterToken_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./CharacterToken.js */ "./assets/js/classes/CharacterToken.js");
/* harmony import */ var _SettableTitle_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SettableTitle.js */ "./assets/js/classes/SettableTitle.js");
/* harmony import */ var _Draggable_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Draggable.js */ "./assets/js/classes/Draggable.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

function _get() { if (typeof Reflect !== "undefined" && Reflect.get) { _get = Reflect.get; } else { _get = function _get(target, property, receiver) { var base = _superPropBase(target, property); if (!base) return; var desc = Object.getOwnPropertyDescriptor(base, property); if (desc.get) { return desc.get.call(arguments.length < 3 ? target : receiver); } return desc.value; }; } return _get.apply(this, arguments); }

function _superPropBase(object, property) { while (!Object.prototype.hasOwnProperty.call(object, property)) { object = _getPrototypeOf(object); if (object === null) break; } return object; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, "prototype", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } else if (call !== void 0) { throw new TypeError("Derived constructors may only return object or undefined"); } return _assertThisInitialized(self); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }








/**
 * A version of {@link Dialog} that shows one or more tokens, probably to the
 * player.
 */

var TokenDialog = /*#__PURE__*/function (_Dialog) {
  _inherits(TokenDialog, _Dialog);

  var _super = _createSuper(TokenDialog);

  /**
   * @inheritdoc
   */
  function TokenDialog(dialog) {
    var _this;

    _classCallCheck(this, TokenDialog);

    _this = _super.call(this, dialog);
    /**
     * The token store that keeps information about the tokens.
     * @type {TokenStore}
     */

    _this.tokenStore = null;
    /**
     * The template for one token.
     * @type {Template}
     */

    _this.entryTemplate = null;
    return _this;
  }
  /**
   * @inheritdoc
   */


  _createClass(TokenDialog, [{
    key: "run",
    value: function run() {
      this.setIds([]);
      this.discoverElements();
      this.activateSettableTitle();
      this.activateDraggable();

      _get(_getPrototypeOf(TokenDialog.prototype), "run", this).call(this);
    }
    /**
     * @inheritdoc
     */

  }, {
    key: "addListeners",
    value: function addListeners() {
      var _this2 = this;

      _get(_getPrototypeOf(TokenDialog.prototype), "addListeners", this).call(this);

      var _this$constructor = this.constructor,
          SHOW = _this$constructor.SHOW,
          HIDE = _this$constructor.HIDE,
          dialog = this.dialog;
      this.on(SHOW, function () {
        return _this2.drawCharacters();
      });
      this.on(HIDE, function () {
        return _this2.setMultipleTitle("");
      });
      dialog.addEventListener("click", function (_ref) {
        var target = _ref.target;
        var removeButton = target.closest(".js--token--remove");
        var removeItem = removeButton === null || removeButton === void 0 ? void 0 : removeButton.closest(".js--token--item");

        if (removeItem) {
          _this2.removeIdByIndex((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.getIndex)(removeItem));

          _this2.drawCharacters();
        }
      });
    }
    /**
     * Discovered elements, storing them on the instance so they can be
     * referenced by other methods without having to be found again.
     */

  }, {
    key: "discoverElements",
    value: function discoverElements() {
      var dialog = this.dialog;
      /**
       * The element that contains all the token renderings.
       * @type {Element}
       */

      this.holder = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOne)(".js--token--holder", dialog);
    }
    /**
     * Activates the {@link SettableTitle} class so that the title of the dialog
     * can be changed.
     */

  }, {
    key: "activateSettableTitle",
    value: function activateSettableTitle() {
      var dialog = this.dialog;
      /**
       * A class that allows the title of the dialog to be set.
       */

      this.settableTitle = new _SettableTitle_js__WEBPACK_IMPORTED_MODULE_4__["default"](dialog.querySelector(".js--settable-title--title"), dialog.querySelector(".js--settable-title--input"));
    }
    /**
     * Activates the {@link Draggable} class so tokens within this dialog can be
     * dragged and re-ordered.
     */

  }, {
    key: "activateDraggable",
    value: function activateDraggable() {
      /**
       * A class that enables the dragging and re-ordering of tokens.
       * @type {Draggable}
       */
      this.draggable = new _Draggable_js__WEBPACK_IMPORTED_MODULE_5__["default"](this.holder);
    }
    /**
     * Adds a token ID to {@link TokenDialog#ids}. The ID does not need to be
     * unique.
     *
     * @param {String} id
     *        ID to add.
     */

  }, {
    key: "addId",
    value: function addId(id) {
      this.ids.push(id);
    }
    /**
     * Removes all IDs from {@link TokenDialog#ids} that match the given ID.
     *
     * @param {String}
     *        ID to remove.
     */

  }, {
    key: "removeId",
    value: function removeId(id) {
      this.ids = this.ids.filter(function (existingId) {
        return existingId !== id;
      });
    }
    /**
     * Removes the ID from {@link TokenDialog#ids} that's at the given index.
     *
     * @param {Number} index
     *        Index that should be removed from the IDs. If the index is less
     *        than 0, no action is taken.
     */

  }, {
    key: "removeIdByIndex",
    value: function removeIdByIndex(index) {
      if (index < 0) {
        return;
      }

      this.ids.splice(index, 1);
    }
    /**
     * Sets {@link TokenDialog#ids}.
     *
     * @param {Array.<String>} ids
     *        IDs to set. This may be an empty array.
     */

  }, {
    key: "setIds",
    value: function setIds(ids) {
      /**
       * A list of all the token IDs that will be displayed when the dialog
       * shows.
       * @type {Array.<String>}
       */
      this.ids = ids;
    }
    /**
     * Gets a copy of {@link TokenDialog#ids}. Modifying the copy does not
     * affect the original.
     *
     * @return {Array.<String>}
     *         Copy of the IDs.
     */

  }, {
    key: "getIds",
    value: function getIds() {
      return _toConsumableArray(this.ids);
    }
    /**
     * Sets {@link TokenDialog#tokenStore}.
     *
     * @param {TokenStore} tokenStore
     *        The token store.
     */

  }, {
    key: "setTokenStore",
    value: function setTokenStore(tokenStore) {
      this.tokenStore = tokenStore;
    }
    /**
     * Sets {@link TokenDialog#entryTemplate}.
     *
     * @param {Template} entryTemplate
     *        The template.
     */

  }, {
    key: "setEntryTemplate",
    value: function setEntryTemplate(entryTemplate) {
      this.entryTemplate = entryTemplate;
    }
    /**
     * Gets a {@link CharacterToken} for each ID in {@link TokenDialog#ids}.
     *
     * @return {Array.<CharacterToken>}
     *         Characters that this dialog should show.
     */

  }, {
    key: "getCharacters",
    value: function getCharacters() {
      var tokenStore = this.tokenStore;

      if (!tokenStore) {
        throw new Error("tokenStore has not been set");
      }

      return this.ids.map(function (id) {
        return tokenStore.getCharacter(id);
      });
    }
    /**
     * Gets the title text to display when there is more than one character
     * being displayed.
     *
     * @return {String}
     *         The title for multiple characters.
     */

  }, {
    key: "getMultipleTitle",
    value: function getMultipleTitle() {
      var _this$settableTitle$g;

      return this.multipleTitle || ((_this$settableTitle$g = this.settableTitle.getForm()) === null || _this$settableTitle$g === void 0 ? void 0 : _this$settableTitle$g.dataset.multiple) || "";
    }
    /**
     * Sets {@link TokenDialog#multipleTitle}.
     *
     * @param {String} multipleTitle
     *        The text to display when there are multiple characters to show.
     */

  }, {
    key: "setMultipleTitle",
    value: function setMultipleTitle(multipleTitle) {
      /**
       * The text to show when there are multiple characters being displayed.
       * @type {String}
       */
      this.multipleTitle = multipleTitle;
    }
    /**
     * Displays all the characters in the dialog.
     *
     * @throws {Error}
     *         {@link TokenDialog#entryTemplate} must be set.
     */

  }, {
    key: "drawCharacters",
    value: function drawCharacters() {
      var _characters$;

      var holder = this.holder,
          settableTitle = this.settableTitle,
          draggable = this.draggable,
          entryTemplate = this.entryTemplate;

      if (!entryTemplate) {
        throw new Error("entryTemplate has not been set");
      }

      var characters = this.getCharacters();
      var isMultiple = characters.length > 1;
      draggable.removeAllChildren();
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.replaceContentsMany)(holder, characters.map(function (character) {
        return entryTemplate.draw({
          ".js--token--show": function jsTokenShow(element) {
            element.append(character.drawToken());
          },
          ".js--token--ability": function jsTokenAbility(element) {
            element.textContent = character.getAbility();
            element.hidden = isMultiple;
          }
        });
      }));
      var titleText = isMultiple ? this.getMultipleTitle() : ((_characters$ = characters[0]) === null || _characters$ === void 0 ? void 0 : _characters$.getName()) || "";
      settableTitle.setStartText(titleText);
      settableTitle.setTitle(titleText);
      holder.classList.toggle("is-multiple", isMultiple);

      if (isMultiple) {
        holder.querySelectorAll(".js--token--item").forEach(function (child) {
          draggable.addChild(child);
        });
      }
    }
  }], [{
    key: "get",
    value:
    /**
     * Gets a cached instance of {@link TokenDialog}, allowing it to act like a
     * singleton.
     *
     * @return {TokenDialog}
     *         An instance.
     */
    function get() {
      return this.create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOneCached)("#token"));
    }
  }]);

  return TokenDialog;
}(_Dialog_js__WEBPACK_IMPORTED_MODULE_0__["default"]);



/***/ }),

/***/ "./assets/js/classes/TokenStore.js":
/*!*****************************************!*\
  !*** ./assets/js/classes/TokenStore.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ TokenStore)
/* harmony export */ });
/* harmony import */ var _CharacterToken_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./CharacterToken.js */ "./assets/js/classes/CharacterToken.js");
/* harmony import */ var _ReminderToken_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./ReminderToken.js */ "./assets/js/classes/ReminderToken.js");
/* harmony import */ var _Jinx_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Jinx.js */ "./assets/js/classes/Jinx.js");
/* harmony import */ var _utils_promises_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/promises.js */ "./assets/js/utils/promises.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }





/**
 * Manages all the data for all the tokens, allowing instances of
 * {@link CharacterToken} and {@link ReminderToken} whenever needed.
 */

var TokenStore = /*#__PURE__*/function () {
  /**
   * @param {Object} data
   *        Data to store.
   * @param {Array.<Object>} data.characters
   *        Character data.
   * @param {Array.<Object>} data.reminders
   *        Data for reminders that aren't attached to any character.
   * @param {Array.<Object>} data.jinxes
   *        Jinx data.
   */
  function TokenStore(_ref) {
    var _this = this;

    var characters = _ref.characters,
        reminders = _ref.reminders,
        jinxes = _ref.jinxes;

    _classCallCheck(this, TokenStore);

    /**
     * A list of all the {@link CharacterToken} instances.
     * @type {Object}
     */
    this.characters = Object.create(null);
    /**
    * A list of all the {@link ReminderToken} instances.
    * @type {Object}
     */

    this.reminders = Object.create(null);
    characters.forEach(function (character) {
      return _this.createCharacter(character);
    });
    reminders === null || reminders === void 0 ? void 0 : reminders.forEach(function (reminder, index) {
      _ReminderToken_js__WEBPACK_IMPORTED_MODULE_1__["default"].addGlobal(_this.createReminder(reminder, index));
    });
    /**
     * A collection of all jinxes.
     * @type {Array.<Jinx>}
     */

    this.jinxes = []; // Add all jines but leave them theoretical.

    jinxes.forEach(function (_ref2) {
      var id = _ref2.id,
          jinx = _ref2.jinx;

      var character = _this.getCharacter(id);

      if (!character) {
        return;
      }

      jinx.forEach(function (trick) {
        var trickCharacter = _this.getCharacter(trick.id);

        if (!trickCharacter) {
          return;
        }

        var newJinx = new _Jinx_js__WEBPACK_IMPORTED_MODULE_2__["default"](trickCharacter, trick.reason);
        character.addJinx(newJinx);

        _this.jinxes.push(newJinx);
      });
    });
  }
  /**
   * Creates a {@link CharacterToken} instance for the given data and stores
   * it in {@link TokenStore#characters} before returning it.
   *
   * @param  {Object} data
   *         Character data.
   * @return {CharacterToken}
   *         CharacterToken instance for the data.
   */


  _createClass(TokenStore, [{
    key: "createCharacter",
    value: function createCharacter(data) {
      var _this2 = this;

      var name = data.name,
          image = data.image,
          _data$reminders = data.reminders,
          reminders = _data$reminders === void 0 ? [] : _data$reminders,
          _data$remindersGlobal = data.remindersGlobal,
          remindersGlobal = _data$remindersGlobal === void 0 ? [] : _data$remindersGlobal;
      var id = this.constructor.normaliseId(data.id);
      var character = new _CharacterToken_js__WEBPACK_IMPORTED_MODULE_0__["default"](data);
      reminders.concat(remindersGlobal).forEach(function (text, index) {
        character.addReminder(_this2.createReminder({
          id: id,
          name: name,
          image: image,
          text: text,
          isGlobal: remindersGlobal.includes(text)
        }, index));
      });
      this.characters[id] = character;
      return character;
    }
    /**
     * Creates a {@link CharacterToken} for a custom character by passing the
     * data to {@link TokenStore#createCharacter} but with a flag denoting the
     * fact that it's custom.
     *
     * @param  {Object} data
     *         Character data.
     * @return {CharacterToken}
     *         CharacterToken instance for the data.
     */

  }, {
    key: "createCustomCharacter",
    value: function createCustomCharacter(data) {
      return this.createCharacter(_objectSpread(_defineProperty({}, _CharacterToken_js__WEBPACK_IMPORTED_MODULE_0__["default"].custom, true), data));
    }
    /**
     * Creates a {@link ReminderToken} instance for the given data and stores
     * it in {@link TokenStore#reminders} before returning it.
     *
     * @param  {Object} data
     *         Reminder data.
     * @param  {Number} index
     *         The index of this reminder - used to identify the reminder while
     *         still allowing for localisation.
     * @return {ReminderToken}
     *         ReminderToken instance for the data.
     */

  }, {
    key: "createReminder",
    value: function createReminder(data, index) {
      var name = data.name,
          text = data.text,
          image = data.image,
          isGlobal = data.isGlobal;
      var id = this.constructor.normaliseId(data.id);
      var reminderId = "".concat(id, ":").concat(index).toLowerCase().replace(/\s+/g, "-");
      var reminder = new _ReminderToken_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
        text: text,
        image: image,
        isGlobal: isGlobal,
        id: reminderId,
        characterId: id,
        characterName: name
      });
      this.reminders[reminderId] = reminder;
      return reminder;
    }
    /**
     * Gets the character for the given ID.
     *
     * @param  {String} id
     *         ID of the character to get.
     * @return {CharacterToken|undefined}
     *         The matching instance or undefined if the character isn't found.
     */

  }, {
    key: "getCharacter",
    value: function getCharacter(id) {
      return this.characters[this.constructor.normaliseId(id)];
    }
    /**
     * Gets the character for the given ID, the same as
     * {@link TokenStore#getCharacter}, but if the character is custom then
     * undefined is returned.
     *
     * @param  {String} id
     *         ID of the character to get.
     * @return {CharacterToken|undefined}
     *         The matching instance or undefined if the character isn't found.
     */

  }, {
    key: "getOfficialCharacter",
    value: function getOfficialCharacter(id) {
      var character = this.getCharacter(id);

      if (character !== null && character !== void 0 && character.isCustom()) {
        return undefined;
      }

      return character;
    }
    /**
     * Gets a clone of the character for the given ID.
     *
     * @param  {String} id
     *         ID of the character to get.
     * @return {CharacterToken}
     *         A clone of the matching instance.
     * @throws {ReferenceError}
     *         The id must match an existing character.
     */

  }, {
    key: "getCharacterClone",
    value: function getCharacterClone(id) {
      var character = this.getCharacter(id);

      if (!character) {
        throw new ReferenceError("Unable to find \"".concat(id, "\" character"));
      }

      return character.clone();
    }
    /**
     * Gets an array of all characters.
     *
     * @return {Array.<CharacterToken>}
     *         Collection of all characters.
     */

  }, {
    key: "getAllCharacters",
    value: function getAllCharacters() {
      return Object.values(this.characters);
    }
    /**
     * Returns an empty character.
     *
     * @return {CharacterToken}
     *         A clone of an empty character.
     */

  }, {
    key: "getEmptyCharacter",
    value: function getEmptyCharacter() {
      return this.getCharacterClone(this.constructor.EMPTY);
    }
    /**
     * Gets the reminder for the given ID.
     *
     * @param  {String} id
     *         ID of the reminder to get.
     * @return {ReminderToken|undefined}
     *         The matching instance or undefined if the reminder isn't found.
     */

  }, {
    key: "getReminder",
    value: function getReminder(id) {
      return this.reminders[id];
    }
    /**
     * Gets a clone of the reminder for the given ID.
     *
     * @param  {String} id
     *         ID of the reminder to get.
     * @return {ReminderToken}
     *         A clone of the matching instance.
     * @throws {ReferenceError}
     *         The id must match an existing reminder.
     */

  }, {
    key: "getReminderClone",
    value: function getReminderClone(id) {
      var reminder = this.getReminder(id);

      if (!reminder) {
        throw new ReferenceError("Unable to find the \"".concat(id, "\" reminder"));
      }

      return reminder.clone();
    }
    /**
     * Gets an array of all reminders.
     *
     * @return {Array.<ReminderToken>}
     *         Collection of all reminders.
     */

  }, {
    key: "getAllReminders",
    value: function getAllReminders() {
      return Object.values(this.reminders);
    }
    /**
     * Gets an array of all the jinxes.
     *
     * @return {Array.<Jinx>}
     *         Collection of all jinxes.
     */

  }, {
    key: "getAllJinxes",
    value: function getAllJinxes() {
      return this.jinxes;
    }
    /**
     * Adds a jinx to {@link TokenStore#jinxes}.
     *
     * @param {Jinx} jinx
     *        Jinx to add.
     */

  }, {
    key: "addJinx",
    value: function addJinx(jinx) {
      this.jinxes.push(jinx);
    }
    /**
     * Gets all the homebrew jinxes that have been registered.
     *
     * @return {Array.<Jinx>}
     *         Collection of all homebrew jinxes.
     */

  }, {
    key: "getAllHomebrewJinxes",
    value: function getAllHomebrewJinxes() {
      return this.jinxes.filter(function (jinx) {
        return jinx.getIsHomebrew();
      });
    }
    /**
     * Removes all the homebrew jinxes from {@link TokenStore#jinxes}.
     */

  }, {
    key: "removeAllHomebrewJinxes",
    value: function removeAllHomebrewJinxes() {
      this.jinxes = this.jinxes.filter(function (jinx) {
        return !jinx.getIsHomebrew();
      });
    }
  }], [{
    key: "EMPTY",
    get:
    /**
     * An ID that will only match an empty character.
     * @type {String}
     */
    function get() {
      return "";
    }
    /**
     * The promise that resolves when the tokens data is loaded.
     * @type {Promise}
     */

  }, {
    key: "create",
    value:
    /**
     * Resolves {@link TokenStore.promise} with an instance of
     * {@link TokenStore} that has the data passed to it.
     *
     * @param  {Array.<Object>} data
     *         Data for the characters.
     * @return {Promise}
     *         The promise that resolves with an instance of {@link TokenStore}.
     */
    function create(data) {
      return this.promise.resolve(new this(data));
    }
    /**
     * Exposes {@link TokenStore.promise}.
     *
     * @return {Promise}
     *         The promise that can be resolved.
     */

  }, {
    key: "get",
    value: function get() {
      return this.promise;
    }
    /**
     * Checks to see if the given ID looks like it's the ID for a character or
     * not.
     *
     * @param  {String} id
     *         ID to check.
     * @return {Boolean}
     *         true if the ID looks like a character id, false if it doesn't.
     */

  }, {
    key: "isCharacterId",
    value: function isCharacterId(id) {
      return !this.isReminderId(id);
    }
    /**
     * Checks to see if the given ID looks like it's the ID for a reminder or
     * not.
     *
     * @param  {String} id
     *         ID to check.
     * @return {Boolean}
     *         true if the ID looks like a reminder id, false if it doesn't.
     */

  }, {
    key: "isReminderId",
    value: function isReminderId(id) {
      return /:\d+$/.test(id);
    }
    /**
     * The script tool used to create IDs with a slightly different format from
     * our version. This function converts the old ID format into our one.
     * Examples: was = lil_monsta, now = lilmonsta
     * Examples: was = al-hadikhia, now = alhadikhia
     *
     * @param  {String} id
     *         Character ID.
     * @return {String}
     *         Correctly formatted character ID.
     */

  }, {
    key: "normaliseId",
    value: function normaliseId(id) {
      return id.replace(/[-_]/g, "").toLowerCase();
    }
    /**
     * Executes the given function when {@link TokenStore.promise} has resolved.
     * Be aware that this is always asynchronous.
     *
     * @param  {Function} handler
     *         Function to execute when the promise resolves. It's passed an
     *         instance of {@link TokenStore}.
     * @return {Promise}
     *         The promise that has resolved.
     */

  }, {
    key: "ready",
    value: function ready(handler) {
      return this.get().then(handler);
    }
  }]);

  return TokenStore;
}();

_defineProperty(TokenStore, "promise", (0,_utils_promises_js__WEBPACK_IMPORTED_MODULE_3__.defer)());



/***/ }),

/***/ "./assets/js/classes/Tokens.js":
/*!*************************************!*\
  !*** ./assets/js/classes/Tokens.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ Tokens)
/* harmony export */ });
/* harmony import */ var _Observer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _utils_numbers_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/numbers.js */ "./assets/js/utils/numbers.js");
/* harmony import */ var _utils_functions_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/functions.js */ "./assets/js/utils/functions.js");
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, "prototype", { writable: false }); return Constructor; }




/**
 * Handles the tokens being draggable.
 */

var Tokens = /*#__PURE__*/function () {
  /**
   * @param {Element} pad
   *        The pad that the tokens are dragged around within.
   * @param {Observer} observer
   *        An observer that triggers events at key times.
   */
  function Tokens(pad, observer) {
    _classCallCheck(this, Tokens);

    /**
     * The pad that thte tokens are in.
     * @type {Element}
     */
    this.pad = pad;
    /**
     * An observer that triggers events at key times.
     * @type {Observer}
     */

    this.observer = observer;
    this.reset();
    this.updatePadDimensions();
    this.addListeners();
  }
  /**
   * Resets some key properties.
   */


  _createClass(Tokens, [{
    key: "reset",
    value: function reset() {
      /**
       * The current z-index. By constantly increasing this, we can always put
       * the most recently touched token on the top, allowing reminders to sit
       * on top of characters, for example.
       * @type {Number}
       */
      this.zIndex = 0;
      /**
       * The handler to be executed when dragging a token or reminder.
       * @type {Function}
       */

      this.dragHandler = _utils_functions_js__WEBPACK_IMPORTED_MODULE_2__.noop;
      /**
       * A flag for knowing whether the user intention is dragging or
       * clicking. This only seems to be neeed for the desktop.
       * @type {Boolean}
       */

      this.isDragging = false;
      /**
       * The horizontal offset for the token being dragged.
       * @type {Number}
       */

      this.xOffset = 0;
      /**
       * The vertical offset for the token being dragged.
       * @type {Number}
       */

      this.yOffset = 0;
    }
    /**
     * Updates the record of the dimensions of {@link Tokens#pad}.
     */

  }, {
    key: "updatePadDimensions",
    value: function updatePadDimensions() {
      var rect = this.pad.getBoundingClientRect();
      /**
       * The offset left of {@link Token#pad}.
       * @type {Number}
       */

      this.padLeft = rect.left;
      /**
       * The offset top of {@link Token#pad}.
       * @type {Number}
       */

      this.padTop = rect.top;
      /**
       * The width of {@link Token#pad}.
       * @type {Number}
       */

      this.padWidth = rect.width;
      /**
       * The height of {@link Token#pad}.
       * @type {Number}
       */

      this.padHeight = rect.height;
    }
    /**
     * Adds event listeners to key elements.
     */

  }, {
    key: "addListeners",
    value: function addListeners() {
      var _this = this;

      document.addEventListener("mousedown", this);
      document.addEventListener("touchstart", this);
      document.addEventListener("mouseup", this);
      document.addEventListener("touchend", this);
      document.addEventListener("click", this);
      document.addEventListener("contextmenu", this);
      window.addEventListener("resize", this);
      window.addEventListener("scroll", this);
      var styleObserver = new MutationObserver(function () {
        _this.updatePadDimensions();
      });
      styleObserver.observe(this.pad, {
        attributes: true,
        attributeFilter: ["style"]
      });
    }
    /**
     * Set the zIndex value.
     *
     * @param {Number} zindex
     *        Z-index to set.
     */

  }, {
    key: "setZIndex",
    value: function setZIndex(zIndex) {
      this.zIndex = zIndex;
    }
    /**
     * Exposes {@link Tokens#zIndex}.
     *
     * @return {Number}
     *         The current value of {@link Tokens#zIndex}.
     */

  }, {
    key: "getZIndex",
    value: function getZIndex() {
      return this.zIndex;
    }
    /**
     * Increases {@link Tokens#zIndex} before returning it.
     *
     * @return {Number}
     *         The next value of {@link Tokens#zIndex}.
     */

  }, {
    key: "advanceZIndex",
    value: function advanceZIndex() {
      this.zIndex += 1;
      return this.zIndex;
    }
    /**
     * Works out the event being heard and executes the correct handler.
     *
     * @param {Event} e
     *        The event that has been heard.
     */

  }, {
    key: "handleEvent",
    value: function handleEvent(e) {
      var _this2 = this;

      var target = e.target;
      var token = typeof target.closest === "function" ? target.closest(".js--token--wrapper") : null;
      var scollHandler = (0,_utils_functions_js__WEBPACK_IMPORTED_MODULE_2__.rafThrottle)(function (e) {
        return _this2.onScroll(e);
      });

      switch (e.type) {
        case "mousedown":
        case "touchstart":
          this.onMousedown(token, e);
          break;

        case "mouseup":
        case "touchend":
        case "contextmenu":
          this.onMouseup(e);
          break;

        case "click":
          this.onClick(token, e);
          break;

        case "resize":
          this.onResize(e);
          break;

        case "scroll":
          scollHandler(e);
          break;
      }
    }
    /**
     * Handles a mouse down or touch start event.
     *
     * @param {Element} token
     *        The token that has been touched.
     * @param {Event} e
     *        The event.
     */

  }, {
    key: "onMousedown",
    value: function onMousedown(token, e) {
      if (!token) {
        return;
      }

      this.startDrag(token, e);
      var zIndex = this.advanceZIndex();
      token.style.setProperty("--z-index", zIndex);
      this.observer.trigger("zindex", {
        zIndex: zIndex,
        element: token
      });
    }
    /**
     * Handles a mouse up or touch end event.
     *
     * @param {Event} e
     *        The event.
     */

  }, {
    key: "onMouseup",
    value: function onMouseup(e) {
      this.endDragging();
    }
    /**
     * Handles a click event.
     *
     * @param {Element} token
     *        The token that has been touched.
     * @param {Event} e
     *        The event.
     */

  }, {
    key: "onClick",
    value: function onClick(token, e) {
      if (!token || this.isDragging) {
        return;
      }

      var type = token.closest("[data-token]");
      var tokenType = type.dataset.token; // character-click or reminder-click event.

      this.observer.trigger("".concat(tokenType, "-click"), {
        element: type
      });
    }
    /**
     * Handles a resize event.
     *
     * @param {Event} e
     *        The event.
     */

  }, {
    key: "onResize",
    value: function onResize(e) {
      this.updatePadDimensions();
    }
    /**
     * Handles a scroll event.
     *
     * @param {Event} e
     *        The event.
     */

  }, {
    key: "onScroll",
    value: function onScroll(e) {
      this.updatePadDimensions();
    }
    /**
     * Handles the dragging being started.
     *
     * @param {Element} element
     *        The token being dragged.
     * @param {Event} event
     *        The mouse down or touch start event.
     */

  }, {
    key: "startDrag",
    value: function startDrag(element, event) {
      var _this3 = this;

      var type = event.type,
          clientX = event.clientX,
          clientY = event.clientY,
          targetTouches = event.targetTouches;

      var _element$getBoundingC = element.getBoundingClientRect(),
          left = _element$getBoundingC.left,
          top = _element$getBoundingC.top;

      this.endDragging();

      this.dragHandler = function (event) {
        return _this3.dragObject(element, event);
      };

      if (type === "mousedown") {
        this.xOffset = clientX - left + this.padLeft;
        this.yOffset = clientY - top + this.padTop;
        window.addEventListener("mousemove", this.dragHandler);
      } else if (type === "touchstart" && targetTouches.length) {
        this.xOffset = targetTouches[0].clientX - left + this.padLeft;
        this.yOffset = targetTouches[0].clientY - top + this.padTop;
        window.addEventListener("touchmove", this.dragHandler, {
          passive: false
        });
      }
    }
    /**
     * Moves a token being dragged.
     *
     * @param {Element} element
     *        The token being dragged.
     * @param {Event} event
     *        The mouse move or touch move event.
     */

  }, {
    key: "dragObject",
    value: function dragObject(element, event) {
      event.preventDefault();
      var type = event.type,
          clientX = event.clientX,
          clientY = event.clientY,
          targetTouches = event.targetTouches;

      var _element$getBoundingC2 = element.getBoundingClientRect(),
          width = _element$getBoundingC2.width,
          height = _element$getBoundingC2.height;

      var leftValue = 0;
      var topValue = 0;

      if (type === "mousemove") {
        leftValue = clientX - this.xOffset;
        topValue = clientY - this.yOffset;
        this.isDragging = true;
      } else if (type === "touchmove" && targetTouches.length) {
        leftValue = targetTouches[0].clientX - this.xOffset;
        topValue = targetTouches[0].clientY - this.yOffset;
      }

      this.moveTo(element, (0,_utils_numbers_js__WEBPACK_IMPORTED_MODULE_1__.clamp)(0, leftValue, this.padWidth - width), (0,_utils_numbers_js__WEBPACK_IMPORTED_MODULE_1__.clamp)(0, topValue, this.padHeight - height));
    }
    /**
     * Moves the given token element to the co-ordinates given.
     *
     * @param {Element} element
     *        Element to move.
     * @param {Number} left
     *        X co-ordinate.
     * @param {Number} top
     *        Y co-ordinate.
     * @param {Number} [zIndex=this.zIndex]
     *        Optional Z co-ordinate. If ommitted, it defaults to
     *        {@link Tokens#zIndex}.
     */

  }, {
    key: "moveTo",
    value: function moveTo(element, left, top, zIndex) {
      element.style.setProperty("--left", left);
      element.style.setProperty("--top", top);

      if (typeof zIndex !== "number" || Number.isNaN(zIndex)) {
        zIndex = this.zIndex;
      }

      element.style.setProperty("--z-index", zIndex);
      this.observer.trigger("move", {
        element: element,
        left: left,
        top: top,
        zIndex: zIndex
      });
    }
    /**
     * Exposes the co-ordinates for the given element.
     *
     * @param  {Element} element
     *         Element whose co-ordinates should be returned.
     * @return {coord}
     *         Co-ordinates for the element.
     */

  }, {
    key: "getPosition",
    value: function getPosition(element) {
      /**
       * @typedef  {Object} coord
       * @property {Number} x
       *           The left value in pixels.
       * @property {Number} y
       *           The top value in pixels.
       * @property {Number} z
       *           The z-index in pixels.
       */
      var coord = {
        x: Number(element.style.getPropertyValue("--left")) || 0,
        y: Number(element.style.getPropertyValue("--top")) || 0,
        z: Number(element.style.getPropertyValue("--z-index")) || 0
      };
      return coord;
    }
    /**
     * Handles the token dragging finishing.
     */

  }, {
    key: "endDragging",
    value: function endDragging() {
      var _this4 = this;

      if (this.dragHandler !== _utils_functions_js__WEBPACK_IMPORTED_MODULE_2__.noop) {
        window.removeEventListener("mousemove", this.dragHandler);
        window.removeEventListener("touchmove", this.dragHandler, {
          passive: false
        });
        this.dragHandler = _utils_functions_js__WEBPACK_IMPORTED_MODULE_2__.noop; // The order of events is mousedown -> mouseup -> click. This means
        // that we need to delay the resetting of `this.isDragging` so that
        // the handler attached to the click event listener doesn't trigger
        // after dragging. This only seems to be an issue on desktop, mobile
        // seems to be fine.

        window.requestAnimationFrame(function () {
          return _this4.isDragging = false;
        });
      }
    }
  }]);

  return Tokens;
}();



/***/ }),

/***/ "./assets/js/constants/language.js":
/*!*****************************************!*\
  !*** ./assets/js/constants/language.js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   LANGUAGE: () => (/* binding */ LANGUAGE)
/* harmony export */ });
/**
 * The current language that the user has the application set to. If the
 * language cannot be worked out that it defaults to "en-GB".
 * @type {String}
 */
var LANGUAGE = document.documentElement.lang || "en-GB";

/***/ }),

/***/ "./assets/js/constants/version.js":
/*!****************************************!*\
  !*** ./assets/js/constants/version.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   VERSION: () => (/* binding */ VERSION)
/* harmony export */ });
/**
 * The current version, in semver.
 * @type {String}
 */
var VERSION = "0.9.44";

/***/ }),

/***/ "./assets/js/main.js":
/*!***************************!*\
  !*** ./assets/js/main.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _processes_setup_general_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./processes/setup/general.js */ "./assets/js/processes/setup/general.js");
/* harmony import */ var _processes_setup_select_edition_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./processes/setup/select-edition.js */ "./assets/js/processes/setup/select-edition.js");
/* harmony import */ var _processes_setup_select_characters_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./processes/setup/select-characters.js */ "./assets/js/processes/setup/select-characters.js");
/* harmony import */ var _processes_setup_select_your_character_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./processes/setup/select-your-character.js */ "./assets/js/processes/setup/select-your-character.js");
/* harmony import */ var _processes_setup_character_sheet_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./processes/setup/character-sheet.js */ "./assets/js/processes/setup/character-sheet.js");
/* harmony import */ var _processes_setup_clear_cache_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./processes/setup/clear-cache.js */ "./assets/js/processes/setup/clear-cache.js");
/* harmony import */ var _processes_grimoire_general_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./processes/grimoire/general.js */ "./assets/js/processes/grimoire/general.js");
/* harmony import */ var _processes_grimoire_characters_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./processes/grimoire/characters.js */ "./assets/js/processes/grimoire/characters.js");
/* harmony import */ var _processes_grimoire_reminders_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./processes/grimoire/reminders.js */ "./assets/js/processes/grimoire/reminders.js");
/* harmony import */ var _processes_grimoire_demon_bluffs_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./processes/grimoire/demon-bluffs.js */ "./assets/js/processes/grimoire/demon-bluffs.js");
/* harmony import */ var _processes_grimoire_reset_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./processes/grimoire/reset.js */ "./assets/js/processes/grimoire/reset.js");
/* harmony import */ var _processes_grimoire_travellers_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./processes/grimoire/travellers.js */ "./assets/js/processes/grimoire/travellers.js");
/* harmony import */ var _processes_grimoire_fabled_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./processes/grimoire/fabled.js */ "./assets/js/processes/grimoire/fabled.js");
/* harmony import */ var _processes_grimoire_export_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./processes/grimoire/export.js */ "./assets/js/processes/grimoire/export.js");
/* harmony import */ var _processes_jinxes_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./processes/jinxes.js */ "./assets/js/processes/jinxes.js");
/* harmony import */ var _processes_night_order_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./processes/night-order.js */ "./assets/js/processes/night-order.js");
/* harmony import */ var _processes_info_tokens_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./processes/info-tokens.js */ "./assets/js/processes/info-tokens.js");
/* harmony import */ var _processes_notes_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./processes/notes.js */ "./assets/js/processes/notes.js");
/* harmony import */ var _processes_acknowledgements_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./processes/acknowledgements.js */ "./assets/js/processes/acknowledgements.js");
/* harmony import */ var _processes_store_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./processes/store.js */ "./assets/js/processes/store.js");
// import "./processes/errors.js";





















/***/ }),

/***/ "./assets/js/processes/acknowledgements.js":
/*!*************************************************!*\
  !*** ./assets/js/processes/acknowledgements.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _constants_version_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../constants/version.js */ "./assets/js/constants/version.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");

 // Populate the version number.

(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_1__.lookupOne)("#version").textContent = _constants_version_js__WEBPACK_IMPORTED_MODULE_0__.VERSION;

/***/ }),

/***/ "./assets/js/processes/grimoire/characters.js":
/*!****************************************************!*\
  !*** ./assets/js/processes/grimoire/characters.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _classes_SelectDialog_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/SelectDialog.js */ "./assets/js/classes/SelectDialog.js");
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_Pad_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../classes/Pad.js */ "./assets/js/classes/Pad.js");
/* harmony import */ var _classes_Template_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../classes/Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _classes_TokenDialog_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../classes/TokenDialog.js */ "./assets/js/classes/TokenDialog.js");
/* harmony import */ var _classes_Names_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../classes/Names.js */ "./assets/js/classes/Names.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");









var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_2__["default"].create("game");
var tokenObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_2__["default"].create("token");
var pad = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)(".js--pad").pad;
var recentReminders = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#character-show-reminders");
var characterShowDialog = _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_0__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#character-show"));
var tokenDialog = _classes_TokenDialog_js__WEBPACK_IMPORTED_MODULE_6__["default"].get();
tokenDialog.setEntryTemplate(new _classes_Template_js__WEBPACK_IMPORTED_MODULE_4__["default"]((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#token-entry-template"))); // Set up the token dialog when a character token is clicked.

tokenObserver.on("character-click", function (_ref) {
  var detail = _ref.detail;
  var element = detail.element;
  var character = pad.getCharacterByToken(element);
  characterShowDialog.getElement().dataset.token = "#".concat((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.identify)(element));
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#character-show-name").textContent = character.getName();
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#character-show-ability").textContent = character.getAbility();
  recentReminders.dataset.coords = JSON.stringify(pad.getTokenPosition(element));
  characterShowDialog.show();
}); // Update the recently-added-reminders list as a reminder is added.

tokenObserver.on("reminder-add", function (_ref2) {
  var detail = _ref2.detail;
  var reminder = detail.reminder;
  var id = reminder.getId();
  var items = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookup)(".js--reminder-list--item", recentReminders);
  var existing = items.find(function (_ref3) {
    var dataset = _ref3.dataset;
    return dataset.reminderId === id;
  });

  if (existing && existing === items[0]) {
    return;
  }

  if (items.length > 2 || existing && existing !== items[0]) {
    (existing || items[items.length - 1]).remove();
  }

  recentReminders.prepend(reminder.drawList());
});

function getToken(target) {
  return (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)(target.closest("[data-token]").dataset.token);
}

function hideDialog(target) {
  _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_0__["default"].create(target.closest(".dialog")).hide();
}

_classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__["default"].ready(function () {
  // Show a token as it's clicked from the "show tokens" dialog.
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#character-show-token").addEventListener("click", function (_ref4) {
    var target = _ref4.target;
    tokenDialog.setIds([pad.getCharacterByToken(getToken(target)).getId()]);
    tokenDialog.show();
    hideDialog(target);
  });
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#character-shroud-toggle").addEventListener("click", function (_ref5) {
  var target = _ref5.target;
  pad.toggleDeadByToken(getToken(target));
  hideDialog(target);
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#character-rotate").addEventListener("click", function (_ref6) {
  var target = _ref6.target;
  pad.rotateByToken(getToken(target));
  hideDialog(target);
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#character-reminder").addEventListener("click", function (_ref7) {
  var target = _ref7.target;
  var reminder = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#reminder-list");
  var token = getToken(target);
  reminder.dataset.coords = JSON.stringify(pad.getTokenPosition(token));
  _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_0__["default"].create(reminder).show();
  hideDialog(target);
});
var characterListDialog = _classes_SelectDialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].get();
characterListDialog.addProcess({
  // The generic process: add a token to the pad when the icon is clicked.
  click: function click(tokenId) {
    _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__["default"].ready(function (tokenStore) {
      pad.addCharacter(tokenStore.getCharacterClone(tokenId));
    });
    characterListDialog.hide();
  }
}); // The process that will replace one token in the grimoire with another one.

var replaceOnPadProcess = {
  data: null,
  click: function click(tokenId) {
    var _this = this;

    _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__["default"].ready(function (tokenStore) {
      var _pad$addCharacter = pad.addCharacter(tokenStore.getCharacterClone(tokenId)),
          character = _pad$addCharacter.character,
          newToken = _pad$addCharacter.token;

      var data = _this.data;

      if (data) {
        var token = data.token,
            _data$coords = data.coords,
            x = _data$coords.x,
            y = _data$coords.y,
            z = _data$coords.z;
        var oldCharacter = pad.getCharacterByToken((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)(token));
        pad.toggleDead(character, oldCharacter.getIsDead());
        pad.rotate(character, oldCharacter.getIsUpsideDown());
        pad.setPlayerName(character, pad.getPlayerName(oldCharacter));
        pad.removeCharacter(oldCharacter);
        pad.moveToken(newToken, x, y, z);
      }
    });
    characterListDialog.hide();
  },
  hide: function hide() {
    this.data = null;
    characterListDialog.removeProcess(replaceOnPadProcess);
  }
};
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#character-replace").addEventListener("click", function (_ref8) {
  var target = _ref8.target;
  var token = getToken(target);
  replaceOnPadProcess.data = {
    coords: pad.getTokenPosition(token),
    token: "#".concat((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.identify)(token))
  };
  characterListDialog.addProcess(replaceOnPadProcess);
  characterListDialog.show();
  hideDialog(target);
}); // The process that will add another token to the token dialog.

var addToDialogProcess = {
  click: function click(tokenId) {
    tokenDialog.addId(tokenId);
    tokenDialog.show();
    characterListDialog.hide();
  },
  hide: function hide() {
    characterListDialog.removeProcess(addToDialogProcess);
  }
};
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)(".js--token--add").addEventListener("click", function () {
  characterListDialog.addProcess(addToDialogProcess);
  characterListDialog.show();
  tokenDialog.hide();
});
var characterNameInput = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#character-name-input");
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#character-name").addEventListener("click", function (_ref9) {
  var target = _ref9.target;
  var value = characterNameInput.value;
  var name = (value || "").trim();
  pad.setPlayerNameForToken(getToken(target), name);
  hideDialog(target);
});
var ghostVoteButton = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#character-ghost-vote");

function setGhostButtonState(character) {
  ghostVoteButton.disabled = (ghostVoteButton, !character.getIsDead() || !character.getHasGhostVote());
}

(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#character-show").addEventListener(_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_0__["default"].SHOW, function (_ref10) {
  var target = _ref10.target;
  var token = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)(target.dataset.token);
  var character = pad.getCharacterByToken(token);
  setGhostButtonState(character);
});
ghostVoteButton.addEventListener("click", function (_ref11) {
  var target = _ref11.target;
  var token = getToken(target);
  pad.setGhostVoteForToken(token, false);
  var character = pad.getCharacterByToken(token);
  setGhostButtonState(character);
  hideDialog(target);
});
characterShowDialog.on(_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_0__["default"].SHOW, function () {
  var token = getToken(characterShowDialog.getElement());
  characterNameInput.value = pad.getPlayerNameForToken(token);
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#character-show-orphan").hidden = !token.classList.contains("is-orphan");
});
characterShowDialog.on(_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_0__["default"].HIDE, function () {
  characterNameInput.value = characterNameInput.defaultValue;
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#character-remove").addEventListener("click", function (_ref12) {
  var target = _ref12.target;
  pad.removeCharacterByToken(getToken(target));
  hideDialog(target);
}); // Update the night order on the tokens.
// #72: Use objects rather than arrays to allow for decimals in night orders.

var nightOrder = {
  first: Object.create(null),
  other: Object.create(null)
};

function getSortedKeys(object) {
  return Object.keys(object).sort(function (a, b) {
    return Number(a) - Number(b);
  });
}

function assignCounts(object, dataKey) {
  var count = 0;
  getSortedKeys(object).forEach(function (key) {
    var tokens = object[key];
    count += 1;
    tokens.forEach(function (_ref13) {
      var token = _ref13.token;
      _classes_Pad_js__WEBPACK_IMPORTED_MODULE_3__["default"].getToken(token).dataset[dataKey] = count;
    });
  });
}

function updateTokens() {
  assignCounts(nightOrder.first, "firstNight");
  assignCounts(nightOrder.other, "otherNight");
}

tokenObserver.on("character-add", function (_ref14) {
  var detail = _ref14.detail;
  var character = detail.character,
      token = detail.token;
  var first = nightOrder.first,
      other = nightOrder.other;
  var firstNight = character.getFirstNight();

  if (firstNight) {
    if (!first[firstNight]) {
      first[firstNight] = [];
    }

    first[firstNight].push({
      character: character,
      token: token
    });
  }

  var otherNight = character.getOtherNight();

  if (otherNight) {
    if (!other[otherNight]) {
      other[otherNight] = [];
    }

    other[otherNight].push({
      character: character,
      token: token
    });
  }

  updateTokens();
});
tokenObserver.on("character-remove", function (_ref15) {
  var detail = _ref15.detail;
  var character = detail.character,
      token = detail.token;
  var first = nightOrder.first,
      other = nightOrder.other;
  var firstNight = character.getFirstNight();
  var firstArray = first[firstNight];

  if (firstArray) {
    var index = firstArray.findIndex(function (info) {
      return info.token === token;
    });

    if (index > -1) {
      firstArray.splice(index, 1);
    }

    if (!firstArray.length) {
      delete first[firstNight];
    }
  }

  var otherNight = character.getOtherNight();
  var otherArray = other[otherNight];

  if (otherArray) {
    var _index = otherArray.findIndex(function (info) {
      return info.token === token;
    });

    if (_index > -1) {
      otherArray.splice(_index, 1);
    }

    if (!otherArray.length) {
      delete other[otherNight];
    }
  }

  updateTokens();
}); // List of tokens.
// TODO: could we use character.drawList() here?

var tokenListTemplate = _classes_Template_js__WEBPACK_IMPORTED_MODULE_4__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#token-list-template"));
var tokenList = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#token-list__list");
gameObserver.on("characters-selected", function (_ref16) {
  var detail = _ref16.detail;
  var characters = detail.characters.filter(function (character) {
    var team = character.getTeam();
    return team !== "traveller";
  });
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.replaceContentsMany)(tokenList, characters.map(function (character) {
    return tokenListTemplate.draw({
      ".js--token-list--button": function jsTokenListButton(element) {
        element.dataset.tokenId = character.getId();
      },
      ".js--token-list--token": function jsTokenListToken(element) {
        element.append(character.drawToken());
      }
    });
  }));
}); // #131 - highlight any orphan character and reminder tokens.

gameObserver.on("characters-selected", function (_ref17) {
  var detail = _ref17.detail;
  _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__["default"].ready(function (store) {
    pad.characters.forEach(function (_ref18) {
      var character = _ref18.character,
          token = _ref18.token;

      if (["traveller", "fabled"].includes(character.getTeam())) {
        return;
      }

      var index = detail.characters.findIndex(function (_char) {
        return _char.getId() === character.getId();
      });
      token.classList.toggle("is-orphan", index < 0);
    });
    pad.reminders.forEach(function (_ref19) {
      var reminder = _ref19.reminder,
          token = _ref19.token;
      var character = store.getCharacter(reminder.getCharacterId());

      if (["traveller", "fabled"].includes(character.getTeam())) {
        return;
      }

      var index = detail.characters.findIndex(function (_char2) {
        return _char2.getId() === character.getId();
      });
      token.classList.toggle("is-orphan", index < 0);
    });
  });
});
_classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__["default"].ready(function (tokenStore) {
  tokenDialog.setTokenStore(tokenStore);
  var tokenListDialog = _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_0__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOne)("#token-list"));
  tokenList.addEventListener("click", function (_ref20) {
    var target = _ref20.target;
    var button = target.closest("[data-token-id]");

    if (!button) {
      return;
    }

    tokenDialog.setIds([button.dataset.tokenId]);
    tokenDialog.show();
    tokenListDialog.hide();
  });
}); // Update the list of suggested names that can be set when a token is drawn.

var names = _classes_Names_js__WEBPACK_IMPORTED_MODULE_7__["default"].create();
names.on("names-added", function () {
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.replaceContentsMany)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#player-name-options"), names.drawList());
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.replaceContentsMany)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#character-name-input-options"), names.drawList());
});
names.on("names-cleared", function () {
  empty((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#player-name-options"));
  empty((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_8__.lookupOneCached)("#character-name-input-options"));
});

/***/ }),

/***/ "./assets/js/processes/grimoire/demon-bluffs.js":
/*!******************************************************!*\
  !*** ./assets/js/processes/grimoire/demon-bluffs.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _classes_BluffDialog_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../classes/BluffDialog.js */ "./assets/js/classes/BluffDialog.js");
/* harmony import */ var _classes_TokenDialog_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../classes/TokenDialog.js */ "./assets/js/classes/TokenDialog.js");
/* harmony import */ var _classes_BluffsGroups_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../classes/BluffsGroups.js */ "./assets/js/classes/BluffsGroups.js");
/* harmony import */ var _classes_BluffsGroup_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../classes/BluffsGroup.js */ "./assets/js/classes/BluffsGroup.js");
/* harmony import */ var _classes_BluffSet_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../classes/BluffSet.js */ "./assets/js/classes/BluffSet.js");
/* harmony import */ var _classes_SettableTitle_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../classes/SettableTitle.js */ "./assets/js/classes/SettableTitle.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");
function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }












var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_2__["default"].create("game");
var tokenObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_2__["default"].create("token");
var tokenDialog = _classes_TokenDialog_js__WEBPACK_IMPORTED_MODULE_5__["default"].get();
var bluffDialog = _classes_BluffDialog_js__WEBPACK_IMPORTED_MODULE_4__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOne)("#bluff-show"));
_classes_BluffsGroup_js__WEBPACK_IMPORTED_MODULE_7__["default"].setTemplate(_classes_Template_js__WEBPACK_IMPORTED_MODULE_0__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOne)("#demon-bluffs-template")));
_classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__["default"].ready(function (tokenStore) {
  _classes_BluffSet_js__WEBPACK_IMPORTED_MODULE_8__["default"].setEmptyCharacter(tokenStore.getEmptyCharacter());
  var bluffGroupsContainer = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOne)("#demon-bluffs-group");
  var bluffGroups = _classes_BluffsGroups_js__WEBPACK_IMPORTED_MODULE_6__["default"].create(bluffGroupsContainer);

  bluffGroups.createEmptyGroup = function () {
    return new _classes_BluffsGroup_js__WEBPACK_IMPORTED_MODULE_7__["default"](new _classes_BluffSet_js__WEBPACK_IMPORTED_MODULE_8__["default"]());
  };

  bluffGroups.convertId = function (id) {
    return tokenStore.getCharacter(id);
  };

  bluffGroups.announceUpdate = function () {
    tokenObserver.trigger("bluff", {
      data: bluffGroups.serialise()
    });
  };

  bluffGroupsContainer.addEventListener("click", function (_ref) {
    var target = _ref.target;
    var button = target.closest(".js--demon-bluffs--remove");
    var group = button === null || button === void 0 ? void 0 : button.closest(".js--demon-bluffs--group");

    if (!button || !group) {
      return;
    }

    bluffGroups.removeByIndex(group.dataset.groupId);
  });
  bluffGroupsContainer.addEventListener("click", function (_ref2) {
    var target = _ref2.target;
    var button = target.closest(".js--demon-bluffs--bluff[data-index]");

    if (!button) {
      return;
    }

    bluffGroups.setInnerIndex(button.dataset.index);
    bluffDialog.display(bluffGroups.getVisibleGroup().getCharacter(), button.classList.contains("is-orphan"));
  });
  bluffGroupsContainer.addEventListener(_classes_BluffsGroups_js__WEBPACK_IMPORTED_MODULE_6__["default"].VISIBLE, function (_ref3) {
    var target = _ref3.target;
    bluffGroups.setVisibleGroupIndex(target.dataset.groupId);
  });
  bluffGroupsContainer.addEventListener(_classes_BluffsGroup_js__WEBPACK_IMPORTED_MODULE_7__["default"].READY, function (_ref4) {
    var detail = _ref4.detail;
    var bluffGroup = detail.bluffGroup;
    var element = bluffGroup.getElement();
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookup)("[data-bluff-dialog]", element).forEach(function (trigger) {
      trigger.dialog = _classes_BluffDialog_js__WEBPACK_IMPORTED_MODULE_4__["default"].createFromTrigger(trigger);
    });
    var settableTitle = new _classes_SettableTitle_js__WEBPACK_IMPORTED_MODULE_9__["default"](element.querySelector(".js--settable-title--title"), element.querySelector(".js--settable-title--input"));

    settableTitle.announceUpdate = function () {
      return bluffGroups.announceUpdate();
    };

    bluffGroup.setSettableTitle(settableTitle);
  });
  bluffGroups.disableAnnouncements();
  bluffGroups.ready(_classes_BluffsGroups_js__WEBPACK_IMPORTED_MODULE_6__["default"].getEmptyData());
  bluffGroups.enableAnnouncements();
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOne)("#add-bluffs").addEventListener("click", function () {
    bluffGroups.addEmpty();
  });
  gameObserver.on("characters-selected", function (_ref5) {
    var detail = _ref5.detail;
    var characterTemplate = _classes_Template_js__WEBPACK_IMPORTED_MODULE_0__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOneCached)("#character-list-template"));
    var characters = [tokenStore.characters[_classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__["default"].EMPTY]].concat(_toConsumableArray(detail.characters));
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.replaceContentsMany)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOneCached)("#character-list__bluffs"), characters.map(function (character) {
      return characterTemplate.draw({
        ".js--character-list--item": function jsCharacterListItem(element) {
          element.dataset.characterId = character.getId();
          element.dataset.team = character.getTeam();
        },
        ".js--character-list--button": function jsCharacterListButton(element) {
          element.dataset.tokenId = character.getId();
        },
        ".js--character-list--token": function jsCharacterListToken(element) {
          element.append(character.drawToken());
        }
      });
    }));
  }); // Show all possible bluffs dialog.

  function toggleBluffListClass(className, state) {
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOneCached)("#character-list__bluffs").classList.toggle(className, state);
  }

  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOne)("#show-existing").addEventListener("change", function (_ref6) {
    var target = _ref6.target;
    toggleBluffListClass("is-show-existing", target.checked);
  });
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOne)("#show-travellers").addEventListener("change", function (_ref7) {
    var target = _ref7.target;
    toggleBluffListClass("is-show-travellers", target.checked);
  });
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOne)("#show-evil").addEventListener("change", function (_ref8) {
    var target = _ref8.target;
    toggleBluffListClass("is-show-evil", target.checked);
  });
  var rolesInPlay = Object.create(null);
  tokenObserver.on("character-add", function (_ref9) {
    var detail = _ref9.detail;
    var id = detail.character.getId();

    if (!rolesInPlay[id]) {
      rolesInPlay[id] = 0;
    }

    rolesInPlay[id] += 1;
  });
  tokenObserver.on("character-remove", function (_ref10) {
    var detail = _ref10.detail;
    var id = detail.character.getId();

    if (rolesInPlay[id]) {
      rolesInPlay[id] -= 1;
    }

    if (!rolesInPlay[id] || rolesInPlay[id] < 0) {
      delete rolesInPlay[id];
    }
  });
  var bluffListDialog = _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_3__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOne)("#bluff-list"));
  bluffListDialog.on(_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_3__["default"].SHOW, function () {
    Object.keys(rolesInPlay).concat(bluffGroups.getVisibleGroup().serialise().set).filter(Boolean) // remove any empty IDs
    .forEach(function (id) {
      var token = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOne)("#character-list__bluffs [data-character-id=\"".concat(id, "\"]"));
      token === null || token === void 0 ? void 0 : token.classList.add("is-in-play");
    });
  });
  bluffListDialog.on(_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_3__["default"].HIDE, function () {
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookup)("#character-list__bluffs .is-in-play").forEach(function (token) {
      token.classList.remove("is-in-play");
    });
  });
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOne)("#character-list__bluffs").addEventListener("click", function (_ref11) {
    var target = _ref11.target;
    var button = target.closest("[data-token-id]");

    if (!button) {
      return;
    } // assign the chosen character to the correct set


    var character = tokenStore.getCharacter(button.dataset.tokenId);
    bluffGroups.setCharacter(character);
    bluffGroups.redraw(); // close the dialog

    bluffListDialog.hide();
    bluffDialog.hide();
  }); // Bluff token dialog.

  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOneCached)("#bluff-show-token", bluffDialog.getElement()).addEventListener("click", function (_ref12) {
    var _target$closest;

    var target = _ref12.target;
    var id = (_target$closest = target.closest("[data-character-id]")) === null || _target$closest === void 0 ? void 0 : _target$closest.dataset.characterId;

    if (!id) {
      return;
    }

    tokenDialog.setIds([id]);
    tokenDialog.show();
    bluffDialog.hide();
  });
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_10__.lookupOneCached)("#show-all-bluffs").addEventListener("click", function (_ref13) {
    var target = _ref13.target;
    tokenDialog.setIds(bluffGroups.getVisibleGroup().serialise().set);
    tokenDialog.setMultipleTitle(target.dataset.title);
    tokenDialog.show();
  });
  gameObserver.on("clear", function () {
    bluffGroups.removeAll();
    bluffGroups.addEmpty();
  }); // #131 - highlight any orphan characters.

  gameObserver.on("characters-selected", function (_ref14) {
    var detail = _ref14.detail;
    _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__["default"].ready(function () {
      var group = bluffGroups.getVisibleGroup();
      group.element.querySelectorAll(".js--demon-bluffs--bluff").forEach(function (button) {
        var index = button.dataset.index;
        var character = group.bluffSet.characters[index];

        if (character.getId() === _classes_BluffSet_js__WEBPACK_IMPORTED_MODULE_8__["default"].emptyCharacter.getId()) {
          return;
        }

        var charIndex = detail.characters.findIndex(function (_char) {
          return _char.getId() === character.getId();
        });
        button.classList.toggle("is-orphan", charIndex < 0);
      });
    });
  });
});

/***/ }),

/***/ "./assets/js/processes/grimoire/export.js":
/*!************************************************!*\
  !*** ./assets/js/processes/grimoire/export.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Store.js */ "./assets/js/classes/Store.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");
/* harmony import */ var _utils_objects_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/objects.js */ "./assets/js/utils/objects.js");




var gameData = Object.create(null);
_classes_Store_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("pocket-grimoire").addListener(function (_ref) {
  var detail = _ref.detail;
  (0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_3__.empty)(gameData);
  Object.assign(gameData, {
    script: detail.characters.name,
    date: new Date().toISOString(),
    day: 1,
    players: detail.tokens.map(function (token) {
      return {
        tokens: [],
        name: token.playerName,
        me: false,
        dead: token.isDead,
        id: window.crypto.randomUUID(),
        suspectedRole: {
          id: token.id
        }
      };
    })
  });
});
var trigger = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOne)("#export-trigger");
var holder = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOne)("#export-holder");
var image = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOne)("#export-image");
trigger.addEventListener("click", function () {
  trigger.classList.add("is-loading");
  fetch("https://qr-thing.netlify.app/.netlify/functions/qr", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify(gameData)
  }).then(function (response) {
    return response.json();
  }).then(function (json) {
    image.src = json.qr;
    trigger.classList.remove("is-loading");
    holder.hidden = false;
  });
});
var dialog = _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOne)("#game-export"));
dialog.on(_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].HIDE, function () {
  holder.hidden = true;
  trigger.classList.remove("is-loading");
});

/***/ }),

/***/ "./assets/js/processes/grimoire/fabled.js":
/*!************************************************!*\
  !*** ./assets/js/processes/grimoire/fabled.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _classes_Template_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../classes/Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");
/* harmony import */ var _utils_objects_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/objects.js */ "./assets/js/utils/objects.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }







var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("game");
var tokenObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("token"); // Include all the Fabled in the fabled list.

var homebrewFabled = Object.create(null);
var officialFabled = Object.create(null);
var characterTemplate = null;

function populateFabled() {
  var fabled = Object.values(_objectSpread(_objectSpread({}, officialFabled), homebrewFabled));

  if (!characterTemplate) {
    characterTemplate = _classes_Template_js__WEBPACK_IMPORTED_MODULE_3__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#character-list-template"));
  }

  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.replaceContentsMany)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#fabled-list__list"), fabled.map(function (fable) {
    return characterTemplate.draw({
      ".js--character-list--item,.js--character-list--button": function jsCharacterListItemJsCharacterListButton(element) {
        element.dataset.tokenId = fable.getId();
      },
      ".js--character-list--token": function jsCharacterListToken(element) {
        element.append(fable.drawToken());
      }
    });
  }));
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#add-fabled").disabled = false;
}

gameObserver.on("characters-selected", function (_ref) {
  var detail = _ref.detail;
  (0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_5__.empty)(homebrewFabled);
  detail.characters.filter(function (character) {
    return character.getTeam() === "fabled";
  }).forEach(function (character) {
    return homebrewFabled[character.getId()] = character;
  });
  populateFabled();
});
_classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__["default"].ready(function (tokenStore) {
  (0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_5__.empty)(officialFabled);
  tokenStore.getAllCharacters().filter(function (character) {
    return character.getTeam() === "fabled";
  }).forEach(function (character) {
    return officialFabled[character.getId()] = character;
  });
  populateFabled();
}); // Add to the grimoire when clicked.

var pad = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)(".js--pad").pad;
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#fabled-list__list").addEventListener("click", function (_ref2) {
  var target = _ref2.target;
  var button = target.closest("[data-token-id]");

  if (!button) {
    return;
  }

  _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__["default"].ready(function (tokenStore) {
    pad.addCharacter(tokenStore.getCharacter(button.dataset.tokenId));
    _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#fabled-list")).hide();
  });
}); // Night Order.
// #155 - Let the NightOrder class manage the night order.

var fabledCount = Object.create(null);
tokenObserver.on("character-add", function (_ref3) {
  var detail = _ref3.detail;
  var character = detail.character;

  if (character.getTeam() !== "fabled") {
    return;
  }

  var id = character.getId();

  if (!fabledCount[id]) {
    fabledCount[id] = 0;
  }

  fabledCount[id] += 1;
});
tokenObserver.on("character-remove", function (_ref4) {
  var detail = _ref4.detail;
  var character = detail.character;

  if (character.getTeam() !== "fabled") {
    return;
  }

  var id = character.getId();

  if (fabledCount[id]) {
    fabledCount[id] -= 1;
  }
}); // Reminder tokens.

tokenObserver.on("character-add", function (_ref5) {
  var detail = _ref5.detail;
  var character = detail.character;

  if (character.getTeam() !== "fabled") {
    return;
  }

  character.getReminders().forEach(function (reminder) {
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#reminder-list__list").append(reminder.drawList());
  });
});
tokenObserver.on("character-remove", function (_ref6) {
  var detail = _ref6.detail;
  var character = detail.character;
  var count = fabledCount[character.getId()];

  if (character.getTeam() !== "fabled" || count) {
    return;
  }

  character.getReminders().forEach(function (reminder) {
    var _lookupOne;

    (_lookupOne = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("[data-reminder-id=\"".concat(reminder.getId(), "\"]"), (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#reminder-list__list"))) === null || _lookupOne === void 0 ? void 0 : _lookupOne.remove();
  });
});

/***/ }),

/***/ "./assets/js/processes/grimoire/general.js":
/*!*************************************************!*\
  !*** ./assets/js/processes/grimoire/general.js ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Pad_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Pad.js */ "./assets/js/classes/Pad.js");
/* harmony import */ var _classes_Positioner_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/Positioner.js */ "./assets/js/classes/Positioner.js");
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_ReminderToken_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../classes/ReminderToken.js */ "./assets/js/classes/ReminderToken.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");







var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_2__["default"].create("game");
var tokenObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_2__["default"].create("token");
var padElement = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOneCached)(".js--pad");
var pad = new _classes_Pad_js__WEBPACK_IMPORTED_MODULE_0__["default"](padElement, tokenObserver);
padElement.pad = pad;
var styleObserver = new MutationObserver(function (mutations) {
  gameObserver.trigger("pad-height-change", {
    height: mutations[0].target.style.height
  });
});
styleObserver.observe(padElement, {
  attributes: true,
  attributeFilter: ["style"]
}); // If the elements are within a closed <details> element then their height and
// width will be 0. Listen for the pad becoming visible and update the class.

(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookup)("details").forEach(function (details) {
  details.addEventListener("toggle", function () {
    pad.updateDimensions();
  });
});
gameObserver.on("characters-selected", function (_ref) {
  var detail = _ref.detail;
  var characters = detail.characters.filter(function (character) {
    var team = character.getTeam();
    return team !== "fabled" && team !== "traveller";
  });
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.replaceContentsMany)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOneCached)("#character-list__list"), characters.map(function (character) {
    return character.drawList();
  }));
  var reminders = characters.reduce(function (reminders, character) {
    return reminders.concat(character.getReminders());
  }, _classes_ReminderToken_js__WEBPACK_IMPORTED_MODULE_3__["default"].getGlobal());
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.replaceContentsMany)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOneCached)("#reminder-list__list"), reminders.map(function (reminder) {
    return reminder.drawList();
  }));
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOneCached)("#add-token").disabled = false;
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOneCached)("#add-reminder").disabled = false;
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOneCached)("#show-tokens").disabled = false;
});
gameObserver.on("character-drawn", function (_ref2) {
  var detail = _ref2.detail;
  pad.addNewCharacter(detail.character);
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOne)("#show-night-order").addEventListener("change", function (_ref3) {
  var target = _ref3.target;
  padElement.style[target.checked ? "removeProperty" : "setProperty"]("--night-order-display", "none");
});
gameObserver.on("clear", function () {
  return pad.reset();
}); // Character and Reminder token sizes.

var html = document.documentElement;
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOne)("#token-size").addEventListener("input", function (_ref4) {
  var target = _ref4.target;
  html.style.setProperty("--token-size", target.value);
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOne)("#reminder-size").addEventListener("input", function (_ref5) {
  var target = _ref5.target;
  html.style.setProperty("--reminder-size", target.value);
}); // Token auto-placements.

pad.setPositioner(new _classes_Positioner_js__WEBPACK_IMPORTED_MODULE_1__["default"]());
var tokenLayout = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOne)("#token-layout");
pad.updatePositioner({
  layout: tokenLayout.value,
  // At this stage, most of the positioner probably hasn't been set up so we'd
  // get a few issues if we try to generate the co-ordinates. Better to just
  // give the positioner some data and generate the co-ordinates later.
  generate: false
});
tokenLayout.addEventListener("change", function () {
  pad.updatePositioner({
    layout: tokenLayout.value
  });
});
gameObserver.on("player-count", function (_ref6) {
  var detail = _ref6.detail;
  pad.updatePositioner({
    total: detail.count
  });
});
gameObserver.on("pad-height-change", function () {
  pad.updatePositioner({
    container: true
  });
});
_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_4__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOneCached)("#character-select")).on(_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_4__["default"].SHOW, function () {
  var grimoireSection = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOneCached)("#grimoire");
  var isOpen = grimoireSection.open;

  if (!isOpen) {
    grimoireSection.open = true;
  }

  pad.updatePositioner({
    container: true,
    tokens: true,
    total: (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_6__.lookupOneCached)("#player-count").value
  });

  if (!isOpen) {
    grimoireSection.open = false;
  }
});
_classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__["default"].ready(function (tokenStore) {
  pad.setTokenStore(tokenStore);
});

/***/ }),

/***/ "./assets/js/processes/grimoire/reminders.js":
/*!***************************************************!*\
  !*** ./assets/js/processes/grimoire/reminders.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");




var tokenObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("token");
var pad = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)(".js--pad").pad;
var reminderList = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#reminder-list");
var reminderListDialog = _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].create(reminderList);

function getCoords(element) {
  return JSON.parse(element.dataset.coords || "null");
}

function addReminderQuick(target, tokenStore, coords) {
  var button = target === null || target === void 0 ? void 0 : target.closest("[data-reminder-id]");

  if (!button) {
    return;
  }

  var clone = tokenStore.getReminderClone(button.dataset.reminderId);

  var _pad$addReminder = pad.addReminder(clone),
      token = _pad$addReminder.token;

  if (coords) {
    pad.moveToken(token, coords.x, coords.y);
  }

  reminderListDialog.hide();
}

function toggleReminder(target) {
  var button = target.closest("[data-reminder-id]");
  var checkbox = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)(".js--reminder-list--checkbox[value=\"".concat(button === null || button === void 0 ? void 0 : button.dataset.reminderId, "\"]"));

  if (!button || !checkbox) {
    return;
  }

  checkbox.checked = !checkbox.checked;
}

_classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_2__["default"].ready(function (tokenStore) {
  var isAddMultiple = false; // Add a reminder to the page if it's clicked from the list.

  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#reminder-list__list").addEventListener("click", function (_ref) {
    var target = _ref.target;

    if (isAddMultiple) {
      toggleReminder(target);
    } else {
      addReminderQuick(target, tokenStore, getCoords(reminderList));
      reminderListDialog.hide();
    }
  });
  var multipleReminders = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#multiple-reminders");
  var addAllReminders = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)(".js--reminder-list--multiple");
  multipleReminders.addEventListener("change", function () {
    var isNowAddMultiple = multipleReminders.checked;
    isAddMultiple = isNowAddMultiple;
    addAllReminders.hidden = !isNowAddMultiple;

    if (!isNowAddMultiple) {
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookup)(".js--reminder-list--checkbox").forEach(function (checkbox) {
        checkbox.checked = false;
      });
    }
  });
  addAllReminders.addEventListener("click", function () {
    var coords = getCoords(reminderList) || {
      x: 0,
      y: 0
    };
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookup)(".js--reminder-list--checkbox:checked").forEach(function (checkbox) {
      // TODO: replace this with a Positioner?
      coords.x += 15;
      coords.y += 15;
      addReminderQuick((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)(".js--reminder-list--button[data-reminder-id=\"".concat(checkbox.value, "\"]")), tokenStore, coords);
      checkbox.checked = false;
    });
    reminderListDialog.hide();
  });
  var recentReminders = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#character-show-reminders"); // Add a reminder token to the page if the recently-added-reminder is clicked.

  recentReminders.addEventListener("click", function (_ref2) {
    var target = _ref2.target;
    addReminderQuick(target, tokenStore, getCoords(recentReminders));
    _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#character-show")).hide();
  });
  var reminderDialog = _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#reminder-show"));
  var reminderHolder = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#reminder-show-token"); // Populate the reminder dialog as a reminder is clicked.

  tokenObserver.on("reminder-click", function (_ref3) {
    var detail = _ref3.detail;
    var element = detail.element;
    var reminder = tokenStore.getReminder(element.dataset.reminder);
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.empty)(reminderHolder).append(reminder.drawToken());
    reminderHolder.dataset.token = "#".concat((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.identify)(element));
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#reminder-show-orphan").hidden = !element.classList.contains("is-orphan");
    reminderDialog.show();
  }); // Remove a reminder when its "remove" button is clicked.

  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#reminder-remove").addEventListener("click", function () {
    var token = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)(reminderHolder.dataset.token);

    if (!token) {
      return;
    }

    pad.removeReminderByToken(token);
    reminderDialog.hide();
  });
  var counts = Object.create(null);
  var list = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#reminder-list__list"); // If a character is added to the grimoire, make sure that its reminders are
  // visible in the list.

  tokenObserver.on("character-add", function (_ref4) {
    var detail = _ref4.detail;
    var character = detail.character;
    var characterId = character.getId();

    if (!counts[characterId]) {
      counts[characterId] = 0;
    }

    counts[characterId] += 1;
    character.getReminders().forEach(function (reminder) {
      var _lookupOne;

      (_lookupOne = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("[data-reminder-id=\"".concat(reminder.getId(), "\"]"), list)) === null || _lookupOne === void 0 ? void 0 : _lookupOne.classList.add("is-in-play");
    });
  }); // If a character is removed from the grimoire, and there are no other
  // copies of that character in the grimoire, hide its reminders.

  tokenObserver.on("character-remove", function (_ref5) {
    var detail = _ref5.detail;
    var character = detail.character;
    var characterId = character.getId();

    if (counts[characterId]) {
      counts[characterId] -= 1;
    }

    if (!counts[characterId]) {
      character.getReminders().forEach(function (reminder) {
        var _lookupOne2;

        (_lookupOne2 = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("[data-reminder-id=\"".concat(reminder.getId(), "\"]"), list)) === null || _lookupOne2 === void 0 ? void 0 : _lookupOne2.classList.remove("is-in-play");
      });
    }
  });
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#show-all-reminders").addEventListener("change", function (_ref6) {
    var target = _ref6.target;
    list.classList.toggle("is-show-all", target.checked);
  });
});
reminderListDialog.on(_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].HIDE, function (_ref7) {
  var target = _ref7.target;
  target.removeAttribute("data-coords");
});

/***/ }),

/***/ "./assets/js/processes/grimoire/reset.js":
/*!***********************************************!*\
  !*** ./assets/js/processes/grimoire/reset.js ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");


var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("game");
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_1__.lookupOne)("#reset-height").addEventListener("click", function () {
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_1__.lookupOneCached)(".js--pad").style.height = "";
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_1__.lookupOne)("#clear-grimoire").addEventListener("click", function (_ref) {
  var target = _ref.target;

  if (window.confirm(target.dataset.confirm)) {
    gameObserver.trigger("clear");
  }
});

/***/ }),

/***/ "./assets/js/processes/grimoire/travellers.js":
/*!****************************************************!*\
  !*** ./assets/js/processes/grimoire/travellers.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_Template_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");
/* harmony import */ var _utils_objects_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/objects.js */ "./assets/js/utils/objects.js");
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }







var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("game");
var tokenObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("token"); // Include all the Travellers in the traveller list.

var officialTravellers = Object.create(null);
var homebrewTravellers = Object.create(null);
var characterTemplate = null;

function populateTravellers() {
  var travellers = Object.values(_objectSpread(_objectSpread({}, officialTravellers), homebrewTravellers));

  if (!characterTemplate) {
    characterTemplate = _classes_Template_js__WEBPACK_IMPORTED_MODULE_1__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#character-list-template"));
  }

  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.replaceContentsMany)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#traveller-list__list"), travellers.map(function (traveller) {
    return characterTemplate.draw({
      ".js--character-list--item,.js--character-list--button": function jsCharacterListItemJsCharacterListButton(element) {
        element.dataset.tokenId = traveller.getId();
      },
      ".js--character-list--token": function jsCharacterListToken(element) {
        element.append(traveller.drawToken());
      }
    });
  }));
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#add-traveller").disabled = false;
}

_classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_3__["default"].ready(function (tokenStore) {
  (0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_5__.empty)(officialTravellers);
  tokenStore.getAllCharacters().filter(function (character) {
    return character.getTeam() === "traveller";
  }).forEach(function (traveller) {
    return officialTravellers[traveller.getId()] = traveller;
  });
  populateTravellers();
});
gameObserver.on("characters-selected", function (_ref) {
  var detail = _ref.detail;
  // Add any homebrew characters to the list.
  (0,_utils_objects_js__WEBPACK_IMPORTED_MODULE_5__.empty)(homebrewTravellers);
  detail.characters.filter(function (character) {
    return character.getTeam() === "traveller";
  }).forEach(function (traveller) {
    return homebrewTravellers[traveller.getId()] = traveller;
  });
  populateTravellers(); // Flag Travellers in the script as being included. For example, the main 3
  // editions have Travellers that complement the script. Homebrew scripts
  // maight have their own Travellers as well.

  var travellerIDs = detail.characters.filter(function (character) {
    return character.getTeam() === "traveller";
  }).map(function (character) {
    return character.getId();
  });
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookup)(".js--character-list--item[data-token-id]", (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#traveller-list__list")).forEach(function (item) {
    return item.classList.toggle("is-included", travellerIDs.includes(item.dataset.tokenId));
  });
}); // Add to the grimoire when clicked.

var pad = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)(".js--pad").pad;
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#traveller-list__list").addEventListener("click", function (_ref2) {
  var target = _ref2.target;
  var button = target.closest("[data-token-id]");

  if (!button) {
    return;
  }

  _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_3__["default"].ready(function (tokenStore) {
    pad.addCharacter(tokenStore.getCharacter(button.dataset.tokenId));
    _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#traveller-list")).hide();
  });
}); // Night Order.
// #155 - Let the NightOrder class manage the night order.

var travellerCount = Object.create(null);
tokenObserver.on("character-add", function (_ref3) {
  var detail = _ref3.detail;
  var character = detail.character;

  if (character.getTeam() !== "traveller") {
    return;
  }

  var id = character.getId();

  if (!travellerCount[id]) {
    travellerCount[id] = 0;
  }

  travellerCount[id] += 1;
});
tokenObserver.on("character-remove", function (_ref4) {
  var detail = _ref4.detail;
  var character = detail.character;

  if (character.getTeam() !== "traveller") {
    return;
  }

  var id = character.getId();

  if (travellerCount[id]) {
    travellerCount[id] -= 1;
  }
}); // Reminder tokens.

tokenObserver.on("character-add", function (_ref5) {
  var detail = _ref5.detail;
  var character = detail.character;

  if (character.getTeam() !== "traveller") {
    return;
  }

  character.getReminders().forEach(function (reminder) {
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#reminder-list__list").append(reminder.drawList());
  });
});
tokenObserver.on("character-remove", function (_ref6) {
  var detail = _ref6.detail;
  var character = detail.character;
  var count = travellerCount[character.getId()];

  if (character.getTeam() !== "traveller" || count) {
    return;
  }

  character.getReminders().forEach(function (reminder) {
    var _lookupOne;

    (_lookupOne = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("[data-reminder-id=\"".concat(reminder.getId(), "\"]"), (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#reminder-list__list"))) === null || _lookupOne === void 0 ? void 0 : _lookupOne.remove();
  });
});

/***/ }),

/***/ "./assets/js/processes/info-tokens.js":
/*!********************************************!*\
  !*** ./assets/js/processes/info-tokens.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Template_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../classes/Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _classes_InfoToken_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../classes/InfoToken.js */ "./assets/js/classes/InfoToken.js");
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");





var buttonHolder = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#info-token-button-holder");
var dialogHolder = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#info-token-dialog-holder");
_classes_InfoToken_js__WEBPACK_IMPORTED_MODULE_1__["default"].setTemplates({
  button: _classes_Template_js__WEBPACK_IMPORTED_MODULE_0__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#info-token-button-template")),
  dialog: _classes_Template_js__WEBPACK_IMPORTED_MODULE_0__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#info-token-dialog-template"))
});
_classes_InfoToken_js__WEBPACK_IMPORTED_MODULE_1__["default"].setHolders({
  button: buttonHolder,
  custom: (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#info-token-custom-holder"),
  dialog: dialogHolder
});
JSON.parse(buttonHolder.dataset.infoTokens).forEach(function (data) {
  var token = new _classes_InfoToken_js__WEBPACK_IMPORTED_MODULE_1__["default"](data);
  token.draw();
});
var observer = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_2__["default"].create("info-token");
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#add-info-token").addEventListener("click", function () {
  var text = window.prompt(window.I18N.customInfoToken);

  if (!text) {
    return;
  }

  var token = new _classes_InfoToken_js__WEBPACK_IMPORTED_MODULE_1__["default"]({
    raw: text,
    custom: true
  });
  token.draw();
  observer.trigger("info-token-added", {
    token: token
  });
});
var dialog2token = new WeakMap();
observer.on("info-token-added", function (_ref) {
  var detail = _ref.detail;
  var token = detail.token;
  dialog2token.set(token.getDialog(), token);
});

function editToken(token, raw) {
  token.updateRaw(raw);
  observer.trigger("info-token-updated", {
    token: token
  });
}

function deleteToken(token) {
  _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_3__["default"].create(token.getDialog()).hide();
  token.remove();
  observer.trigger("info-token-deleted", {
    token: token
  });
}

dialogHolder.addEventListener("click", function (_ref2) {
  var target = _ref2.target;
  var button = target.closest("button[data-action]");

  if (!button) {
    return;
  }

  var token = dialog2token.get(button.closest(".js--info-token--dialog"));

  if (!token) {
    return;
  }

  switch (button.dataset.action) {
    case "edit":
      var data = token.getData();
      var text = window.prompt(window.I18N.customInfoToken, data.raw);

      if (text) {
        editToken(token, text);
      } else {
        deleteToken(token);
      }

      break;

    case "delete":
      deleteToken(token);
      break;
  }
});

/***/ }),

/***/ "./assets/js/processes/jinxes.js":
/*!***************************************!*\
  !*** ./assets/js/processes/jinxes.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _classes_Template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../classes/Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _classes_Jinx_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../classes/Jinx.js */ "./assets/js/classes/Jinx.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");





var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("game");
var tokenObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("token");
_classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__["default"].ready(function (tokenStore) {
  var trickToTarget = Object.create(null);
  var jinxTemplate = _classes_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#jinx-table-template"));
  /**
   * Registers a jinx in the {@link trickToTarget} map.
   *
   * @param {Jinx} jinx
   *        Jinx to register.
   */

  function registerJinx(jinx) {
    var _jinx$getTrick;

    var trickId = (_jinx$getTrick = jinx.getTrick()) === null || _jinx$getTrick === void 0 ? void 0 : _jinx$getTrick.getId();

    if (!trickId) {
      return;
    }

    if (!trickToTarget[trickId]) {
      trickToTarget[trickId] = [];
    }

    trickToTarget[trickId].push(jinx.getTarget().getId());
  }
  /**
   * Removes a jinx from the {@link trickToTarget} map, keeping it tidy and
   * preventing old data from creating false positives.
   *
   * @param {Jinx} jinx
   *        Jinx to unregister.
   */


  function unregisterJinx(jinx) {
    var _jinx$getTrick2;

    var trickId = (_jinx$getTrick2 = jinx.getTrick()) === null || _jinx$getTrick2 === void 0 ? void 0 : _jinx$getTrick2.getId();

    if (!trickId || !trickToTarget[trickId]) {
      return;
    }

    var index = trickToTarget[trickId].indexOf(jinx.getTarget().getId());

    if (index < 0) {
      return;
    }

    trickToTarget[trickId].splice(index, 1);

    if (!trickToTarget[trickId].length) {
      delete trickToTarget[trickId];
    }
  }
  /**
   * Activates the given Jinx, setting the observer and template, and
   * registering it.
   *
   * @param {Jinx} jinx
   *        Jinx to activate.
   */


  function activateJinx(jinx) {
    jinx.setObserver(tokenObserver);
    jinx.setTemplate(jinxTemplate);
    registerJinx(jinx);
  }

  tokenStore.getAllJinxes().forEach(activateJinx); // Unready any old jinxes and ready any jinxes on the current script.

  gameObserver.on("characters-selected", function (_ref) {
    var detail = _ref.detail;
    tokenStore.getAllJinxes().forEach(function (jinx) {
      return jinx.toggleReady(false);
    });
    tokenStore.getAllHomebrewJinxes().forEach(unregisterJinx);
    tokenStore.removeAllHomebrewJinxes();
    var characters = detail.characters;
    characters.forEach(function (character) {
      // A character will only have "jinxes" data if it's a homebrew role
      // that includes jinxes. When that happens - create Jinx instances
      // for them, add them to the character, and register them in the
      // store so that they can interact with the system.
      if (character.hasData("jinxes")) {
        character.getData("jinxes").forEach(function (_ref2) {
          var id = _ref2.id,
              reason = _ref2.reason;
          // Get the trick from the token store or the characters
          // that have been passed in - this allows one homebrew
          // character to be jinxed with another.
          var trick = tokenStore.getCharacter(id) || characters.find(function (character) {
            return character.getId() === id;
          });
          var jinx = new _classes_Jinx_js__WEBPACK_IMPORTED_MODULE_3__["default"](trick, reason);
          jinx.setIsHomebrew(true);
          character.addJinx(jinx);
          activateJinx(jinx);
          tokenStore.addJinx(jinx);
        });
      }

      character.readyAllJinxes(characters);
    });
    var allJinxes = tokenStore.getAllJinxes();
    gameObserver.trigger("jinxes-ready", {
      jinxes: allJinxes.filter(function (jinx) {
        return jinx.isReady();
      })
    });
  }); // Toggle jinx states based on characters being selected or unselected.

  gameObserver.on("character-toggle", function (_ref3) {
    var _trickToTarget$id;

    var detail = _ref3.detail;
    var id = detail.id,
        active = detail.active;
    var character = tokenStore.getCharacter(id);
    character.toggleJinxTarget(active);
    (_trickToTarget$id = trickToTarget[id]) === null || _trickToTarget$id === void 0 ? void 0 : _trickToTarget$id.forEach(function (targetId) {
      tokenStore.getCharacter(targetId).toggleJinxTrick(character, active);
    });
  }); // Draw all ready jinxes.

  var jinxSection = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#jinxes");
  var jinxTable = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#jinx-table");
  gameObserver.on("jinxes-ready", function (_ref4) {
    var detail = _ref4.detail;
    var jinxes = detail.jinxes;
    jinxSection.hidden = jinxes.length === 0;
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.replaceContentsMany)(jinxTable, jinxes.map(function (jinx) {
      return jinx.draw();
    }));
  });
  tokenObserver.on("toggle-jinx-active", function (_ref5) {
    var _lookupOne;

    var detail = _ref5.detail;
    var jinx = detail.jinx,
        active = detail.active;
    (_lookupOne = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#".concat(jinx.getId()))) === null || _lookupOne === void 0 ? void 0 : _lookupOne.classList.toggle("is-active", active);
  }); // Activate and deactivate the jinxes as characters are added to the
  // grimoire pad.

  var characters = [];

  function addCharacter(character) {
    var jinxes = Object.create(null);
    character.getJinxes().forEach(function (jinx) {
      jinx.toggleTarget(true);
      jinxes[jinx.getTrick().getId()] = jinx;
    });
    characters.forEach(function (_char) {
      var _jinxes$_char$getId;

      _char.toggleJinxTrick(character, true);

      (_jinxes$_char$getId = jinxes[_char.getId()]) === null || _jinxes$_char$getId === void 0 ? void 0 : _jinxes$_char$getId.toggleTrick(true);
    });
    characters.push(character);
  }

  function removeCharacter(character) {
    var id = character.getId();
    characters.splice(characters.indexOf(character), 1);

    if (!characters.find(function (_char2) {
      return _char2.getId() === id;
    })) {
      character.getJinxes().forEach(function (jinx) {
        return jinx.toggleTarget(false);
      });
      characters.forEach(function (_char3) {
        return _char3.toggleJinxTrick(character, false);
      });
    }
  }

  tokenObserver.on("character-add", function (_ref6) {
    var detail = _ref6.detail;
    addCharacter(detail.character);
  });
  tokenObserver.on("character-remove", function (_ref7) {
    var detail = _ref7.detail;
    removeCharacter(detail.character);
  }); // #128 - some reminders stand in place of the actual token.

  tokenObserver.on("reminder-add", function (_ref8) {
    var detail = _ref8.detail;
    var reminder = detail.reminder;
    var character = tokenStore.getCharacter(reminder.getCharacterId());

    if (reminder.getIsGlobal() && reminder.getId().endsWith(":0") && character.hasSpecialData("reveal", "replace-character")) {
      addCharacter(character);
    }
  }); // #128 - some reminders stand in place of the actual token.

  tokenObserver.on("reminder-remove", function (_ref9) {
    var detail = _ref9.detail;
    var reminder = detail.reminder;
    var character = tokenStore.getCharacter(reminder.getCharacterId());

    if (reminder.getIsGlobal() && reminder.getId().endsWith(":0") && character.hasSpecialData("reveal", "replace-character")) {
      removeCharacter(character);
    }
  }); // Allow all Jinxes to be shown based on user preference.

  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#show-all-jinxes").addEventListener("change", function (_ref10) {
    var target = _ref10.target;
    jinxTable.classList.toggle("is-show-all", target.checked);
  });
});

/***/ }),

/***/ "./assets/js/processes/night-order.js":
/*!********************************************!*\
  !*** ./assets/js/processes/night-order.js ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_NightOrder_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../classes/NightOrder.js */ "./assets/js/classes/NightOrder.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");



var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("game");
var tokenObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("token");
var nightOrder = new _classes_NightOrder_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
nightOrder.setHolders({
  first: (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#first-night"),
  other: (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#other-nights")
});
gameObserver.on("characters-selected", function (_ref) {
  var detail = _ref.detail;
  nightOrder.reset();
  nightOrder.setCharacters(detail.characters.filter(function (character) {
    return !["fabled", "traveller"].includes(character.getTeam());
  }));
  nightOrder.drawAllNightOrders();
}); // #145 - Show the "First Night" order after clearing the grimoire.

gameObserver.on("clear", function () {
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)(".js--night-order--carousel").scrollLeft = 0;
}); // TODO: Travellers and Fabled should be unique, it should only be possible to
// add 1 of each. Add that limitation so we don't need to count them anymore.

var specialRoles = {
  fabled: Object.create(null),
  traveller: Object.create(null)
};
tokenObserver.on("character-add", function (_ref2) {
  var detail = _ref2.detail;
  var character = detail.character;
  var team = character.getTeam(); // #155 - If we have a traveller or a fabled, add it to the night order.

  if (specialRoles[team]) {
    var id = character.getId();

    if (!specialRoles[team][id]) {
      specialRoles[team][id] = 0;
    }

    specialRoles[team][id] += 1;
    nightOrder.setCharacter(character);
    nightOrder.placeInOrder(character);
  } // #131 - check the character isn't from the previous script.


  if (!nightOrder.hasCharacter(character)) {
    return;
  }

  nightOrder.addCharacter(character);
});
tokenObserver.on("character-remove", function (_ref3) {
  var detail = _ref3.detail;
  var character = detail.character;
  var team = character.getTeam(); // #155 - If we're removing a fabled or traveller, remove them if necessary.

  if (specialRoles[team]) {
    var id = character.getId();

    if (specialRoles[team][id]) {
      specialRoles[team][id] -= 1;

      if (specialRoles[team][id] <= 0) {
        nightOrder.unsetCharacter(character);
        delete specialRoles[team][id];
      }
    }
  } // #131 - check the character isn't from the previous script.


  if (!nightOrder.hasCharacter(character)) {
    return;
  }

  nightOrder.removeCharacter(character);
});
tokenObserver.on("shroud-toggle", function (_ref4) {
  var detail = _ref4.detail;

  // #131 - check the character isn't from the previous script.
  if (!nightOrder.hasCharacter(detail.character)) {
    return;
  }

  nightOrder.toggleDead(detail.character, detail.isDead);
});
var showDead = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOne)("#show-dead");
showDead.addEventListener("change", function (_ref5) {
  var target = _ref5.target;
  var showDead = target.checked;
  nightOrder.setShowDead(showDead);
  gameObserver.trigger("night-order-show-dead", {
    showDead: showDead
  });
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOne)("#show-all").addEventListener("change", function (_ref6) {
  var target = _ref6.target;
  var showAll = target.checked;
  nightOrder.setShowNotInPlay(showAll);
  gameObserver.trigger("night-order-show-all", {
    showAll: showAll
  }); // Showing all characters not in play but hiding the dead can seem
  // confusing. This forces "show dead" to be true when showing all, although
  // the user can hide the dead seperately.

  if (showAll && !showDead.checked) {
    showDead.checked = true;
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.announceInput)(showDead);
  }
});

/***/ }),

/***/ "./assets/js/processes/notes.js":
/*!**************************************!*\
  !*** ./assets/js/processes/notes.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");

var button = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_0__.lookupOne)("#clear-st-notes");
var field = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_0__.lookupOne)("#st-notes");
button.addEventListener("click", function () {
  if (window.confirm(button.dataset.warning)) {
    field.value = "";
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_0__.announceInput)(field);
  }
});

/***/ }),

/***/ "./assets/js/processes/setup/character-sheet.js":
/*!******************************************************!*\
  !*** ./assets/js/processes/setup/character-sheet.js ***!
  \******************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _lib_qrcode_svg_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../lib/qrcode-svg.js */ "./assets/js/lib/qrcode-svg.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");



var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("game");
var characterStore = Object.create(null);
/**
 * Draws the QR code based on information on the QR code element.
 */

function drawQRCode() {
  var includeTravellers = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#include-travellers").checked;
  var includeFabled = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#include-fabled").checked;
  var qrCode = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#qr-code");
  var anchor = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#qr-code-link");
  var url = new URL(anchor.href);
  var _qrCode$dataset = qrCode.dataset,
      name = _qrCode$dataset.name,
      game = _qrCode$dataset.game;

  if (name) {
    url.searchParams.set("name", name);
  } else {
    url.searchParams["delete"]("name");
  }

  if (game) {
    url.searchParams.set("game", game);
    url.searchParams.set("traveller", Number(includeTravellers));
    url.searchParams.set("fabled", Number(includeFabled));
    url.searchParams["delete"]("characters");
  } else {
    var teams = ["townsfolk", "outsider", "minion", "demon"];

    if (includeTravellers) {
      teams.push("traveller");
    }

    if (includeFabled) {
      teams.push("fabled");
    }

    var ids = characterStore[qrCode.dataset.characters].filter(function (character) {
      return teams.includes(character.getTeam());
    }).map(function (character) {
      return character.getId();
    });
    url.searchParams.set("characters", ids);
    url.searchParams["delete"]("game");
    url.searchParams["delete"]("traveller");
    url.searchParams["delete"]("fabled");
  }

  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.empty)(qrCode).append((0,_lib_qrcode_svg_js__WEBPACK_IMPORTED_MODULE_1__["default"])({
    msg: url.toString(),
    ecl: "L"
  }));
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#qr-code-button").disabled = false;
  anchor.href = url.toString();
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#qr-code-link").disabled = false;
}

gameObserver.on("characters-selected", function (_ref) {
  var detail = _ref.detail;
  var name = detail.name,
      characters = detail.characters,
      game = detail.game;
  var qrCode = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#qr-code");

  if (game) {
    qrCode.dataset.game = game;
    delete qrCode.dataset.characters;
  } else {
    var ids = JSON.stringify(characters.map(function (character) {
      return character.getId();
    }));
    characterStore[ids] = characters;
    qrCode.dataset.characters = ids;
    delete qrCode.dataset.game;
  }

  if (name) {
    qrCode.dataset.name = name;
  } else {
    delete qrCode.dataset.name;
  }

  drawQRCode();
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#include-travellers").addEventListener("change", function () {
  drawQRCode();
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#include-fabled").addEventListener("change", function () {
  drawQRCode();
});

/***/ }),

/***/ "./assets/js/processes/setup/clear-cache.js":
/*!**************************************************!*\
  !*** ./assets/js/processes/setup/clear-cache.js ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Store.js */ "./assets/js/classes/Store.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");



var store = _classes_Store_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("pocket-grimoire");
var clears = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupCached)("input[name=\"clear\"]");
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOne)("#clear-all").addEventListener("change", function (_ref) {
  var target = _ref.target;
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#clear-individual").hidden = target.checked;

  if (target.checked) {
    clears.forEach(function (input) {
      input.checked = true;
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.announceInput)(input);
    });
  }
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOne)("#clear-tokens").addEventListener("change", function (_ref2) {
  var target = _ref2.target;
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#token-warning").hidden = !target.checked;
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOne)("#clear-infoTokens").addEventListener("change", function (_ref3) {
  var target = _ref3.target;
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#info-token-warning").hidden = !target.checked;
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOne)("#cache-form").addEventListener("submit", function (e) {
  e.preventDefault();
  clears.forEach(function (_ref4) {
    var value = _ref4.value,
        checked = _ref4.checked;

    if (checked) {
      store["delete"](value);
    }
  });

  if ((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#clear-refresh").checked) {
    window.location.reload();
  }

  _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_2__.lookupOneCached)("#clear-cache")).hide();
});

/***/ }),

/***/ "./assets/js/processes/setup/general.js":
/*!**********************************************!*\
  !*** ./assets/js/processes/setup/general.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Store.js */ "./assets/js/classes/Store.js");
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_Template_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../classes/Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _classes_CharacterToken_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../classes/CharacterToken.js */ "./assets/js/classes/CharacterToken.js");
/* harmony import */ var _classes_ReminderToken_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../classes/ReminderToken.js */ "./assets/js/classes/ReminderToken.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _classes_Names_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../classes/Names.js */ "./assets/js/classes/Names.js");
/* harmony import */ var _utils_fetch_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../utils/fetch.js */ "./assets/js/utils/fetch.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");
/* harmony import */ var _constants_language_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../../constants/language.js */ "./assets/js/constants/language.js");
function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }

function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }

function _nonIterableSpread() { throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _iterableToArray(iter) { if (typeof Symbol !== "undefined" && iter[Symbol.iterator] != null || iter["@@iterator"] != null) return Array.from(iter); }

function _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }

function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }












var store = _classes_Store_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("pocket-grimoire");
var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_1__["default"].create("game");
(0,_utils_fetch_js__WEBPACK_IMPORTED_MODULE_8__.fetchFromStore)("characters_".concat(_constants_language_js__WEBPACK_IMPORTED_MODULE_10__.LANGUAGE), URLS.characters, store).then(function (characters) {
  gameObserver.trigger("characters-loaded", {
    characters: characters
  });
});
(0,_utils_fetch_js__WEBPACK_IMPORTED_MODULE_8__.fetchFromStore)("jinxes_".concat(_constants_language_js__WEBPACK_IMPORTED_MODULE_10__.LANGUAGE), URLS.jinxes, store).then(function (jinxes) {
  gameObserver.trigger("jinxes-loaded", {
    jinxes: jinxes
  });
});
(0,_utils_fetch_js__WEBPACK_IMPORTED_MODULE_8__.fetchFromStore)("game", URLS.game, store).then(function (breakdown) {
  gameObserver.trigger("team-breakdown-loaded", {
    breakdown: breakdown
  });
});
_classes_CharacterToken_js__WEBPACK_IMPORTED_MODULE_3__["default"].setTemplates({
  token: _classes_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOne)("#character-template")),
  list: _classes_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOne)("#character-list-template")),
  select: _classes_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOne)("#character-select-template")),
  nightOrder: _classes_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOne)("#night-info-template"))
});
_classes_ReminderToken_js__WEBPACK_IMPORTED_MODULE_4__["default"].setTemplates({
  token: _classes_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOne)("#reminder-template")),
  list: _classes_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOne)("#reminder-list-template"))
});
_classes_Names_js__WEBPACK_IMPORTED_MODULE_7__["default"].create().setTemplate(_classes_Template_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOne)("#player-name-template"))).setObserver(new _classes_Observer_js__WEBPACK_IMPORTED_MODULE_1__["default"]());
Promise.all([new Promise(function (resolve) {
  gameObserver.on("characters-loaded", function (_ref) {
    var detail = _ref.detail;
    resolve(detail.characters);
  });
}), new Promise(function (resolve) {
  gameObserver.on("jinxes-loaded", function (_ref2) {
    var detail = _ref2.detail;
    resolve(detail.jinxes);
  });
})]).then(function (_ref3) {
  var _ref4 = _slicedToArray(_ref3, 2),
      characters = _ref4[0],
      jinxes = _ref4[1];

  _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__["default"].create({
    characters: [// Create an empty character which we can use as a token placeholder.
    _defineProperty({
      id: _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__["default"].EMPTY,
      image: "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",
      ability: I18N.emptyCharacterAbility
    }, _classes_CharacterToken_js__WEBPACK_IMPORTED_MODULE_3__["default"].empty, true)].concat(_toConsumableArray(characters)),
    reminders: [{
      id: _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__["default"].EMPTY,
      name: "",
      text: I18N.goodTeam,
      image: "/build/img/icons/townsfolk.webp",
      isGlobal: true
    }, {
      id: _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_5__["default"].EMPTY,
      name: "",
      text: I18N.evilTeam,
      image: "/build/img/icons/demon.webp",
      isGlobal: true
    }],
    jinxes: jinxes
  });
}); // Delegate this event for two reasons:
// 1. We can add dialogs dynamically and they'll still work.
// 2. It's more efficient to only create the instance when it's needed.

document.body.addEventListener("click", function (_ref6) {
  var target = _ref6.target;

  if (target.hasAttribute("data-dialog") && !target.dialog) {
    target.dialog = _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_6__["default"].createFromTrigger(target);
    target.dialog.show();
  }
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookup)("input[data-filter-list]").forEach(function (input) {
  input.addEventListener("change", function (_ref7) {
    var target = _ref7.target;
    var list = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOneCached)(target.dataset.filterList);

    if (!list) {
      return;
    }

    list.classList.toggle("is-show-all", target.checked);
  });
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOne)("#locale-form").addEventListener("submit", function (e) {
  e.preventDefault();
  window.location.href = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOneCached)("#select-locale").value;
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOneCached)("#select-locale").addEventListener("change", function (_ref8) {
  var target = _ref8.target;
  target.form.requestSubmit();
});

function setTrackWidth(input) {
  var min = input.min,
      max = input.max,
      value = input.value;
  input.style.setProperty("--size", (value - min) * 100 / (max - min));
}

var rangeObserver = new MutationObserver(function (entries) {
  entries.forEach(function (_ref9) {
    var type = _ref9.type,
        target = _ref9.target;

    if (type == "attributes") {
      setTrackWidth(target);
    }
  });
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookup)("input[type=\"range\"][data-output]").forEach(function (input) {
  var output = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_9__.lookupOne)(input.dataset.output);
  input.addEventListener("input", function () {
    setTrackWidth(input);

    if (output) {
      output.value = input.value;
    }
  });
  setTrackWidth(input);
  rangeObserver.observe(input, {
    attributes: true,
    attributeFilter: ["min", "max", "value"]
  });
});

/***/ }),

/***/ "./assets/js/processes/setup/select-characters.js":
/*!********************************************************!*\
  !*** ./assets/js/processes/setup/select-characters.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");
/* harmony import */ var _utils_arrays_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/arrays.js */ "./assets/js/utils/arrays.js");
/* harmony import */ var _utils_numbers_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/numbers.js */ "./assets/js/utils/numbers.js");
/* harmony import */ var _utils_strings_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../utils/strings.js */ "./assets/js/utils/strings.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }








var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("game");
var tokenObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("token");
/**
 * Sets the totals for each team based on the breakdown that's given.
 *
 * @param {Object} breakdown
 *        Breakdown of the numbers for the teams.
 */

function setTotals(breakdown) {
  Object.entries(breakdown).forEach(function (_ref) {
    var _ref2 = _slicedToArray(_ref, 2),
        team = _ref2[0],
        count = _ref2[1];

    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupCached)("[data-team=\"".concat(team, "\"] .js--character-select--total")).forEach(function (element) {
      element.textContent = count;
    });
  });
}
/**
 * Highlights randomly selected entries in each of the teams.
 *
 * @param {String} team
 *        Name of the team that should have entries randomly highlighted.
 * @param {Number} count
 *        The number of randomly selected items that should be highlighted.
 */


function highlightRandomInTeam(team, count) {
  // Don't cache this since they will change if a different edition is chosen.
  var inputs = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookup)("[data-team=\"".concat(team, "\"] [name=\"character\"]"));

  if (!inputs.length) {
    return;
  }

  var chosen = (0,_utils_arrays_js__WEBPACK_IMPORTED_MODULE_4__.shuffle)(inputs).slice(0, count);
  inputs.forEach(function (input) {
    var isChecked = input.checked;
    input.checked = chosen.includes(input);

    if (isChecked) {
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("input[name=\"count-".concat(input.value, "\"]")).value = 1;
    }

    if (input.checked !== isChecked) {
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.announceInput)(input);
    }
  });
}

gameObserver.on("team-breakdown-loaded", function (_ref3) {
  var detail = _ref3.detail;
  var playerCount = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#player-count");
  playerCount.addEventListener("input", function () {
    gameObserver.trigger("player-count", {
      count: Number(playerCount.value)
    });
  });

  function getBreakdown() {
    var breakdown = detail.breakdown;
    return breakdown[(0,_utils_numbers_js__WEBPACK_IMPORTED_MODULE_5__.clamp)(0, playerCount.value - 5, breakdown.length - 1)];
  }

  playerCount.addEventListener("input", function () {
    return setTotals(getBreakdown());
  });
  setTotals(getBreakdown());
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#player-select-random").addEventListener("click", function () {
    var total = 0;
    Object.entries(getBreakdown()).forEach(function (_ref4) {
      var _ref5 = _slicedToArray(_ref4, 2),
          team = _ref5[0],
          count = _ref5[1];

      highlightRandomInTeam(team, count);
      total += count;
    });
    highlightRandomInTeam("traveller", playerCount.value - total);
  });
});
gameObserver.on("characters-selected", function (_ref6) {
  var detail = _ref6.detail;
  var characters = detail.characters;
  var teams = (0,_utils_arrays_js__WEBPACK_IMPORTED_MODULE_4__.groupBy)(characters, function (character) {
    return character.getTeam();
  });
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupCached)("[data-team]").forEach(function (wrapper) {
    // Populate the team sections.
    var team = wrapper.dataset.team;
    var isTeamPopulated = Array.isArray(teams[team]);
    wrapper.hidden = !isTeamPopulated;
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.replaceContentsMany)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)(".js--character-select--list", wrapper), (teams[team] || []).map(function (character) {
      return character.drawSelect();
    })); // Deselect any checkboxes and set the counts to zero.

    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookup)(".js--character-select--input", wrapper).forEach(function (input) {
      input.checked = false;
    });
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)(".js--character-select--count", wrapper).textContent = 0; // Store the "count" inputs.
    // This allows us to quickly add all the values together to get the
    // number of tokens selected in this group, regardless of whether tokens
    // have been added, removed, or duplicated.

    wrapper.countInputs = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookup)("input[name^=\"count\"]", wrapper);
  }); // Make sure the Number of players can't exceed the number of characters.

  var maxPlayers = 15;
  maxPlayers += Math.min((teams.traveller || []).length, 5);
  maxPlayers = Math.min(maxPlayers, characters.length);
  var playerCount = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#player-count");
  playerCount.max = maxPlayers;

  if (playerCount.value >= maxPlayers) {
    playerCount.value = maxPlayers;
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.announceInput)(playerCount);
  } // Enable the "Select Characters" button.


  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#select-characters").disabled = false;
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#toggle-abilities").addEventListener("input", function (_ref7) {
  var target = _ref7.target;
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupCached)("[data-team]").forEach(function (wrapper) {
    wrapper.classList.toggle("is-hide-abilities", !target.checked);
  });
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#toggle-duplicates").addEventListener("input", function (_ref8) {
  var target = _ref8.target;
  var checked = target.checked;
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupCached)("[data-team]").forEach(function (wrapper) {
    wrapper.classList.toggle("is-show-duplicates", checked);

    if (!checked) {
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookup)("[name^=\"count-\"]", wrapper).forEach(function (input) {
        var value = input.value;

        if (value > 1) {
          input.value = 1;
          (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.announceInput)(input);
        }
      });
    }
  });
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupCached)("[data-team]").forEach(function (wrapper) {
  wrapper.addEventListener("change", function (_ref9) {
    var target = _ref9.target;

    if (!target.matches("input[name=\"character\"]")) {
      return;
    }

    gameObserver.trigger("character-toggle", {
      element: target,
      id: target.value,
      active: target.checked
    });
  });
  wrapper.addEventListener("input", function (_ref10) {
    var target = _ref10.target;

    if (!target.matches("input[name^=\"count\"]")) {
      return;
    }

    gameObserver.trigger("character-count-change", {
      element: target,
      id: target.dataset["for"],
      count: Number(target.value)
    });
  });
  wrapper.addEventListener("click", function (_ref11) {
    var target = _ref11.target;
    var button = target.closest("[data-quantity-amount]");

    if (!button) {
      return;
    }

    var input = button.input || (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)(".js--character-select--count", button.closest(".js--character-select--duplicate-wrapper"));
    button.input = input;
    var value = Number(input.value) || 0;
    var delta = Number(button.dataset.quantityAmount) || 0;
    var amount = value + delta;
    input.value = amount;

    if (amount) {
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.announceInput)(input);
    } else {
      var checkbox = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)(".js--character-select--input", button.closest(".js--character-select"));
      checkbox.checked = false;
      (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.announceInput)(checkbox);
    }
  });
});
gameObserver.on("character-toggle", function (_ref12) {
  var detail = _ref12.detail;
  var id = detail.id,
      active = detail.active,
      element = detail.element;
  var input = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("input[name=\"count-".concat(id, "\"]"));
  var value = Number(input.value);
  element.closest(".js--character-select").classList.toggle("is-selected", active);

  if (active) {
    if (value < 1) {
      input.value = 1;
    }
  } else {
    input.value = 0;
  }

  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.announceInput)(input);
});
var validationInput = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#player-select-validation");
gameObserver.on("character-count-change", function (_ref13) {
  var detail = _ref13.detail;
  var element = detail.element;
  var wrapper = element.closest("[data-team]");
  var countElement = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)(".js--character-select--count", wrapper);
  countElement.textContent = wrapper.countInputs.reduce(function (total, input) {
    return total + Number(input.value);
  }, 0);
  validationInput.setCustomValidity("");
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#player-select").addEventListener("submit", function (e) {
  e.preventDefault();
  var ids = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookup)(".js--character-select--input:checked", e.target).map(function (_ref14) {
    var value = _ref14.value;
    return value;
  });
  _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__["default"].ready(function (tokenStore) {
    var filtered = tokenStore.getAllCharacters().filter(function (character) {
      return ids.includes(character.getId());
    }).map(function (character) {
      // We use times() instead of Array#fill() here because fill()
      // didn't seem to work correctly.
      var duplicates = [];
      (0,_utils_numbers_js__WEBPACK_IMPORTED_MODULE_5__.times)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("input[name=\"count-".concat(character.getId(), "\"]")).value, function () {
        return duplicates.push(character);
      });
      return duplicates;
    }).flat();
    var bagDisabled = filtered.filter(function (character) {
      return character.hasSpecialData("selection", "bag-disabled");
    });

    if (bagDisabled.length) {
      validationInput.setCustomValidity((0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_6__.supplant)(window.I18N.bagDisabled, [bagDisabled.map(function (character) {
        return character.getName();
      }).join(", ")]));
      validationInput.form.reportValidity();
    } else {
      var _e$submitter;

      validationInput.setCustomValidity("");
      var isShowAll = Boolean(((_e$submitter = e.submitter) === null || _e$submitter === void 0 ? void 0 : _e$submitter.id) === "player-select-all");
      gameObserver.trigger("character-draw", {
        isShowAll: isShowAll,
        characters: isShowAll ? (0,_utils_arrays_js__WEBPACK_IMPORTED_MODULE_4__.shuffle)(filtered) : filtered
      });
      _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#character-select")).hide();
    }
  });
});
tokenObserver.on("toggle-jinx-active", function (_ref15) {
  var _jinx$getTarget;

  var detail = _ref15.detail;
  var jinx = detail.jinx,
      state = detail.state;
  var input = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)(".js--character-select--input[value=\"".concat((_jinx$getTarget = jinx.getTarget()) === null || _jinx$getTarget === void 0 ? void 0 : _jinx$getTarget.getId(), "\"]"));

  if (input) {
    var _input$closest, _input$closest$queryS;

    (_input$closest = input.closest(".js--character-select--label")) === null || _input$closest === void 0 ? void 0 : (_input$closest$queryS = _input$closest.querySelector(".js--character-select--name")) === null || _input$closest$queryS === void 0 ? void 0 : _input$closest$queryS.classList.toggle("is-jinx", state);
  }
});
var breakdownTable = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#breakdown-table");

function highlightBreakdown(number) {
  if (number > 15) {
    number = 15;
  }

  number = String(number);
  var index = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupCached)("[data-count]", breakdownTable).findIndex(function (cell) {
    return cell.dataset.count === number;
  });
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookup)(".is-count", breakdownTable).forEach(function (cell) {
    return cell.classList.remove("is-count");
  });
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupCached)("tbody>tr", breakdownTable).forEach(function (row) {
    var _lookupCached$index;

    (_lookupCached$index = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupCached)(".js--breakdown--cell", row)[index]) === null || _lookupCached$index === void 0 ? void 0 : _lookupCached$index.classList.add("is-count");
  });
}

(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#player-count").addEventListener("input", function (_ref16) {
  var target = _ref16.target;
  highlightBreakdown(target.value);
});
highlightBreakdown((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#player-count").value);

/***/ }),

/***/ "./assets/js/processes/setup/select-edition.js":
/*!*****************************************************!*\
  !*** ./assets/js/processes/setup/select-edition.js ***!
  \*****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");
/* harmony import */ var _utils_strings_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/strings.js */ "./assets/js/utils/strings.js");
/* harmony import */ var _utils_fetch_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/fetch.js */ "./assets/js/utils/fetch.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }

function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }







/**
 * Checks to see if the given data looks like a script.
 *
 * @param  {Array.<Object|String>} json
 *         Data to check.
 * @return {Boolean}
 *         true if the data looks like a script, false if it doesn't.
 */

function isScriptJson(json) {
  return Array.isArray(json) && json.length && json.every(function (item) {
    return _typeof(item) === "object" && typeof (item === null || item === void 0 ? void 0 : item.id) === "string" || typeof item === "string";
  });
}
/**
 * Checks to see if the given json looks like it contains any homebrew content.
 *
 * @param  {Array.<Object>} json
 *         Data to check.
 * @return {Boolean}
 *         true if the data seems to contain any homebrew, false if it doesn't
 *         seem to contain any homebrew.
 */


function containsHomebrew(json) {
  return json.filter(function (_ref) {
    var id = _ref.id;
    return id !== "_meta";
  }).some(function (_ref2) {
    var ability = _ref2.ability;
    return typeof ability === "string";
  });
}
/**
 * Announces that a script has been added to the grimoire.
 *
 * @param {String} name
 *        Name of the script. This may be an empty string.
 * @param {Array.<Object>} characters
 *        Characters in the script.
 * @param {String|null} [game=null]
 *        The ID of the homebrew script that was uploaded. This will be null for
 *        a game that only consists of recognised characters.
 */


function announceScript(name, characters) {
  var game = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
  _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("game").trigger("characters-selected", {
    name: name,
    characters: characters,
    game: game
  });
  _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#edition-list")).hide();
}
/**
 * Shows the given error message on the given input.
 *
 * @param {Element} input
 *        Element that should show an error.
 * @param {String} error
 *        Error message to show.
 */


function showInputError(input, error) {
  input.setCustomValidity(error);
  input.form.reportValidity();
} // A map of any common mistakes that we find in the homebrew code.


var normalMap = {
  team: {
    // The American spelling has one L, but I'm British and I use two L's.
    "traveler": "traveller"
  }
};
/**
 * Fixes any common mistakes in the homebrew code.
 *
 * @param  {Array} json
 *         Homebrew JSON.
 * @return {Array}
 *         The homebrew JSON, mapped so that it works with our system.
 */

function normaliseHomebrew(json) {
  return json.map(function (entry) {
    // An official character may be a simple string rather than the
    // old-school approach of an object with an "id" key.
    if (typeof entry === "string") {
      entry = {
        id: entry
      };
    }

    Object.entries(normalMap).forEach(function (_ref3) {
      var _ref4 = _slicedToArray(_ref3, 2),
          key = _ref4[0],
          map = _ref4[1];

      entry[key] = map[entry[key]] || entry[key];
    });

    if (Array.isArray(entry.image)) {
      entry.image = entry.image[0];
    }

    if (entry.team && !entry.image) {
      entry.image = "/build/img/icons/".concat(entry.team, ".png");
    }

    return entry;
  });
}
/**
 * Removes the "_meta" entry from the given JSON data, if it exists, and returns
 * the name within that entry. If the entry isn't found, an empty string is
 * returned.
 *
 * @param  {Array.<Object>} json
 *         JSON data whose "_meta" entry should be removed.
 * @return {String}
 *         Name of the script, taking from the "_meta" entry, or an empty string
 *         if the name cannot be found.
 */


function extractMetaEntry(json) {
  var name = "";
  var metaIndex = json.findIndex(function (_ref5) {
    var id = _ref5.id;
    return id === "_meta";
  });

  if (metaIndex > -1) {
    name = json[metaIndex].name;
    json.splice(metaIndex, 1);
  }

  return name;
}
/**
 * Sets the loading state of the form, setting the state of the loading
 * animation in the submit button.
 *
 * @param {Element} form
 *        Form whose loading state should be set.
 * @param {Boolean} state
 *        true if the form is loading, false if it's not.
 */


function setFormLoadingState(form, state) {
  if (form.dataset.isLoading === state || String(form.dataset.isLoading) === String(state)) {
    return;
  }

  form.dataset.isLoading = state;
  var submit = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("[type=\"submit\"]", form);
  submit.classList.toggle("is-loading", state);
  var progress = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("[role=\"progressbar\"]", submit);
  progress.setAttribute("aria-busy", state);
  progress.setAttribute("aria-valuenow", state ? "0" : progress.getAttribute("aria-valuemax"));
}
/**
 * Converts a character entry into a normalised ID.
 *
 * @param  {Object|String} item
 *         Item whose normalised ID should be returned.
 * @return {String}
 *         Normalised character ID.
 */


function convertCharacterId(item) {
  var id = "";

  if (typeof item === "string") {
    id = item;
  } else if (item && _typeof(item) === "object") {
    id = item.id || "";
  }

  return _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__["default"].normaliseId(id);
}
/**
 * Processes the JSON to set up the game.
 *
 * @param  {Object} json
 *         JSON to process.
 * @param  {Element} json.form
 *         The form that was submitted so the JSON could be processed.
 * @param  {Array.<Object>} json.json
 *         Script to process.
 * @param  {Element} json.input
 *         File input that uploads scripts.
 * @param  {TokenStore} json.store
 *         Store for any data.
 * @return {Promise}
 *         An empty, resolved Promise.
 */


function processJSON(_ref6) {
  var form = _ref6.form,
      json = _ref6.json,
      input = _ref6.input,
      store = _ref6.store;

  if (!isScriptJson(json)) {
    showInputError(input, I18N.invalidScript);
    return Promise.resolve();
  }

  if (containsHomebrew(json)) {
    var normalised = normaliseHomebrew(json);
    setFormLoadingState(form, true);
    return (0,_utils_fetch_js__WEBPACK_IMPORTED_MODULE_5__.post)(URLS.homebrew, normalised).then(function (_ref7) {
      var success = _ref7.success,
          game = _ref7.game,
          message = _ref7.message,
          reasons = _ref7.reasons;
      setFormLoadingState(form, false);

      if (success) {
        announceScript(extractMetaEntry(normalised), normalised.map(function (item) {
          return store.getOfficialCharacter(convertCharacterId(item)) || store.createCustomCharacter(item);
        }), game);
        _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOneCached)("#edition-list")).hide();
      } else {
        if (reasons && reasons.length) {
          message += "\n\n" + reasons.join("\n");
        }

        showInputError(input, message);
      }
    });
  }

  var name = extractMetaEntry(json);
  var characters = json.map(function (item) {
    return store.getCharacter(convertCharacterId(item));
  }).filter(Boolean);

  if (!characters.length) {
    showInputError(input, I18N.noCharacters);
    return Promise.resolve();
  }

  announceScript(name, characters);
  return Promise.resolve();
}
/**
 * Sets the validation on the given fields.
 *
 * @param {Array.<Element>} fields
 *        Input fields that should have their validity set.
 * @param {Boolean} isVisible
 *        true if the fields are visible and their validity should be set, false
 *        if they're not visible and their validity should be removed.
 */


function setFieldsValidity(fields, isVisible) {
  if (isVisible) {
    var inputted = fields.find(function (field) {
      return field.value;
    });
    fields.forEach(function (field) {
      field.required = !inputted || field === inputted;
    });
  } else {
    fields.forEach(function (field) {
      field.setCustomValidity("");
      field.required = false;
    });
  }
}

var form = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#select-edition-form");
var fileInput = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#custom-script-upload");
var fileInputRender = fileInput.nextElementSibling;
var urlInput = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#custom-script-url");
var pasteInput = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#custom-script-paste");
var uploader = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#custom-script");
var radios = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookup)("[name=\"edition\"]", form);
var customInputs = [fileInput, urlInput, pasteInput];
radios.forEach(function (radio) {
  radio.addEventListener("input", function (_ref8) {
    var target = _ref8.target;
    var isCustom = target.value === "custom";
    uploader.hidden = !isCustom;
    setFieldsValidity(customInputs, isCustom);
  });
});
customInputs.forEach(function (input) {
  input.addEventListener("input", function () {
    input.setCustomValidity("");
    setFieldsValidity(customInputs, true);
  });
});
form.addEventListener("submit", function (e) {
  e.preventDefault();

  if (form.dataset.isLoading === "true") {
    return;
  }

  var radio = radios.find(function (_ref9) {
    var checked = _ref9.checked;
    return checked;
  });
  var edition = radio === null || radio === void 0 ? void 0 : radio.value;

  if (!edition) {
    return;
  }

  _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_1__["default"].ready(function (tokenStore) {
    if (edition === "custom") {
      if (urlInput.value) {
        setFormLoadingState(form, true);
        var myURL = (0,_utils_strings_js__WEBPACK_IMPORTED_MODULE_4__.supplant)(window.decodeURIComponent(URLS.url), {
          url: window.encodeURIComponent(urlInput.value)
        });
        fetch(myURL)["catch"](function (error) {
          showInputError(urlInput, error.message);
          setFormLoadingState(form, false);
        }).then(function (response) {
          return response.json();
        })["catch"](function () {
          showInputError(urlInput, I18N.invalidScript);
          setFormLoadingState(form, false);
          return null;
        }).then(function (json) {
          if (json === null) {
            return;
          }

          if (!json.success) {
            showInputError(urlInput, json.message);
            setFormLoadingState(form, false);
            return;
          }

          processJSON({
            form: form,
            json: json.data,
            input: urlInput,
            store: tokenStore
          }).then(function () {
            return setFormLoadingState(form, false);
          });
        });
      } else if (fileInput.files.length) {
        var reader = new FileReader();
        reader.addEventListener("load", function (_ref10) {
          var target = _ref10.target;
          var json = [];

          try {
            json = JSON.parse(target.result);
          } catch (error) {
            return showInputError(fileInput, I18N.invalidScript);
          }

          processJSON({
            form: form,
            json: json,
            input: fileInput,
            store: tokenStore
          });
        });
        reader.readAsText(fileInput.files[0]);
      } else if (pasteInput.value) {
        var json = [];

        try {
          json = JSON.parse(pasteInput.value);
        } catch (error) {
          return showInputError(pasteInput, I18N.invalidScript);
        }

        processJSON({
          form: form,
          json: json,
          input: pasteInput,
          store: tokenStore
        });
      }
    } else {
      announceScript((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.getLabelText)(radio), tokenStore.getAllCharacters().filter(function (character) {
        return character.getEdition() === edition;
      }));
    }
  });
});
fileInput.addEventListener("input", function () {
  var value = fileInput.value;
  fileInput.setCustomValidity("");
  fileInputRender.dataset.value = value ? value.slice(value.lastIndexOf("\\") + 1) : fileInputRender.dataset.placeholder;

  if (value && urlInput.value) {
    urlInput.value = "";
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.announceInput)(urlInput);
  }
});
urlInput.addEventListener("input", function () {
  urlInput.setCustomValidity("");

  if (urlInput.value && fileInput.value) {
    fileInput.value = "";
    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.announceInput)(fileInput);
  }
});
_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_2__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.lookupOne)("#edition-list")).on(_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_2__["default"].HIDE, function () {
  fileInput.value = "";
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.announceInput)(fileInput);
  urlInput.value = "";
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_3__.announceInput)(urlInput);
});

/***/ }),

/***/ "./assets/js/processes/setup/select-your-character.js":
/*!************************************************************!*\
  !*** ./assets/js/processes/setup/select-your-character.js ***!
  \************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _classes_Template_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../classes/Template.js */ "./assets/js/classes/Template.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils/elements.js */ "./assets/js/utils/elements.js");
/* harmony import */ var _utils_arrays_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../utils/arrays.js */ "./assets/js/utils/arrays.js");






var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("game");
var characterDecisionDialog = _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#character-decision"));
var playerName = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#player-name");
gameObserver.on("character-draw", function (_ref) {
  var detail = _ref.detail;

  if (detail.isShowAll) {
    return;
  }

  var template = _classes_Template_js__WEBPACK_IMPORTED_MODULE_3__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#character-choice-template"));
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.replaceContentsMany)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#character-choice-wrapper"), (0,_utils_arrays_js__WEBPACK_IMPORTED_MODULE_5__.shuffle)(detail.characters).map(function (character, i) {
    return template.draw({
      "[data-id]": function dataId(element) {
        element.dataset.id = character.getId();
      },
      ".js--character-choice--number": function jsCharacterChoiceNumber(element) {
        element.textContent = i + 1;
      }
    });
  }));
  _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#character-choice")).show();
});
gameObserver.on("character-draw", function (_ref2) {
  var detail = _ref2.detail;

  if (!detail.isShowAll) {
    return;
  }

  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#grimoire").open = true;
  _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_2__["default"].ready(function (tokenStore) {
    detail.characters.forEach(function (character) {
      gameObserver.trigger("character-drawn", {
        character: character.clone(),
        isAutoAdd: true
      });
    });
  });
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#character-choice").addEventListener("click", function (_ref3) {
  var target = _ref3.target;
  var element = target.closest("[data-id]");

  if (!element || element.disabled) {
    return;
  }

  _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_2__["default"].ready(function (tokenStore) {
    // Add a clone of the character so that duplicated characters are still
    // considered unique.
    gameObserver.trigger("character-drawn", {
      element: element,
      character: tokenStore.getCharacter(element.dataset.id).clone()
    });
  });
});
gameObserver.on("character-drawn", function (_ref4) {
  var detail = _ref4.detail;
  var element = detail.element;

  if (element) {
    element.disabled = true;
  }
});
gameObserver.on("character-drawn", function (_ref5) {
  var detail = _ref5.detail;
  var isAutoAdd = detail.isAutoAdd,
      character = detail.character;

  if (isAutoAdd) {
    return;
  }

  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.empty)((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#character-decision-wrapper")).append(character.drawToken());
  (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)("#character-decision-ability").textContent = character.getAbility();
  characterDecisionDialog.show();
}); // Allow a name to be set when the character is revealed.
// We do this by checking to see if a name was entered when the "remember your
// character" dialog is closed, using it if it was.

var character = null;
gameObserver.on("character-drawn", function (_ref6) {
  var detail = _ref6.detail;
  character = detail.character;
});
characterDecisionDialog.on(_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].SHOW, function () {
  playerName.value = playerName.defaultValue;
});
characterDecisionDialog.on(_classes_Dialog_js__WEBPACK_IMPORTED_MODULE_1__["default"].HIDE, function () {
  var _lookupOneCached = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOneCached)(".js--pad"),
      pad = _lookupOneCached.pad;

  var value = playerName.value;
  var trimmed = (value || "").trim();

  if (pad && trimmed && character) {
    pad.setPlayerName(character, trimmed);
  }

  character = null;
});
(0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_4__.lookupOne)("#character-decision-form").addEventListener("submit", function (e) {
  e.preventDefault();
  characterDecisionDialog.hide();
});

/***/ }),

/***/ "./assets/js/processes/store.js":
/*!**************************************!*\
  !*** ./assets/js/processes/store.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _classes_Store_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../classes/Store.js */ "./assets/js/classes/Store.js");
/* harmony import */ var _classes_Observer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../classes/Observer.js */ "./assets/js/classes/Observer.js");
/* harmony import */ var _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../classes/TokenStore.js */ "./assets/js/classes/TokenStore.js");
/* harmony import */ var _classes_BluffsGroups_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../classes/BluffsGroups.js */ "./assets/js/classes/BluffsGroups.js");
/* harmony import */ var _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../classes/Dialog.js */ "./assets/js/classes/Dialog.js");
/* harmony import */ var _classes_InfoToken_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../classes/InfoToken.js */ "./assets/js/classes/InfoToken.js");
/* harmony import */ var _classes_Names_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../classes/Names.js */ "./assets/js/classes/Names.js");
/* harmony import */ var _utils_elements_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../utils/elements.js */ "./assets/js/utils/elements.js");
/* harmony import */ var _constants_version_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../constants/version.js */ "./assets/js/constants/version.js");
/* harmony import */ var _utils_numbers_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../utils/numbers.js */ "./assets/js/utils/numbers.js");
function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }

function _nonIterableRest() { throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }

function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }

function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }

function _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== "undefined" && arr[Symbol.iterator] || arr["@@iterator"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"] != null) _i["return"](); } finally { if (_d) throw _e; } } return _arr; }

function _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }



 // import Bluffs from "../classes/Bluffs.js";








var store = _classes_Store_js__WEBPACK_IMPORTED_MODULE_0__["default"].create("pocket-grimoire");
var gameObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_1__["default"].create("game");
var tokenObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_1__["default"].create("token");
var infoTokenObserver = _classes_Observer_js__WEBPACK_IMPORTED_MODULE_1__["default"].create("info-token");
var padElement = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_7__.lookupOneCached)(".js--pad");
var pad = padElement.pad;
var names = _classes_Names_js__WEBPACK_IMPORTED_MODULE_6__["default"].create();
gameObserver.on("characters-selected", function (_ref) {
  var detail = _ref.detail;
  store.setCharacters(detail.name, detail.characters.map(function (character) {
    return character.isCustom() ? character.getAllData() : character.getId();
  }), detail.game);
  store.removeStaleInputs();
});
gameObserver.on("pad-height-change", function (_ref2) {
  var detail = _ref2.detail;
  store.setHeight(detail.height);
});
tokenObserver.on("character-add", function (_ref3) {
  var detail = _ref3.detail;
  store.addToken(detail.character);
});
tokenObserver.on("character-remove", function (_ref4) {
  var detail = _ref4.detail;
  store.removeToken(detail.character);
});
tokenObserver.on("reminder-add", function (_ref5) {
  var detail = _ref5.detail;
  store.addToken(detail.reminder);
});
tokenObserver.on("reminder-remove", function (_ref6) {
  var detail = _ref6.detail;
  store.removeToken(detail.reminder);
});
tokenObserver.on("move", function (_ref7) {
  var detail = _ref7.detail;
  var element = detail.element,
      left = detail.left,
      top = detail.top,
      zIndex = detail.zIndex;
  var token = pad.getCharacterByToken(element) || pad.getReminderByToken(element);

  if (token) {
    store.moveToken(token, left, top, zIndex);
  }
});
tokenObserver.on("zindex", function (_ref8) {
  var detail = _ref8.detail;
  var element = detail.element,
      zIndex = detail.zIndex;
  var token = pad.getCharacterByToken(element) || pad.getReminderByToken(element);

  if (token) {
    store.alignToken(token, zIndex);
  }
});
tokenObserver.on("shroud-toggle", function (_ref9) {
  var detail = _ref9.detail;
  store.toggleDead(pad.getCharacterByToken(detail.token), detail.isDead);
});
tokenObserver.on("rotate-toggle", function (_ref10) {
  var detail = _ref10.detail;
  store.rotate(pad.getCharacterByToken(detail.token), detail.isUpsideDown);
});
tokenObserver.on("set-player-name", function (_ref11) {
  var detail = _ref11.detail;
  store.setPlayerName(pad.getCharacterByToken(detail.token), detail.name);
  names.add(detail.name);
});
tokenObserver.on("ghost-vote-toggle", function (_ref12) {
  var detail = _ref12.detail;
  store.setGhostVote(pad.getCharacterByToken(detail.token), detail.hasGhostVote);
});
tokenObserver.on("bluff", function (_ref13) {
  var detail = _ref13.detail;
  store.setBluffs(detail.data);
});
infoTokenObserver.on("info-token-added", function (_ref14) {
  var detail = _ref14.detail;
  store.saveInfoToken(detail.token, detail.index);
});
infoTokenObserver.on("info-token-updated", function (_ref15) {
  var detail = _ref15.detail;
  store.updateInfoToken(detail.token);
});
infoTokenObserver.on("info-token-deleted", function (_ref16) {
  var detail = _ref16.detail;
  store.removeInfoToken(detail.token);
});
var savedVersion = store.getVersion();

if (!savedVersion || (0,_utils_numbers_js__WEBPACK_IMPORTED_MODULE_9__.compareVersions)(savedVersion, _constants_version_js__WEBPACK_IMPORTED_MODULE_8__.VERSION) === -1) {
  if (savedVersion && window.confirm(I18N.versionChange)) {
    _classes_Dialog_js__WEBPACK_IMPORTED_MODULE_4__["default"].create((0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_7__.lookupOneCached)("#clear-cache")).show();
  }

  store.setVersion(_constants_version_js__WEBPACK_IMPORTED_MODULE_8__.VERSION);
}

var _document = document,
    body = _document.body;
body.addEventListener("input", function (_ref17) {
  var target = _ref17.target;
  var input = target.closest("input,select,textarea");

  if (!input.hasAttribute("data-no-store")) {
    store.saveInput(input);
  }
});
body.addEventListener("toggle", function (_ref18) {
  var target = _ref18.target;
  store.saveDetails(target.closest("details"));
}, {
  capture: true
});
var storeData = store.read();
_classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_2__["default"].ready(function (tokenStore) {
  // Re-select the characters.
  var info = storeData.characters;

  if (info && info.characters && info.characters.length) {
    gameObserver.trigger("characters-selected", {
      name: info.name,
      characters: info.characters.map(function (item) {
        return tokenStore.getCharacter(typeof item === "string" ? item : item.id) || tokenStore.createCustomCharacter(item);
      }).filter(Boolean),
      game: info.game
    });
  } // Re-place the tokens.


  var finalZIndex = 0;
  storeData.tokens.forEach(function (_ref19) {
    var id = _ref19.id,
        left = _ref19.left,
        top = _ref19.top,
        zIndex = _ref19.zIndex,
        isDead = _ref19.isDead,
        isUpsideDown = _ref19.isUpsideDown,
        playerName = _ref19.playerName,
        ghostVote = _ref19.ghostVote;
    var isCharacter = _classes_TokenStore_js__WEBPACK_IMPORTED_MODULE_2__["default"].isCharacterId(id);
    var info = isCharacter ? pad.addCharacter(tokenStore.getCharacterClone(id)) : pad.addReminder(tokenStore.getReminderClone(id));
    var token = info.token,
        character = info.character;
    pad.moveToken(token, left, top, zIndex);

    if (isCharacter) {
      pad.toggleDead(character, Boolean(isDead));
      pad.rotate(character, Boolean(isUpsideDown));
      pad.setPlayerName(character, playerName);
      pad.setGhostVote(character, Boolean(ghostVote));
    }

    if (zIndex > finalZIndex) {
      finalZIndex = zIndex;
    }
  });
  pad.setZIndex(finalZIndex); // Re-set the bluffs.
  // Convert the previous bluffs format into the new one.

  var bluffs = storeData.bluffs;

  if (!Object.keys(bluffs).length) {
    bluffs = _classes_BluffsGroups_js__WEBPACK_IMPORTED_MODULE_3__["default"].getEmptyData();
  }

  if (typeof bluffs["#bluff-1"] === "string") {
    var empty = _classes_BluffsGroups_js__WEBPACK_IMPORTED_MODULE_3__["default"].getEmptyData();
    empty.groups[0].set = Object.values(bluffs);
    bluffs = empty;
  }

  _classes_BluffsGroups_js__WEBPACK_IMPORTED_MODULE_3__["default"].get().ready(bluffs); // Re-populate the inputs.

  Object.entries(storeData.inputs).forEach(function (_ref20) {
    var _inputs$;

    var _ref21 = _slicedToArray(_ref20, 2),
        selector = _ref21[0],
        value = _ref21[1];

    var inputs = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_7__.lookup)(selector);
    var type = (_inputs$ = inputs[0]) === null || _inputs$ === void 0 ? void 0 : _inputs$.type;
    var isRadio = type === "radio";
    var input = isRadio ? inputs.find(function (input) {
      return input.value === value;
    }) : inputs[0];

    if (!input) {
      return;
    }

    if (isRadio) {
      input.checked = true;
    } else if (type === "checkbox") {
      input.checked = value;
    } else {
      input.value = value;
    }

    (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_7__.announceInput)(input);
  });
  gameObserver.trigger("inputs-repopulated"); // Re-open or re-close the details.

  Object.entries(storeData.details).forEach(function (_ref22) {
    var _ref23 = _slicedToArray(_ref22, 2),
        selector = _ref23[0],
        isOpen = _ref23[1];

    var details = (0,_utils_elements_js__WEBPACK_IMPORTED_MODULE_7__.lookupOne)(selector);

    if (!details) {
      return;
    }

    var isOpenNow = details.hasAttribute("open");
    details.open = isOpen;

    if (isOpenNow !== isOpen) {
      details.dispatchEvent(new Event("toggle", {
        bubbles: false
      }));
    }
  }); // Re-set the height of the pad.
  // CSS `resize` works by changing the `height` style on the element itself
  // which is why we're setting it like this instead of setting a CSS custom
  // property and referring to it in the style sheet.

  if (storeData.height) {
    padElement.style.height = storeData.height;
  } // Re-add any custom info tokens.


  storeData.infoTokens.forEach(function (raw, i) {
    var token = new _classes_InfoToken_js__WEBPACK_IMPORTED_MODULE_5__["default"]({
      raw: raw,
      custom: true
    });
    token.draw();
    infoTokenObserver.trigger("info-token-added", {
      token: token,
      index: i
    });
  });
});

/***/ }),

/***/ "./assets/js/utils/arrays.js":
/*!***********************************!*\
  !*** ./assets/js/utils/arrays.js ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   groupBy: () => (/* binding */ groupBy),
/* harmony export */   shuffle: () => (/* binding */ shuffle)
/* harmony export */ });
/**
 * Creates an array that's a shuffled version of the given array. The original
 * array is not modified.
 * Schwartzian transform.
 *
 * @param  {Array} array
 *         Array to shuffle.
 * @return {Array}
 *         Shuffled array.
 */
function shuffle(array) {
  var numbers = window.crypto.getRandomValues(new Uint16Array(array.length));
  return Array.from(array, function (value, i) {
    return {
      value: value,
      sort: numbers[i]
    };
  }).sort(function (a, b) {
    return a.sort - b.sort;
  }).map(function (_ref) {
    var value = _ref.value;
    return value;
  });
}
/**
 * Groups the items in the given array based on the the getGroup function.
 *
 * @param  {Array} array
 *         Array whose items should be grouped up.
 * @param  {Function} getGroup
 *         A function that should create the name of the group. It's passed the
 *         item and the index.
 * @return {Object}
 *         An object with the groups as keys and all the matching items as
 *         values.
 */

function groupBy(array, getGroup) {
  return array.reduce(function (grouped, item, i) {
    var group = getGroup(item, i);

    if (!grouped[group]) {
      grouped[group] = [];
    }

    grouped[group].push(item);
    return grouped;
  }, Object.create(null));
}

/***/ }),

/***/ "./assets/js/utils/fetch.js":
/*!**********************************!*\
  !*** ./assets/js/utils/fetch.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   fetchFromStore: () => (/* binding */ fetchFromStore),
/* harmony export */   post: () => (/* binding */ post)
/* harmony export */ });
/**
 * Fetches information from the given URL and stores it in the given store. The
 * URL is checked against the store to see if the data already exists and only
 * performs a lookup if it needs to.
 *
 * @param  {String} key
 *         The key for identifying the URL. This allows the URL to be updated
 *         with a hash, making it unique, while also allowing it to be cached.
 * @param  {String} url
 *         URL from which to get the data.
 * @param  {Store} store
 *         Store that will store the results.
 * @return {Promise}
 *         Promise that resolves with the data from the lookup.
 */
function fetchFromStore(key, url, store) {
  var results = store.getLookup(key);

  if (results !== undefined) {
    return Promise.resolve(results);
  }

  return fetch(url).then(function (response) {
    return response.json();
  }).then(function (json) {
    store.setLookup(key, json);
    return json;
  });
}
/**
 * Helper function for POSTing JSON data to the given URL.
 *
 * @param  {String} url
 *         URL to POST the data to.
 * @param  {Array|Object|String|Boolean|Number|null} data
 *         JSON data to POST.
 * @return {Promise}
 *         A promise that resolves with the response from the server, converted
 *         into JSON.
 */

function post(url, data) {
  return fetch(url, {
    method: "POST",
    mode: "cors",
    cache: "no-cache",
    credentials: "same-origin",
    headers: {
      "Accept": "application/json",
      "Content-type": "application/json"
    },
    redirect: "follow",
    referrerPolicy: "no-referrer",
    body: JSON.stringify(data)
  }).then(function (response) {
    return response.json();
  });
}

/***/ }),

/***/ "./assets/js/utils/functions.js":
/*!**************************************!*\
  !*** ./assets/js/utils/functions.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   noop: () => (/* binding */ noop),
/* harmony export */   rafThrottle: () => (/* binding */ rafThrottle)
/* harmony export */ });
/**
 * A no-operation function. It takes no parameters and returns no value.
 */
function noop() {
  return;
}
/**
 * Throttles the given function using window.requestAnimationFrame()
 *
 * @param  {Function} func
 *         Function that should be throttled.
 * @return {Function}
 *         Throttled function.
 */

function rafThrottle(func) {
  var context = this;
  var active = true;
  return function () {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    if (!active) {
      return;
    }

    active = false;
    window.requestAnimationFrame(function () {
      active = true;
      func.apply(context, args);
    });
  };
}
;

/***/ }),

/***/ "./assets/js/utils/numbers.js":
/*!************************************!*\
  !*** ./assets/js/utils/numbers.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   clamp: () => (/* binding */ clamp),
/* harmony export */   compareVersions: () => (/* binding */ compareVersions),
/* harmony export */   isNumeric: () => (/* binding */ isNumeric),
/* harmony export */   parseVersion: () => (/* binding */ parseVersion),
/* harmony export */   times: () => (/* binding */ times),
/* harmony export */   toPosInt: () => (/* binding */ toPosInt),
/* harmony export */   toRadians: () => (/* binding */ toRadians)
/* harmony export */ });
/**
 * Clamps the given value so that it will be between the given min and max
 * values.
 *
 * @param  {Number} min
 *         Minimum possible value.
 * @param  {Number} value
 *         Value to clamp.
 * @param  {Number} max
 *         Maximum possible value.
 * @return {Number}
 *         Clamped value.
 */
function clamp(min, value, max) {
  return Math.max(min, Math.min(value, max));
}
/**
 * Parses a version number, in semver, into an array of numbers.
 *
 * @param  {String} semver
 *         A version number in semver, such as "1.2.3" or "4.5".
 * @return {Array.<Number>}
 *         The version number as an array of numbers.
 */

function parseVersion(semver) {
  return Object.assign([0, 0, 0], semver.split(".").map(Number));
}
/**
 * Compares two semver versions. The function will return one of three numbers:
 * -1 if version1 is less than version2.
 * 0 if version1 and version2 are the same.
 * 1 if version1 is more than version2.
 * This is consistent with Array#sort()
 *
 * @param  {String} version1
 *         Version number 1.
 * @param  {String} version2
 *         Version number 2.
 * @return {Number}
 *         Comparison number.
 */

function compareVersions(version1, version2) {
  var parts1 = parseVersion(version1);
  var parts2 = parseVersion(version2);
  var number = parts1.reduce(function (number, part, i) {
    if (number === 0) {
      number = part - parts2[i];
    }

    return number;
  }, 0);
  return clamp(-1, number, 1);
}
/**
 * Converts the given number to its positive integer.
 *
 * @param  {Number} number
 *         Number to convert.
 * @return {Number}
 *         Positive integer, or NaN if the number can't be parsed.
 */

function toPosInt(number) {
  return Math.floor(Math.abs(number));
}
/**
 * Executes a handler a set number of times. The number of times is converted
 * into a positive integer (ses {@link toPosInt}) and returned. The handler is
 * passed the current index and the maximum number of times that the handler
 * will be called.
 *
 * @param  {Number} number
 *         Number of times to execute the given handler.
 * @param  {Function} handler
 *         Handler to execute.
 * @param  {?} [context]
 *         Optional context for the handler.
 * @return {Number}
 *         The number of times that the handler was executed.
 */

function times(number, handler, context) {
  var max = toPosInt(number) || 0;
  var index = 0;

  while (index < max) {
    handler.call(context, index, max);
    index += 1;
  }

  return max;
}
/**
 * Converts the given degrees into radians
 *
 * @param  {Number} degrees
 *         Degrees to convert.
 * @return {Number}
 *         Equivalent radians.
 */

function toRadians(degrees) {
  return Math.PI / 180 * degrees;
}
/**
 * Checks to see if the given value is numeric. This is not necessarily the same
 * as being a number because a numeric string would return true.
 *
 * @param  {?} value
 *         Value to check.
 * @return {Boolean}
 *         true if the given value is a number or numeric string, false
 *         otherwise.
 */

function isNumeric(value) {
  var parsed = window.parseFloat(value);
  return !Number.isNaN(parsed) && Number.isFinite(parsed);
}

/***/ }),

/***/ "./assets/js/utils/objects.js":
/*!************************************!*\
  !*** ./assets/js/utils/objects.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   deepClone: () => (/* binding */ deepClone),
/* harmony export */   deepFreeze: () => (/* binding */ deepFreeze),
/* harmony export */   empty: () => (/* binding */ empty)
/* harmony export */ });
function _typeof(obj) { "@babel/helpers - typeof"; return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }, _typeof(obj); }

/**
 * Clones an object, including any nested objects.
 *
 * @param  {Object|Array|String|Number|Boolean|null} object
 *         Object to clone.
 * @return {Object|Array|String|Number|Boolean|null}
 *         Cloned object.
 */
function deepClone(object) {
  return JSON.parse(JSON.stringify(object));
}
/**
 * Freezes the given object and any nested objects.
 *
 * @param  {Object} object
 *         Object to freeze.
 * @return {Object}
 *         Frozen object.
 */

function deepFreeze(object) {
  if (object && _typeof(object) === "object") {
    Object.values(object).forEach(function (item) {
      return deepFreeze(item);
    });
  }

  return Object.freeze(object);
}
/**
 * Removes all the properties from an object.
 *
 * @param {Object} object
 *        Object to empty.
 */

function empty(object) {
  Object.keys(object).forEach(function (key) {
    return delete object[key];
  });
}

/***/ }),

/***/ "./assets/js/utils/promises.js":
/*!*************************************!*\
  !*** ./assets/js/utils/promises.js ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   defer: () => (/* binding */ defer)
/* harmony export */ });
/**
 * Creates a Promise that can be resolved externally.
 *
 * @return {Promise}
 *         A Promise that can be externally resolved or rejected.
 */
function defer() {
  var res = function res() {};

  var rej = function rej() {};

  var promise = new Promise(function (resolve, reject) {
    res = resolve;
    rej = reject;
  });

  promise.resolve = function (value) {
    res(value);
    return promise;
  };

  promise.reject = function (reason) {
    rej(reason);
    return promise;
  };

  return promise;
}

/***/ }),

/***/ "./assets/js/utils/strings.js":
/*!************************************!*\
  !*** ./assets/js/utils/strings.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   markdown2html: () => (/* binding */ markdown2html),
/* harmony export */   readUTF8: () => (/* binding */ readUTF8),
/* harmony export */   striptags: () => (/* binding */ striptags),
/* harmony export */   supplant: () => (/* binding */ supplant)
/* harmony export */ });
/**
 * Interprets the bytes within a string as UTF-8. We need this when importing
 * JSON - for some reason it struggles to understand accented characters.
 *
 * @param  {String} bytes
 *         String to convert.
 * @return {String}
 *         Converted string.
 * @see    https://stackoverflow.com/a/24282873/557019
 * @deprecated
 */
function readUTF8(bytes) {
  var length = bytes.length;
  var index = bytes.slice(0, 3) === "\xEF\xBB\xBF" ? 3 : 0;
  var string = "";

  while (index < length) {
    var byte1 = (bytes[index] || "").charCodeAt(0);
    var byte2 = (bytes[index + 1] || "").charCodeAt(0);
    var byte3 = (bytes[index + 2] || "").charCodeAt(0);
    var byte4 = (bytes[index + 3] || "").charCodeAt(0);

    if (byte1 < 0x80) {
      string += String.fromCharCode(byte1);
    } else if (byte1 >= 0xC2 && byte1 < 0xE0) {
      string += String.fromCharCode(((byte1 & 0x1F) << 6) + (byte2 & 0x3F));
      index += 1;
    } else if (byte1 > 0XE0 && byte1 < 0xF0) {
      string += String.fromCharCode(((byte1 & 0xFF) << 12) + ((byte2 & 0x3F) << 6) + (byte3 & 0x3F));
      index += 2;
    } else if (byte1 >= 0xF0 && byte1 < 0xF5) {
      var codepoint = ((byte1 & 0x07) << 18) + ((byte2 & 0x3F) << 12) + ((byte3 & 0x3F) << 6) + (byte4 & 0x3F);
      codepoint -= 0x10000;
      string += String.fromCharCode((codepoint >> 10) + 0xD800, (codepoint & 0x3FF) + 0xDC00);
      index += 3;
    }

    index += 1;
  }

  return string;
}
/**
 * Removes any HTML markup from the given string.
 *
 * @param  {String} string
 *         String from which HTML markup should be removed.
 * @return {String}
 *         String without any HTML markup.
 * @see    https://css-tricks.com/snippets/javascript/strip-html-tags-in-javascript/
 */

function striptags(string) {
  return String(string).replace(/(<([^>]+)>)/gi, "");
}
/**
 * A simple function that converts the double asterists into strong tags.
 *
 * @param  {String} string
 *         Text to convert.
 * @return {String}
 *         Converted text.
 */

function markdown2html(string) {
  return string.replace(/\*\*([^*]*)\*\*/g, "<strong>$1</strong>");
}
/**
 * Replaces placeholders in the given string with the replacements provided.
 *
 * @param  {String} template
 *         String with placeholders to replace.
 * @param  {Array|Object} replacements
 *         Replacements to populate the string.
 * @return {String}
 *         String with replacements.
 */

function supplant(template, replacements) {
  return template.replace(/\{([^{}]*)\}/g, function (whole, index) {
    return Object.prototype.hasOwnProperty.call(replacements, index) ? replacements[index] : whole;
  });
}

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["assets_js_classes_Dialog_js-assets_js_lib_qrcode-svg_js-assets_js_utils_elements_js"], () => (__webpack_exec__("./assets/js/main.js")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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YXNzZXRzL2pzL2NsYXNzZXMvQmx1ZmZEaWFsb2cuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NsYXNzZXMvQmx1ZmZTZXQuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NsYXNzZXMvQmx1ZmZzR3JvdXAuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NsYXNzZXMvQmx1ZmZzR3JvdXBzLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9jbGFzc2VzL0NoYXJhY3RlclRva2VuLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9jbGFzc2VzL0RyYWdnYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvY2xhc3Nlcy9JbmZvVG9rZW4uanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NsYXNzZXMvSmlueC5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvY2xhc3Nlcy9OYW1lcy5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvY2xhc3Nlcy9OaWdodE9yZGVyLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9jbGFzc2VzL09ic2VydmVyLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9jbGFzc2VzL1BhZC5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvY2xhc3Nlcy9Qb3NpdGlvbmVyLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9jbGFzc2VzL1Byb2Nlc3NMaXN0LmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9jbGFzc2VzL1JlbWluZGVyVG9rZW4uanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NsYXNzZXMvU2VsZWN0RGlhbG9nLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9jbGFzc2VzL1NldHRhYmxlVGl0bGUuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NsYXNzZXMvU3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NsYXNzZXMvVGVtcGxhdGUuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NsYXNzZXMvVG9rZW4uanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NsYXNzZXMvVG9rZW5EaWFsb2cuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NsYXNzZXMvVG9rZW5TdG9yZS5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvY2xhc3Nlcy9Ub2tlbnMuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2NvbnN0YW50cy9sYW5ndWFnZS5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvY29uc3RhbnRzL3ZlcnNpb24uanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3Byb2Nlc3Nlcy9hY2tub3dsZWRnZW1lbnRzLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9wcm9jZXNzZXMvZ3JpbW9pcmUvY2hhcmFjdGVycy5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvcHJvY2Vzc2VzL2dyaW1vaXJlL2RlbW9uLWJsdWZmcy5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvcHJvY2Vzc2VzL2dyaW1vaXJlL2V4cG9ydC5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvcHJvY2Vzc2VzL2dyaW1vaXJlL2ZhYmxlZC5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvcHJvY2Vzc2VzL2dyaW1vaXJlL2dlbmVyYWwuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3Byb2Nlc3Nlcy9ncmltb2lyZS9yZW1pbmRlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3Byb2Nlc3Nlcy9ncmltb2lyZS9yZXNldC5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvcHJvY2Vzc2VzL2dyaW1vaXJlL3RyYXZlbGxlcnMuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3Byb2Nlc3Nlcy9pbmZvLXRva2Vucy5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvcHJvY2Vzc2VzL2ppbnhlcy5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvcHJvY2Vzc2VzL25pZ2h0LW9yZGVyLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9wcm9jZXNzZXMvbm90ZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3Byb2Nlc3Nlcy9zZXR1cC9jaGFyYWN0ZXItc2hlZXQuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3Byb2Nlc3Nlcy9zZXR1cC9jbGVhci1jYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvcHJvY2Vzc2VzL3NldHVwL2dlbmVyYWwuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3Byb2Nlc3Nlcy9zZXR1cC9zZWxlY3QtY2hhcmFjdGVycy5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvcHJvY2Vzc2VzL3NldHVwL3NlbGVjdC1lZGl0aW9uLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9wcm9jZXNzZXMvc2V0dXAvc2VsZWN0LXlvdXItY2hhcmFjdGVyLmpzIiwid2VicGFjazovLy8uL2Fzc2V0cy9qcy9wcm9jZXNzZXMvc3RvcmUuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3V0aWxzL2FycmF5cy5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvdXRpbHMvZmV0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3V0aWxzL2Z1bmN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvdXRpbHMvbnVtYmVycy5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvdXRpbHMvb2JqZWN0cy5qcyIsIndlYnBhY2s6Ly8vLi9hc3NldHMvanMvdXRpbHMvcHJvbWlzZXMuanMiLCJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL3V0aWxzL3N0cmluZ3MuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IERpYWxvZyBmcm9tIFwiLi9EaWFsb2cuanNcIjtcbmltcG9ydCBDaGFyYWN0ZXJUb2tlbiBmcm9tIFwiLi9DaGFyYWN0ZXJUb2tlbi5qc1wiO1xuaW1wb3J0IHtcbiAgICBsb29rdXBPbmVDYWNoZWRcbn0gZnJvbSBcIi4uL3V0aWxzL2VsZW1lbnRzLmpzXCI7XG5cbi8qKlxuICogQSB2ZXJzaW9uIG9mIHtAbGluayBEaWFsb2d9IHdpdGggZXh0cmEgYWJpbGl0aWVzIGZvciBkaXNwbGF5aW5nIGEgdG9rZW4uXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJsdWZmRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcblxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZUZyb21UcmlnZ2VyKHRyaWdnZXIpIHtcblxuICAgICAgICB0cmlnZ2VyLmRhdGFzZXQuZGlhbG9nID0gdHJpZ2dlci5kYXRhc2V0LmJsdWZmRGlhbG9nO1xuICAgICAgICBzdXBlci5jcmVhdGVGcm9tVHJpZ2dlcih0cmlnZ2VyKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXlzIHRoZSBnaXZlbiBjaGFyYWN0ZXIgd2l0aGluIHtAbGluayBCbHVmZkRpYWxvZyNkaWFsb2d9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgIENoYXJhY3RlciB0byBkaXNwbGF5LlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNPcnBoYW5cbiAgICAgKiAgICAgICAgdHJ1ZSBpZiB0aGUgXCJvcnBoYW5cIiBub3RlIHNob3VsZCBiZSBzaG93biwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGRpc3BsYXkoY2hhcmFjdGVyLCBpc09ycGhhbiA9IGZhbHNlKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZGlhbG9nXG4gICAgICAgIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBzaG93VG9rZW5CdXR0b24gPSBsb29rdXBPbmVDYWNoZWQoXCIjYmx1ZmYtc2hvdy10b2tlblwiLCBkaWFsb2cpO1xuXG4gICAgICAgIGxvb2t1cE9uZUNhY2hlZChcbiAgICAgICAgICAgIFwiI2JsdWZmLXNob3ctbmFtZVwiLFxuICAgICAgICAgICAgZGlhbG9nXG4gICAgICAgICkudGV4dENvbnRlbnQgPSBjaGFyYWN0ZXIuZ2V0TmFtZSgpO1xuICAgICAgICBsb29rdXBPbmVDYWNoZWQoXG4gICAgICAgICAgICBcIiNibHVmZi1zaG93LWFiaWxpdHlcIixcbiAgICAgICAgICAgIGRpYWxvZ1xuICAgICAgICApLnRleHRDb250ZW50ID0gY2hhcmFjdGVyLmdldEFiaWxpdHkoKTtcbiAgICAgICAgbG9va3VwT25lQ2FjaGVkKFxuICAgICAgICAgICAgXCIjYmx1ZmYtc2hvdy1vcnBoYW5cIixcbiAgICAgICAgICAgIGRpYWxvZ1xuICAgICAgICApLmhpZGRlbiA9ICFpc09ycGhhbjtcbiAgICAgICAgc2hvd1Rva2VuQnV0dG9uLmRpc2FibGVkID0gY2hhcmFjdGVyLmlzRW1wdHkoKTtcbiAgICAgICAgc2hvd1Rva2VuQnV0dG9uLmRhdGFzZXQuY2hhcmFjdGVySWQgPSBjaGFyYWN0ZXIuZ2V0SWQoKTtcblxuICAgIH1cblxufVxuIiwiaW1wb3J0IENoYXJhY3RlclRva2VuIGZyb20gXCIuL0NoYXJhY3RlclRva2VuXCI7XG5cbi8qKlxuICogTWFuYWdlcyB0aGUgc2V0IG9mIDMgZGVtb24gYmx1ZmZzLCBoYW5kbGluZyB0aGUgdG9rZW5zLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCbHVmZlNldCB7XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB7QGxpbmsgQ2hhcmFjdGVyVG9rZW59IGZvciBhbiBlbXB0eSBjaGFyYWN0ZXIgLSB0aGlzIGlzIHVzZWQgYXNcbiAgICAgKiB0aGUgZGVmYXVsdCBjaGFyYWN0ZXIgaW4gdGhlIGJsdWZmcyBiZWZvcmUgb25lIGlzIHNldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Q2hhcmFjdGVyVG9rZW59IGVtcHR5Q2hhcmFjdGVyXG4gICAgICovXG4gICAgc3RhdGljIHNldEVtcHR5Q2hhcmFjdGVyKGVtcHR5Q2hhcmFjdGVyKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBlbXB0eSBjaGFyYWN0ZXIgdG9rZW4uXG4gICAgICAgICAqIEB0eXBlIHtDaGFyYWN0ZXJUb2tlbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZW1wdHlDaGFyYWN0ZXIgPSBlbXB0eUNoYXJhY3RlcjtcblxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY2hhcmFjdGVycyBpbiB0aGlzIHNldC5cbiAgICAgICAgICogQHR5cGUge0NoYXJhY3RlclRva2VuW119XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmNoYXJhY3RlcnMgPSBbXG4gICAgICAgICAgICB0aGlzLmdldEVtcHR5Q2hhcmFjdGVyKCksXG4gICAgICAgICAgICB0aGlzLmdldEVtcHR5Q2hhcmFjdGVyKCksXG4gICAgICAgICAgICB0aGlzLmdldEVtcHR5Q2hhcmFjdGVyKClcbiAgICAgICAgXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGluZGV4IG9mIHRoZSBjdXJyZW50IGNoYXJhY3RlciBiZWluZyBzZXQgb3IgY2hlY2tlZC5cbiAgICAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaW5kZXggPSAwO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUge0BsaW5rIENoYXJhY3RlclRva2VufSBmb3IgdGhlIGVtcHR5IGNoYXJhY3Rlci5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0NoYXJhY3RlclRva2VufVxuICAgICAqICAgICAgICAgQSBjbG9uZSBvZiB0aGUgXCJlbXB0eSBjaGFyYWN0ZXJcIiB0b2tlbi5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn1cbiAgICAgKiAgICAgICAgIHtAbGluayBCbHVmZlNldC5lbXB0eUNoYXJhY3Rlcn0gbXVzdCBiZSBkZWZpbmVkLlxuICAgICAqL1xuICAgIGdldEVtcHR5Q2hhcmFjdGVyKCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGVtcHR5Q2hhcmFjdGVyXG4gICAgICAgIH0gPSB0aGlzLmNvbnN0cnVjdG9yO1xuXG4gICAgICAgIGlmICghZW1wdHlDaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZSBcXFwiTm8gY2hhcmFjdGVyXFxcIiBjaGFyYWN0ZXIgbmVlZHMgdG8gYmUgc2V0LlwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbXB0eUNoYXJhY3Rlci5jbG9uZSgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFZhbGlkYXRlcyB0aGUgZ2l2ZW4gaW5kZXggc28gdGhhdCB3ZSBrbm93IGl0J3MgYSBudW1iZXIgYmV0d2VlbiAwIGFuZFxuICAgICAqIHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyBpbiB7QGxpbmsgQmx1ZmZTZXQjY2hhcmFjdGVyc30uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGluZGV4XG4gICAgICogICAgICAgICBJbmRleCB0byB2YWxpZGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICogICAgICAgICBWYWxpZGF0ZWQgaW5kZXguXG4gICAgICogQHRocm93cyB7UmFuZ2VFcnJvcn1cbiAgICAgKiAgICAgICAgIGBpbmRleGAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIHRoZSBsZW5ndGggb2ZcbiAgICAgKiAgICAgICAgIHtAbGluayBCbHVmZlNldCNjaGFyYWN0ZXJzfS5cbiAgICAgKi9cbiAgICB2YWxpZGF0ZUluZGV4KGluZGV4KSB7XG5cbiAgICAgICAgaW5kZXggPSBOdW1iZXIoaW5kZXgpO1xuXG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPj0gdGhpcy5jaGFyYWN0ZXJzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYEJsdWZmU2V0IGludmFsaWQgaW5kZXggJHtpbmRleH1gKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGluZGV4O1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlcyB7QGxpbmsgQmx1ZmZzU2V0I2NoYXJhY3RlcnN9LCBidXQgY2xvbmVzIHRoZSBhcnJheSBzbyB0aGF0XG4gICAgICogbWFuaXB1bGF0aW5nIHRoZSByZXNwb25zZSBmcm9tIHRoaXMgbWV0aG9kIGRvZXNuJ3QgYWZmZWN0IHRoZSBvcmlnaW5hbFxuICAgICAqIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtDaGFyYWN0ZXJUb2tlbltdfVxuICAgICAqICAgICAgICAgQ29weSBvZiB7QGxpbmsgQmx1ZmZzU2V0I2NoYXJhY3RlcnN9LlxuICAgICAqL1xuICAgIGdldENoYXJhY3RlcnMoKSB7XG4gICAgICAgIHJldHVybiBbLi4udGhpcy5jaGFyYWN0ZXJzXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBjaGFyYWN0ZXIgYXQgdGhlIHJlcXVlc3RlZCBpbmRleC4gSWYgdGhlIGluZGV4IGlzbid0IGdpdmVuLFxuICAgICAqIHtAbGluayBCbHVmZnNTZXQjaW5kZXh9IGlzIHVzZWQgaW5zdGVhZC4gVGhlIGluZGV4IGlzIHZhbGlkYXRlZCB1c2luZ1xuICAgICAqIHtAbGluayBCbHVmZlNldCN2YWxpZGF0ZUluZGV4fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge051bWJlcn0gW2luZGV4XVxuICAgICAqICAgICAgICAgT3B0aW9uYWwgaW5kZXguIElmIG9tbWl0dGVkLCB7QGxpbmsgQmx1ZmZzU2V0I2luZGV4fSBpcyB1c2VkLlxuICAgICAqIEByZXR1cm4ge0NoYXJhY3RlclRva2VufVxuICAgICAqICAgICAgICAgVGhlIGNoYXJhY3RlciBhdCB0aGUgZ2l2ZW4gaW5kZXguXG4gICAgICovXG4gICAgZ2V0Q2hhcmFjdGVyKGluZGV4ID0gdGhpcy5pbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJzW3RoaXMudmFsaWRhdGVJbmRleChpbmRleCldO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGNoYXJhY3RlciBhdCB0aGUgZ2l2ZW4gaW5kZXguIElmIHRoZSBpbmRleCBpcyBvbW1pdHRlZCxcbiAgICAgKiB7QGxpbmsgQmx1ZmZzU2V0I2luZGV4fSBpcyB1c2VkIGluc3RlYWQuIFRoZSBpbmRleCBpcyB2YWxpZGF0ZWQgdXNpbmdcbiAgICAgKiB7QGxpbmsgQmx1ZmZTZXQjdmFsaWRhdGVJbmRleH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NoYXJhY3RlclRva2VufSBjaGFyYWN0ZXJcbiAgICAgKiAgICAgICAgQ2hhcmFjdGVyIHRvIHNldC5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gW2luZGV4XVxuICAgICAqICAgICAgICBPcHRpb25hbCBpbmRleC4gSWYgb21taXR0ZWQsIHtAbGluayBCbHVmZnNTZXQjaW5kZXh9IGlzIHVzZWQuXG4gICAgICovXG4gICAgc2V0Q2hhcmFjdGVyKGNoYXJhY3RlciwgaW5kZXggPSB0aGlzLmluZGV4KSB7XG5cbiAgICAgICAgaWYgKCFjaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgIGNoYXJhY3RlciA9IHRoaXMuZ2V0RW1wdHlDaGFyYWN0ZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2hhcmFjdGVyc1t0aGlzLnZhbGlkYXRlSW5kZXgoaW5kZXgpXSA9IGNoYXJhY3RlcjtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVuc2V0cyB0aGUgY2hhcmFjdGVyLiBUaGlzIGlzIGRvbmUgYnkgbG9va2luZyB1cCB0aGUgaW5kZXggb2YgdGhlXG4gICAgICogY2hhcmFjdGVyIGZvcm0gd2l0aGluIHtAbGluayBCbHVmZlNldCNjaGFyYWN0ZXJzfSBhbmQgcGFzc2luZyBpdCB0b1xuICAgICAqIHtAbGluayBCbHVmZlNldCN1bnNldENoYXJhY3RlckJ5SW5kZXh9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgIFRoZSBjaGFyYWN0ZXIgdG8gdW5zZXQuXG4gICAgICovXG4gICAgdW5zZXRDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XG4gICAgICAgIHRoaXMudW5zZXRDaGFyYWN0ZXJCeUluZGV4KHRoaXMuY2hhcmFjdGVycy5pbmRleE9mKGNoYXJhY3RlcikpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVuc2V0cyB0aGUgY2hhcmFjdGVyIGF0IHRoZSBnaXZlbiBpbmRleC4gVGhpcyBpcyBkb25lIGJ5IHNldHRpbmcgdGhlXG4gICAgICogY2hhcmFjdGVyIGluIHtAbGluayBCbHVmZlNldCNjaGFyYWN0ZXJ9IGF0IHRoZSBnaXZlbiBpbmRleCB0byBhIGNsb25lIG9mXG4gICAgICogdGhlIFwiZW1wdHlcIiBjaGFyYWN0ZXIuIFRoZSBnaXZlbiBpbmRleCBpcyB2YWxpZGF0ZWQgdXNpbmdcbiAgICAgKiB7QGxpbmsgQmx1ZmZTZXQjdmFsaWRhdGVJbmRleH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICAgKiAgICAgICAgSW5kZXggb2YgdGhlIGNoYXJhY3RlciB0byB1bnNldC5cbiAgICAgKi9cbiAgICB1bnNldENoYXJhY3RlckJ5SW5kZXgoaW5kZXgpIHtcbiAgICAgICAgdGhpcy5jaGFyYWN0ZXJzW3RoaXMudmFsaWRhdGVJbmRleChpbmRleCldID0gdGhpcy5nZXRFbXB0eUNoYXJhY3RlcigpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMge0BsaW5rIEJsdWZmU2V0I2luZGV4fS4gVGhlIGdpdmVuIGluZGV4IGlzIHZhbGlkYXRlZCB1c2luZ1xuICAgICAqIHtAbGluayBCbHVmZlNldCN2YWxpZGF0ZUluZGV4fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgICAqICAgICAgICBUaGUgaW5kZXggdG8gc2V0LlxuICAgICAqL1xuICAgIHNldEluZGV4KGluZGV4KSB7XG4gICAgICAgIHRoaXMuaW5kZXggPSB0aGlzLnZhbGlkYXRlSW5kZXgoaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMge0BsaW5rIEJsdWZmU2V0I2luZGV4fS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiAgICAgICAgIFRoZSBjdXJyZW50IGluZGV4LlxuICAgICAqL1xuICAgIGdldEluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbmRleDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGFycmF5IGNvbnRhaW5pbmcgdGhlIElEcyBvZiB0aGUgY2hhcmFjdGVycyBpblxuICAgICAqIHtAbGluayBCbHVmZlNldCNjaGFyYWN0ZXJzfS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1N0cmluZ1tdfVxuICAgICAqICAgICAgICAgVGhlIElEcyBvZiB0aGUgY2hhcmFjdGVycyBpbiB0aGlzIHNldC5cbiAgICAgKi9cbiAgICBzZXJpYWxpc2UoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJhY3RlcnMubWFwKChjaGFyYWN0ZXIpID0+IGNoYXJhY3Rlci5nZXRJZCgpKTtcbiAgICB9XG5cbn1cbiIsImltcG9ydCBCbHVmZlNldCBmcm9tIFwiLi9CbHVmZlNldC5qc1wiO1xuaW1wb3J0IENoYXJhY3RlclRva2VuIGZyb20gXCIuL0NoYXJhY3RlclRva2VuXCI7XG5pbXBvcnQgVGVtcGxhdGUgZnJvbSBcIi4vVGVtcGxhdGVcIjtcbmltcG9ydCBTZXR0YWJsZVRpdGxlIGZyb20gXCIuL1NldHRhYmxlVGl0bGVcIjtcbmltcG9ydCB7XG4gICAgZW1wdHksXG4gICAgbG9va3VwT25lXG59IGZyb20gXCIuLi91dGlscy9lbGVtZW50cy5qc1wiO1xuXG4vKipcbiAqIE1hbmFnZXMgdGhlIERPTSBlbGVtZW50cyB0aGF0IG1hbmFnZSB0aGUgZ3JvdXAgb2YgMyBkZW1vbiBibHVmZnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJsdWZmc0dyb3VwIHtcblxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIGFuIGV2ZW50IHRoYXQncyB0cmlnZ2VyZWQgd2hlbiB0aGUgZ3JvdXAgaGFzIGJlZW4gY3JlYXRlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IFJFQURZKCkge1xuICAgICAgICByZXR1cm4gXCJibHVmZi1ncm91cC1yZWFkeVwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIFRlbXBsYXRlIHRoYXQgd2lsbCBkcmF3IHRoZSBEZW1vbiBCbHVmZiBncm91cC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGVtcGxhdGV9IHRlbXBsYXRlXG4gICAgICovXG4gICAgc3RhdGljIHNldFRlbXBsYXRlKHRlbXBsYXRlKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBUZW1wbGF0ZSB0aGF0IHdpbGwgZHJhdyB0aGUgRGVtb24gQmx1ZmYgZ3JvdXAuXG4gICAgICAgICAqIEB0eXBlIHtUZW1wbGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Qmx1ZmZTZXR9IGJsdWZmU2V0XG4gICAgICogICAgICAgIFRoZSBzZXQgb2YgRGVtb24gQmx1ZmZzIGZvciB0aGlzIGdyb3VwLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGJsdWZmU2V0KSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbmRleCBvZiB0aGlzIGdyb3VwIG9mIERlbW9uIEJsdWZmcyAtIG1haW5seSBjb250cm9sbGVkIGJ5IHRoZVxuICAgICAgICAgKiBwYXJlbnQge0BsaW5rIEJsdWZmc0dyb3Vwc30gY2xhc3MuXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNldCBvZiBEZW1vbiBCbHVmZnMgZm9yIHRoaXMgZ3JvdXAuXG4gICAgICAgICAqIEB0eXBlIHtCbHVmZlNldH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYmx1ZmZTZXQgPSBibHVmZlNldDtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGVsZW1lbnQgdGhhdCBjb250YWlucyB0aGlzIGdyb3VwIG9mIERlbW9uIEJsdWZmcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAgICAgKi9cbiAgICBzZXRFbGVtZW50KGVsZW1lbnQpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGVsZW1lbnQgdGhhdCBjb250YWlucyB0aGlzIGdyb3VwIG9mIERlbW9uIEJsdWZmcy5cbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMge0BsaW5rIEJsdWZmc0dyb3VwI2VsZW1lbnR9LlxuICAgICAqXG4gICAgICogQHJldHVybiB7SFRNTEVsZW1lbnR9XG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IGNvbnRhaW5zIHRoaXMgZ3JvdXAgb2YgRGVtb24gQmx1ZmZzLlxuICAgICAqL1xuICAgIGdldEVsZW1lbnQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmVsZW1lbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB7QGxpbmsgQmx1ZmZzR3JvdXAjaW5kZXh9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAgICogICAgICAgIEluZGV4IHRvIHNldC5cbiAgICAgKi9cbiAgICBzZXRJbmRleChpbmRleCkge1xuXG4gICAgICAgIHRoaXMuaW5kZXggPSBpbmRleDtcblxuICAgICAgICBpZiAodGhpcy5lbGVtZW50KSB7XG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQuZGF0YXNldC5ncm91cElkID0gdGhpcy5pbmRleDtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCByZWZsZWN0cyB0aGUgY3VycmVudCBzdGF0ZSBvZiB0aGlzIGdyb3VwIG9mXG4gICAgICogRGVtb24gQmx1ZmZzLiBJdCBkb2VzIHRoaXMgYnkgY2FsbGluZyB7QGxpbmsgQmx1ZmZTZXQjc2VyaWFsaXNlfSBvblxuICAgICAqIHtAbGluayBCbHVmZnNHcm91cCNibHVmZlNldH0gYW5kIHtAbGluayBTZXR0YWJsZVRpdGxlI2dldFRpdGxlfSBvblxuICAgICAqIHtAbGluayBCbHVmZnNHcm91cCNzZXR0YWJsZVRpdGxlfS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKi9cbiAgICBzZXJpYWxpc2UoKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgYmx1ZmZTZXQsXG4gICAgICAgICAgICBzZXR0YWJsZVRpdGxlXG4gICAgICAgIH0gPSB0aGlzO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiBzZXR0YWJsZVRpdGxlPy5nZXRUaXRsZSgpIHx8IFwiXCIsXG4gICAgICAgICAgICBzZXQ6IGJsdWZmU2V0LnNlcmlhbGlzZSgpXG4gICAgICAgIH07XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgSFRNTCBlbGVtZW50cyBmb3IgdGhpcyBncm91cCBvZiBEZW1vbiBCbHVmZnMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICAgICAqICAgICAgICAgVGhlIGZyYWdtZW50IG9mIHRoZSBkcmF3biBlbGVtZW50cy5cbiAgICAgKi9cbiAgICBkcmF3KCkge1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRlbXBsYXRlLmRyYXcoe1xuICAgICAgICAgICAgXCIuanMtLWRlbW9uLWJsdWZmcy0tZ3JvdXBcIjogKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGFzZXQuZ3JvdXBJZCA9IHRoaXMuaW5kZXg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgQ1NTIHNlbGVjdG9yIHRoYXQgaWRlbnRpZmllcyB7QGxpbmsgQmx1ZmZzR3JvdXAjZWxlbWVudH0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogICAgICAgICBDU1Mgc2VsZWN0b3IgdGhhdCBpZGVudGlmaWVzIHtAbGluayBCbHVmZnNHcm91cCNlbGVtZW50fS5cbiAgICAgKi9cbiAgICBnZXRTZWxlY3RvcigpIHtcbiAgICAgICAgcmV0dXJuIGAuanMtLWRlbW9uLWJsdWZmcy0tZ3JvdXBbZGF0YS1ncm91cC1pZD1cIiR7dGhpcy5pbmRleH1cIl1gO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgaW5kZXggaXMgdGhlIGN1cnJlbnQgaW5kZXggaW4ge0BsaW5rIEJsdWZmc0dyb3VwI2JsdWZmU2V0fS4gVGhpc1xuICAgICAqIGZ1bmN0aW9uIGFjY2Vzc2VzIGl0LlxuICAgICAqXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqICAgICAgICAgVGhlIHNldCBpbmRleC5cbiAgICAgKi9cbiAgICBnZXRTZXRJbmRleCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmx1ZmZTZXQuZ2V0SW5kZXgoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IGluZGV4IGlzIHRoZSBjdXJyZW50IGluZGV4IGluIHtAbGluayBCbHVmZnNHcm91cCNibHVmZlNldH0uIFRoaXNcbiAgICAgKiBmdW5jdGlvbiBzZXRzIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9XG4gICAgICogICAgICAgIFRoZSBzZXQgaW5kZXggdG8gc2V0LlxuICAgICAqL1xuICAgIHNldFNldEluZGV4KGluZGV4KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJsdWZmU2V0LnNldEluZGV4KGluZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjaGFyYWN0ZXIgaW4ge0BsaW5rIEJsdWZmc0dyb3VwI2JsdWZmU2V0fS4gT3B0aW9uYWxseSwgdGhlIGluZGV4XG4gICAgICogb2YgdGhlIGNoYXJhY3RlciBjYW4gYmUgZGVmaW5lZCwgcmF0aGVyIHRoYW4gdXNpbmdcbiAgICAgKiB7QGxpbmsgQmx1ZmZzR3JvdXAjc2V0U2V0SW5kZXh9IGZpcnN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgIENoYXJhY3RlciB0byBzZXQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFtpbmRleF1cbiAgICAgKiAgICAgICAgT3B0aW9uYWwgaW5kZXggZm9yIHRoZSBjaGFyYWN0ZXIuXG4gICAgICovXG4gICAgc2V0Q2hhcmFjdGVyKGNoYXJhY3RlciwgaW5kZXgpIHtcbiAgICAgICAgdGhpcy5ibHVmZlNldC5zZXRDaGFyYWN0ZXIoY2hhcmFjdGVyLCBpbmRleCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY2hhcmFjdGVyIGZyb20ge0BsaW5rIEJsdWZmc0dyb3VwI2JsdWZmU2V0fSwgZWl0aGVyIGF0IHRoZSBpbmRleFxuICAgICAqIHJlcXVlc3RlZCBvciBpdHMgb3duIGludGVybmFsIGluZGV4IGlmIGBpbmRleGAgaXMgb21taXR0ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IFtpbmRleF1cbiAgICAgKiAgICAgICAgIE9wdGlvbmFsIGluZGV4IGZvciB0aGUgY2hhcmFjdGVyIHRvIHJldHVybi5cbiAgICAgKiBAcmV0dXJuIHtDaGFyYWN0ZXJUb2tlbn1cbiAgICAgKiAgICAgICAgIFRoZSBjaGFyYWN0ZXIgdG9rZW4gcmVxdWVzdGVkLlxuICAgICAqL1xuICAgIGdldENoYXJhY3RlcihpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ibHVmZlNldC5nZXRDaGFyYWN0ZXIoaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ha2VzIHtAbGluayBCbHVmZnNHcm91cCNlbGVtZW50fSB2aXNpYmxlIGJ5IHNjcm9sbGluZyBpdCBpbnRvIHZpZXcuXG4gICAgICpcbiAgICAgKiBAdGhyb3dzIHtFcnJvcn1cbiAgICAgKiAgICAgICAgIHtAbGluayBCbHVmZnNHcm91cCNlbGVtZW50fSBtdXN0IGJlIHNldC5cbiAgICAgKi9cbiAgICBkaXNwbGF5KCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGVsZW1lbnRcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFlbGVtZW50KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZGlzcGxheSBncm91cCBiZWNhdXNlIHRoZXJlIGlzIG5vIGVsZW1lbnRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBlbGVtZW50LnNjcm9sbEludG9WaWV3KHtcbiAgICAgICAgICAgIGJsb2NrOiBcIm5lYXJlc3RcIlxuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZpbmlzaGVzIHRoZSBzZXRpbmcgdXAgb2YgdGhpcyBncm91cCBvZiBEZW1vbiBCbHVmZnMgYW5kIGRpc3BhdGNoZXMgYW5cbiAgICAgKiBldmVudCB0byBhbm5vdW5jZSB0aGF0IGl0J3MgcmVhZHkuXG4gICAgICovXG4gICAgcmVhZHkoKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgIGJsdWZmU2V0LFxuICAgICAgICAgICAgY29uc3RydWN0b3I6IHtcbiAgICAgICAgICAgICAgICBSRUFEWVxuICAgICAgICAgICAgfVxuICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGlzcGxheSgpO1xuXG4gICAgICAgIGJsdWZmU2V0LmdldENoYXJhY3RlcnMoKS5mb3JFYWNoKChjaGFyYWN0ZXIsIGluZGV4KSA9PiB7XG5cbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IGxvb2t1cE9uZShcbiAgICAgICAgICAgICAgICBgLmpzLS1kZW1vbi1ibHVmZnMtLWJsdWZmW2RhdGEtaW5kZXg9XCIke2luZGV4fVwiXWAsXG4gICAgICAgICAgICAgICAgZWxlbWVudFxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZW1wdHkoYnV0dG9uKS5hcHBlbmQoY2hhcmFjdGVyLmRyYXdUb2tlbigpKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBlbGVtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFJFQURZLCB7XG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBibHVmZkdyb3VwOiB0aGlzXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMge0BsaW5rIEJsdWZmc0dyb3VwI2VsZW1lbnR9IGZyb20gdGhlIERPTSwgaWYgaXQgZXhpc3RzLlxuICAgICAqL1xuICAgIHJlbW92ZSgpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50Py5yZW1vdmUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWRyYXdzIHRoZSBidXR0b24gZm9yIHRoZSBjaGFyYWN0ZXIgdGhhdCB3YXMgbW9zdCByZWNlbnRseSB1cGRhdGVkIGluXG4gICAgICoge0BsaW5rIEJsdWZmc0dyb3VwI2JsdWZmU2V0fS5cbiAgICAgKi9cbiAgICByZWRyYXdCdXR0b24oKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgIGJsdWZmU2V0XG4gICAgICAgIH0gPSB0aGlzO1xuXG4gICAgICAgIGNvbnN0IHNldEluZGV4ID0gYmx1ZmZTZXQuZ2V0SW5kZXgoKTtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gYmx1ZmZTZXQuZ2V0Q2hhcmFjdGVyKHNldEluZGV4KTtcblxuICAgICAgICBlbXB0eShsb29rdXBPbmUoXG4gICAgICAgICAgICBgLmpzLS1kZW1vbi1ibHVmZnMtLWJsdWZmW2RhdGEtaW5kZXg9XCIke3NldEluZGV4fVwiXWAsXG4gICAgICAgICAgICBlbGVtZW50XG4gICAgICAgICkpLmFwcGVuZChjaGFyYWN0ZXIuZHJhd1Rva2VuKCkpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUge0BsaW5rIFNldHRhYmxlVGl0bGV9IGluc3RhbmNlIHRoYXQgd2lsbCBhbGxvdyB0aGUgbmFtZSBvZiB0aGlzXG4gICAgICogZ3JvdXAgb2YgRGVtb24gQmx1ZmZzIHRvIGJlIHNldC4gSWYgdGhlcmUncyBhIHZhbHVlIGluXG4gICAgICoge0BsaW5rIEJsdWZmc0dyb3VwI3NldHRhYmxlVGl0bGVUaXRsZX0gdGhlbiBpdCdzIHBhc3NlZCB0byB0aGUgaW5zdGFuY2VcbiAgICAgKiBiZWZvcmUgdGhhdCBwcm9wZXJ0eSBpcyBkZWxldGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTZXR0YWJsZVRpdGxlfSBzZXR0YWJsZVRpdGxlXG4gICAgICogICAgICAgIFNldHRhYmxlVGl0bGUgaW5zdGFuY2UgZm9yIHRoaXMgZ3JvdXAgb2YgRGVtb24gQmx1ZmZzLlxuICAgICAqL1xuICAgIHNldFNldHRhYmxlVGl0bGUoc2V0dGFibGVUaXRsZSkge1xuXG4gICAgICAgIHRoaXMuc2V0dGFibGVUaXRsZSA9IHNldHRhYmxlVGl0bGU7XG5cbiAgICAgICAgaWYgKHRoaXMuc2V0dGFibGVUaXRsZVRpdGxlKSB7XG5cbiAgICAgICAgICAgIHNldHRhYmxlVGl0bGUuc2V0VGl0bGUodGhpcy5zZXR0YWJsZVRpdGxlVGl0bGUpO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuc2V0dGFibGVUaXRsZVRpdGxlO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRpdGxlIG9mIHRoaXMgZ3JvdXAgb2YgRGVtb24gQmx1ZmZzLiBUaGUgdGl0bGUgaXMgcGFzc2VkIHRvXG4gICAgICoge0BsaW5rIEJsdWZmc0dyb3VwI3NldHRhYmxlVGl0bGV9IGlmIGl0J3Mgc2V0LCBvciBzdG9yZWQgaW5cbiAgICAgKiB7QGxpbmsgQmx1ZmZzR3JvdXAjc2V0dGFibGVUaXRsZVRpdGxlfSBpZiBpdCBpc24ndC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0aXRsZVxuICAgICAqICAgICAgICBUaXRsZSB0byBzZXQuXG4gICAgICovXG4gICAgc2V0VGl0bGUodGl0bGUpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBzZXR0YWJsZVRpdGxlXG4gICAgICAgIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmIChzZXR0YWJsZVRpdGxlKSB7XG4gICAgICAgICAgICBzZXR0YWJsZVRpdGxlLnNldFRpdGxlKHRpdGxlKTtcbiAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBUaGUgdGl0bGUgdGhhdCBzaG91bGQgYmUgc2V0IHdoZW5cbiAgICAgICAgICAgICAqIHtAbGluayBCbHVmZnNHcm91cCNzZXR0YWJsZVRpdGxlfSBpcyBjcmVhdGVkLiBUaGlzIHByb3BlcnR5IG9ubHlcbiAgICAgICAgICAgICAqIGV4aXN0cyBpZiB7QGxpbmsgQmx1ZmZzR3JvdXAjc2V0VGl0bGV9IGlzIGNhbGxlZCBiZWZvcmVcbiAgICAgICAgICAgICAqIHtAbGluayBCbHVmZnNHcm91cCNzZXR0YWJsZVRpdGxlfSBpcyBjcmVhdGVkIGFuZCBpdCdzIHJlbW92ZWQgYXNcbiAgICAgICAgICAgICAqIHNvb24gYXMgaXQgY2FuIGJlLlxuICAgICAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5zZXR0YWJsZVRpdGxlVGl0bGUgPSB0aXRsZTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbn1cbiIsImltcG9ydCBCbHVmZnNHcm91cCBmcm9tIFwiLi9CbHVmZnNHcm91cFwiO1xuaW1wb3J0IENoYXJhY3RlclRva2VuIGZyb20gXCIuL0NoYXJhY3RlclRva2VuXCI7XG5pbXBvcnQge1xuICAgIGRlZXBDbG9uZVxufSBmcm9tIFwiLi4vdXRpbHMvb2JqZWN0c1wiO1xuXG4vKipcbiAqIFRoZSB0b3AtZG93biBjb250cm9sbGVyIGZvciBhbGwgZ3JvdXBzIG9mIGRlbW9uIGJsdWZmcy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmx1ZmZzR3JvdXBzIHtcblxuICAgIC8qKlxuICAgICAqIFRoZSBuYW1lIG9mIGFuIGV2ZW50IHRoYXQncyB0cmlnZ2VyZWQgb24gZWFjaCBncm91cCB3aGVuIHRoZXkgYmVjb21lXG4gICAgICogdmlzaWJsZS4gV2UgdXNlIHRoaXMgdG8gd29yayBvdXQge0BsaW5rIEJsdWZmc0dyb3VwcyN2aXNpYmxlR3JvdXBJbmRleH0uXG4gICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IFZJU0lCTEUoKSB7XG4gICAgICAgIHJldHVybiBcImJsdWZmLWdyb3VwLXZpc2libGVcIjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGUgZW1wdHkgZGF0YS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiAgICAgICAgIEEgY29weSBvZiB0aGUgZW1wdHkgZGF0YS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0RW1wdHlEYXRhKCkge1xuICAgICAgICByZXR1cm4gZGVlcENsb25lKHsgaW5kZXg6IDAsIGdyb3VwczogW3sgc2V0OiBbXSB9XSB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHBvc2VzIHtAbGluayBCbHVmZnNHcm91cHMuaW5zdGFuY2V9LlxuICAgICAqXG4gICAgICogQHJldHVybiB7Qmx1ZmZzR3JvdXBzfVxuICAgICAqICAgICAgICAgVGhlIHNpbmdsZXRvbiBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGEgbmV3IGluc3RhbmNlIGFuZCBzdG9yaW5nIGl0IGluXG4gICAgICoge0BsaW5rIEJsdWZmc0dyb3Vwcy5pbnN0YW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gY29udGFpbmVyXG4gICAgICogICAgICAgICBUaGUgZWxlbWVudCB0aGF0IGNvbnRhaW5zIGFsbCBEZW1vbiBCbHVmZnMgZ3JvdXBzLlxuICAgICAqIEByZXR1cm4ge0JsdWZmc0dyb3Vwc31cbiAgICAgKiAgICAgICAgIEluc3RhbmNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoLi4uYXJncykge1xuXG4gICAgICAgIGxldCBibHVmZnMgPSB0aGlzLmluc3RhbmNlO1xuXG4gICAgICAgIGlmICghYmx1ZmZzKSB7XG5cbiAgICAgICAgICAgIGJsdWZmcyA9IG5ldyB0aGlzKC4uLmFyZ3MpO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEFuIGluc3RhbmNlIHRoYXQgd2FzIGNyZWF0ZWQgdXNpbmcge0BsaW5rIEJsdWZmc0dyb3Vwcy5jcmVhdGV9XG4gICAgICAgICAgICAgKiBhbmQgY2FuIGJlIGFjY2Vzc2VkIHVzaW5nIHtAbGluayBCbHVmZnNHcm91cHMuZ2V0fS5cbiAgICAgICAgICAgICAqIEB0eXBlIHtCbHVmZnNHcm91cHN9XG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2UgPSBibHVmZnM7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBibHVmZnM7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHVwIHRoZSBjbGFzcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGNvbnRhaW5lclxuICAgICAqICAgICAgICBUaGUgZWxlbWVudCB0aGF0IGNvbnRhaW5zIGFsbCBEZW1vbiBCbHVmZnMgZ3JvdXBzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lcikge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvbGxlY3Rpb24gb2YgYWxsIHRoZSBncm91cHMgb2YgRGVtb24gQmx1ZmZzLlxuICAgICAgICAgKiBAdHlwZSB7Qmx1ZmZzR3JvdXBbXX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ3JvdXBzID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBlbGVtZW50IHRoYXQgY29udGFpbnMgYWxsIERlbW9uIEJsdWZmcyBlbGVtZW50cy5cbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbmRleCBvZiB0aGUgZ3JvdXAgd2l0aGluIHtAbGluayBCbHVmZnNHcm91cHMjZ3JvdXBzfSBvZiB0aGVcbiAgICAgICAgICogY3VycmVudGx5IHZpc2libGUgZ3JvdXAuXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnZpc2libGVHcm91cEluZGV4ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHRoYXQgYWxsb3dzIHVwZGF0ZXMgdG8gYmUgYW5ub3VuY2VkIC0gaWYgdGhpcyBzZXR0aW5nIGlzXG4gICAgICAgICAqIGB0cnVlYCB0aGVuIHVwZGF0ZXMgYXJlIGFubm91bmNlZCwgaWYgYGZhbHNlYCB0aGVuIHRoZXkncmUgbm90LlxuICAgICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuYW5ub3VuY2VVcGRhdGVzID0gdHJ1ZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gb2JzZXJ2ZXIgdGhhdCBjaGVja3MgdG8gc2VlIHdoZW4gYSBncm91cCBvZiBEZW1vbiBCbHVmZnMgYmVjb21lc1xuICAgICAgICAgKiB2aXNpYmxlIGFuZCB0cmlnZ2VycyBhbiBldmVudCwgd2hpY2ggd2UgY2FuIGxpc3RlbiB0byBpbiBvcmRlciB0byBzZXRcbiAgICAgICAgICoge0BsaW5rIEJsdWZmc0dyb3VwcyN2aXNpYmxlR3JvdXBJbmRleH0uXG4gICAgICAgICAqIEB0eXBlIHtJbnRlcnNlY3Rpb25PYnNlcnZlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgSW50ZXJzZWN0aW9uT2JzZXJ2ZXIoKGVudHJpZXMpID0+IHtcblxuICAgICAgICAgICAgZW50cmllcy5mb3JFYWNoKCh7IHRhcmdldCwgaW50ZXJzZWN0aW9uUmF0aW8gfSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgaWYgKGludGVyc2VjdGlvblJhdGlvID49IDAuOSkge1xuXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5kaXNwYXRjaEV2ZW50KFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IEN1c3RvbUV2ZW50KHRoaXMuY29uc3RydWN0b3IuVklTSUJMRSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsYWJsZTogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0sIHtcbiAgICAgICAgICAgIHJvb3Q6IGNvbnRhaW5lcixcbiAgICAgICAgICAgIHRocmVzaG9sZDogWzAuOSwgMC45NSwgMV1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBlbXB0eSBncm91cC4gVGhpcyBzdGFydHMgYXMgYW4gZW1wdHkgZnVuY3Rpb25cbiAgICAgKiB0byBrZWVwIHRoZSB2YXJpb3VzIGNsYXNzZXMgbG9vc2VseSBjb3VwbGVkLlxuICAgICAqL1xuICAgIGNyZWF0ZUVtcHR5R3JvdXAoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGVtcHR5IGdyb3VwIGFuZCBwYXNzZXMgaXQgdG8ge0BsaW5rIEJsdWZmc0dyb3VwcyNhZGR9LlxuICAgICAqL1xuICAgIGFkZEVtcHR5KCkge1xuICAgICAgICB0aGlzLmFkZCh0aGlzLmNyZWF0ZUVtcHR5R3JvdXAoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIGdyb3VwIHRvIHtAbGluayBCbHVmZnNHcm91cHMjZ3JvdXBzfSBhbmQgc2V0cyBpdCB1cCBjb3JyZWN0bHkuIElmXG4gICAgICogdGhlIGdyb3VwIGFscmVhZHkgZXhpc3RzLCBubyBhY3Rpb24gaXMgdGFrZW4uIFNpbmNlIGEgY2hhbmdlIGhhcyB0YWtlblxuICAgICAqIHBsYWNlLCB0aGUgdXBkYXRlIGlzIGFubm91bmNlZCB1c2luZ1xuICAgICAqIHtAbGluayBCbHVmZnNHcm91cHMjbWF5YmVBbm5vdW5jZVVwZGF0ZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtCbHVmZnNHcm91cH0gZ3JvdXBcbiAgICAgKiAgICAgICAgIFRoZSBncm91cCB0byBhZGQuXG4gICAgICogQHRocm93cyB7RXJyb3J9XG4gICAgICogICAgICAgICBgZ3JvdXBgIGNhbm5vdCBiZSBgbnVsbGAgb3IgYHVuZGVmaW5lZGAgKHdoaWNoIGl0IHdvdWxkIGJlIGlmXG4gICAgICogICAgICAgICB7QGxpbmsgQmx1ZmZzR3JvdXBzI2NyZWF0ZUVtcHR5R3JvdXB9IGhhc24ndCBiZWVuIHJlcGxhY2VkKS5cbiAgICAgKi9cbiAgICBhZGQoZ3JvdXApIHtcblxuICAgICAgICBpZiAoIWdyb3VwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgYWRkIGEgbm9uLWV4aXN0ZW50IGdyb3VwXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuaGFzKGdyb3VwKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZ3JvdXAuc2V0SW5kZXgodGhpcy5ncm91cHMucHVzaChncm91cCkgLSAxKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYXBwZW5kKGdyb3VwLmRyYXcoKSk7XG4gICAgICAgIGdyb3VwLnNldEVsZW1lbnQodGhpcy5jb250YWluZXIucXVlcnlTZWxlY3Rvcihncm91cC5nZXRTZWxlY3RvcigpKSk7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShncm91cC5nZXRFbGVtZW50KCkpO1xuICAgICAgICBncm91cC5yZWFkeSgpO1xuICAgICAgICB0aGlzLm1heWJlQW5ub3VuY2VVcGRhdGUoKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIGdpdmVuIGdyb3VwIGlzIHdpdGhpbiB7QGxpbmsgQmx1ZmZzR3JvdXBzI2dyb3Vwc30uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtCbHVmZnNHcm91cH0gZ3JvdXBcbiAgICAgKiAgICAgICAgIEdyb3VwIHRvIGNoZWNrIGZvci5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqICAgICAgICAgYHRydWVgIGlmIHRoZSBncm91cCBhbHJlYWR5IGV4aXN0cywgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaGFzKGdyb3VwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyb3Vwcy5pbmNsdWRlcyhncm91cCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGdyb3VwIGZyb20gd2l0aGluXG4gICAgICoge0BsaW5rIEJsdWZmc0dyb3VwcyNncm91cHN9LlxuICAgICAqXG4gICAgICogQHBhcmFtICB7Qmx1ZmZzR3JvdXB9IGdyb3VwXG4gICAgICogICAgICAgICBHcm91cCB3aG9zZSBpbmRleCBzaG91bGQgYmUgcmV0dXJuZWQuXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqICAgICAgICAgVGhlIGluZGV4IG9mIHRoZSBncm91cCBvciAtMSBpZiB0aGUgZ3JvdXAgY2Fubm90IGJlIGZvdW5kLlxuICAgICAqL1xuICAgIGdldEluZGV4KGdyb3VwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyb3Vwcy5pbmRleE9mKGdyb3VwKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBnaXZlbiBncm91cCBmcm9tIHtAbGluayBCbHVmZnNHcm91cHMjZ3JvdXBzfS4gVGhpcyBmdW5jdGlvblxuICAgICAqIHdvcmtzIGJ5IHBhc3NpbmcgdGhlIHJlc3VsdHMgb2Yge0BsaW5rIEJsdWZmc0dyb3VwcyNnZXRJbmRleH0gdG9cbiAgICAgKiB7QGxpbmsgQmx1ZmZzR3JvdXBzI3JlbW92ZUJ5SW5kZXh9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtCbHVmZkdyb3VwfSBncm91cFxuICAgICAqICAgICAgICBHcm91cCB0byByZW1vdmUuXG4gICAgICovXG4gICAgcmVtb3ZlKGdyb3VwKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlQnlJbmRleCh0aGlzLmdldEluZGV4KGdyb3VwKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgZ3JvdXAgZnJvbSB7QGxpbmsgQmx1ZmZzR3JvdXBzI2dyb3Vwc30gdGhhdCdzIGF0IHRoZSBnaXZlblxuICAgICAqIGluZGV4LiBTb21lIHZhbGlkYXRpb24gaXMgZG9uZSB0byBtYWtlIHN1cmUgdGhhdCB0aGUgZ2l2ZW4gaW5kZXggaXMgYVxuICAgICAqIG51bWJlciBiZXR3ZWVuIDAgYW5kIHRoZSBudW1iZXIgb2YgZ3JvdXBzIC0gbm8gYWN0aW9uIGlzIHRha2VuIGlmIHRoZVxuICAgICAqIGluZGV4IGZhaWxzIHRoZXNlIHRlc3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAgICogICAgICAgIEluZGV4IG9mIHRoZSBncm91cCB0byByZW1vdmUuXG4gICAgICovXG4gICAgcmVtb3ZlQnlJbmRleChpbmRleCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGdyb3Vwc1xuICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICBpbmRleCA9IE51bWJlcihpbmRleCk7XG5cbiAgICAgICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBncm91cHMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBncm91cCA9IGdyb3Vwc1tpbmRleF07XG5cbiAgICAgICAgdGhpcy5vYnNlcnZlci51bm9ic2VydmUoZ3JvdXAuZ2V0RWxlbWVudCgpKTtcbiAgICAgICAgZ3JvdXAucmVtb3ZlKCk7XG4gICAgICAgIGdyb3Vwcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZUluZGljaWVzKCk7XG4gICAgICAgIHRoaXMubWF5YmVBbm5vdW5jZVVwZGF0ZSgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTG9vcHMgb3ZlciBhbGwgdGhlIGdyb3VwcyB3aXRoaW4ge0BsaW5rIEJsdWZmc0dyb3VwcyNncm91cHN9IGFuZCByZW1vdmVzXG4gICAgICogdGhlbSBhbGwuIEl0IGRvZXMgdGhpcyBieSBwYXNzaW5nIGVhY2ggaW5kZXggdG9cbiAgICAgKiB7QGxpbmsgQmx1ZmZzR3JvdXBzI3JlbW92ZUJ5SW5kZXh9LlxuICAgICAqL1xuICAgIHJlbW92ZUFsbCgpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBncm91cHNcbiAgICAgICAgfSA9IHRoaXM7XG4gICAgICAgIGxldCB7XG4gICAgICAgICAgICBsZW5ndGhcbiAgICAgICAgfSA9IGdyb3VwcztcblxuICAgICAgICB3aGlsZSAobGVuZ3RoKSB7XG5cbiAgICAgICAgICAgIGxlbmd0aCAtPSAxO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVCeUluZGV4KGxlbmd0aCk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBhbGwgdGhlIGluZGljaWVzIG9mIHRoZSBncm91cHMgd2l0aGluIHtAbGluayBCbHVmZnNHcm91cHMjZ3JvdXBzfVxuICAgICAqIHNvIHRoYXQgdGhleSBtYXRjaCB0aGUgYXJyYXkgaXRzZWxmLlxuICAgICAqL1xuICAgIHVwZGF0ZUluZGljaWVzKCkge1xuICAgICAgICB0aGlzLmdyb3Vwcy5mb3JFYWNoKChncm91cCwgaW5kZXgpID0+IGdyb3VwLnNldEluZGV4KGluZGV4KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlcyB7QGxpbmsgQmx1ZmZzR3JvdXBzI3Zpc2libGVHcm91cEluZGV4fS5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gICAgICovXG4gICAgZ2V0VmlzaWJsZUdyb3VwSW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpc2libGVHcm91cEluZGV4O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMge0BsaW5rIEJsdWZmc0dyb3VwcyN2aXNpYmxlR3JvdXBJbmRleH0uIFNvbWUgdmFsaWRhdGlvbiBpcyBkb25lIHRvXG4gICAgICogbWFrZSBzdXJlIHRoYXQgdGhlIGdpdmVuIGluZGV4IGlzIGEgbnVtYmVyIGJldHdlZW4gMCBhbmQgdGhlIG51bWJlciBvZlxuICAgICAqIGdyb3VwcyAtIGFuIGVycm9yIGlzIHRocm93biBpZiB0aGlzIGlzbid0IHRoZSBjYXNlLiBCZWNhdXNlIHRoaXMgaGFzXG4gICAgICogdXBkYXRlZCB0aGUgZGF0YSwgdGhlIHVwZGF0ZSBpcyBhbm5vdW5jZWQgdXNpbmdcbiAgICAgKiB7QGxpbmsgQmx1ZmZzR3JvdXBzI21heWJlQW5ub3VuY2VVcGRhdGV9LlxuICAgICAqXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSBpbmRleFxuICAgICAqICAgICAgICAgSW5kZXggb2YgdGhlIHZpc2libGUgZ3JvdXAuXG4gICAgICogQHRocm93cyB7UmFuZ2VFcnJvcn1cbiAgICAgKiAgICAgICAgIGBpbmRleGAgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIDAgYW5kIHRoZSBudW1iZXIgb2YgZ3JvdXBzLlxuICAgICAqL1xuICAgIHNldFZpc2libGVHcm91cEluZGV4KGluZGV4KSB7XG5cbiAgICAgICAgaW5kZXggPSBOdW1iZXIoaW5kZXgpO1xuXG4gICAgICAgIGlmIChpbmRleCA8IDAgfHwgaW5kZXggPiB0aGlzLmdyb3Vwcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKGBWaXNpYmxlIGluZGV4ICR7aW5kZXh9IGlzIG91dCBvZiByYW5nZWApO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy52aXNpYmxlR3JvdXBJbmRleCA9IGluZGV4O1xuICAgICAgICB0aGlzLm1heWJlQW5ub3VuY2VVcGRhdGUoKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHZpc2libGUgZ3JvdXAgLSBpdCBkb2VzIHRoaXMgYnkgZ2V0dGluZyB0aGUgaXRlbSBpblxuICAgICAqIHtAbGluayBCbHVmZnNHcm91cHMjZ3JvdXBzfSBhdCB7QGxpbmsgQmx1ZmZzR3JvdXBzI3Zpc2libGVHcm91cEluZGV4fS4gSWZcbiAgICAgKiBhIGdyb3VwIGNhbid0IGJlIGZvdW5kIGF0IHRoYXQgbG9jYXRpb24sIGFuIGVycm9yIGlzIHRocm93bi5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0JsdWZmc0dyb3VwfVxuICAgICAqICAgICAgICAgVGhlIGN1cnJlbnRseSB2aXNpYmxlIGdyb3VwIG9mIERlbW9uIEJsdWZmcy5cbiAgICAgKiBAdGhyb3dzIHtFcnJvcn1cbiAgICAgKiAgICAgICAgIEEgdmlzaWJsZSBncm91cCBtdXN0IGV4aXN0LlxuICAgICAqL1xuICAgIGdldFZpc2libGVHcm91cCgpIHtcblxuICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuZ3JvdXBzW3RoaXMudmlzaWJsZUdyb3VwSW5kZXhdO1xuXG4gICAgICAgIGlmICghZ3JvdXApIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ2Fubm90IGZpbmQgZ3JvdXAgYXQgaW5kZXggJHt0aGlzLnZpc2libGVHcm91cEluZGV4fWApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGdyb3VwO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIGlubmVyIGluZGV4IGlzIHRoZSBpbmRleCBvZiB0aGUgRGVtb24gQmx1ZmYgd2l0aGluIHRoZSBjdXJyZW50bHlcbiAgICAgKiB2aXNpYmxlIGdyb3VwIG9mIERlbW9uIEJsdWZmcy4gVGhpcyBmdW5jdGlvbiBzZXRzIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAgICogICAgICAgIElubmVyIGluZGV4IHRvIHNldC5cbiAgICAgKi9cbiAgICBzZXRJbm5lckluZGV4KGluZGV4KSB7XG4gICAgICAgIHRoaXMuZ2V0VmlzaWJsZUdyb3VwKCkuc2V0U2V0SW5kZXgoaW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBpbm5lciBpbmRleCBpcyB0aGUgaW5kZXggb2YgdGhlIERlbW9uIEJsdWZmIHdpdGhpbiB0aGUgY3VycmVudGx5XG4gICAgICogdmlzaWJsZSBncm91cCBvZiBEZW1vbiBCbHVmZnMuIFRoaXMgZnVuY3Rpb24gZ2V0cyBpdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiAgICAgICAgIElubmVyIGluZGV4LlxuICAgICAqL1xuICAgIGdldElubmVySW5kZXgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZpc2libGVHcm91cCgpLmdldFNldEluZGV4KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY2hhcmFjdGVyIGZvciB0aGUgRGVtb24gQmx1ZmYgb2YgdGhlIGN1cnJlbnRseSB2aXNpYmxlIGdyb3VwIG9mXG4gICAgICogYmx1ZmZzLiBCZWNhdXNlIGEgY2hhbmdlIHdpbGwgaGF2ZSBoYXBwZW5lZCwgdGhlIHVwZGF0ZSBpcyBhbm5vdW5jZWRcbiAgICAgKiB1c2luZyB7QGxpbmsgQmx1ZmZzR3JvdXBzI21heWJlQW5ub3VuY2VVcGRhdGV9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgIFRoZSBjaGFyYWN0ZXIgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldENoYXJhY3RlcihjaGFyYWN0ZXIpIHtcblxuICAgICAgICB0aGlzLmdldFZpc2libGVHcm91cCgpLnNldENoYXJhY3RlcihjaGFyYWN0ZXIpO1xuICAgICAgICB0aGlzLm1heWJlQW5ub3VuY2VVcGRhdGUoKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlZHJhd3MgdGhlIGN1cnJlbnRseSB2aXNpYmxlIGdyb3VwIG9mIGRlbW9uIGJsdWZmcywgdXBkYXRpbmcgdGhlIGJ1dHRvbnNcbiAgICAgKiB0byByZWZsZWN0IHRoZSBjdXJyZW50IHN0YXRlLlxuICAgICAqL1xuICAgIHJlZHJhdygpIHtcbiAgICAgICAgdGhpcy5nZXRWaXNpYmxlR3JvdXAoKS5yZWRyYXdCdXR0b24oKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGFuIG9iamVjdCByZWZsZWN0aW5nIHRoZSBjdXJyZW50IHN0YXRlIG9mIHRoZSBkZW1vbiBibHVmZnMuIEl0IGRvZXNcbiAgICAgKiB0aGlzIGJ5IGNhbGxpbmcge0BsaW5rIEJsdWZmc0dyb3VwI3NlcmlhbGlzZX0gb24gYWxsIGdyb3VwcyB3aXRoaW5cbiAgICAgKiB7QGxpbmsgQmx1ZmZzR3JvdXBzI2dyb3Vwc30uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB7T2JqZWN0fVxuICAgICAqICAgICAgICAgIFNlcmlhbGlzZWQgc3RhdGUgb2YgdGhlIERlbW9uIEJsdWZmcy5cbiAgICAgKi9cbiAgICBzZXJpYWxpc2UoKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGluZGV4OiB0aGlzLnZpc2libGVHcm91cEluZGV4LFxuICAgICAgICAgICAgZ3JvdXBzOiB0aGlzLmdyb3Vwcy5tYXAoKGdyb3VwKSA9PiBncm91cC5zZXJpYWxpc2UoKSlcbiAgICAgICAgfTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc2FibGVzIHRoZSB1cGRhdGUgYW5ub3VuY2VtZW50cy5cbiAgICAgKi9cbiAgICBkaXNhYmxlQW5ub3VuY2VtZW50cygpIHtcbiAgICAgICAgdGhpcy5hbm5vdW5jZVVwZGF0ZXMgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbmFibGVzIHRoZSB1cGRhdGUgYW5ub3VuY2VtZW50cy5cbiAgICAgKi9cbiAgICBlbmFibGVBbm5vdW5jZW1lbnRzKCkge1xuICAgICAgICB0aGlzLmFubm91bmNlVXBkYXRlcyA9IHRydWU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHtAbGluayBCbHVmZnNHcm91cHMuYW5ub3VuY2VVcGRhdGVzfSB0byBzZWUgaWYgdXBkYXRlcyBzaG91bGQgYmVcbiAgICAgKiBhbm5vdW5jZWQsIGRvaW5nIG5vdGhpbmcgaWYgdGhleSBzaG91bGRuJ3QuXG4gICAgICovXG4gICAgbWF5YmVBbm5vdW5jZVVwZGF0ZSgpIHtcblxuICAgICAgICBpZiAoIXRoaXMuYW5ub3VuY2VVcGRhdGVzKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFubm91bmNlVXBkYXRlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgZXhlY3V0ZXMgd2hlbiBhbiB1cGRhdGUgc2hvdWxkIGJlIGFubm91bmNlZC4gVGhpcyBpcyBkb25lXG4gICAgICogdG8ga2VlcCB0aGUgY2xhc3NlcyBsb29zZWx5IGNvdXBsZWQuXG4gICAgICovXG4gICAgYW5ub3VuY2VVcGRhdGUoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUYWtlcyB0aGUgY2hhcmFjdGVyIElEIGFuZCBjb252ZXJ0cyBpdCBpbnRvIGEge0BsaW5rIENoYXJhY3RlclRva2VufS5cbiAgICAgKiBUaGlzIGZ1bmN0aW9uIHN0YXJ0cyBhcyBhbiBlbXB0eSBmdW5jdGlvbiBzbyB0aGF0IGl0IGNhbiBiZSByZXBsYWNlZCBhbmRcbiAgICAgKiBzdGlsbCBrZWVwIHRoZSBjbGFzc2VzIGxvb3NlbHkgY291cGxlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gaWRcbiAgICAgKiAgICAgICAgIFRoZSBJRCBvZiB0aGUgY2hhcmFjdGVyIHdob3NlIHRva2VuIHNob3VsZCBiZSByZXR1cm5lZC5cbiAgICAgKiBAcmV0dXJuIHtDaGFyYWN0ZXJUb2tlbn1cbiAgICAgKiAgICAgICAgIFRoZSBjaGFyYWN0ZXIgdG9rZW4gaW5zdGFuY2UgZm9yIHRoZSBnaXZlbiBJRC5cbiAgICAgKi9cbiAgICBjb252ZXJ0SWQoaWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgZnVuY3Rpb24gdGhhdCBleGVjdXRlcyB3aGVuIHRoZSBjbGFzcyBpcyByZWFkeSwgY3JlYXRpbmcgdGhlIGdyb3Vwc1xuICAgICAqIGRlZmluZWQgaW4ge0BsaW5rIEJsdWZmc0dyb3Vwcy5yZWFkeURhdGF9LlxuICAgICAqL1xuICAgIHJlYWR5KHsgaW5kZXgsIGdyb3VwcyB9KSB7XG5cbiAgICAgICAgdGhpcy5yZW1vdmVBbGwoKTtcblxuICAgICAgICBncm91cHMuZm9yRWFjaCgoeyBuYW1lLCBzZXQgfSkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCBncm91cCA9IHRoaXMuY3JlYXRlRW1wdHlHcm91cCgpO1xuXG4gICAgICAgICAgICBpZiAoIWdyb3VwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGNyZWF0ZSBhbiBlbXB0eSBncm91cFwiKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZ3JvdXAuc2V0VGl0bGUobmFtZSk7XG4gICAgICAgICAgICBzZXQuZm9yRWFjaCgoaWQsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgZ3JvdXAuc2V0Q2hhcmFjdGVyKHRoaXMuY29udmVydElkKGlkKSwgaW5kZXgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkKGdyb3VwKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnNldFZpc2libGVHcm91cEluZGV4KGluZGV4KTtcbiAgICAgICAgdGhpcy5nZXRWaXNpYmxlR3JvdXAoKS5kaXNwbGF5KCk7XG5cbiAgICB9XG5cbn1cbiIsImltcG9ydCBUb2tlbiBmcm9tIFwiLi9Ub2tlbi5qc1wiO1xuaW1wb3J0IFRlbXBsYXRlIGZyb20gXCIuL1RlbXBsYXRlLmpzXCI7XG5pbXBvcnQgSmlueCBmcm9tIFwiLi9KaW54LmpzXCI7XG5pbXBvcnQgUmVtaW5kZXJUb2tlbiBmcm9tIFwiLi9SZW1pbmRlclRva2VuLmpzXCI7XG5pbXBvcnQge1xuICAgIGlkZW50aWZ5LFxufSBmcm9tIFwiLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcblxuY29uc3QgZW1wdHlQcm9wZXJ0eSA9IFN5bWJvbChcImVtcHR5XCIpO1xuY29uc3QgY3VzdG9tUHJvcGVydHkgPSBTeW1ib2woXCJjdXN0b21cIik7XG5cbi8qKlxuICogQSB2ZXJzaW9uIG9mIHtAbGluayBUb2tlbn0gdGhhdCBoYW5kbGVzIGNoYXJhY3RlciBpbmZvcm1hdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhcmFjdGVyVG9rZW4gZXh0ZW5kcyBUb2tlbiB7XG5cbiAgICAvKipcbiAgICAgKiBBIHByb3BlcnR5IHRoYXQgd2UgdXNlIHRvIHdvcmsgb3V0IGlmIHRoaXMgdG9rZW4gaXMgdGhlIGVtcHR5IGNoYXJhY3Rlci5cbiAgICAgKiBAdHlwZSB7U3ltYm9sfVxuICAgICAqIEBjb25zdGFudFxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBlbXB0eVByb3BlcnR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgcHJvcGVydHkgdGhhdCB3ZSB1c2UgdG8gd29yayBvdXQgaWYgdGhpcyB0b2tlbiBpcyBhIGN1c3RvbSBjaGFyYWN0ZXIuXG4gICAgICogQHR5cGUge1N5bWJvbH1cbiAgICAgKiBAY29uc3RhbnRcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IGN1c3RvbSgpIHtcbiAgICAgICAgcmV0dXJuIGN1c3RvbVByb3BlcnR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRlbXBsYXRlcyB0aGF0IHdpbGwgYmUgYWNjZXNzIHdoZW4gZHJhd2luZyB2aWV3cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0ZW1wbGF0ZXNcbiAgICAgKiAgICAgICAgQSBtYXAgb2Yga2V5cyB0byB7QGxpbmsgVGVtcGxhdGV9IGluc3RhbmNlcy5cbiAgICAgKi9cbiAgICBzdGF0aWMgc2V0VGVtcGxhdGVzKHRlbXBsYXRlcykge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGVtcGxhdGVzIHRoYXQgYWxsIGluc3RhbmNlcyB3aWxsIGFjY2Vzcy5cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGVtcGxhdGVzID0gdGVtcGxhdGVzO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGluaGVyaXREb2NcbiAgICAgKi9cbiAgICBwcm9jZXNzRGF0YShkYXRhKSB7XG5cbiAgICAgICAgLy8gUHJvdmlkZSBzb21lIGRlZmF1bHQgdmFsdWVzIHNvIHRoYXQgLmdldCgpIG1ldGhvZHMgZG9uJ3Qgd29ycnkgYWJvdXRcbiAgICAgICAgLy8gbWlzc2luZyBkYXRhIGFuZCBpbnN0ZWFkIHdvcnJ5IGFib3V0IHR5cG9zLlxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBpZDogXCJcIixcbiAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICBlZGl0aW9uOiBcIlwiLFxuICAgICAgICAgICAgdGVhbTogXCJcIixcbiAgICAgICAgICAgIGZpcnN0TmlnaHQ6IDAsXG4gICAgICAgICAgICBmaXJzdE5pZ2h0UmVtaW5kZXI6IFwiXCIsXG4gICAgICAgICAgICBvdGhlck5pZ2h0OiAwLFxuICAgICAgICAgICAgb3RoZXJOaWdodFJlbWluZGVyOiBcIlwiLFxuICAgICAgICAgICAgcmVtaW5kZXJzOiBbXSxcbiAgICAgICAgICAgIHNldHVwOiBmYWxzZSxcbiAgICAgICAgICAgIGFiaWxpdHk6IFwiXCIsXG4gICAgICAgICAgICBpbWFnZTogXCJcIixcbiAgICAgICAgICAgIHNwZWNpYWw6IG51bGwsXG4gICAgICAgICAgICAuLi5kYXRhXG4gICAgICAgIH07XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAaW5oZXJpdERvY1xuICAgICAqL1xuICAgIHNldHVwKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgc2hvd2luZyB3aGV0aGVyIG9yIG5vdCB0aGUgY2hhcmFjdGVyIGlzIGRlYWQuXG4gICAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pc0RlYWQgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHNob3dpbmcgd2hldGhlciBvciBub3QgdGhlIGNoYXJhY3RlciBpcyB1cHNpZGUgZG93bixcbiAgICAgICAgICogaW5kaWNhdGluZyB0aGF0IHRoZSBjaGFyYWN0ZXIgaXMgdGhlIG9wcG9zaXRlIGFsaWdubWVudCAob3Igb24gdGhlXG4gICAgICAgICAqIGV2aWwgdGVhbSBpZiBpdCdzIGEgdHJhdmVsbGVyKS5cbiAgICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzVXBzaWRlRG93biA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGZsYWcgc2hvd2luZyB3aGV0aGVyIG9yIG5vdCB0aGUgY2hhcmFjdGVyIGhhcyBhIGdob3N0IHZvdGUuXG4gICAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5oYXNHaG9zdFZvdGUgPSB0cnVlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvbGxlY3Rpb24gb2YgYWxsIGppbnhlcyB0aGF0IG1heSBhZmZlY3QgdGhpcyBjaGFyYWN0ZXIuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheS48SmlueD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmppbnhlcyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb2xsZWN0aW9uIG9mIGFsbCByZW1pbmRlcnMgdGhhdCB0aGlzIGNoYXJhY3RlciB1c2VzLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXkuPFJlbWluZGVyVG9rZW4+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZW1pbmRlcnMgPSBbXTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgY2xvbmUoKSB7XG5cbiAgICAgICAgY29uc3QgY2xvbmUgPSBzdXBlci5jbG9uZSgpO1xuXG4gICAgICAgIHRoaXMuZ2V0UmVtaW5kZXJzKCkuZm9yRWFjaCgocmVtaW5kZXIpID0+IHtcbiAgICAgICAgICAgIGNsb25lLmFkZFJlbWluZGVyKHJlbWluZGVyLmNsb25lKCkpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmdldEppbnhlcygpLmZvckVhY2goKGppbngpID0+IHtcbiAgICAgICAgICAgIGNsb25lLmFkZEppbngoamlueCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjbG9uZTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSByZW1pbmRlciBmb3IgdGhpcyBjaGFyYWN0ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1JlbWluZGVyVG9rZW59IHJlbWluZGVyXG4gICAgICogICAgICAgIEluc3RhbmNlIG9mIHtAbGluayBSZW1pbmRlclRva2VufSBmb3IgdGhlIHJlbWluZGVyLlxuICAgICAqL1xuICAgIGFkZFJlbWluZGVyKHJlbWluZGVyKSB7XG4gICAgICAgIHRoaXMucmVtaW5kZXJzLnB1c2gocmVtaW5kZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHJlbWluZGVycyB0aGF0IHRoaXMgY2hhcmFjdGVyIGhhcy4gVGhlIHJldHVybmVkIGFycmF5IG1heSBiZVxuICAgICAqIGVtcHR5IGlmIHRoZSBjaGFyYWN0ZXIgZG9lc24ndCBoYXZlIGFueSByZW1pbmRlcnMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheS48UmVtaW5kZXJUb2tlbj59XG4gICAgICogICAgICAgICBBbGwgdGhlIHJlbWluZGVycyBmb3IgdGhpcyBjaGFyYWN0ZXIuXG4gICAgICovXG4gICAgZ2V0UmVtaW5kZXJzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1pbmRlcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgZGVhZCBzdGF0ZSBmb3IgdGhpcyBjaGFyYWN0ZXIuIFRoZSBzdGF0ZSBjYW4gYmUgZm9yY2VkIGJ5XG4gICAgICogcGFzc2luZyBhIGJvb2xlYW4gdG8gdGhpcyBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbc3RhdGVdXG4gICAgICogICAgICAgICBPcHRpb25hbCBzdGF0ZSB0byBzZXQuIElmIG9tbWl0dGVkLCB0aGUgc3RhdGUgaXMgdG9nZ2xlZC5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqICAgICAgICAgVGhlIG5ldyBzdGF0ZS5cbiAgICAgKi9cbiAgICB0b2dnbGVEZWFkKHN0YXRlKSB7XG5cbiAgICAgICAgaWYgKHN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gIXRoaXMuaXNEZWFkO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0RlYWQgPSBzdGF0ZTtcblxuICAgICAgICBpZiAoc3RhdGUpIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlR2hvc3RWb3RlKHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0SXNEZWFkKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHBvc2VzIHtAbGluayBDaGFyYWN0ZXJUb2tlbiNpc0RlYWR9LlxuICAgICAqXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiAgICAgICAgIHRydWUgaWYgdGhlIGNoYXJhY3RlciBpcyBkZWFkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZ2V0SXNEZWFkKCkge1xuICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLmlzRGVhZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgdXBzaWRlLWRvd24gc3RhdGUgZm9yIHRoaXMgY2hhcmFjdGVyLiBUaGUgc3RhdGUgY2FuIGJlIGZvcmNlZFxuICAgICAqIGJ5IHBhc3NpbmcgYSBib29sZWFuIHRvIHRoaXMgbWV0aG9kLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gW3N0YXRlXVxuICAgICAqICAgICAgICAgT3B0aW9uYWwgc3RhdGUgdG8gc2V0LiBJZiBvbW1pdHRlZCwgdGhlIHN0YXRlIGlzIHRvZ2dsZWQuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiAgICAgICAgIFRoZSBuZXcgc3RhdGUuXG4gICAgICovXG4gICAgcm90YXRlKHN0YXRlKSB7XG5cbiAgICAgICAgaWYgKHN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHN0YXRlID0gIXRoaXMuaXNVcHNpZGVEb3duO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc1Vwc2lkZURvd24gPSBzdGF0ZTtcblxuICAgICAgICByZXR1cm4gdGhpcy5nZXRJc1Vwc2lkZURvd24oKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMge0BsaW5rIENoYXJhY3RlclRva2VuI2lzVXBzaWRlRG93bn0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqICAgICAgICAgdHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIGlzIHVwc2lkZS1kb3duLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgZ2V0SXNVcHNpZGVEb3duKCkge1xuICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLmlzVXBzaWRlRG93bik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB3aGV0aGVyIG9yIG5vdCB0aGUgcGxheWVyIGhhcyBhIGdob3N0IHZvdGUuIFRoZSBzdGF0ZSBjYW4gYmVcbiAgICAgKiBmb3JjZWQgYnkgcGFzc2luZyBhIGJvb2xlYW4gdG8gdGhpcyBtZXRob2QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbc3RhdGVdXG4gICAgICogICAgICAgICBPcHRpb25hbCBzdGF0ZSB0byBzZXQuIElmIG9tbWl0dGVkLCB0aGUgc3RhdGUgaXMgdG9nZ2xlZC5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqICAgICAgICAgVGhlIG5ldyBzdGF0ZS5cbiAgICAgKi9cbiAgICB0b2dnbGVHaG9zdFZvdGUoc3RhdGUpIHtcblxuICAgICAgICBpZiAoc3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgc3RhdGUgPSAhdGhpcy5oYXNHaG9zdFZvdGU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmhhc0dob3N0Vm90ZSA9IHN0YXRlO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmdldEhhc0dob3N0Vm90ZSgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlcyB7QGxpbmsgQ2hhcmFjdGVyVG9rZW4jaGFzR2hvc3RWb3RlfS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICAgICAgICB0cnVlIGlmIHRoZSBjaGFyYWN0ZXIgaGFzIGEgZ2hvc3Qgdm90ZSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGdldEhhc0dob3N0Vm90ZSgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5oYXNHaG9zdFZvdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIGdpdmVuIGNoYXJhY3RlciBtYXRjaGVzIHRoaXMgb25lLiBJdCBtYXkgbm90IGJlIHRoZVxuICAgICAqIHNhbWUgb2JqZWN0LCBpdCBtYXkgYmUgYSBjbG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0NoYXJhY3RlclRva2VufSBjaGFyYWN0ZXJcbiAgICAgKiAgICAgICAgIENoYXJhY3RlciB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqICAgICAgICAgdHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIG1hdGNoZXMsIGZhbHNlIGlmIGl0IGRvZXNuJ3QuXG4gICAgICovXG4gICAgbWF0Y2hlcyhjaGFyYWN0ZXIpIHtcbiAgICAgICAgcmV0dXJuIGNoYXJhY3RlciA9PT0gdGhpcyB8fCBjaGFyYWN0ZXIuZ2V0SWQoKSA9PT0gdGhpcy5nZXRJZCgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBqaW54IHRvcCB7QGxpbmsgQ2hhcmFjdGVyVG9rZW4jamlueGVzfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SmlueH0gamlueFxuICAgICAqICAgICAgICBKaW54IHRvIGFkZC5cbiAgICAgKi9cbiAgICBhZGRKaW54KGppbngpIHtcblxuICAgICAgICBqaW54LnNldFRhcmdldCh0aGlzKTtcblxuICAgICAgICB0aGlzLmppbnhlcy5wdXNoKGppbngpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhbnkgamlueGVzIHRoYXQgbWF0Y2ggYW55IG9mIHRoZSBnaXZlbiBjaGFyYWN0ZXJzIFwicmVhZHlcIi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXkuPENoYXJhY3RlclRva2VuPn0gY2hhcmFjdGVyc1xuICAgICAqICAgICAgICBDaGFyYWN0ZXJzIHRoYXQgbWF5IGJlIHRyaWNrcyBpbiBhIGppbnguXG4gICAgICovXG4gICAgcmVhZHlBbGxKaW54ZXMoY2hhcmFjdGVycykge1xuXG4gICAgICAgIGNoYXJhY3RlcnMuZm9yRWFjaCgoY2hhcmFjdGVyKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZUppbnhSZWFkeShjaGFyYWN0ZXIsIHRydWUpO1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgYWxsIGppbnhlcyBpbiB7QGxpbmsgQ2hhcmFjdGVyVG9rZW4jamlueGVzfSB0byB1bnJlYWR5LlxuICAgICAqL1xuICAgIHVucmVhZHlBbGxKaW54ZXMoKSB7XG4gICAgICAgIHRoaXMuamlueGVzLmZvckVhY2goKGppbngpID0+IGppbngudG9nZ2xlUmVhZHkoZmFsc2UpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHRoZSByZWFkeSBzdGF0ZSBvZiBhIGppbnguIE9wdGlvbmFsbHkgdGhlIHN0YXRlIGNhbiBiZSBkZWZpbmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgIENoYXJhY3RlciB0aGF0IGhhcyBhIGppbnggd2l0aCB0aGlzIGNoYXJhY3Rlci5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtzdGF0ZV1cbiAgICAgKiAgICAgICAgT3B0aW9uYWwgc3RhdGUgdG8gZm9yY2UuIElmIG9tbWl0dGVkLCB0aGUgc3RhdGUgaXMgdG9nZ2xlZC5cbiAgICAgKi9cbiAgICB0b2dnbGVKaW54UmVhZHkoY2hhcmFjdGVyLCBzdGF0ZSkge1xuXG4gICAgICAgIHRoaXMuamlueGVzLmZvckVhY2goKGppbngpID0+IHtcblxuICAgICAgICAgICAgaWYgKGppbngubWF0Y2hlcyhjaGFyYWN0ZXIpKSB7XG4gICAgICAgICAgICAgICAgamlueC50b2dnbGVSZWFkeShzdGF0ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHRoZSBhY3RpdmUgc3RhdGUgb2YgYSBqaW54LiBPcHRpb25hbGx5IHRoZSBzdGF0ZSBjYW4gYmUgZGVmaW5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Q2hhcmFjdGVyVG9rZW59IHRyaWNrXG4gICAgICogICAgICAgIENoYXJhY3RlciB0aGF0IGhhcyBhIGppbnggd2l0aCB0aGlzIGNoYXJhY3Rlci5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtzdGF0ZV1cbiAgICAgKiAgICAgICAgT3B0aW9uYWwgc3RhdGUgdG8gZm9yY2UuIElmIG9tbWl0dGVkLCB0aGUgc3RhdGUgaXMgdG9nZ2xlZC5cbiAgICAgKi9cbiAgICB0b2dnbGVKaW54VHJpY2sodHJpY2ssIHN0YXRlKSB7XG5cbiAgICAgICAgdGhpcy5qaW54ZXMuZm9yRWFjaCgoamlueCkgPT4ge1xuXG4gICAgICAgICAgICBpZiAoamlueC5tYXRjaGVzKHRyaWNrKSkge1xuICAgICAgICAgICAgICAgIGppbngudG9nZ2xlVHJpY2soc3RhdGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdGFyZ2V0IHN0YXRlIGZvciBhbGwgdGhlIGppbnhlcyBpblxuICAgICAqIHtAbGluayBDaGFyYWN0ZXJUb2tlbiNqaW54ZXN9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbc3RhdGVdXG4gICAgICogICAgICAgIE9wdGlvbmFsIHN0YXRlIHRvIHNldC4gSWYgb21taXRlZCwgdGhlIHN0YXRlIG9mIGVhY2ggb2YgdGhlIGppbnhlc1xuICAgICAqICAgICAgICB3aWxsIGJlIHRvZ2dsZWQuXG4gICAgICovXG4gICAgdG9nZ2xlSmlueFRhcmdldChzdGF0ZSkge1xuICAgICAgICB0aGlzLmppbnhlcy5mb3JFYWNoKChqaW54KSA9PiBqaW54LnRvZ2dsZVRhcmdldChzdGF0ZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMge0BsaW5rIENoYXJhY3RlclRva2VuI2ppbnhlc30uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheS48SmlueD59XG4gICAgICogICAgICAgICBDb2xsZWN0aW9uIG9mIGFsbCBqaW54ZXMuXG4gICAgICovXG4gICAgZ2V0SmlueGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5qaW54ZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlcyBhbGwgdGhlIHJlYWR5IGppbnhlcy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5LjxKaW54Pn1cbiAgICAgKiAgICAgICAgIENvbGxlY3Rpb24gb2YgYWxsIHJlYWR5IGppbnhlcy5cbiAgICAgKi9cbiAgICBnZXRSZWFkeUppbnhlcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuamlueGVzLmZpbHRlcigoamlueCkgPT4gamlueC5pc1JlYWR5KCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMgYWxsIHRoZSBhY3RpdmUgamlueGVzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXkuPEppbng+fVxuICAgICAqICAgICAgICAgQ29sbGVjdGlvbiBvZiBhbGwgYWN0aXZlIGppbnhlcy5cbiAgICAgKi9cbiAgICBnZXRBY3RpdmVKaW54ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmppbnhlcy5maWx0ZXIoKGppbngpID0+IGppbnguaXNBY3RpdmUoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGlzIGlzIHRoZSBlbXB0eSBjaGFyYWN0ZXIgdG9rZW4uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqICAgICAgICAgdHJ1ZSBpZiB0aGlzIGlzIHRoZSBlbXB0eSBjaGFyYWN0ZXIgdG9rZW4sIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLmRhdGFbZW1wdHlQcm9wZXJ0eV0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0byBzZWUgaWYgdGhpcyBpcyBhIGN1c3RvbSBjaGFyYWN0ZXIgdG9rZW4uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqICAgICAgICAgdHJ1ZSBpZiB0aGlzIGlzIGEgY3VzdG9tIGNoYXJhY3RlciB0b2tlbiwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGlzQ3VzdG9tKCkge1xuICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLmRhdGFbY3VzdG9tUHJvcGVydHldKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBzcGVjaWFsIGRhdGEgZm9yIHRoaXMgY2hhcmFjdGVyLCBpZiBpdCBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IHR5cGVcbiAgICAgKiAgICAgICAgIFRoZSBzcGVjaWFsIHR5cGUuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBuYW1lXG4gICAgICogICAgICAgICBUaGUgc3BlY2lhbCBuYW1lLlxuICAgICAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG4gICAgICogICAgICAgICBFaXRoZXIgdGhlIHNwZWNpYWwgb2JqZWN0IG9yIHVuZGVmaW5lZCBpZiB0aGUgc3BlY2lhbCBjYW5ub3QgYmVcbiAgICAgKiAgICAgICAgIGZvdW5kLlxuICAgICAqL1xuICAgIGdldFNwZWNpYWxEYXRhKHR5cGUsIG5hbWUpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBzcGVjaWFsXG4gICAgICAgIH0gPSB0aGlzLmRhdGE7XG4gICAgICAgIGNvbnN0IGlzQXJyYXkgPSBBcnJheS5pc0FycmF5KHNwZWNpYWwpO1xuXG4gICAgICAgIGlmICghc3BlY2lhbCB8fCAoaXNBcnJheSAmJiAhc3BlY2lhbC5sZW5ndGgpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc3BlY2lhbC5maW5kKChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS50eXBlID09PSB0eXBlICYmIGRhdGEubmFtZSA9PT0gbmFtZTtcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIHRoZSBjaGFyYWN0ZXIgaGFzIGFueSBzcGVjaWFsIGRhdGEgbWF0Y2hpbmcgdGhlIGdpdmVuXG4gICAgICogdHlwZSBhbmQgbmFtZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdHlwZVxuICAgICAqICAgICAgICAgVGhlIHNwZWNpYWwgdHlwZS5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWVcbiAgICAgKiAgICAgICAgIFRoZSBzcGVjaWFsIG5hbWUuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiAgICAgICAgIHRydWUgaWYgdGhlIHNwZWNpYWwgZXhpc3RzLCBmYWxzZSBpZiBpdCBkb2Vzbid0LlxuICAgICAqL1xuICAgIGhhc1NwZWNpYWxEYXRhKHR5cGUsIG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5nZXRTcGVjaWFsRGF0YSh0eXBlLCBuYW1lKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIHRva2VuIHRoYXQgY2FuIGJlIHNob3duIG9uIHRoZSBncmltb2lyZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gICAgICogICAgICAgICBQb3B1bGF0ZWQgdG9rZW4uXG4gICAgICovXG4gICAgZHJhd1Rva2VuKCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBpbWFnZSxcbiAgICAgICAgICAgIHJlbWluZGVycyA9IFtdLFxuICAgICAgICAgICAgcmVtaW5kZXJzR2xvYmFsID0gW10sXG4gICAgICAgICAgICBmaXJzdE5pZ2h0LFxuICAgICAgICAgICAgb3RoZXJOaWdodCxcbiAgICAgICAgICAgIHNldHVwXG4gICAgICAgIH0gPSB0aGlzLmRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudGVtcGxhdGVzLnRva2VuLmRyYXcoe1xuICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci0tbGVhdmVzXCIoZWxlbWVudCkge1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiY2hhcmFjdGVyLS1zZXR1cFwiLCBzZXR1cCk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiY2hhcmFjdGVyLS1sZWZ0LTFcIiwgZmlyc3ROaWdodCk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiY2hhcmFjdGVyLS1yaWdodC0xXCIsIG90aGVyTmlnaHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHRvcCA9IHJlbWluZGVycy5sZW5ndGggKyByZW1pbmRlcnNHbG9iYWwubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShgY2hhcmFjdGVyLS10b3AtJHt0b3B9YCwgdG9wKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiLmpzLS1jaGFyYWN0ZXItLWltYWdlXCIoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gaW1hZ2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci0tbmFtZVwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgY2hhcmFjdGVyIHRva2VuIGxpc3QgaXRlbS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gICAgICogICAgICAgICBQb3B1bGF0ZWQgY2hhcmFjdGVyIHRva2VuIGxpc3QgaXRlbS5cbiAgICAgKi9cbiAgICBkcmF3TGlzdCgpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpZFxuICAgICAgICB9ID0gdGhpcy5kYXRhO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLnRlbXBsYXRlcy5saXN0LmRyYXcoe1xuICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci1saXN0LS1idXR0b25cIihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5kYXRhc2V0LnRva2VuSWQgPSBpZDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIi5qcy0tY2hhcmFjdGVyLWxpc3QtLXRva2VuXCI6IChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQodGhpcy5kcmF3VG9rZW4oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIGNoYXJhY3RlcidzIGljb24sIG5hbWUsIGFuZCBhYmlsaXR5IGZvciB0aGUgXCJTZWxlY3QgQ2hhcmFjdGVyc1wiXG4gICAgICogZGlhbG9nIGJveC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gICAgICogICAgICAgICBQb3B1bGF0ZWQgc2VsZWN0IGVudHJ5LlxuICAgICAqL1xuICAgIGRyYXdTZWxlY3QoKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgaW1hZ2UsXG4gICAgICAgICAgICBhYmlsaXR5LFxuICAgICAgICAgICAgc2V0dXBcbiAgICAgICAgfSA9IHRoaXMuZGF0YTtcblxuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50ZW1wbGF0ZXMuc2VsZWN0LmRyYXcoe1xuICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci1zZWxlY3QtLWltYWdlXCIoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gaW1hZ2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci1zZWxlY3QtLW5hbWVcIihlbGVtZW50KSB7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJpcy1zZXR1cFwiLCBzZXR1cCk7XG5cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIi5qcy0tY2hhcmFjdGVyLXNlbGVjdC0tYWJpbGl0eVwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gYWJpbGl0eTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIi5qcy0tY2hhcmFjdGVyLXNlbGVjdC0taW5wdXRcIihlbGVtZW50KSB7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnZhbHVlID0gaWQ7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbG9zZXN0KFwibGFiZWxcIikuaHRtbEZvciA9IGlkZW50aWZ5KGVsZW1lbnQpO1xuXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci1zZWxlY3QtLWNvdW50XCIoZWxlbWVudCkge1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5uYW1lICs9IGlkO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YXNldC5mb3IgPSBpZDtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERyYXdzIHRoZSBlbnRyeSBpbiB0aGUgTmlnaHQgT3JkZXIgbGlzdHMgZm9yIHRoaXMgdG9rZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbaXNGaXJzdD10cnVlXVxuICAgICAqICAgICAgICAgQSBmbGFnIGZvciB3aGV0aGVyIHRoZSBlbnRyeSBzaG91bGQgYmUgZm9yIHRoZSBmaXJzdCBuaWdodCAodHJ1ZSlcbiAgICAgKiAgICAgICAgIG9yIG90aGVyIG5pZ2h0cyAoZmFsc2UpLiBEZWZhdWx0cyB0byB0cnVlLlxuICAgICAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gICAgICogICAgICAgICBQb3B1bGF0ZWQgbmlnaHQgb3JkZXIgZW50cnkuXG4gICAgICovXG4gICAgZHJhd05pZ2h0T3JkZXIoaXNGaXJzdCA9IHRydWUpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBpbWFnZSxcbiAgICAgICAgICAgIGZpcnN0TmlnaHQsXG4gICAgICAgICAgICBmaXJzdE5pZ2h0UmVtaW5kZXIsXG4gICAgICAgICAgICBvdGhlck5pZ2h0LFxuICAgICAgICAgICAgb3RoZXJOaWdodFJlbWluZGVyXG4gICAgICAgIH0gPSB0aGlzLmRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudGVtcGxhdGVzLm5pZ2h0T3JkZXIuZHJhdyh7XG4gICAgICAgICAgICBcIi5qcy0tbmlnaHQtaW5mby0td3JhcHBlclwiKGVsZW1lbnQpIHtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YXNldC5pZCA9IGlkO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YXNldC5vcmRlciA9IChcbiAgICAgICAgICAgICAgICAgICAgaXNGaXJzdFxuICAgICAgICAgICAgICAgICAgICA/IGZpcnN0TmlnaHRcbiAgICAgICAgICAgICAgICAgICAgOiBvdGhlck5pZ2h0XG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiLmpzLS1uaWdodC1pbmZvLS1pY29uXCIoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gaW1hZ2U7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIuanMtLW5pZ2h0LWluZm8tLXJvbGVcIihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIuanMtLW5pZ2h0LWluZm8tLWFiaWxpdHlcIihlbGVtZW50KSB7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gKFxuICAgICAgICAgICAgICAgICAgICBpc0ZpcnN0XG4gICAgICAgICAgICAgICAgICAgID8gZmlyc3ROaWdodFJlbWluZGVyXG4gICAgICAgICAgICAgICAgICAgIDogb3RoZXJOaWdodFJlbWluZGVyXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH1cblxufVxuIiwiLyoqXG4gKiBBIGNsYXNzIHRoYXQgYWxsb3dzIGVsZW1lbnRzIHRvIGJlIGRyYWdnYWJsZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHJhZ2dhYmxlIHtcblxuICAgIC8qKlxuICAgICAqIERlZmF1bHQgc2V0dGluZ3MgZm9yIHtAbGluayBEcmFnZ2FibGUjc2V0dGluZ3N9LlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgc3RhdGljIGRlZmF1bHRzID0ge1xuICAgICAgICBjaGlsZENsYXNzOiBcImlzLWRyYWdnYWJsZVwiLFxuICAgICAgICBkcmFnQ2xhc3M6IFwiaXMtZHJhZ2dpbmdcIixcbiAgICAgICAgZHJhZ1NlbGVjdG9yOiBcIltkcmFnZ2FibGVdXCJcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBjb250YWluZXJcbiAgICAgKiAgICAgICAgVGhlIGNvbnRhaW5lciBpbiB3aGljaCBhbGwgdGhlIGRyYWdnYWJsZSBlbGVtZW50cyB3aWxsIGJlLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2V0dGluZ3NdXG4gICAgICogICAgICAgIE9wdGlvbmFsIHNldHRpbmdzIGZvciB0aGUgY2xhc3MgaW5zdGFuY2UuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyLCBzZXR0aW5ncykge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb250YWluZXIgaW4gd2hpY2ggYWxsIHRoZSBkcmFnZ2FibGUgZWxlbWVudHMgd2lsbCBiZS4gRWxlbWVudHMgY2FuXG4gICAgICAgICAqIG9ubHkgYmUgZHJvcHBlZCB3aXRoaW4gdGhpcyBjb250YWluZXIuXG4gICAgICAgICAqIEB0eXBlIHtFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldHRpbmdzIGZvciB0aGUgaW5zdGFuY2UuXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgRHJhZ2dhYmxlLmRlZmF1bHRzLCBzZXR0aW5ncyB8fCB7fSk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY29sbGVjdGlvbiBvZiBhbGwgdGhlIGRyYWdnYWJsZSBjaGlsZHJlbiB3aXRoaW5cbiAgICAgICAgICoge0BsaW5rIERyYWdnYWJsZSNjb250YWluZXJ9LlxuICAgICAgICAgKiBAdHlwZSB7U2V0LjxFbGVtZW50Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBuZXcgU2V0KCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBjaGlsZCBjdXJyZW50bHkgYmUgZHJhZ2dlZCwgaWYgdGhlcmUgaXMgb25lLlxuICAgICAgICAgKiBAdHlwZSB7RWxlbWVudHxudWxsfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kcmFnZ2VkID0gbnVsbDtcblxuICAgICAgICB0aGlzLmNyZWF0ZUhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIHtAbGluayBEcmFnZ2FibGUjb25DaGlsZERyYWdTdGFydH0gYW5kXG4gICAgICoge0BsaW5rIERyYWdnYWJsZSNvbkNoaWxkRHJhZ0VuZH0gbWV0aG9kcy5cbiAgICAgKi9cbiAgICBjcmVhdGVIYW5kbGVycygpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBkcmFnQ2xhc3MsXG4gICAgICAgICAgICBkcmFnU2VsZWN0b3JcbiAgICAgICAgfSA9IHRoaXMuc2V0dGluZ3M7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZXMgdGhlIHVzZXIgc3RhcnRpbmcgdG8gZHJhZyBhIGNoaWxkIGVsZW1lbnQuIFRoaXMgaXMgYVxuICAgICAgICAgKiBnZW5lcmF0ZWQgbWV0aG9kLCByYXRoZXIgdGhhbiBiZWluZyBwYXJ0IG9mIHRoZSBwcm90b3R5cGUsIHNvIHRoYXQgaXRcbiAgICAgICAgICogY2FuIGJlIGFkZGVkL3JlbW92ZWQgYnkgcmVmZXJlbmNlIGluIHtAbGluayBEcmFnZ2FibGUjYWRkQ2hpbGR9IGFuZFxuICAgICAgICAgKiB7QGxpbmsgRHJhZ2dhYmxlI3JlbW92ZUNoaWxkfS5cbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICAgICAgICogICAgICAgIEVpdGhlciBhIFwiZHJhZ3N0YXJ0XCIgb3IgYSBcInRvdWNoc3RhcnRcIiBldmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub25DaGlsZERyYWdTdGFydCA9IChldmVudCkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgICAgIGRhdGFUcmFuc2ZlclxuICAgICAgICAgICAgfSA9IGV2ZW50O1xuXG4gICAgICAgICAgICAvLyBXaGVuIHVzaW5nIHRvdWNoIGV2ZW50cywgdGhlIHRhcmdldCBjYW4gYmUgYSBbZHJhZ2dhYmxlXSBjaGlsZC5cbiAgICAgICAgICAgIGNvbnN0IGNoaWxkID0gdGFyZ2V0LmNsb3Nlc3QoZHJhZ1NlbGVjdG9yKTtcblxuICAgICAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZChkcmFnQ2xhc3MpO1xuXG4gICAgICAgICAgICAvLyBkYXRhVHJhbnNmZXIgcHJvcGVydHkgb25seSBleGlzdHMgd2l0aCBcImRyb3BcIiBldmVudHMuXG4gICAgICAgICAgICBpZiAoZGF0YVRyYW5zZmVyKSB7XG5cbiAgICAgICAgICAgICAgICBkYXRhVHJhbnNmZXIuZWZmZWN0QWxsb3dlZCA9IFwibW92ZVwiO1xuICAgICAgICAgICAgICAgIGRhdGFUcmFuc2Zlci5zZXREYXRhKFwidGV4dC9wbGFpblwiLCBudWxsKTsgLy8gTmVlZGVkIGZvciBGaXJlZm94LlxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuZHJhZ2dlZCA9IGNoaWxkO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEhhbmRsZXMgdGhlIHVzZXIgbm8gbG9uZ2VyIGRyYWdnaW5nIGEgY2hpbGQgZWxlbWVudC4gVGhpcyBpcyBhXG4gICAgICAgICAqIGdlbmVyYXRlZCBtZXRob2QsIHJhdGhlciB0aGFuIGJlaW5nIHBhcnQgb2YgdGhlIHByb3RvdHlwZSwgc28gdGhhdCBpdFxuICAgICAgICAgKiBjYW4gYmUgYWRkZWQvcmVtb3ZlZCBieSByZWZlcmVuY2UgaW4ge0BsaW5rIERyYWdnYWJsZSNhZGRDaGlsZH0gYW5kXG4gICAgICAgICAqIHtAbGluayBEcmFnZ2FibGUjcmVtb3ZlQ2hpbGR9LlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgICAgICAgKiAgICAgICAgRWl0aGVyIGEgXCJkcmFnZW5kXCIgb3IgYSBcInRvdWNoZW5kXCIgZXZlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9uQ2hpbGREcmFnRW5kID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICBldmVudC50YXJnZXQuY2xvc2VzdChkcmFnU2VsZWN0b3IpPy5jbGFzc0xpc3QucmVtb3ZlKGRyYWdDbGFzcyk7XG4gICAgICAgIH07XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJZGVudGlmaWVzIHRoZSB3aXRoaW4gdGhlIGdpdmVuIGNvbGxlY3Rpb24gb2YgY2hpbGRyZW4gdGhhdCBpcyBjbG9zZXN0IHRvXG4gICAgICogdGhlIGdpdmVuIFggYW5kIFkgY28tb3JkaW5hdGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7RWxlbWVudFtdfSBjaGlsZHJlblxuICAgICAqICAgICAgICAgQ29sbGVjdGlvbiBvZiBlbGVtZW50cyB0byBjaGVjay5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IHhcbiAgICAgKiAgICAgICAgIFggY28tb3JkaW5hdGUuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfSB5XG4gICAgICogICAgICAgICBZIGNvLW9yZGluYXRlLlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR8dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgRWl0aGVyIHRoZSBjbG9zZXN0IGVsZW1lbnQsIG9yIHVuZGVmaW5lZCBpZiB0aGUgY2hpbGRyZW5cbiAgICAgKiAgICAgICAgIHBhcmFtZXRlciBpcyBhbiBlbXB0eSBsaXN0LlxuICAgICAqL1xuICAgIGdldENsb3Nlc3RFbGVtZW50KGNoaWxkcmVuLCB4LCB5KSB7XG5cbiAgICAgICAgcmV0dXJuIFsuLi5jaGlsZHJlbl0ucmVkdWNlKChjbG9zZXN0LCBjaGlsZCkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCBib3ggPSBjaGlsZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgICAgIGNvbnN0IHhEaXN0YW5jZSA9IHggLSBib3gubGVmdCAtIGJveC53aWR0aCAvIDI7XG4gICAgICAgICAgICBjb25zdCB5RGlzdGFuY2UgPSB5IC0gYm94LnRvcCAtIGJveC5oZWlnaHQgLyAyO1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gTWF0aC5zcXJ0KHhEaXN0YW5jZSoqMiArIHlEaXN0YW5jZSoqMik7XG5cbiAgICAgICAgICAgIGlmIChvZmZzZXQgPCBjbG9zZXN0Lm9mZnNldCkge1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0LFxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50OiBjaGlsZFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGNsb3Nlc3Q7XG5cbiAgICAgICAgfSwgeyBvZmZzZXQ6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSB9KS5lbGVtZW50O1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgZ2l2ZW4gdGFyZ2V0IGVsZW1lbnQgaXMgYmVmb3JlIG9yIGFmdGVyIHRoZSBzb3VyY2VcbiAgICAgKiBlbGVtZW50IGluIHRoZSBET00gbGlzdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR9IHRhcmdldFxuICAgICAqICAgICAgICAgVGFyZ2V0IGVsZW1lbnQgdG8gY2hlY2suXG4gICAgICogQHBhcmFtICB7RWxlbWVudH0gc291cmNlXG4gICAgICogICAgICAgICBTb3VyY2UgZWxlbWVudCB0byBjaGVjayBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICAgICAgICB0cnVlIGlmIHRoZSB0YXJnZXQgaXMgYmVmb3JlIHRoZSBzb3VyY2UsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKiBAc2VlICAgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODk2MjI5MC81NTcwMTlcbiAgICAgKi9cbiAgICBpc0JlZm9yZSh0YXJnZXQsIHNvdXJjZSkge1xuXG4gICAgICAgIGlmICh0YXJnZXQucGFyZW50Tm9kZSA9PT0gc291cmNlLnBhcmVudE5vZGUpIHtcblxuICAgICAgICAgICAgZm9yIChcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudCA9IHRhcmdldC5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgICAgICAgICAgY3VycmVudCAmJiBjdXJyZW50Lm5vZGVUeXBlICE9PSBOb2RlLkRPQ1VNRU5UX05PREU7XG4gICAgICAgICAgICAgICAgY3VycmVudCA9IGN1cnJlbnQucHJldmlvdXNTaWJsaW5nXG4gICAgICAgICAgICApIHtcblxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgdGhlIG1vdmluZyBvZiB0aGUgZWxlbWVudCBjdXJyZW50bHkgc3RvcmVkIGluXG4gICAgICoge0BsaW5rIERyYWdnYWJsZSNkcmFnZ2VkfSAtIGlmIHRoZXJlIGlzIG5vIGVsZW1lbnQgc3RvcmVkIHRoZXJlIHRoZW4gdGhpc1xuICAgICAqIGZ1bmN0aW9uIGVuZHMgZWFybHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBldmVudFxuICAgICAqICAgICAgICBFaXRoZXIgYSBcImRyYWdvdmVyXCIgb3IgYSBcInRvdWNobW92ZVwiIGV2ZW50LlxuICAgICAqL1xuICAgIG1vdmUoZXZlbnQpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBkYXRhVHJhbnNmZXIsXG4gICAgICAgICAgICB0YXJnZXRUb3VjaGVzXG4gICAgICAgIH0gPSBldmVudDtcbiAgICAgICAgY29uc3QgcG9pbnRlciA9IChcbiAgICAgICAgICAgIHRhcmdldFRvdWNoZXNcbiAgICAgICAgICAgID8gdGFyZ2V0VG91Y2hlc1swXVxuICAgICAgICAgICAgOiBldmVudFxuICAgICAgICApO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBkcmFnZ2VkLFxuICAgICAgICAgICAgY2hpbGRyZW4sXG4gICAgICAgICAgICBjb250YWluZXJcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFwb2ludGVyIHx8ICFkcmFnZ2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIC8vIGRhdGFUcmFuc2ZlciBpcyBvbmx5IGEgcHJvcGVydHkgd2l0aCBcImRyb3BcIiBldmVudHMuXG4gICAgICAgIGlmIChkYXRhVHJhbnNmZXIpIHtcbiAgICAgICAgICAgIGRhdGFUcmFuc2Zlci5kcm9wRWZmZWN0ID0gXCJtb3ZlXCI7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjbG9zZXN0ID0gdGhpcy5nZXRDbG9zZXN0RWxlbWVudChcbiAgICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgICAgcG9pbnRlci5jbGllbnRYLFxuICAgICAgICAgICAgcG9pbnRlci5jbGllbnRZXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFjbG9zZXN0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb250YWluZXIuaW5zZXJ0QmVmb3JlKFxuICAgICAgICAgICAgZHJhZ2dlZCxcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICB0aGlzLmlzQmVmb3JlKGRyYWdnZWQsIGNsb3Nlc3QpXG4gICAgICAgICAgICAgICAgPyBjbG9zZXN0XG4gICAgICAgICAgICAgICAgOiBjbG9zZXN0Lm5leHRFbGVtZW50U2libGluZ1xuICAgICAgICAgICAgKVxuICAgICAgICApO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBldmVudCBsaXN0ZW5lcnMgdG8ge0BsaW5rIERyYWdnYWJsZSNjb250YWluZXJ9LlxuICAgICAqL1xuICAgIGFkZEV2ZW50TGlzdGVuZXJzKCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNvbnRhaW5lclxuICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIChlKSA9PiB0aGlzLm1vdmUoZSkpO1xuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCAoZSkgPT4gdGhpcy5tb3ZlKGUpKTtcbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIChlKSA9PiBlLnByZXZlbnREZWZhdWx0KCkpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBhIGNoaWxkIGVsZW1lbnQgYmVpbmcgYWRkZWQgdG8ge0BsaW5rIERyYWdnYWJsZSNjb250YWluZXJ9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBjaGlsZFxuICAgICAqICAgICAgICBUaGUgY2hpbGQgZWxlbWVudCB0aGF0IGhhcyBiZWVuIGFkZGVkLlxuICAgICAqL1xuICAgIGFkZENoaWxkKGNoaWxkKSB7XG5cbiAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZCh0aGlzLnNldHRpbmdzLmNoaWxkQ2xhc3MpO1xuICAgICAgICBjaGlsZC5zZXRBdHRyaWJ1dGUoXCJkcmFnZ2FibGVcIiwgdHJ1ZSk7XG4gICAgICAgIGNoaWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgdGhpcy5vbkNoaWxkRHJhZ1N0YXJ0KTtcbiAgICAgICAgY2hpbGQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbmRcIiwgdGhpcy5vbkNoaWxkRHJhZ0VuZCk7XG4gICAgICAgIGNoaWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIHRoaXMub25DaGlsZERyYWdTdGFydCk7XG4gICAgICAgIGNoaWxkLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaGVuZFwiLCB0aGlzLm9uQ2hpbGREcmFnRW5kKTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5hZGQoY2hpbGQpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyBhIGNoaWxkIGVsZW1lbnQgYmVpbmcgcmVtb3ZlZCBmcm9tIHtAbGluayBEcmFnZ2FibGUjY29udGFpbmVyfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gY2hpbGRcbiAgICAgKiAgICAgICAgVGhlIGNoaWxkIGVsZW1lbnQgdGhhdCBoYXMgYmVlbiByZW1vdmVkLlxuICAgICAqL1xuICAgIHJlbW92ZUNoaWxkKGNoaWxkKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY2hpbGRyZW5cbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFjaGlsZHJlbi5oYXMoY2hpbGQpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjaGlsZC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuc2V0dGluZ3MuY2hpbGRDbGFzcyk7XG4gICAgICAgIGNoaWxkLnJlbW92ZUF0dHJpYnV0ZShcImRyYWdnYWJsZVwiKTtcbiAgICAgICAgY2hpbGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCB0aGlzLm9uQ2hpbGREcmFnU3RhcnQpO1xuICAgICAgICBjaGlsZC5yZW1vdmVFdmVudExpc3RlbmVyKFwiZHJhZ2VuZFwiLCB0aGlzLm9uQ2hpbGREcmFnRW5kKTtcbiAgICAgICAgY2hpbGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcy5vbkNoaWxkRHJhZ1N0YXJ0KTtcbiAgICAgICAgY2hpbGQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInRvdWNoZW5kXCIsIHRoaXMub25DaGlsZERyYWdFbmQpO1xuICAgICAgICBjaGlsZHJlbi5kZWxldGUoY2hpbGQpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGNoaWxkcmVuIHN0b3JlZCBpbiB7QGxpbmsgRHJhZ2dhYmxlI2NoaWxkcmVufSBmcm9tXG4gICAgICoge0BsaW5rIERyYWdnYWJsZSNjb250YWluZXJ9LlxuICAgICAqL1xuICAgIHJlbW92ZUFsbENoaWxkcmVuKCkge1xuICAgICAgICBbLi4udGhpcy5jaGlsZHJlbl0uZm9yRWFjaCgoY2hpbGQpID0+IHRoaXMucmVtb3ZlQ2hpbGQoY2hpbGQpKTtcbiAgICB9XG5cbn1cbiIsImltcG9ydCB7XG4gICAgaWRlbnRpZnksXG4gICAgbG9va3VwT25lXG59IGZyb20gXCIuLi91dGlscy9lbGVtZW50cy5qc1wiO1xuaW1wb3J0IHtcbiAgICBtYXJrZG93bjJodG1sLFxuICAgIHN0cmlwdGFnc1xufSBmcm9tIFwiLi4vdXRpbHMvc3RyaW5ncy5qc1wiO1xuXG4vKipcbiAqIEhhbmRsZXMgaW5mbyB0b2tlbnMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEluZm9Ub2tlbiB7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgcHJlZml4IGZvciB0aGUgSUQgb2YgYW55IGluZm8gdG9rZW4gZGlhbG9nLlxuICAgICAqIEB0eXBlIHtTdHJpbmd9XG4gICAgICovXG4gICAgc3RhdGljIGdldCBJRF9QUkVGSVgoKSB7XG4gICAgICAgIHJldHVybiBcImluZm8tdG9rZW4tXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU3RvcmVzIHRlbXBsYXRlcyB0aGF0IGFsbCBpbmZvIHRva2VucyB3aWxsIHJlZmVyIHRvLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRlbXBsYXRlc1xuICAgICAqICAgICAgICBBIGxpc3Qgb2YgYWxsIHRlbXBsYXRlcyB0aGF0IHRoZSBpbmZvIHRva2VucyB3aWxsIHJlZmVyIHRvLlxuICAgICAqL1xuICAgIHN0YXRpYyBzZXRUZW1wbGF0ZXModGVtcGxhdGVzKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiBhbGwgdGVtcGxhdGVzIHRoYXQgdGhpcyBpbmZvIHRva2VucyB3aWxsIHJlZmVyIHRvLlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50ZW1wbGF0ZXMgPSB0ZW1wbGF0ZXM7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9yZXMgaG9sZGVycyB0aGF0IGFsbCBpbmZvIHRva2VucyB3aWxsIGRyYXcgdG8uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdGVtcGxhdGVzXG4gICAgICogICAgICAgIEEgbGlzdCBvZiBhbGwgdGVtcGxhdGVzIHRoYXQgdGhlIGluZm8gdG9rZW5zIHdpbGwgcmVmZXIgdG8uXG4gICAgICovXG4gICAgc3RhdGljIHNldEhvbGRlcnMoaG9sZGVycykge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgYWxsIGhvbGRlcnMgdGhhdCB0aGlzIGluZm8gdG9rZW5zIHdpbGwgZHJhdyB0by5cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaG9sZGVycyA9IGhvbGRlcnM7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgdGV4dCBpbnRvIGEgdW5pcXVlIElELlxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSB0ZXh0XG4gICAgICogICAgICAgICBUZXh0IHRvIGFjdCBhcyBhIHByZWZpeCBmb3IgdGhlIElELlxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKiAgICAgICAgIFVuaXF1ZSBJRC5cbiAgICAgKi9cbiAgICBzdGF0aWMgbWFrZUlkKHRleHQpIHtcblxuICAgICAgICBjb25zdCBsb3dlciA9IHRleHQucmVwbGFjZSgvXFxXL2csIFwiXCIpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgcmV0dXJuIGlkZW50aWZ5KHt9LCBgJHt0aGlzLklEX1BSRUZJWH0ke2xvd2VyfS1gKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEludGVycHJldHMgdGhlIGdpdmVuIG9iamVjdCB0byBtYWtlIHN1cmUgaXQgaGFzIHRoZSBjb3JyZWN0IGtleXMgZm9yIHRoZVxuICAgICAqIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGRhdGFcbiAgICAgKiAgICAgICAgIERhdGEgdG8gaW50ZXJwcmV0LlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gW3Jhd11cbiAgICAgKiAgICAgICAgIFRoZSByYXcgdGV4dCB0byBjb252ZXJ0IGludG8gbWFya3VwIChtYXJrZG93bikuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBtYXJrdXBcbiAgICAgKiAgICAgICAgIE1hcmt1cCBmb3IgdGhlIGRpYWxvZyBib3guXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBbaWRdXG4gICAgICogICAgICAgICBJRCBmb3IgdGhlIGRpYWxvZyBib3guIElmIG9tbWl0dGVkLCBvbmUgd2lsbCBiZSBnZW5lcmF0ZWQgLSBzZWVcbiAgICAgKiAgICAgICAgIHtAbGluayBJbmZvVG9rZW4ubWFrZUlkfS5cbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IFtjb2xvdXI9XCJncmV5XCJdXG4gICAgICogICAgICAgICBDb2xvdXIgb2YgdGhlIGJ1dHRvbiBhbmQgZGlhbG9nIGJveC5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbY3VzdG9tPWZhbHNlXVxuICAgICAqICAgICAgICAgV2hldGhlciBvciBub3QgdGhlIGluZm8gdG9rZW4gaXMgY3VzdG9tLW1hZGUuXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqICAgICAgICAgSW50ZXJwcmV0dGVkIGRhdGEuXG4gICAgICovXG4gICAgc3RhdGljIGludGVycHJldCh7IHJhdywgbWFya3VwLCBpZCwgY29sb3VyLCBjdXN0b20gfSkge1xuXG4gICAgICAgIGlmIChyYXcgJiYgIW1hcmt1cCkge1xuICAgICAgICAgICAgbWFya3VwID0gbWFya2Rvd24yaHRtbChyYXcpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgdGV4dCA9IHN0cmlwdGFncyhtYXJrdXApO1xuXG4gICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIGlkID0gdGhpcy5tYWtlSWQodGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwcmVmaXggPSB0aGlzLklEX1BSRUZJWDtcblxuICAgICAgICBpZiAoIWlkLnN0YXJ0c1dpdGgocHJlZml4KSkge1xuICAgICAgICAgICAgaWQgPSBgJHtwcmVmaXh9JHtpZH1gO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHJhdyxcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICBtYXJrdXAsXG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIGNvbG91cjogYHZhcigtLSR7Y29sb3VyIHx8IFwiZ3JleVwifSlgLFxuICAgICAgICAgICAgY3VzdG9tOiBCb29sZWFuKGN1c3RvbSlcbiAgICAgICAgfTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICogICAgICAgIERhdGEgZm9yIHRoZSBpbmZvIHRva2VuLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGRhdGEpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogSW50ZXJwcmV0dGVkIGRhdGEgLSBzZWUge0BsaW5rIEluZm9Ub2tlbi5pbnRlcnByZXR9LlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5jb25zdHJ1Y3Rvci5pbnRlcnByZXQoZGF0YSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgZHJhd2luZyBhbGwgdGhlIGVsZW1lbnRzLlxuICAgICAqL1xuICAgIGRyYXcoKSB7XG5cbiAgICAgICAgdGhpcy5kcmF3VHJpZ2dlcigpO1xuICAgICAgICB0aGlzLmRyYXdEaWFsb2coKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERyYXdzIHRoZSBidXR0b24gYW5kIGFkZHMgaXQgdG8gdGhlIGNvcnJlY3QgaG9sZGVyLlxuICAgICAqL1xuICAgIGRyYXdUcmlnZ2VyKCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIGNvbG91cixcbiAgICAgICAgICAgIGN1c3RvbVxuICAgICAgICB9ID0gdGhpcy5kYXRhO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBob2xkZXJzLFxuICAgICAgICAgICAgdGVtcGxhdGVzXG4gICAgICAgIH0gPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBob2xkZXIgPSBob2xkZXJzW1xuICAgICAgICAgICAgY3VzdG9tXG4gICAgICAgICAgICA/IFwiY3VzdG9tXCJcbiAgICAgICAgICAgIDogXCJidXR0b25cIlxuICAgICAgICBdO1xuXG4gICAgICAgIGNvbnN0IHRyaWdnZXIgPSB0ZW1wbGF0ZXMuYnV0dG9uLmRyYXcoe1xuICAgICAgICAgICAgXCIuanMtLWluZm8tdG9rZW4tLWJ1dHRvblwiKGVsZW1lbnQpIHtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkoXCItLWJnLWNvbG91clwiLCBjb2xvdXIpO1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YXNldC5kaWFsb2cgPSBgIyR7aWR9YDtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBob2xkZXIuYXBwZW5kKHRyaWdnZXIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgd3JhcHBlciBsaXN0IGl0ZW0gdGhhdCBob2xkcyB0aGUgYnV0dG9uIHRoYXQgdHJpZ2dlcnNcbiAgICAgICAgICoge0BsaW5rIEluZm9Ub2tlbiNkaWFsb2d9LlxuICAgICAgICAgKiBAdHlwZSB7RWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudHJpZ2dlciA9IGhvbGRlci5sYXN0RWxlbWVudENoaWxkO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIGRpYWxvZyBhbmQgYWRkcyBpdCB0byB0aGUgY29ycmVjdCBob2xkZXIuXG4gICAgICovXG4gICAgZHJhd0RpYWxvZygpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBtYXJrdXAsXG4gICAgICAgICAgICBpZCxcbiAgICAgICAgICAgIGNvbG91cixcbiAgICAgICAgICAgIGN1c3RvbVxuICAgICAgICB9ID0gdGhpcy5kYXRhO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBob2xkZXJzLFxuICAgICAgICAgICAgdGVtcGxhdGVzXG4gICAgICAgIH0gPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBob2xkZXIgPSBob2xkZXJzLmRpYWxvZztcblxuICAgICAgICBjb25zdCBkaWFsb2cgPSB0ZW1wbGF0ZXMuZGlhbG9nLmRyYXcoe1xuICAgICAgICAgICAgXCIuanMtLWluZm8tdG9rZW4tLWRpYWxvZ1wiKGVsZW1lbnQpIHtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQuaWQgPSBpZDtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS1jb2xvdXJcIiwgY29sb3VyKTtcblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiLmpzLS1pbmZvLXRva2VuLS1kaWFsb2ctdGV4dFwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlubmVySFRNTCA9IG1hcmt1cDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIi5qcy0taW5mby10b2tlbi0tYWN0aW9uc1wiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmhpZGRlbiA9ICFjdXN0b207XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGhvbGRlci5hcHBlbmQoZGlhbG9nKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGRpYWxvZyBlbGVtZW50IGZvciB0aGlzIGluZm8gdG9rZW4uXG4gICAgICAgICAqIEB0eXBlIHtFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5kaWFsb2cgPSBob2xkZXIubGFzdEVsZW1lbnRDaGlsZDtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMgYSBjb3B5IG9mIHtAbGluayBJbmZvVG9rZW4jZGF0YX0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBBIGNvcHkgb2YgdGhlIGluZm8gdG9rZW4ncyBkYXRhLlxuICAgICAqL1xuICAgIGdldERhdGEoKSB7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIC4uLnRoaXMuZGF0YVxuICAgICAgICB9O1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlcyB0aGUgXCJyYXdcIiBrZXkgZnJvbSB7QGxpbmsgSW5mb1Rva2VuI2RhdGF9LlxuICAgICAqXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIHJhdyBtYXJrZG93bi5cbiAgICAgKi9cbiAgICBnZXRSYXcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEucmF3O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMge0BsaW5rIEluZm9Ub2tlbiN0cmlnZ2VyfVxuICAgICAqXG4gICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgKiAgICAgICAgIFRyaWdnZXIgZWxlbWVudC5cbiAgICAgKi9cbiAgICBnZXRUcmlnZ2VyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50cmlnZ2VyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMge0BsaW5rIEluZm9Ub2tlbiNkaWFsb2d9XG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtFbGVtZW50fVxuICAgICAqICAgICAgICAgRGlhbG9nIGVsZW1lbnQuXG4gICAgICovXG4gICAgZ2V0RGlhbG9nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kaWFsb2c7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY29udGVudHMgb2YgdGhlIGluZm8gdG9rZW4gYmFzZWQgb24gdGhlIHJhdyBpbnB1dCBnaXZlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByYXdcbiAgICAgKiAgICAgICAgTWFya2Rvd24gdGhhdCBzaG91bGQgYmUgdXBkYXRlZC5cbiAgICAgKi9cbiAgICB1cGRhdGVSYXcocmF3KSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIGRpYWxvZyxcbiAgICAgICAgICAgIHRyaWdnZXJcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgY29uc3QgbWFya3VwID0gbWFya2Rvd24yaHRtbChyYXcpO1xuICAgICAgICBjb25zdCB0ZXh0ID0gc3RyaXB0YWdzKG1hcmt1cCk7XG5cbiAgICAgICAgZGF0YS5yYXcgPSByYXc7XG4gICAgICAgIGRhdGEudGV4dCA9IHRleHQ7XG4gICAgICAgIGxvb2t1cE9uZShcIi5qcy0taW5mby10b2tlbi0tYnV0dG9uXCIsIHRyaWdnZXIpLnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgZGF0YS5tYXJrdXAgPSBtYXJrdXA7XG4gICAgICAgIGxvb2t1cE9uZShcIi5qcy0taW5mby10b2tlbi0tZGlhbG9nLXRleHRcIiwgZGlhbG9nKS5pbm5lckhUTUwgPSBtYXJrdXA7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBlbGVtZW50cyB0aGF0IHdlcmUgYWRkZWQgdG8gdGhlIERPTSBmb3IgdGhpcyBpbmZvIHRva2VuLlxuICAgICAqL1xuICAgIHJlbW92ZSgpIHtcblxuICAgICAgICB0aGlzLmRpYWxvZy5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy50cmlnZ2VyLnJlbW92ZSgpO1xuXG4gICAgfVxuXG59XG4iLCJpbXBvcnQgQ2hhcmFjdGVyVG9rZW4gZnJvbSBcIi4vQ2hhcmFjdGVyVG9rZW5cIjtcbmltcG9ydCBPYnNlcnZlciBmcm9tIFwiLi9PYnNlcnZlclwiO1xuXG4vKipcbiAqIE1hbmFnZXMgYSBKaW54LlxuICpcbiAqIFRoZSBjb21tZW50cyBpbiB0aGUgY29kZSBtaWdodCB1c2UgYSBmZXcgdGVybXMgdG8gZGVzY3JpYmUgYSBqaW54LiBIZXJlJ3MgYVxuICogZ2xvc3Nhcnk6XG4gKlxuICogVGhlb3JldGljYWwuXG4gKiBUaGUgamlueCBleGlzdHMgYnV0IGlzbid0IHBhcnQgb2YgdGhpcyBzY3JpcHQuXG4gKiBGb3IgZXhhbXBsZTogdGhlIENlcmVub3Z1cyBpcyBqaW54ZWQgd2l0aCB0aGUgR29ibGluLiBJZiB0aGUgQ2VyZW5vdnVzIGlzIG9uXG4gKiB0aGUgY3VycmVudCBzY3JpcHQgYnV0IHRoZSBHb2JsaW4gaXMgbm90IHRoZW4gdGhlIGppbnggaXMgdGhlb3JldGljYWwuXG4gKlxuICogUmVhZHkuXG4gKiBUaGUgamlueCBpcyBvbiB0aGUgc2NyaXB0LlxuICogRm9yIGV4YW1wbGU6IHRoZSBDaGFtYmVybWFpZCBpcyBqaW54ZWQgd2l0aCB0aGUgTWF0aGVtYXRpY2lhbi4gSWYgYm90aFxuICogY2hhcmFjdGVycyBhcmUgb24gdGhlIHNjcmlwdCB0aGVuIHRoZSBqaW54IGlzIHJlYWR5LCBidXQgbm90IG5lY2Vzc2FyaWx5XG4gKiBhY3RpdmUuXG4gKlxuICogQWN0aXZlLlxuICogQm90aCBjaGFyYWN0ZXJzIHRoYXQgZm9ybSB0aGlzIGppbnggaGF2ZSBiZWVuIHNlbGVjdGVkLlxuICogRm9yIGV4YW1wbGUsIHRoZSBCdXRsZXIgaXMgamlueGVkIHdpdGggdGhlIENhbm5pYmFsLiBJZiBib3RoIHRva2VucyBhcmUgaW5cbiAqIHRoZSBncmltb2lyZSB0aGVuIHRoZSBqaW54IGlzIGFjdGl2ZS5cbiAqXG4gKiBUYXJnZXQuXG4gKiBUaGUgY2hhcmFjdGVyIHRoYXQgaGFzIHRoZSBqaW54LlxuICogRm9yIGV4YW1wbGU6IHRoZSBQaXQtSGFnIGlzIGppbnhlZCB3aXRoIHRoZSBIZXJldGljLiBUaGUgUGl0LUhhZyBpcyB0aGVcbiAqIHRhcmdldC4gT24gYSBjaGFyYWN0ZXIgc2hlZXQsIHRoZSB0YXJnZXQgaXMgdGhlIGxhcmdlciBpY29uIGFib3ZlIHRoZSBzbWFsbGVyXG4gKiBqaW54ZXMuXG4gKlxuICogVHJpY2suXG4gKiBUaGUgY2hhcmFjdGVyIHRoYXQgaXMgamlueGVkIHdpdGggdGhlIHRhcmdldC5cbiAqIEZvciBleGFtcGxlOiB0aGUgTHljYW50aHJvcGUgaXMgamlueGVkIHdpdGggdGhlIEdhbWJsZXIuIFRoZSBHYW1ibGVyIGlzIHRoZVxuICogdHJpY2suIE9uIGEgY2hhcmFjdGVyIHNoZWV0LCB0aGUgdHJpY2sgaXMgdGhlIHNtYWxsZXIgaWNvbiB1bmRlciB0aGUgbWFpblxuICogY2hhcmFjdGVyLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBKaW54IHtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7Q2hhcmFjdGVyVG9rZW58dW5kZWZpbmVkfSB0cmlja1xuICAgICAqICAgICAgICBUaGUgY2hhcmFjdGVyIHRoYXQgdGhlIHNvdXJjZSBjaGFyYWN0ZXIgd2lsbCBiZSBqaW54ZWQgd2l0aC4gSWZcbiAgICAgKiAgICAgICAgdGhlIGppbnggaXMgYmV0d2VlbiAyIGhvbWVicmV3IGNoYXJhY3RlcnMgYW5kIG9ubHkgb25lIGlzIGRlZmluZWRcbiAgICAgKiAgICAgICAgaW4gdGhlIGRhdGEsIGB0cmlja2AgbWF5IGJlIHVuZGVmaW5lZC5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVhc29uXG4gICAgICogICAgICAgIFRoZSByZWFzb24gZm9yIHRoZSBqaW54LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRyaWNrLCByZWFzb24pIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNoYXJhY3RlciB0aGF0IHRoZSBzb3VyY2UgY2hhcmFjdGVyIGlzIGppbnhlZCB3aXRoLlxuICAgICAgICAgKiBAdHlwZSB7Q2hhcmFjdGVyVG9rZW58dW5kZWZpbmVkfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50cmljayA9IHRyaWNrO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcmVhc29uIGZvciB0aGUgamlueC5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucmVhc29uID0gcmVhc29uO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc3RhdGUgb2YgdGhpcyBqaW54LlxuICAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcbiAgICAgICAgICAgIHJlYWR5OiBmYWxzZSxcbiAgICAgICAgICAgIHRyaWNrOiBmYWxzZSxcbiAgICAgICAgICAgIHRhcmdldDogZmFsc2UsXG4gICAgICAgICAgICBhY3RpdmU6IGZhbHNlXG4gICAgICAgIH07XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0YXJnZXQgb2YgdGhlIGppbngsIHdoaWNoIGlzIHRvIHNheSB0aGUgbGFyZ2VyIGljb24gb24gdGhlXG4gICAgICogY2hhcmFjdGVyIHNoZWV0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gdGFyZ2V0XG4gICAgICogICAgICAgIFRoZSBqaW54IHRhcmdldC5cbiAgICAgKi9cbiAgICBzZXRUYXJnZXQodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgYW4gb2JzZXJ2ZXIgd2hpY2ggY2FuIHRyaWdnZXIgZXZlbnRzIGFzIHRoZSBzdGF0ZSBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYnNlcnZlcn0gb2JzZXJ2ZXJcbiAgICAgKiAgICAgICAgT2JzZXJ2ZXIgdGhhdCB3aWxsIGRpc3BhdGNoIGV2ZW50cyBhdCBrZXkgbW9tZW50cy5cbiAgICAgKi9cbiAgICBzZXRPYnNlcnZlcihvYnNlcnZlcikge1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciB0b2dnbGluZyBhIHN0YXRlIGZyb20gd2l0aGluIHtAbGluayBKaW54I3N0YXRlfS5cbiAgICAgKiBPcHRpb25hbGx5IHRoZSBzdGF0ZSBjYW4gYmUgZm9yY2VkLiBJZiB0aGUgc3RhdGUgaXMgdGhlIHNhbWUsIG5vIGFjdGlvblxuICAgICAqIGlzIHRha2VuLiBEb24ndCBjYWxsIHRoaXMgbWV0aG9kIGRpcmVjdGx5LCB1c2Ugb25lIG9mIHRoZSBoZWxwZXJcbiAgICAgKiBmdW5jdGlvbnMge0BsaW5rIEppbngjdG9nZ2xlUmVhZHl9LCB7QGxpbmsgSmlueCN0b2dnbGVUcmlja30sIG9yXG4gICAgICoge0BsaW5rIEppbngjdG9nZ2xlVGFyZ2V0fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZVxuICAgICAqICAgICAgICAgTmFtZSBvZiB0aGUgc3RhdGUgdG8gdG9nZ2xlLlxuICAgICAqIEBwYXJhbSAge0Jvb2xlYW59IFtmb3JjZVN0YXRlXVxuICAgICAqICAgICAgICAgVGhlIHN0YXRlIHRvIGZvcmNlLiBJZiBvbW1pdHRlZCwgdGhlIHN0YXRlIGlzIHNpbXBseSB0b2dnbGVkLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICAgICAgICBUaGUgbmV3IHN0YXRlLlxuICAgICAqIEB0aHJvd3Mge1JlZmVyZW5jZUVycm9yfVxuICAgICAqICAgICAgICAgVGhlIG5hbWUgb2YgdGhlIHN0YXRlIG11c3QgYmUgcmVjb2duaXNlZC5cbiAgICAgKi9cbiAgICB0b2dnbGVTdGF0ZShuYW1lLCBmb3JjZVN0YXRlKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgc3RhdGVcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc3RhdGUsIG5hbWUpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoYFVucmVjb2duaXNlZCBzdGF0ZSBcIiR7bmFtZX1cImApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvcmNlU3RhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgZm9yY2VTdGF0ZSA9ICFzdGF0ZVtuYW1lXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmb3JjZVN0YXRlICE9PSBzdGF0ZVtuYW1lXSkge1xuXG4gICAgICAgICAgICBzdGF0ZVtuYW1lXSA9IGZvcmNlU3RhdGU7XG5cbiAgICAgICAgICAgIC8vIE5leHQgbGluZSBjYW4gdHJpZ2dlcjogdG9nZ2xlLWppbngtcmVhZHksIHRvZ2dsZS1qaW54LXRyaWNrLCB0b2dnbGUtamlueC10YXJnZXQsIHRvZ2dsZS1qaW54LWFjdGl2ZVxuICAgICAgICAgICAgdGhpcy5vYnNlcnZlcj8udHJpZ2dlcihgdG9nZ2xlLWppbngtJHtuYW1lfWAsIHtcbiAgICAgICAgICAgICAgICBqaW54OiB0aGlzLFxuICAgICAgICAgICAgICAgIHN0YXRlOiBmb3JjZVN0YXRlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZvcmNlU3RhdGU7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHRoZSByZWFkeSBzdGF0ZS4gQSBqaW54IGlzIGNvbnNpZGVyZWQgXCJyZWFkeVwiIHdoZW4gaXQncyBvbiB0aGVcbiAgICAgKiBzY3JpcHQsIGJ1dCBub3QgbmVjZXNzYXJpbHkgYWN0aXZlLiBPcHRpb25hbGx5IHRoZSBzdGF0ZSBjYW4gYmUgZm9yY2VkXG4gICAgICogd2l0aCB0aGUgc2FtZSBsb2dpYyBhcyB7QGxpbmsgSmlueCN0b2dnbGVTdGF0ZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtmb3JjZVN0YXRlXVxuICAgICAqICAgICAgICBUaGUgb3B0aW9uYWwgc3RhdGUgdG8gZm9yY2UuXG4gICAgICovXG4gICAgdG9nZ2xlUmVhZHkoZm9yY2VTdGF0ZSkge1xuXG4gICAgICAgIGlmICh0aGlzLnRvZ2dsZVN0YXRlKFwicmVhZHlcIiwgZm9yY2VTdGF0ZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVN0YXRlKFwiYWN0aXZlXCIsIGZhbHNlKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlcyB3aGV0aGVyIG9yIG5vdCB0aGlzIGppbnggaXMgcmVhZHkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqICAgICAgICAgdHJ1ZSBpZiB0aGUgamlueCBpcyByZWFkeSwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGlzUmVhZHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnN0YXRlLnJlYWR5O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjdGl2YXRlcyB0aGUgamlueCBieSBtYWtpbmcgc3VyZSB0aGF0IGJvdGggdGhlIFwicmVhZHlcIiBhbmQgXCJhY3RpdmVcIlxuICAgICAqIHN0YXRlcyBhcmUgc2V0LlxuICAgICAqL1xuICAgIGFjdGl2YXRlKCkge1xuXG4gICAgICAgIHRoaXMudG9nZ2xlUmVhZHkodHJ1ZSk7XG4gICAgICAgIHRoaXMudG9nZ2xlU3RhdGUoXCJhY3RpdmVcIiwgdHJ1ZSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHRoZSB0cmljayBzdGF0ZS4gVGhlIGppbngncyB0cmljayBpcyB0aGUgY2hhcmFjdGVyIHRoYXQgdGhlXG4gICAgICogdGFyZ2V0IGlzIGppbnhlZCB3aXRoICh0aGUgc21hbGxlciBpY29uIG9uIHRoZSBjaGFyYWN0ZXIgc2hlZXQpLiBJZiB0aGVcbiAgICAgKiB0cmljayBzdGF0ZSBpcyB0cnVlIHRoZW4gdGhhdCBjaGFyYWN0ZXIgaGFzIGJlZW4gc2VsZWN0ZWQgZm9yIHRoZSBnYW1lLlxuICAgICAqIElmIHRoZSB0cmljayBhbmQgdGFyZ2V0IHN0YXRlcyBhcmUgYm90aCBhY3RpdmUsIHRoZSBqaW54IHdpbGwgYmVcbiAgICAgKiBhY3RpdmF0ZWQuIE9wdGlvbmFsbHkgdGhlIHRyaWNrJ3Mgc3RhdGUgY2FuIGJlIGZvcmNlZCB3aXRoIHRoZSBzYW1lIGxvZ2ljXG4gICAgICogYXMge0BsaW5rIEppbngjdG9nZ2xlU3RhdGV9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZm9yY2VTdGF0ZV1cbiAgICAgKiAgICAgICAgVGhlIG9wdGlvbmFsIHN0YXRlIHRvIGZvcmNlLlxuICAgICAqL1xuICAgIHRvZ2dsZVRyaWNrKGZvcmNlU3RhdGUpIHtcblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVN0YXRlKFwidHJpY2tcIiwgZm9yY2VTdGF0ZSlcbiAgICAgICAgICAgICYmIHRoaXMuc3RhdGUudGFyZ2V0XG4gICAgICAgICkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVTdGF0ZShcImFjdGl2ZVwiLCBmYWxzZSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICogVG9nZ2xlcyB0aGUgdGFyZ2V0IHN0YXRlLiBUaGUgamlueCdzIHRhcmdldCBpcyB0aGUgY2hhcmFjdGVyIHRoYXQgdGhlXG4gICAgKiB0YXJnZXQgaGFzIHRoZSBqaW54ICh0aGUgbGFyZ2VyIGljb24gb24gdGhlIGNoYXJhY3RlciBzaGVldCkuIElmIHRoZVxuICAgICogdGFyZ2V0IHN0YXRlIGlzIHRydWUgdGhlbiB0aGF0IGNoYXJhY3RlciBoYXMgYmVlbiBzZWxlY3RlZCBmb3IgdGhlIGdhbWUuXG4gICAgKiBJZiB0aGUgdHJpY2sgYW5kIHRhcmdldCBzdGF0ZXMgYXJlIGJvdGggYWN0aXZlLCB0aGUgamlueCB3aWxsIGJlXG4gICAgKiBhY3RpdmF0ZWQuIE9wdGlvbmFsbHkgdGhlIHRhcmdldCdzIHN0YXRlIGNhbiBiZSBmb3JjZWQgd2l0aCB0aGUgc2FtZSBsb2dpY1xuICAgICogYXMge0BsaW5rIEppbngjdG9nZ2xlU3RhdGV9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZm9yY2VTdGF0ZV1cbiAgICAgKiAgICAgICAgVGhlIG9wdGlvbmFsIHN0YXRlIHRvIGZvcmNlLlxuICAgICAqL1xuICAgIHRvZ2dsZVRhcmdldChmb3JjZVN0YXRlKSB7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgdGhpcy50b2dnbGVTdGF0ZShcInRhcmdldFwiLCBmb3JjZVN0YXRlKVxuICAgICAgICAgICAgJiYgdGhpcy5zdGF0ZS50cmlja1xuICAgICAgICApIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGUoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudG9nZ2xlU3RhdGUoXCJhY3RpdmVcIiwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHBvc2VzIHdoZXRoZXIgb3Igbm90IHRoaXMgamlueCBpcyBhY3RpdmUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqICAgICAgICAgdHJ1ZSBpZiB0aGUgamlueCBpcyBhY3RpdmUsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBpc0FjdGl2ZSgpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy50cmljaykgJiYgdGhpcy5zdGF0ZS5yZWFkeSAmJiB0aGlzLnN0YXRlLmFjdGl2ZTtcbiAgICAgICAgLy8gcmV0dXJuIHRoaXMuaXNSZWFkeSgpICYmIHRoaXMuc3RhdGUudHJpY2sgJiYgdGhpcy5zdGF0ZS50YXJnZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiB7QGxpbmsgSmlueCN0cmlja30gbWF0Y2hlcyB0aGUgZ2l2ZW4gY2hhcmFjdGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7Q2hhcmFjdGVyVG9rZW59IGNoYXJhY3RlclxuICAgICAqICAgICAgICAgQ2hhcmFjdGVyIHRvIHRlc3QgZm9yLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICAgICAgICB0cnVlIGlmIHRoZSBjaGFyYWN0ZXIgbWF0Y2hlcywgZmFsc2UgaWYgaXQgZG9lc24ndC5cbiAgICAgKi9cbiAgICBtYXRjaGVzKGNoYXJhY3Rlcikge1xuICAgICAgICByZXR1cm4gQm9vbGVhbih0aGlzLnRyaWNrKSAmJiB0aGlzLnRyaWNrLm1hdGNoZXMoY2hhcmFjdGVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHBvc2VzIHtAbGluayBKaW54I3RhcmdldH0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtDaGFyYWN0ZXJUb2tlbn1cbiAgICAgKiAgICAgICAgIFRoZSB0YXJnZXQgY2hhcmFjdGVyIGZvciB0aGUgamlueC5cbiAgICAgKi9cbiAgICBnZXRUYXJnZXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHBvc2VzIHtAbGluayBKaW54I3RyaWNrfS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0NoYXJhY3RlclRva2VufHVuZGVmaW5lZH1cbiAgICAgKiAgICAgICAgIFRoZSBjaGFyYWN0ZXIgdGhhdCB0aGUgc291cmNlIGNoYXJhY3RlciBpcyBqaW54ZWQgd2l0aCwgaWYgd2VcbiAgICAgKiAgICAgICAgIGtub3cgaXQuXG4gICAgICovXG4gICAgZ2V0VHJpY2soKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRyaWNrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMge0BsaW5rIEppbngjcmVhc29ufVxuICAgICAqXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqICAgICAgICAgVGhlIHJlYXNvbiBmb3IgdGhlIGppbnguXG4gICAgICovXG4gICAgZ2V0UmVhc29uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFzb247XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlcyB7QGxpbmsgSmlueCNpc0hvbWVicmV3fVxuICAgICAqXG4gICAgICogQHJldHVybnMge0Jvb2xlYW59XG4gICAgICogICAgICAgICAgdHJ1ZSBpZiB0aGUgSmlueCBpcyBob21lYnJldywgZmFsc2UgaWYgaXQncyBub3QuXG4gICAgICovXG4gICAgZ2V0SXNIb21lYnJldygpIHtcbiAgICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5pc0hvbWVicmV3KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHdoZXRoZXIgb3Igbm90IHRoaXMgSmlueCBpcyBmcm9tIGEgaG9tZWJyZXcgcm9sZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaXNIb21lYnJld1xuICAgICAqICAgICAgICB0cnVlIGlmIHRoZSBKaW54IGNvbWVzIGZyb20gYSBob21lYnJldyBzb3VyY2UsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBzZXRJc0hvbWVicmV3KGlzSG9tZWJyZXcpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBvciBub3QgdGhpcyBKaW54IGhhcyBjZW9tIGZyb20gYSBob21lYnJldyByb2xlIG9yIG5vdC5cbiAgICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlzSG9tZWJyZXcgPSBpc0hvbWVicmV3O1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdGVtcGxhdGUgdGhhdCBjYW4gYmUgdXNlZCB0byBkcmF3IHRoZSBqaW54LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZX0gdGVtcGxhdGVcbiAgICAgKiAgICAgICAgVGhlIHRlbXBsYXRlIHRoYXQgd2lsbCBkcmF3IHRoZSBqaW54LlxuICAgICAqL1xuICAgIHNldFRlbXBsYXRlKHRlbXBsYXRlKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0ZW1wbGF0ZSB0byBkcmF3IHRoZSBqaW54LlxuICAgICAgICAgKiBAdHlwZSB7VGVtcGxhdGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGRyYXdpbmcgdGhlIGppbnggY2hhcmFjdGVyIGljb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgKiAgICAgICAgSW1hZ2UgZWxlbWVudCB0byBtb2RpZnkuXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgIENoYXJhY3RlciB3aG9zZSBkYXRhIHNob3VsZCBiZSBzdWVkIHRvIHBvcHVsYXRlIHRoZSBpbWFnZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZHJhd0ltZyhlbGVtZW50LCBjaGFyYWN0ZXIpIHtcblxuICAgICAgICBpZiAoIWNoYXJhY3Rlcikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5zcmMgPSBjaGFyYWN0ZXIuZ2V0SW1hZ2UoKTtcbiAgICAgICAgZWxlbWVudC5hbHQgPSBjaGFyYWN0ZXIuZ2V0TmFtZSgpO1xuICAgICAgICBlbGVtZW50LnRpdGxlID0gY2hhcmFjdGVyLmdldE5hbWUoKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYW4gSUQgZm9yIHRoZSBqaW54LlxuICAgICAqXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqICAgICAgICAgQW4gSUQgZm9yIHRoZSBqaW54LlxuICAgICAqL1xuICAgIGdldElkKCkge1xuICAgICAgICByZXR1cm4gYGppbngtLSR7dGhpcy50YXJnZXQuZ2V0SWQoKX0tJHt0aGlzLnRyaWNrPy5nZXRJZCgpIHx8ICdfdW5rbm93bl8nfWA7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIGppbnguXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICAgICAqICAgICAgICAgVGhlIGppbnggbWFya3VwLlxuICAgICAqL1xuICAgIGRyYXcoKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgdGFyZ2V0LFxuICAgICAgICAgICAgdHJpY2ssXG4gICAgICAgICAgICByZWFzb24sXG4gICAgICAgICAgICB0ZW1wbGF0ZSxcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgICAgICAgICAgZHJhd0ltZ1xuICAgICAgICAgICAgfVxuICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICAvLyBpZiAoIXRlbXBsYXRlKSB7XG4gICAgICAgIC8vICAgICB0aHJvdyBuZXcgRXJyb3IoXCJKaW54IHRlbXBsYXRlIGhhcyBub3QgYmVlbiBzZXQuXCIpO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgcmV0dXJuIHRlbXBsYXRlLmRyYXcoe1xuICAgICAgICAgICAgXCIuanMtLWppbngtdGFibGUtLWppbnhcIjogKGVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmlkID0gdGhpcy5nZXRJZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiLmpzLS1qaW54LXRhYmxlLS10YXJnZXRcIihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZHJhd0ltZyhlbGVtZW50LCB0YXJnZXQpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiLmpzLS1qaW54LXRhYmxlLS10YXJnZXQtbmFtZVwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdGFyZ2V0LmdldE5hbWUoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIi5qcy0tamlueC10YWJsZS0tdHJpY2tcIihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZHJhd0ltZyhlbGVtZW50LCB0cmljayk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIuanMtLWppbngtdGFibGUtLXRyaWNrLW5hbWVcIihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC50ZXh0Q29udGVudCA9IHRyaWNrPy5nZXROYW1lKCkgfHwgJyc7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIuanMtLWppbngtdGFibGUtLXJlYXNvblwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gcmVhc29uO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH1cblxufVxuIiwiaW1wb3J0IFRlbXBsYXRlIGZyb20gXCIuL1RlbXBsYXRlLmpzXCI7XG5pbXBvcnQge1xuICAgIExBTkdVQUdFXG59IGZyb20gXCIuLi9jb25zdGFudHMvbGFuZ3VhZ2UuanNcIjtcblxuLyoqXG4gKiBLZWVwcyB0cmFjayBvZiB0aGUgcGxheWVyIG5hbWVzLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBOYW1lcyB7XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdmVyc2lvbiBvZiB7QGxpbmsgTmFtZXN9LiBUaGUgaW5zdGFuY2UgaXMgY2FjaGVkIGFuZCBzdG9yZWQgc29cbiAgICAgKiB0aGF0IGl0IGNhbiBiZSByZXR1cm5lZCBlYWNoIHRpbWUgdGhpcyBmdW5jdGlvbiBpcyBjYWxsZWQgaW5zdGVhZCBvZlxuICAgICAqIGNyZWF0aW5nIGEgbmV3IG9iamVjdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge05hbWVzfVxuICAgICAqICAgICAgICAgSW5zdGFuY2Ugb2Yge0BsaW5rIE5hbWVzfS5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKCkge1xuXG4gICAgICAgIGlmICghdGhpcy5pbnN0YW5jZSkge1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEFuIGluc3RhbmNlIG9mIHtAbGluayBOYW1lc30gdGhhdCBjYW4gYmUgcmV0dXJuZWQgZWFjaCB0aW1lXG4gICAgICAgICAgICAgKiBpbnN0ZWFkIG9mIGJlaW5nIHJlLWNyZWF0ZWQuXG4gICAgICAgICAgICAgKiBAdHlwZSB7dGhpc31cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyB0aGlzKCk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyB0aGUgbmFtZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgY29sbGVjdGlvbiBvZiB0aGUgbmFtZXMgdGhhdCBoYXZlIGJlZW4gc2F2ZWQuIFRoZSBuYW1lcyBhcmUgYWx3YXlzXG4gICAgICAgICAqIHN0b3JlZCBpbiBhbHBoYWJldGljYWwgb3JkZXIsIGJhc2VkIG9uIHRoZSBjdXJyZW50IGxvY2FsZS5cbiAgICAgICAgICogQHR5cGUge0FycmF5LjxTdHJpbmc+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5uYW1lcyA9IFtdO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB7QGxpbmsgTmFtZXMjdGVtcGxhdGV9LiBUaGUgY3VycmVudCBpbnN0YW5jZSBpcyByZXR1cm5lZCB0byBhbGxvd1xuICAgICAqIGZvciBjaGFpbmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VGVtcGxhdGV9IHRlbXBsYXRlXG4gICAgICogICAgICAgIFRoZSB0ZW1wbGF0ZSB0aGF0IHdpbGwgYmUgdXNlZCB0byBwb3B1bGF0ZSBkYXRhbGlzdHMuXG4gICAgICovXG4gICAgc2V0VGVtcGxhdGUodGVtcGxhdGUpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRlbXBsYXRlIHRoYXQncyB1c2VkIHRvIHBvcHVsYXRlIGRhdGFsaXN0cy5cbiAgICAgICAgICogQHR5cGUge1RlbXBsYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXG4gICAgICAgIHJldHVybiB0aGlzO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB7QGxpbmsgTmFtZXMjb2JzZXJ2ZXJ9LiBUaGUgY3VycmVudCBpbnN0YW5jZSBpcyByZXR1cm5lZCB0byBhbGxvd1xuICAgICAqIGZvciBjaGFpbmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JzZXJ2ZXJ9IG9ic2VydmVyXG4gICAgICogICAgICAgIE9ic2VydmVyIHRoYXQgd2lsbCB0cmlnZ2VyIGV2ZW50cyBhdCBrZXkgbW9tZW50cy5cbiAgICAgKi9cbiAgICBzZXRPYnNlcnZlcihvYnNlcnZlcikge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBPYnNlcnZlciB0aGF0IHdpbGwgdHJpZ2dlciBldmVudHMgYXQga2V5IG1vbWVudHMuXG4gICAgICAgICAqIEB0eXBlIHtPYnNlcnZlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcblxuICAgICAgICByZXR1cm4gdGhpcztcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuYW1lIHRvIHtAbGluayBOYW1lcyNuYW1lc30gYnV0IG9ubHkgaWYgdGhlIG5hbWUgaXNuJ3QgYWxyZWFkeSBpblxuICAgICAqIHRoYXQgbGlzdC4gSWYgdGhlIGxpc3QgY2hhbmdlcyB0aGVuIGFuIGV2ZW50IGlzIHRyaWdnZXJlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gbmFtZVxuICAgICAqICAgICAgICAgTmFtZSB0byBhZGQuXG4gICAgICovXG4gICAgYWRkKG5hbWUpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBuYW1lcyxcbiAgICAgICAgICAgIG9ic2VydmVyXG4gICAgICAgIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBsZW5ndGhcbiAgICAgICAgfSA9IG5hbWVzO1xuXG4gICAgICAgIGlmIChuYW1lICYmICFuYW1lcy5pbmNsdWRlcyhuYW1lKSkge1xuXG4gICAgICAgICAgICBuYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgICAgICAgdGhpcy5hbHBoYWJldGlzZSgpO1xuICAgICAgICAgICAgb2JzZXJ2ZXIudHJpZ2dlcihcIm5hbWVzLWFkZGVkXCIsIHsgbmFtZSwgbmFtZXM6IFsuLi5uYW1lc10gfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU29ydHMge0BsaW5rIE5hbWVzI25hbWVzfSBhbHBoYWJldGljYWxseSBiYXNlZCBvbiB0aGUgY3VycmVudCBsYW5ndWFnZS5cbiAgICAgKiBAcmV0dXJuIHtbdHlwZV19IFtkZXNjcmlwdGlvbl1cbiAgICAgKi9cbiAgICBhbHBoYWJldGlzZSgpIHtcbiAgICAgICAgdGhpcy5uYW1lcy5zb3J0KChhLCBiKSA9PiBhLmxvY2FsZUNvbXBhcmUoYiwgTEFOR1VBR0UpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBuYW1lcyBmcm9tIHtAbGluayBOYW1lcyNuYW1lc30uXG4gICAgICovXG4gICAgY2xlYXIoKSB7XG5cbiAgICAgICAgdGhpcy5uYW1lcy5sZW5ndGggPSAwO1xuICAgICAgICBvYnNlcnZlci50cmlnZ2VyKFwibmFtZXMtY2xlYXJlZFwiKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIGZ1bmN0aW9uIHRoYXQgc2V0cyB0aGUgdmFsdWUgb2YgdGhlIGdpdmVuIGVsZW1lbnQgdG8gdGhlIGdpdmVuXG4gICAgICogY29uc3RhbnQuIEFzIGEgc2VwYXJhdGUgZnVuY3Rpb24sIGl0IGRvZXNuJ3QgbmVlZCB0byBiZSByZS1jcmVhdGVkIGVhY2hcbiAgICAgKiB0aW1lIHRoYXQge0BsaW5rIE5hbWVzI2RyYXdMaXN0fSBpcyBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgKiAgICAgICAgRWxlbWVudCB3aG9zZSB2YWx1ZSBzaG91bGQgYmUgc2V0LlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XG4gICAgICogICAgICAgIENvbnRlbnQgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKi9cbiAgICAvLyBzdGF0aWMgc2V0VmFsdWUoZWxlbWVudCwgY29udGVudCkge1xuICAgIC8vICAgICBlbGVtZW50LnZhbHVlID0gY29udGVudDtcbiAgICAvLyB9XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyBhIGxpc3Qgb2YgZWxlbWVudHMgZm9yIGVhY2ggZW50cnkgaW4ge0BsaW5rIE5hbWVzI25hbWVzfS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5LjxFbGVtZW50Pn1cbiAgICAgKiAgICAgICAgIEVsZW1lbnQgZm9yIGVhY2ggb2YgdGhlIG5hbWVzLlxuICAgICAqIEB0aHJvd3Mge0Vycm9yfVxuICAgICAqICAgICAgICAgVGhlIHRlbXBsYXRlIHtAbGluayBOYW1lcyN0ZW1wbGF0ZX0gbXVzdCBiZSBzZXQuXG4gICAgICovXG4gICAgZHJhd0xpc3QoKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY29uc3RydWN0b3IsXG4gICAgICAgICAgICBuYW1lcyxcbiAgICAgICAgICAgIHRlbXBsYXRlXG4gICAgICAgIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmICghdGVtcGxhdGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCBkcmF3IGEgbGlzdCBiZWNhdXNlIHRoZSB0ZW1wbGF0ZSBpcyBub3Qgc2V0XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG5hbWVzLm1hcCgobmFtZSkgPT4gdGVtcGxhdGUuZHJhdyh7XG4gICAgICAgICAgICBcIi5qcy0tcGxheWVyLW5hbWUtLW9wdGlvblwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnZhbHVlID0gbmFtZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQmluZHMgYSBoYW5kbGVyIHRvIGFuIGV2ZW50IHRoYXQncyB0cmlnZ2VyZWQgb24ge0BsaW5rIE5hbWVzI29ic2VydmVyfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVcbiAgICAgKiAgICAgICAgTmFtZSBvZiB0aGUgZXZlbnQgdG8gbGlzdGVuIGZvci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAgICogICAgICAgIEhhbmRsZXIgdG8gZXhlY3V0ZSB3aGVuIHRoZSBldmVudCBpcyBoZWFyZC5cbiAgICAgKi9cbiAgICBvbihldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5vbihldmVudE5hbWUsIGhhbmRsZXIpO1xuICAgIH1cblxufVxuIiwiaW1wb3J0IENoYXJhY3RlclRva2VuIGZyb20gXCIuL0NoYXJhY3RlclRva2VuXCI7XG5pbXBvcnQge1xuICAgIGVtcHR5XG59IGZyb20gXCIuLi91dGlscy9lbGVtZW50cy5qc1wiO1xuXG4vKipcbiAqIEEgY2xhc3MgdGhhdCBtYW5hZ2VzIHRoZSBuaWdodCBvcmRlciBsaXN0cy5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTmlnaHRPcmRlciB7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBvciBub3QgdG8gc2hvdyB0aGUgZGVhZCBjaGFyYWN0ZXJzLlxuICAgICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvd0RlYWQgPSBmYWxzZTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hldGhlciBvciBub3QgdG8gc2hvdyB0aGUgY2hhcmFjdGVycyB0aGF0IGFyZSBjdXJyZW50IG5vdCBpbiBwbGF5LlxuICAgICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuc2hvd05vdEluUGxheSA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZGF0YSB0aGF0IHdpbGwgZGlzcGxheSB0aGUgbmlnaHQgb3JkZXIgbGlzdHMuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheS48T2JqZWN0Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZGF0YSA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBIb2xkZXJzIGZvciB0aGUgbmlnaHQgb3JkZXIgZWxlbWVudHMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhvbGRlcnMgPSB7XG4gICAgICAgICAgICBmaXJzdDogbnVsbCxcbiAgICAgICAgICAgIG90aGVyOiBudWxsLFxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBob2xkZXJzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBob2xkZXJzXG4gICAgICovXG4gICAgc2V0SG9sZGVycyhob2xkZXJzKSB7XG4gICAgICAgIHRoaXMuaG9sZGVycyA9IGhvbGRlcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBsaXN0cyBzbyB0aGF0IHRoZSBlbGVtZW50cyBoYXZlIGJlZW4gcmVtb3ZlZCBhbmQgdGhlIGRhdGFcbiAgICAgKiBjbGVhcmVkLlxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgIH0gPSB0aGlzO1xuXG4gICAgICAgIGRhdGEuZm9yRWFjaCgoeyBmaXJzdCwgb3RoZXIgfSkgPT4ge1xuXG4gICAgICAgICAgICBpZiAoZmlyc3QpIHtcblxuICAgICAgICAgICAgICAgIGZpcnN0LnBsYWNlaG9sZGVyLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGZpcnN0LmVsZW1lbnQucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKG90aGVyKSB7XG5cbiAgICAgICAgICAgICAgICBvdGhlci5wbGFjZWhvbGRlci5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBvdGhlci5lbGVtZW50LnJlbW92ZSgpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgZGF0YS5sZW5ndGggPSAwO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB7QGxpbmsgTmlnaHRPcmRlciNzaG93RGVhZH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3dEZWFkXG4gICAgICogICAgICAgIHRydWUgdG8gc2hvdyB0aGUgZGVhZCBjaGFyYWN0ZXJzLCBmYWxzZSB0byBoaWRlIHRoZW0uXG4gICAgICovXG4gICAgc2V0U2hvd0RlYWQoc2hvd0RlYWQpIHtcblxuICAgICAgICB0aGlzLnNob3dEZWFkID0gc2hvd0RlYWQ7XG4gICAgICAgIHRoaXMuZHJhd0FsbENoYXJhY3RlcnMoKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMge0BsaW5rIE5pZ2h0T3JkZXIjc2hvd05vdEluUGxheX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3dOb3RJblBsYXlcbiAgICAgKiAgICAgICAgdHJ1ZSB0byBzaG93IHRoZSBub3QtaW4tcGxheSBjaGFyYWN0ZXJzLCBmYWxzZSB0byBoaWRlIHRoZW0uXG4gICAgICovXG4gICAgc2V0U2hvd05vdEluUGxheShzaG93Tm90SW5QbGF5KSB7XG5cbiAgICAgICAgdGhpcy5zaG93Tm90SW5QbGF5ID0gc2hvd05vdEluUGxheTtcbiAgICAgICAgdGhpcy5kcmF3QWxsQ2hhcmFjdGVycygpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgY2hhcmFjdGVycyB0aGF0IGFyZSBpbiB0aGUgbGlzdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5LjxDaGFyYWN0ZXJUb2tlbj59IGNoYXJhY3RlcnNcbiAgICAgKiAgICAgICAgQWxsIGNoYXJhY3RlcnMgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldENoYXJhY3RlcnMoY2hhcmFjdGVycykge1xuICAgICAgICBjaGFyYWN0ZXJzLmZvckVhY2goKGNoYXJhY3RlcikgPT4gdGhpcy5zZXRDaGFyYWN0ZXIoY2hhcmFjdGVyKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhbiBpbmRpdmlkdWFsIGNoYXJhY3RlciwgYWRkaW5nIGl0IHRvIHRoZSBsaXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgIFRoZSBjaGFyYWN0ZXIgdG8gc2V0LlxuICAgICAqL1xuICAgIHNldENoYXJhY3RlcihjaGFyYWN0ZXIpIHtcblxuICAgICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICAgICAgY2hhcmFjdGVyLFxuICAgICAgICAgICAgYWxpdmU6IDAsXG4gICAgICAgICAgICBpblBsYXk6IDAsXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGZpcnN0TmlnaHQgPSBjaGFyYWN0ZXIuZ2V0Rmlyc3ROaWdodCgpO1xuICAgICAgICBjb25zdCBvdGhlck5pZ2h0ID0gY2hhcmFjdGVyLmdldE90aGVyTmlnaHQoKTtcbiAgICAgICAgY29uc3QgaWQgPSBjaGFyYWN0ZXIuZ2V0SWQoKTtcblxuICAgICAgICBpZiAoZmlyc3ROaWdodCkge1xuXG4gICAgICAgICAgICBkYXRhLmZpcnN0ID0ge1xuICAgICAgICAgICAgICAgIG9yZGVyOiBmaXJzdE5pZ2h0LFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBkb2N1bWVudC5jcmVhdGVDb21tZW50KGlkKSxcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBjaGFyYWN0ZXIuZHJhd05pZ2h0T3JkZXIodHJ1ZSkuZmlyc3RFbGVtZW50Q2hpbGQsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3RoZXJOaWdodCkge1xuXG4gICAgICAgICAgICBkYXRhLm90aGVyID0ge1xuICAgICAgICAgICAgICAgIG9yZGVyOiBvdGhlck5pZ2h0LFxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBkb2N1bWVudC5jcmVhdGVDb21tZW50KGlkKSxcbiAgICAgICAgICAgICAgICBlbGVtZW50OiBjaGFyYWN0ZXIuZHJhd05pZ2h0T3JkZXIoZmFsc2UpLmZpcnN0RWxlbWVudENoaWxkLFxuICAgICAgICAgICAgfTtcblxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kYXRhLnB1c2goZGF0YSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQbGFjZSB0aGUgY2hhcmFjdGVycyBlbGVtZW50L3BsYWNlaG9sZGVyIGluIHRoZSBjb3JyZWN0IHBsYWNlIGluIHRoZVxuICAgICAqIGFwcHJvcHJpYXRlIG5pZ2h0IG9yZGVyIGxpc3QuXG4gICAgICogVGhpcyBpcyBvbmx5IG5lZWRlZCBhZnRlciBhZGRpbmcgYSBjaGFyYWN0ZXIgdXNpbmdcbiAgICAgKiB7QGxpbmsgTmlnaHRPcmRlciNzZXRDaGFyYWN0ZXJ9IG1hbnVhbGx5IC0gdGhlIG9yZGVyIGZvciBhbGwgcmVndWxhclxuICAgICAqIGNoYXJhY3RlcnMgaW4gdGhlIHNjcmlwdCBzaG91bGQgYmUgY29ycmVjdGx5IHNldCBpblxuICAgICAqIHtAbGluayBOaWdodE9yZGVyI2RyYXdOaWdodE9yZGVyfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Q2hhcmFjdGVyVG9rZW59IGNoYXJhY3RlclxuICAgICAqICAgICAgICBUaGUgY2hhcmFjdGVyIHRvIGNvcnJlY3RseSBwbGFjZS5cbiAgICAgKi9cbiAgICBwbGFjZUluT3JkZXIoY2hhcmFjdGVyKSB7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmdldERhdGFJbmRleChjaGFyYWN0ZXIpO1xuXG4gICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIFtcbiAgICAgICAgICAgIFtcImZpcnN0XCIsIFwiZ2V0Rmlyc3ROaWdodFwiXSxcbiAgICAgICAgICAgIFtcIm90aGVyXCIsIFwiZ2V0T3RoZXJOaWdodFwiXVxuICAgICAgICBdLmZvckVhY2goKFtwcm9wZXJ0eSwgbWV0aG9kXSkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5kYXRhW2luZGV4XVtwcm9wZXJ0eV07XG5cbiAgICAgICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgbmV4dCA9IHRoaXMuZGF0YVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGRhdHVtKSA9PiBkYXR1bVtwcm9wZXJ0eV0pXG4gICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGFbcHJvcGVydHldLm9yZGVyIC0gYltwcm9wZXJ0eV0ub3JkZXIpXG4gICAgICAgICAgICAgICAgLmZpbmQoKHsgb3JkZXIgfSkgPT4gb3JkZXIgPiBjaGFyYWN0ZXJbbWV0aG9kXSgpKTtcbiAgICAgICAgICAgIGNvbnN0IGluc2VydGFibGUgPSAoXG4gICAgICAgICAgICAgICAgdGhpcy5zaG91bGRTaG93KGRhdGEpXG4gICAgICAgICAgICAgICAgPyBkYXRhLmVsZW1lbnRcbiAgICAgICAgICAgICAgICA6IGRhdGEucGxhY2Vob2xkZXJcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIGlmIChuZXh0KSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmhvbGRlcnNbcHJvcGVydHldLmluc2VydEJlZm9yZShcbiAgICAgICAgICAgICAgICAgICAgaW5zZXJ0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgKFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dC5lbGVtZW50LnBhcmVudEVsZW1lbnRcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbmV4dC5lbGVtZW50XG4gICAgICAgICAgICAgICAgICAgICAgICA6IG5leHQucGxhY2Vob2xkZXJcbiAgICAgICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ob2xkZXJzW3Byb3BlcnR5XS5hcHBlbmQoaW5zZXJ0YWJsZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBnaXZlbiBjaGFyYWN0ZXIgZnJvbSB0aGUgZGF0YSBhbmQgcmVtb3ZlcyBhbGwgaXRzIGVsZW1lbnRzXG4gICAgICogZnJvbSB0aGUgbmlnaHQgb3JkZXIgbGlzdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NoYXJhY3RlclRva2VufSBjaGFyYWN0ZXJcbiAgICAgKiAgICAgICAgVGhlIGNoYXJhY3RlciB0byByZW1vdmUuXG4gICAgICovXG4gICAgdW5zZXRDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmdldERhdGFJbmRleChjaGFyYWN0ZXIpO1xuXG4gICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIFtcImZpcnN0XCIsIFwib3RoZXJcIl0uZm9yRWFjaCgocHJvcGVydHkpID0+IHtcblxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZGF0YVtpbmRleF1bcHJvcGVydHldO1xuXG4gICAgICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGRhdGEucGxhY2Vob2xkZXIucmVtb3ZlKCk7XG4gICAgICAgICAgICBkYXRhLmVsZW1lbnQucmVtb3ZlKCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5kYXRhLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgbmlnaHQgb3JkZXIgbGlzdCBmb3IgZWl0aGVyIHRoZSBmaXJzdCBuaWdodCBvciB0aGUgb3RoZXJcbiAgICAgKiBuaWdodHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBpc0ZpcnN0TmlnaHRcbiAgICAgKiAgICAgICAgIHRydWUgdG8gZHJhdyB0aGUgZmlyc3QgbmlnaHQsIGZhbHNlIHRvIGRyYXcgdGhlIG90aGVyIG5pZ2h0cy5cbiAgICAgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICAgICAqICAgICAgICAgQSBkb2N1bWVudCBmcmFnbWVudCB3aXRoIHRoZSBuaWdodCBvcmRlciBsaXN0LlxuICAgICAqL1xuICAgIGRyYXdOaWdodE9yZGVyKGlzRmlyc3ROaWdodCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBwcm9wZXJ0eSA9IChcbiAgICAgICAgICAgIGlzRmlyc3ROaWdodFxuICAgICAgICAgICAgPyBcImZpcnN0XCJcbiAgICAgICAgICAgIDogXCJvdGhlclwiXG4gICAgICAgICk7XG5cbiAgICAgICAgcmV0dXJuIGRhdGFcbiAgICAgICAgICAgIC5maWx0ZXIoKGRhdHVtKSA9PiBkYXR1bVtwcm9wZXJ0eV0pXG4gICAgICAgICAgICAuc29ydCgoYSwgYikgPT4gYVtwcm9wZXJ0eV0ub3JkZXIgLSBiW3Byb3BlcnR5XS5vcmRlcilcbiAgICAgICAgICAgIC5yZWR1Y2UoKGZyYWdtZW50LCBkYXRhKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyLFxuICAgICAgICAgICAgICAgIH0gPSBkYXRhW3Byb3BlcnR5XTtcblxuICAgICAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZChcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG91bGRTaG93KGRhdGEpXG4gICAgICAgICAgICAgICAgICAgID8gZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICA6IHBsYWNlaG9sZGVyXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBmcmFnbWVudDtcblxuICAgICAgICAgICAgfSwgZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtcblxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHJhd3MgYWxsIG5pZ2h0IG9yZGVyIGVsZW1lbnRzLlxuICAgICAqL1xuICAgIGRyYXdBbGxOaWdodE9yZGVycygpIHtcblxuICAgICAgICBPYmplY3QuZW50cmllcyh0aGlzLmhvbGRlcnMpLmZvckVhY2goKFtuYW1lLCBlbGVtZW50XSkgPT4ge1xuXG4gICAgICAgICAgICBpZiAoIWVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGVtcHR5KGVsZW1lbnQpLmFwcGVuZCh0aGlzLmRyYXdOaWdodE9yZGVyKG5hbWUgPT09IFwiZmlyc3RcIikpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBkcmF3aW5nIG9yIHVwZGF0aW5nIGEgY2hhcmFjdGVyJ3MgZW50cnkgaW4gdGhlIG5pZ2h0XG4gICAgICogb3JkZXIgbGlzdHMgYmFzZWQgb24gdGhlIGNoYXJhY3RlciBpdHNlbGYuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NoYXJhY3RlclRva2VufSBjaGFyYWN0ZXJcbiAgICAgKiAgICAgICAgQ2hhcmFjdGVyIHdob3NlIGVudHJ5IHNob3VsZCBiZSBkcmF3biBvciB1cGRhdGVkLlxuICAgICAqL1xuICAgIGRyYXdDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XG4gICAgICAgIHRoaXMuZHJhd0NoYXJhY3RlckJ5RGF0YSh0aGlzLmdldERhdGEoY2hhcmFjdGVyKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHJhd3Mgb3IgdXBkYXRlcyB0aGUgZW50cnkgaW4gdGhlIG5pZ2h0IG9yZGVyIGxpc3RzIGZvciB0aGUgY2hhcmFjdGVyXG4gICAgICogd2l0aCB0aGUgZ2l2ZW4gZGF0YS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICogICAgICAgIERhdGEgd2hvc2UgY2hhcmFjdGVyIHNob3VsZCBoYXZlIHRoZWlyIG5pZ2h0IG9yZGVyIGxpc3RzIHVwZGF0ZWQuXG4gICAgICovXG4gICAgZHJhd0NoYXJhY3RlckJ5RGF0YShkYXRhKSB7XG5cbiAgICAgICAgY29uc3Qgc2hvdWxkU2hvdyA9IHRoaXMuc2hvdWxkU2hvdyhkYXRhKTtcblxuICAgICAgICBbXCJmaXJzdFwiLCBcIm90aGVyXCJdLmZvckVhY2goKHByb3BlcnR5KSA9PiB7XG5cbiAgICAgICAgICAgIGlmICghZGF0YVtwcm9wZXJ0eV0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcixcbiAgICAgICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgfSA9IGRhdGFbcHJvcGVydHldO1xuXG4gICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoXCJpcy1pbi1wbGF5XCIsIHRoaXMuaXNJblBsYXkoZGF0YSkpO1xuICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtZGVhZFwiLCB0aGlzLmlzRGVhZChkYXRhKSk7XG5cbiAgICAgICAgICAgIGlmIChzaG91bGRTaG93ICYmIHBsYWNlaG9sZGVyLnBhcmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlci5yZXBsYWNlV2l0aChlbGVtZW50KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXNob3VsZFNob3cgJiYgZWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5yZXBsYWNlV2l0aChwbGFjZWhvbGRlcik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgZHJhd2luZyBvciB1cGRhdGluZyBhbGwgZW50cmllcyBpbiB0aGUgbmlnaHQgb3JkZXJcbiAgICAgKiBsaXN0cy5cbiAgICAgKi9cbiAgICBkcmF3QWxsQ2hhcmFjdGVycygpIHtcbiAgICAgICAgdGhpcy5kYXRhLmZvckVhY2goKGRhdGEpID0+IHRoaXMuZHJhd0NoYXJhY3RlckJ5RGF0YShkYXRhKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgZ2l2ZW4gZGF0YSByZXByZXNlbnRzIGEgY2hhcmFjdGVyIHRoYXQncyBmdWxseSBkZWFkXG4gICAgICogKGkuZS4gdGhlcmUgYXJlIG5vIGNoYXJhY3RlciB0b2tlbnMgZm9yIHRoaXMgY2hhcmFjdGVyIHRoYXQgYXJlIHN0aWxsXG4gICAgICogYWxpdmUpLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBkYXRhXG4gICAgICogICAgICAgICBEYXRhIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICAgICAgICB0cnVlIGlmIHRoZSBjaGFyYWN0ZXIgaXMgZnVsbHkgZGVhZCwgZmFsc2Ugb3RoZXJ3aXNlLlxuICAgICAqL1xuICAgIGlzRGVhZChkYXRhKSB7XG4gICAgICAgIHJldHVybiBkYXRhLmluUGxheSA+IDAgJiYgZGF0YS5hbGl2ZSA9PT0gMDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIHRoZSBnaXZlbiBkYXRhIGhhcyBhbnkgY2hhcmFjdGVycyBpbiBwbGF5LlxuICAgICAqXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBkYXRhXG4gICAgICogICAgICAgICBEYXRhIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICAgICAgICB0cnVlIGlmIGFueSBjaGFyYWN0ZXJzIGFyZSBpbiBwbGF5LCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaXNJblBsYXkoZGF0YSkge1xuICAgICAgICByZXR1cm4gZGF0YS5pblBsYXkgPiAwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIGdpdmVuIGRhdGEgc3VnZ2VzdHMgdGhhdCB0aGUgY2hhcmFjdGVyJ3MgZW50cnkgaW5cbiAgICAgKiB0aGUgbmlnaHQgb3JkZXIgbGlzdHMgc2hvdWxkIGJlIHNob3dpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGRhdGFcbiAgICAgKiAgICAgICAgIERhdGEgdG8gY2hlY2suXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiAgICAgICAgIHRydWUgaWYgdGhlIGVudHJpZXMgc2hvdWxkIGJlIHNob3dpbmcsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBzaG91bGRTaG93KGRhdGEpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBzaG93RGVhZCxcbiAgICAgICAgICAgIHNob3dOb3RJblBsYXksXG4gICAgICAgIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBpc0RlYWQgPSB0aGlzLmlzRGVhZChkYXRhKTtcbiAgICAgICAgY29uc3QgaXNJblBsYXkgPSB0aGlzLmlzSW5QbGF5KGRhdGEpO1xuXG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgICAoaXNJblBsYXkgJiYgIWlzRGVhZClcbiAgICAgICAgICAgIHx8ICghaXNJblBsYXkgJiYgc2hvd05vdEluUGxheSlcbiAgICAgICAgICAgIHx8IChpc0RlYWQgJiYgc2hvd0RlYWQpXG4gICAgICAgICk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBpbmRleCBpbiB7QGxpbmsgTmlnaHRPcmRlciNkYXRhfSBmb3IgdGhlIGRhdGEgdGhhdCByZXByZXNlbnRzXG4gICAgICogdGhlIGdpdmVuIGNoYXJhY3Rlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0NoYXJhY3RlclRva2VufSBjaGFyYWN0ZXJcbiAgICAgKiAgICAgICAgIENoYXJhY3RlciB3aG9zZSBkYXRhJ3MgaW5kZXggc2hvdWxkIGJlIHJldHVybmVkLlxuICAgICAqIEByZXR1cm4ge051bWJlcn1cbiAgICAgKiAgICAgICAgIEluZGV4IG9mIHRoZSBjaGFyYWN0ZXIgd2l0aGluIHRoZSBkYXRhLlxuICAgICAqL1xuICAgIGdldERhdGFJbmRleChjaGFyYWN0ZXIpIHtcblxuICAgICAgICBjb25zdCBpZCA9IGNoYXJhY3Rlci5nZXRJZCgpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuZmluZEluZGV4KChkYXRhKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gZGF0YS5jaGFyYWN0ZXIuZ2V0SWQoKSA9PT0gaWQ7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBnZXR0aW5nIHRoZSBpdGVtIHdpdGhpbiB7QGxpbmsgTmlnaHRPcmRlciNkYXRhfSB0aGF0XG4gICAgICogcmVwcmVzZW50cyB0aGUgZ2l2ZW4gY2hhcmFjdGVyLiBJZiB0aGUgY2hhcmFjdGVyIGNhbm5vdCBiZSBmb3VuZCBhbiBlcnJvclxuICAgICAqIGlzIHRocm93bi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0NoYXJhY3RlclRva2VufSBjaGFyYWN0ZXJcbiAgICAgKiAgICAgICAgIENoYXJhY3RlciB3aG9zZSBkYXRhIHNob3VsZCBiZSByZXR1cm5lZC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBEYXRhIGZvciB0aGUgZ2l2ZW4gY2hhcmFjdGVyLlxuICAgICAqIEB0aHJvd3Mge1JlZmVyZW5jZUVycm9yfVxuICAgICAqICAgICAgICAgVGhlIGNoYXJhY3RlciBtdXN0IGV4aXN0IHdpdGhpbiB0aGUgZGF0YS5cbiAgICAgKi9cbiAgICBnZXREYXRhKGNoYXJhY3Rlcikge1xuXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5nZXREYXRhSW5kZXgoY2hhcmFjdGVyKTtcblxuICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG5cbiAgICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcbiAgICAgICAgICAgICAgICBgQ2Fubm90IGZpbmQgY2hhcmFjdGVyIFwiJHtjaGFyYWN0ZXIuZ2V0SWQoKX1cImBcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFbaW5kZXhdO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgZ2l2ZW4gY2hhcmFjdGVyIGV4aXN0cyB3aXRoaW4gdGhlIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgICBDaGFyYWN0ZXIgdG8gY2hlY2sgZm9yLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICAgICAgICB0cnVlIGlmIHRoZSBjaGFyYWN0ZXIgZXhpc3RzLCBmYWxzZSBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaGFzQ2hhcmFjdGVyKGNoYXJhY3Rlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXREYXRhSW5kZXgoY2hhcmFjdGVyKSA+IC0xO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMge0BsaW5rIE5pZ2h0T3JkZXIjZGF0YX0gZm9yIHRoZSBnaXZlbiBjaGFyYWN0ZXIgdG8gcmVnaXN0ZXIgdGhhdFxuICAgICAqIGl0IGhhcyBiZWVuIGFkZGVkIGluIHBsYXkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NoYXJhY3RlclRva2VufSBjaGFyYWN0ZXJcbiAgICAgKiAgICAgICAgQ2hhcmFjdGVyIHdob3NlIGRhdGEgc2hvdWxkIGJlIHVwZGF0ZWQuXG4gICAgICovXG4gICAgYWRkQ2hhcmFjdGVyKGNoYXJhY3Rlcikge1xuXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLmdldERhdGEoY2hhcmFjdGVyKTtcblxuICAgICAgICB0aGlzLmFkanVzdEluUGxheShkYXRhLCAxKTtcblxuICAgICAgICBpZiAoIWNoYXJhY3Rlci5nZXRJc0RlYWQoKSkge1xuICAgICAgICAgICAgdGhpcy5hZGp1c3RBbGl2ZShkYXRhLCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZHJhd0NoYXJhY3RlckJ5RGF0YShkYXRhKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMge0BsaW5rIE5pZ2h0T3JkZXIjZGF0YX0gZm9yIHRoZSBnaXZlbiBjaGFyYWN0ZXIgdG8gcmVnaXN0ZXIgdGhhdFxuICAgICAqIGl0IGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBwbGF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgIENoYXJhY3RlciB3aG9zZSBkYXRhIHNob3VsZCBiZSB1cGRhdGVkLlxuICAgICAqL1xuICAgIHJlbW92ZUNoYXJhY3RlcihjaGFyYWN0ZXIpIHtcblxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5nZXREYXRhKGNoYXJhY3Rlcik7XG5cbiAgICAgICAgaWYgKCFjaGFyYWN0ZXIuZ2V0SXNEZWFkKCkpIHtcbiAgICAgICAgICAgIHRoaXMuYWRqdXN0QWxpdmUoZGF0YSwgLTEpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZGp1c3RJblBsYXkoZGF0YSwgLTEpO1xuICAgICAgICB0aGlzLmRyYXdDaGFyYWN0ZXJCeURhdGEoZGF0YSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHtAbGluayBOaWdodE9yZGVyI2RhdGF9IGZvciB0aGUgZ2l2ZW4gY2hhcmFjdGVyIHRvIHJlZ2lzdGVyIHRoYXRcbiAgICAgKiB0aGUgY2hhcmFjdGVyIGhhcyBlaXRoZXIgZGllZCBvciBiZWVuIHJldml2ZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NoYXJhY3RlclRva2VufSBjaGFyYWN0ZXJcbiAgICAgKiAgICAgICAgQ2hhcmFjdGVyIHdob3NlIGRhdGEgc2hvdWxkIGJlIHVwZGF0ZWQuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBpc0RlYWRcbiAgICAgKiAgICAgICAgdHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIGlzIGRlYWQsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICB0b2dnbGVEZWFkKGNoYXJhY3RlciwgaXNEZWFkKSB7XG5cbiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuZ2V0RGF0YShjaGFyYWN0ZXIpO1xuXG4gICAgICAgIHRoaXMuYWRqdXN0QWxpdmUoZGF0YSwgKFxuICAgICAgICAgICAgaXNEZWFkXG4gICAgICAgICAgICA/IC0xXG4gICAgICAgICAgICA6IDFcbiAgICAgICAgKSk7XG4gICAgICAgIHRoaXMuZHJhd0NoYXJhY3RlckJ5RGF0YShkYXRhKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkanVzdHMgdGhlIGRhdGEncyBcImFsaXZlXCIgdmFsdWUgYmFzZWQgb24gdGhlIHF1YW50aXR5IGdpdmVuLiBUaGUgZmluYWxcbiAgICAgKiByZXN1bHQgaXMgbGltaXRlZCBzbyB0aGF0IGl0IGNhbm5vdCBleGNlZWQgdGhlIFwiaW5QbGF5XCIgdmFsdWUgYW5kIGNhbm5vdFxuICAgICAqIGRyb3AgYmVsb3cgMC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICogICAgICAgIERhdGEgdG8gdXBkYXRlLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSBxdWFudGl0eVxuICAgICAqICAgICAgICBBbW91bnQgdG8gdXBkYXRlIHRoZSBkYXRhIGJ5LiBJZiB0aGlzIHZhbHVlIGlzIG5lZ2F0aXZlIHRoZW4gdGhlXG4gICAgICogICAgICAgIHZhbHVlIHdpbGwgYmUgcmVkdWNlZC5cbiAgICAgKi9cbiAgICBhZGp1c3RBbGl2ZShkYXRhLCBxdWFudGl0eSkge1xuICAgICAgICBkYXRhLmFsaXZlID0gTWF0aC5taW4oZGF0YS5pblBsYXksIE1hdGgubWF4KGRhdGEuYWxpdmUgKyBxdWFudGl0eSwgMCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkanVzdHMgdGhlIGRhdGEncyBcImluUGxheVwiIHZhbHVlIGJhc2VkIG9uIHRoZSBxdWFudGl0eSBnaXZlbi4gVGhlIGZpbmFsXG4gICAgICogcmVzdWx0IGlzIGxpbWl0ZWQgc28gdGhhdCBpdCBjYW5ub3QgZHJvcCBiZWxvdyAwLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKiAgICAgICAgRGF0YSB0byB1cGRhdGUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHF1YW50aXR5XG4gICAgICogICAgICAgIEFtb3VudCB0byB1cGRhdGUgdGhlIGRhdGEgYnkuIElmIHRoaXMgdmFsdWUgaXMgbmVnYXRpdmUgdGhlbiB0aGVcbiAgICAgKiAgICAgICAgdmFsdWUgd2lsbCBiZSByZWR1Y2VkLlxuICAgICAqL1xuICAgIGFkanVzdEluUGxheShkYXRhLCBxdWFudGl0eSkge1xuICAgICAgICBkYXRhLmluUGxheSA9IE1hdGgubWF4KDAsIGRhdGEuaW5QbGF5ICsgcXVhbnRpdHkpO1xuICAgIH1cblxufVxuIiwiLyoqXG4gKiBMaXN0ZW5zIGZvciBhbmQgZGlzcGF0Y2hlcyBldmVudHMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE9ic2VydmVyIHtcblxuICAgIC8qKlxuICAgICAqIEEgY2FjaGUgb2YgYWxsIG9ic2VydmVycyBjcmVhdGVkIHVzaW5nIHtAbGluayBPYnNlcnZlci5jcmVhdGV9LlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgc3RhdGljIG9ic2VydmVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAvKipcbiAgICAgKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgY3JlYXRpbmcvZ2V0dGluZyBvYnNlcnZlcnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IG5hbWVcbiAgICAgKiAgICAgICAgIE5hbWUgb2YgdGhlIG9ic2VydmVyLlxuICAgICAqIEByZXR1cm4ge09ic2VydmVyfVxuICAgICAqICAgICAgICAgT2JzZXJ2ZXIgaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZShuYW1lKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgb2JzZXJ2ZXJzXG4gICAgICAgIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmICghb2JzZXJ2ZXJzW25hbWVdKSB7XG4gICAgICAgICAgICBvYnNlcnZlcnNbbmFtZV0gPSBuZXcgdGhpcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9ic2VydmVyc1tuYW1lXTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgdGhlIG9ic2VydmVyLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGR1bW15IGVsZW1lbnQgdGhhdCBoYXMgdGhlIGV2ZW50cyBib3VuZCB0byBpdC5cbiAgICAgICAgICogQHR5cGUge0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmR1bW15ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExpc3RlbnMgZm9yIGFuIGV2ZW50IGFuZCBiaW5kcyB0aGUgZ2l2ZW4gaGFuZGxlciB0byBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudE5hbWVcbiAgICAgKiAgICAgICAgTmFtZSBvZiB0aGUgZXZlbnQgdG8gbGlzdGVuIGZvci5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAgICogICAgICAgIEhhbmRsZXIgdG8gZXhlY3V0ZSB3aGVuIHRoZSBldmVudCBpcyBoZWFyZC5cbiAgICAgKi9cbiAgICBvbihldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICAgICAgdGhpcy5kdW1teS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGhhbmRsZXIgZnJvbSB0aGUgZ2l2ZW4gZXZlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnROYW1lXG4gICAgICogICAgICAgIE5hbWUgb2YgdGhlIGV2ZW50LlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICAgKiAgICAgICAgSGFuZGxlciB0byByZW1vdmUgZnJvbSB0aGUgZXZlbnQuXG4gICAgICovXG4gICAgb2ZmKGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgICAgICB0aGlzLmR1bW15LnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBldmVudE5hbWVcbiAgICAgKiAgICAgICAgIE5hbWUgb2YgdGhlIGV2ZW50IHRvIGNyZWF0ZS5cbiAgICAgKiBAcGFyYW0gIHs/fSBbZGV0YWlsXVxuICAgICAqICAgICAgICAgT3B0aW9uYWwgZGV0YWlsIGZvciB0aGUgZXZlbnQuXG4gICAgICogQHJldHVybiB7Q3VzdG9tRXZlbnR9XG4gICAgICogICAgICAgICBFdmVudCB0aGF0IHdhcyBjcmVhdGVkLlxuICAgICAqL1xuICAgIGNyZWF0ZShldmVudE5hbWUsIGRldGFpbCkge1xuXG4gICAgICAgIHJldHVybiBuZXcgQ3VzdG9tRXZlbnQoZXZlbnROYW1lLCB7XG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGRldGFpbFxuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BhdGNoZXMgYW4gZXZlbnQgYW5kIHJldHVybnMgaXQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtDdXN0b21FdmVudHxTdHJpbmd9IGV2ZW50TmFtZVxuICAgICAqICAgICAgICAgRWl0aGVyIHRoZSBldmVudCB0byB0cmlnZ2VyIG9yIHRoZSBuYW1lIG9mIHRoZSBldmVudCB0byB0cmlnZ2VyLlxuICAgICAqIEBwYXJhbSAgez99IFtkZXRhaWxdXG4gICAgICogICAgICAgICBPcHRpb25hbCBkZXRhaWwgZm9yIHRoZSBldmVudC4gVGhpcyBwYXJhbWV0ZXIgaXMgb25seSB1c2VkIGlmIHRoZVxuICAgICAqICAgICAgICAgZXZlbnROYW1lIHBhcmFtZXRlciBpcyBhIHN0cmluZyBhbmQgdGhlIGV2ZW50IGlzIGNyZWF0ZWQuXG4gICAgICogQHJldHVybiB7Q3VzdG9tRXZlbnR9XG4gICAgICogICAgICAgICBFdmVudCB0aGF0IHdhcyBkaXNwYXRjaGVkLlxuICAgICAqL1xuICAgIHRyaWdnZXIoZXZlbnROYW1lLCBkZXRhaWwpIHtcblxuICAgICAgICBjb25zdCBldmVudCA9IChcbiAgICAgICAgICAgIHR5cGVvZiBldmVudE5hbWUgPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgID8gdGhpcy5jcmVhdGUoZXZlbnROYW1lLCBkZXRhaWwpXG4gICAgICAgICAgICA6IGV2ZW50TmFtZVxuICAgICAgICApO1xuXG4gICAgICAgIHRoaXMuZHVtbXkuZGlzcGF0Y2hFdmVudChldmVudCk7XG5cbiAgICAgICAgcmV0dXJuIGV2ZW50O1xuXG4gICAgfVxuXG59XG4iLCJpbXBvcnQgVG9rZW5zIGZyb20gXCIuL1Rva2Vucy5qc1wiO1xuaW1wb3J0IFRlbXBsYXRlIGZyb20gXCIuL1RlbXBsYXRlLmpzXCI7XG5pbXBvcnQgT2JzZXJ2ZXIgZnJvbSBcIi4vT2JzZXJ2ZXIuanNcIjtcbmltcG9ydCBDaGFyYWN0ZXJUb2tlbiBmcm9tIFwiLi9DaGFyYWN0ZXJUb2tlbi5qc1wiO1xuaW1wb3J0IFJlbWluZGVyVG9rZW4gZnJvbSBcIi4vUmVtaW5kZXJUb2tlbi5qc1wiO1xuaW1wb3J0IFBvc2l0aW9uZXIgZnJvbSBcIi4vUG9zaXRpb25lci5qc1wiO1xuaW1wb3J0IFRva2VuU3RvcmUgZnJvbSBcIi4vVG9rZW5TdG9yZS5qc1wiO1xuaW1wb3J0IHtcbiAgICBsb29rdXBPbmUsXG4gICAgbG9va3VwT25lQ2FjaGVkXG59IGZyb20gXCIuLi91dGlscy9lbGVtZW50cy5qc1wiO1xuaW1wb3J0IHtcbiAgICBpc051bWVyaWNcbn0gZnJvbSBcIi4uL3V0aWxzL251bWJlcnMuanNcIjtcblxuLyoqXG4gKiBIYW5kbGVzIHRva2VucyBiZWluZyBhZGRlZCB0byB0aGUgbWFpbiBwYWQgc2VjdGlvbi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGFkIHtcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGFjdHVhbCBjaGFyYWN0ZXIgdG9rZW4gZnJvbSB0aGUgZ2l2ZW4gdG9rZW4gYnV0dG9uLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7RWxlbWVudH0gYnV0dG9uXG4gICAgICogICAgICAgICBCdXR0b24gd2hvc2UgdG9rZW4gc2hvdWxkIGJlIHJldHVybmVkLlxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICogICAgICAgICBUb2tlbiB0aGF0IHdhcyBmb3VuZC5cbiAgICAgKiBAdGhyb3dzIHtSZWZlcmVuY2VFcnJvcn1cbiAgICAgKiAgICAgICAgIFRoZSBnaXZlbiBidXR0b24gbXVzdCBjb250YWluIGEgdG9rZW4uXG4gICAgICovXG4gICAgc3RhdGljIGdldFRva2VuKGJ1dHRvbikge1xuXG4gICAgICAgIGNvbnN0IHRva2VuID0gbG9va3VwT25lQ2FjaGVkKFwiLmpzLS1jaGFyYWN0ZXJcIiwgYnV0dG9uKTtcblxuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJVbmFibGUgdG8gZmluZCBjaGFyYWN0ZXIgdG9rZW5cIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdG9rZW47XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgKiAgICAgICAgVGhlIG1haW4gcGFkIGVsZW1lbnQuXG4gICAgICogQHBhcmFtIHtPYnNlcnZlcn0gb2JzZXJ2ZXJcbiAgICAgKiAgICAgICAgQW4gb2JzZXJ2ZXIgdGhhdCB3aWxsIHRyaWdnZXIgZXZlbnRzIGF0IGtleSB0aW1lcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihlbGVtZW50LCBvYnNlcnZlcikge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgbWFpbiBwYWQgZWxlbWVudC5cbiAgICAgICAgICogQHR5cGUge0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbiBvYnNlcnZlciB0aGF0IGNhbiB0cmlnZ2VyIGV2ZW50cyBhdCBrZXkgdGltZXMuXG4gICAgICAgICAqIEB0eXBlIHtPYnNlcnZlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBvYnNlcnZlcjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNsYXNzIHRoYXQgYWxsb3dzIHRoZSB0b2tlbnMgdG8gYmUgZHJhZ2dlZCBhcm91bmQuXG4gICAgICAgICAqIEB0eXBlIHtUb2tlbnN9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRva2VucyA9IG5ldyBUb2tlbnMoZWxlbWVudCwgb2JzZXJ2ZXIpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGVtcGxhdGUgZm9yIGFkZGluZyBhIHRva2VuIHRvIHRoZSBwYWQuXG4gICAgICAgICAqIEB0eXBlIHtUZW1wbGF0ZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSBUZW1wbGF0ZS5jcmVhdGUobG9va3VwT25lKFwiI3Rva2VuLXRlbXBsYXRlXCIpKTtcbiAgICAgICAgLy8gTk9URTogc2hvdWxkIHRoaXMgYmUgcGFzc2VkIHRvIHRoZSBjbGFzcyBpbnN0ZWFkIG9mIGJlaW5nIGNyZWF0ZWRcbiAgICAgICAgLy8gaGVyZT9cblxuICAgICAgICAvKipcbiAgICAgICAgICogQWxsIGNoYXJhY3RlcnMgdGhhdCBoYXZlIGJlZW4gYWRkZWQuXG4gICAgICAgICAqIEB0eXBlIHtBcnJheS48T2JqZWN0Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhcmFjdGVycyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBbGwgcmVtaW5kZXJzIHRoYXQgaGF2ZSBiZWVuIGFkZGVkLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXkuPE9iamVjdD59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnJlbWluZGVycyA9IFtdO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgcG9zaXRpb25lciB0aGF0IHdpbGwgbGF5IG91dCB0aGUgdG9rZW5zIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAqIEB0eXBlIHtQb3NpdGlvbmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wb3NpdGlvbmVyID0gbnVsbDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGNvLW9yZGluYXRlcyBmb3IgZWFjaCBvZiB0aGUgdG9rZW5zLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXkuPEFycmF5Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY29vcmRzID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBUb2tlblN0b3JlIHRoYXQgd2lsIGJlIHVzZWQgZm9yIHdvcmtpbmcgb3V0IHRoZSBkaW1lbnNpb25zIG9mIHRoZVxuICAgICAgICAgKiB0b2tlbnMsIHNvIHRoYXQgY28tb3JkaW5hdGVzIGNhbiBiZSBjb3JyZWN0bHkgY2FsY3VsYXRlZC5cbiAgICAgICAgICogQHR5cGUge1Rva2VuU3RvcmV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRva2VuU3RvcmUgPSBudWxsO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIGNoYXJhY3RlciB0byB0aGUge0BsaW5rIFBhZCNlbGVtZW50fS4gVGhpcyBtZXRob2QgaXMgZm9yIGludGVybmFsXG4gICAgICogdXNlIG9ubHkgYmVjYXVzZSBpdCBkb2Vzbid0IHRyaWdnZXIgYW55IGV2ZW50cyAtIHVzZVxuICAgICAqIHtAbGluayBQYWQjYWRkQ2hhcmFjdGVyfSBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7Q2hhcmFjdGVyVG9rZW59IGNoYXJhY3RlclxuICAgICAqICAgICAgICAgVGhlIGNoYXJhY3RlciB0byBhZGQuXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqICAgICAgICAgQW4gb2JqZWN0IHdpdGggdGhlIHRva2VuIGFuZCB0aGUgY2hhcmFjdGVyIHRoYXQgd2FzIGFkZGVkLlxuICAgICAqL1xuICAgIGRyYXdDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgIGNoYXJhY3RlcnMsXG4gICAgICAgICAgICB0ZW1wbGF0ZVxuICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICBlbGVtZW50LmFwcGVuZChcbiAgICAgICAgICAgIHRlbXBsYXRlLmRyYXcoe1xuICAgICAgICAgICAgICAgIFwiLmpzLS10b2tlbi0td3JhcHBlclwiKGVsZW1lbnQpIHtcblxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChjaGFyYWN0ZXIuZHJhd1Rva2VuKCkpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGFzZXQudG9rZW4gPSBcImNoYXJhY3RlclwiO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCB0b2tlbiA9IGVsZW1lbnQubGFzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgY29uc3QgaW5mbyA9IE9iamVjdC5mcmVlemUoe1xuICAgICAgICAgICAgY2hhcmFjdGVyLFxuICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2hhcmFjdGVycy5wdXNoKGluZm8pO1xuXG4gICAgICAgIHJldHVybiBpbmZvO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIGNoYXJhY3RlciB0byB0aGUge0BsaW5rIFBhZCNlbGVtZW50fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0NoYXJhY3RlclRva2VufSBjaGFyYWN0ZXJcbiAgICAgKiAgICAgICAgIFRoZSBjaGFyYWN0ZXIgdG8gYWRkLlxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiAgICAgICAgIEFuIG9iamVjdCB3aXRoIHRoZSB0b2tlbiBhbmQgdGhlIGNoYXJhY3RlciB0aGF0IHdhcyBhZGRlZC5cbiAgICAgKi9cbiAgICBhZGRDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XG5cbiAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuZHJhd0NoYXJhY3RlcihjaGFyYWN0ZXIpO1xuICAgICAgICB0aGlzLm9ic2VydmVyLnRyaWdnZXIoXCJjaGFyYWN0ZXItYWRkXCIsIGluZm8pO1xuXG4gICAgICAgIHJldHVybiBpbmZvO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIG5ldyBjaGFyYWN0ZXIgdG8ge0BsaW5rIFBhZCNlbGVtZW50fSAoc2VlXG4gICAgICoge0BsaW5rIFBhZCNhZGRDaGFyYWN0ZXJ9KSBhbmQgbW92ZXMgaXQgdG8gdGhlIGNvcnJlY3QgbG9jYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgICBUaGUgY2hhcmFjdGVyIHRvIGFkZC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBBbiBvYmplY3Qgd2l0aCB0aGUgdG9rZW4gYW5kIHRoZSBjaGFyYWN0ZXIgdGhhdCB3YXMgYWRkZWQuXG4gICAgICovXG4gICAgYWRkTmV3Q2hhcmFjdGVyKGNoYXJhY3Rlcikge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHRva2VucyxcbiAgICAgICAgICAgIGNoYXJhY3RlcnMsXG4gICAgICAgICAgICBjb29yZHMsXG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICAgICAgICAgIE9GRlNFVFxuICAgICAgICAgICAgfVxuICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICBpZiAoIWNvb3Jkcykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ28tb3JkaW5hdGVzIGhhdmUgbm90IGJlZW4gZ2VuZXJhdGVkXCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW5mbyA9IHRoaXMuYWRkQ2hhcmFjdGVyKGNoYXJhY3Rlcik7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSBjaGFyYWN0ZXJzLmxlbmd0aCAtIDE7XG4gICAgICAgIGNvbnN0IFtcbiAgICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgICB0b3BcbiAgICAgICAgXSA9IChjb29yZHM/LltpbmRleF0gfHwgW09GRlNFVCAqIGluZGV4LCBPRkZTRVQsIGluZGV4XSk7XG5cbiAgICAgICAgdG9rZW5zLm1vdmVUbyhcbiAgICAgICAgICAgIGluZm8udG9rZW4sXG4gICAgICAgICAgICBsZWZ0LFxuICAgICAgICAgICAgdG9wLFxuICAgICAgICAgICAgdG9rZW5zLmFkdmFuY2VaSW5kZXgoKVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBpbmZvO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlcyB0aGUgYWJpbGl0eSB0byBtb3ZlIGEgdG9rZW4gdG8gdGhlIGNvcnJlY3QgcGxhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRva2VuXG4gICAgICogICAgICAgIFRva2VuIHRvIG1vdmUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxlZnRcbiAgICAgKiAgICAgICAgTGVmdCBwb3NpdGlvbiwgaW4gcGl4ZWxzLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0b3BcbiAgICAgKiAgICAgICAgVG9wIHBvc2l0aW9uLCBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFt6SW5kZXhdXG4gICAgICogICAgICAgIE9wdGlvbmFsIHotaW5kZXguXG4gICAgICovXG4gICAgbW92ZVRva2VuKHRva2VuLCBsZWZ0LCB0b3AsIHpJbmRleCkge1xuICAgICAgICB0aGlzLnRva2Vucy5tb3ZlVG8odG9rZW4sIGxlZnQsIHRvcCwgekluZGV4KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHBvc2VzIHRoZSBnaXZlbiB0b2tlbidzIHBvc2l0aW9uLiBTZWUge0BsaW5rIFRva2VucyNnZXRQb3NpdGlvbn0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtFbGVtZW50fSB0b2tlblxuICAgICAqICAgICAgICAgVG9rZW4gd2hvc2UgcG9zaXRpb24gc2hvdWxkIGJlIHJldHVybmVkLlxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiAgICAgICAgIENvLW9yZGluYXRlcyBmb3IgdGhlIHRva2VuLlxuICAgICAqL1xuICAgIGdldFRva2VuUG9zaXRpb24odG9rZW4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5zLmdldFBvc2l0aW9uKHRva2VuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgY2hhcmFjdGVyIGZyb20ge0BsaW5rIFBhZCNlbGVtZW50fS4gVGhpcyBtZXRob2QgaXMgZm9yIGludGVybmFsXG4gICAgICogdXNlIG9ubHkgYmVjYXVzZSBpdCBkb2Vzbid0IHRyaWdnZXIgdGhlIGV2ZW50cyAtIHVzZVxuICAgICAqIHtAbGluayBQYWQjcmVtb3ZlQ2hhcmFjdGVyfSBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgIFRoZSBjaGFyYWN0ZXIgdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIHVuZHJhd0NoYXJhY3RlcihjaGFyYWN0ZXIpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJzLFxuICAgICAgICAgICAgcHJlc2VydmVSZWZlcmVuY2VcbiAgICAgICAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gY2hhcmFjdGVyc1xuICAgICAgICAgICAgLmZpbmRJbmRleCgoaW5mbykgPT4gaW5mby5jaGFyYWN0ZXIgPT09IGNoYXJhY3Rlcik7XG5cbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgfSA9IGNoYXJhY3RlcnNbaW5kZXhdO1xuXG4gICAgICAgIHRva2VuLnJlbW92ZSgpO1xuXG4gICAgICAgIGlmICghcHJlc2VydmVSZWZlcmVuY2UpIHtcbiAgICAgICAgICAgIGNoYXJhY3RlcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0b2tlbjtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSBjaGFyYWN0ZXIgZnJvbSB7QGxpbmsgUGFkI2VsZW1lbnR9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgIFRoZSBjaGFyYWN0ZXIgdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIHJlbW92ZUNoYXJhY3RlcihjaGFyYWN0ZXIpIHtcblxuICAgICAgICBjb25zdCB0b2tlbiA9IHRoaXMudW5kcmF3Q2hhcmFjdGVyKGNoYXJhY3Rlcik7XG5cbiAgICAgICAgaWYgKHRva2VuKSB7XG5cbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXIudHJpZ2dlcihcImNoYXJhY3Rlci1yZW1vdmVcIiwge1xuICAgICAgICAgICAgICAgIGNoYXJhY3RlcixcbiAgICAgICAgICAgICAgICB0b2tlblxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUge0BsaW5rIENoYXJhY3RlclRva2VufSBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuXG4gICAgICogZWxlbWVudC4gSWYgYW4gaW5zdGFuY2UgaXNuJ3QgZm91bmQsIHVuZGVmaW5lZCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR9IHRva2VuXG4gICAgICogICAgICAgICBUaGUgdG9rZW4gZWxlbWVudCB3aG9zZSBkYXRhIHNob3VsZCBiZSByZXR1cm5lZC5cbiAgICAgKiBAcmV0dXJuIHtDaGFyYWN0ZXJUb2tlbnx1bmRlZmluZWR9XG4gICAgICogICAgICAgICBUaGUgbWF0Y2hpbmcgY2hhcmFjdGVyIGRhdGEsIG9yIHVuZGVmaW5lZCBpZiB0aGVyZSBpcyBubyBtYXRjaC5cbiAgICAgKi9cbiAgICBnZXRDaGFyYWN0ZXJCeVRva2VuKHRva2VuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJhY3RlcnMuZmluZCgoaW5mbykgPT4gaW5mby50b2tlbiA9PT0gdG9rZW4pPy5jaGFyYWN0ZXI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIHJlbW92aW5nIGEgY2hhcmFjdGVyIGJ5IHRoZSB0b2tlbiByYXRoZXIgdGhhbiB0aGVcbiAgICAgKiB7QGxpbmsgQ2hhcmFjdGVyVG9rZW59IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSB0b2tlblxuICAgICAqICAgICAgICBUaGUgdG9rZW4gd2hvc2UgY2hhcmFjdGVyIHNob3VsZCBiZSByZW1vdmVkLlxuICAgICAqL1xuICAgIHJlbW92ZUNoYXJhY3RlckJ5VG9rZW4odG9rZW4pIHtcbiAgICAgICAgdGhpcy5yZW1vdmVDaGFyYWN0ZXIodGhpcy5nZXRDaGFyYWN0ZXJCeVRva2VuKHRva2VuKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNoYXJhY3RlciBmcm9tIHRoZSBjaGFyYWN0ZXIgaXRzZWxmLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7Q2hhcmFjdGVyVG9rZW59IGNoYXJhY3RlclxuICAgICAqICAgICAgICAgVGhlIGNoYXJhY3RlciB3aG9zZSBpbmZvcm1hdGlvbiBzaG91bGQgYmUgcmV0dXJuZWQuXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqICAgICAgICAgSW5mb3JtYXRpb24gYWJvdXQgdGhlIGNoYXJhY3Rlci5cbiAgICAgKi9cbiAgICBnZXRJbmZvQnlDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJhY3RlcnMuZmluZCgoaW5mbykgPT4gaW5mby5jaGFyYWN0ZXIgPT09IGNoYXJhY3Rlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgZGVhZCBzdGF0ZSBmb3IgdGhlIGNoYXJhY3RlciB0aGF0J3MgYmVlbiBnaXZlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Q2hhcmFjdGVyVG9rZW59IGNoYXJhY3RlclxuICAgICAqICAgICAgICBUaGUgY2hhcmFjdGVyIHdob3NlIGRlYWQgc3RhdGUgc2hvdWxkIGJlIHRvZ2dsZWQuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBbZGVhZFN0YXRlXVxuICAgICAqICAgICAgICBPcHRpb25hbCBkZWFkIHN0YXRlIHRvIHNldC5cbiAgICAgKi9cbiAgICB0b2dnbGVEZWFkKGNoYXJhY3RlciwgZGVhZFN0YXRlKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgfSA9IHRoaXMuZ2V0SW5mb0J5Q2hhcmFjdGVyKGNoYXJhY3RlcikgfHwge307XG5cbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNEZWFkID0gY2hhcmFjdGVyLnRvZ2dsZURlYWQoZGVhZFN0YXRlKTtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvclxuICAgICAgICAgICAgLmdldFRva2VuKHRva2VuKVxuICAgICAgICAgICAgLmNsYXNzTGlzdFxuICAgICAgICAgICAgLnRvZ2dsZShcImlzLWRlYWRcIiwgaXNEZWFkKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlci50cmlnZ2VyKFwic2hyb3VkLXRvZ2dsZVwiLCB7XG4gICAgICAgICAgICBpc0RlYWQsXG4gICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIGNoYXJhY3RlclxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZXZpdmVkIHBsYXllcnMgZ2V0IHRoZWlyIGdob3N0IHZvdGUgYmFjay5cbiAgICAgICAgLy8gaHR0cHM6Ly9kaXNjb3JkLmNvbS9jaGFubmVscy81Njk2ODM3ODE4MDAyOTY1MDEvNzE5ODk4ODIwOTQyNjI2ODE3LzEwNTY5MzU4MDkyNjMwNzk1MzVcbiAgICAgICAgaWYgKCFpc0RlYWQpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0R2hvc3RWb3RlKGNoYXJhY3RlciwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIGZ1bmN0aW9uIGZvciB0b2dnbGluZyB0aGUgZGVhZCBzdGF0ZSBvZiBhIGNoYXJhY3RlciBieSB0aGVpclxuICAgICAqIGVsZW1lbnQgcmF0aGVyIHRoYW4gdGhlIHtAbGluayBDaGFyYWN0ZXJUb2tlbn0gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRva2VuXG4gICAgICogICAgICAgIEVsZW1lbnQgd2hvc2UgYXNzb2NpYXRlZCBjaGFyYWN0ZXIgc2hvdWxkIGhhdmUgdGhlaXIgZGVhZCBzdGF0ZVxuICAgICAqICAgICAgICB0b2dnbGVkLlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2RlYWRTdGF0ZV1cbiAgICAgKiAgICAgICAgT3B0aW9uYWwgZGVhZCBzdGF0ZSB0byBzZXQuXG4gICAgICovXG4gICAgdG9nZ2xlRGVhZEJ5VG9rZW4odG9rZW4sIGRlYWRTdGF0ZSkge1xuICAgICAgICB0aGlzLnRvZ2dsZURlYWQodGhpcy5nZXRDaGFyYWN0ZXJCeVRva2VuKHRva2VuKSwgZGVhZFN0YXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUb2dnbGVzIHRoZSByb3RhdGVkIHN0YXRlIGZvciB0aGUgY2hhcmFjdGVyIHRoYXQncyBiZWVuIGdpdmVuLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gY2hhcmFjdGVyXG4gICAgICogICAgICAgIFRoZSBjaGFyYWN0ZXIgd2hvc2Ugcm90YXRlZCBzdGF0ZSBzaG91bGQgYmUgdG9nZ2xlZC5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtyb3RhdGVTdGF0ZV1cbiAgICAgKiAgICAgICAgT3B0aW9uYWwgcm90YXRlZCBzdGF0ZSB0byBzZXQuXG4gICAgICovXG4gICAgcm90YXRlKGNoYXJhY3Rlciwgcm90YXRlU3RhdGUpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICB0b2tlblxuICAgICAgICB9ID0gdGhpcy5nZXRJbmZvQnlDaGFyYWN0ZXIoY2hhcmFjdGVyKSB8fCB7fTtcblxuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpc1Vwc2lkZURvd24gPSBjaGFyYWN0ZXIucm90YXRlKHJvdGF0ZVN0YXRlKTtcbiAgICAgICAgdGhpcy5jb25zdHJ1Y3RvclxuICAgICAgICAgICAgLmdldFRva2VuKHRva2VuKVxuICAgICAgICAgICAgLmNsYXNzTGlzdFxuICAgICAgICAgICAgLnRvZ2dsZShcImlzLXVwc2lkZS1kb3duXCIsIGlzVXBzaWRlRG93bik7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIudHJpZ2dlcihcInJvdGF0ZS10b2dnbGVcIiwge1xuICAgICAgICAgICAgaXNVcHNpZGVEb3duLFxuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICBjaGFyYWN0ZXJcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgdG9nZ2xpbmcgdGhlIHJvdGF0ZWQgc3RhdGUgb2YgYSBjaGFyYWN0ZXIgYnkgdGhlaXJcbiAgICAgKiBlbGVtZW50IHJhdGhlciB0aGFuIHRoZSB7QGxpbmsgQ2hhcmFjdGVyVG9rZW59IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSB0b2tlblxuICAgICAqICAgICAgICBFbGVtZW50IHdob3NlIGFzc29jaWF0ZWQgY2hhcmFjdGVyIHNob3VsZCBoYXZlIHRoZWlyIHJvdGF0ZWQgc3RhdGVcbiAgICAgKiAgICAgICAgdG9nZ2xlZC5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtyb3RhdGVTdGF0ZV1cbiAgICAgKiAgICAgICAgT3B0aW9uYWwgcm90YXRlZCBzdGF0ZSB0byBzZXQuXG4gICAgICovXG4gICAgcm90YXRlQnlUb2tlbih0b2tlbiwgcm90YXRlU3RhdGUpIHtcbiAgICAgICAgdGhpcy5yb3RhdGUodGhpcy5nZXRDaGFyYWN0ZXJCeVRva2VuKHRva2VuKSwgcm90YXRlU3RhdGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHBsYXllciBuYW1lIGZvciB0aGUgY2hhcmFjdGVyIHRoYXQncyBiZWVuIGdpdmVuLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7Q2hhcmFjdGVyVG9rZW59IGNoYXJhY3RlclxuICAgICAqICAgICAgICAgVGhlIGNoYXJhY3RlciB3aG9zZSBuYW1lIHNob3VsZCBiZSByZXR1cm5lZC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgbmFtZSBvZiB0aGUgcGxheWVyLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgdGhlcmUgaXMgbm8gbmFtZSBvclxuICAgICAqICAgICAgICAgdGhlIGNoYXJhY3RlciB0b2tlbiBjYW4ndCBiZSBmb3VuZC5cbiAgICAgKi9cbiAgICBnZXRQbGF5ZXJOYW1lKGNoYXJhY3Rlcikge1xuXG4gICAgICAgIGNvbnN0IGluZm8gPSB0aGlzLmNoYXJhY3RlcnMuZmluZCgoaW5mbykgPT4gaW5mby5jaGFyYWN0ZXIgPT09IGNoYXJhY3Rlcik7XG5cbiAgICAgICAgaWYgKCFpbmZvKSB7XG4gICAgICAgICAgICByZXR1cm4gXCJcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IG5hbWVUYWcgPSBsb29rdXBPbmVDYWNoZWQoXG4gICAgICAgICAgICBcIi5qcy0tY2hhcmFjdGVyLS1wbGF5ZXItbmFtZVwiLFxuICAgICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci5nZXRUb2tlbihpbmZvLnRva2VuKVxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBuYW1lVGFnPy50ZXh0Q29udGVudCB8fCBcIlwiO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGdldHRpbmcgdGhlIG5hbWUgb2YgdGhlIHBsYXllciBieSB0aGUgZWxlbWVudFxuICAgICAqIHJhdGhlciB0aGFuIHRoZSB7QGxpbmsgQ2hhcmFjdGVyVG9rZW59IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7RWxlbWVudH0gdG9rZW5cbiAgICAgKiAgICAgICAgIFRoZSB0b2tlbiBlbGVtZW50LlxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBwbGF5ZXIgbmFtZSBvciBhbiBlbXB0eSBzdHJpbmcuXG4gICAgICovXG4gICAgZ2V0UGxheWVyTmFtZUZvclRva2VuKHRva2VuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFBsYXllck5hbWUodGhpcy5nZXRDaGFyYWN0ZXJCeVRva2VuKHRva2VuKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcGxheWVyIG5hbWUgZm9yIHRoZSBjaGFyYWN0ZXIgdGhhdCdzIGJlZW4gZ2l2ZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NoYXJhY3RlclRva2VufSBjaGFyYWN0ZXJcbiAgICAgKiAgICAgICAgVGhlIGNoYXJhY3RlciB0byBzZXQgdGhlIHBsYXllciBuYW1lIGZvci5cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICAgICAqICAgICAgICBUaGUgcGxheWVyIG5hbWUgdG8gZGlzcGxheSB3aXRoIHRoZSBjaGFyYWN0ZXIgdG9rZW4uXG4gICAgICovXG4gICAgc2V0UGxheWVyTmFtZShjaGFyYWN0ZXIsIG5hbWUpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICB0b2tlblxuICAgICAgICB9ID0gdGhpcy5nZXRJbmZvQnlDaGFyYWN0ZXIoY2hhcmFjdGVyKSB8fCB7fTtcblxuICAgICAgICBpZiAoIXRva2VuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBuYW1lVGFnID0gbG9va3VwT25lQ2FjaGVkKFxuICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci0tcGxheWVyLW5hbWVcIixcbiAgICAgICAgICAgIHRoaXMuY29uc3RydWN0b3IuZ2V0VG9rZW4odG9rZW4pXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKCFuYW1lVGFnKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBuYW1lID0gKG5hbWUgfHwgXCJcIikudHJpbSgpO1xuICAgICAgICBuYW1lVGFnLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5vYnNlcnZlci50cmlnZ2VyKFwic2V0LXBsYXllci1uYW1lXCIsIHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIGNoYXJhY3RlclxuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIGZ1bmN0aW9uIGZvciBzZXR0aW5nIHRoZSBwbGF5ZXIgbmFtZSBvZiBhIGNoYXJhY3RlciBieSB0aGVpclxuICAgICAqIGVsZW1lbnQgcmF0aGVyIHRoYW4gdGhlIHtAbGluayBDaGFyYWN0ZXJUb2tlbn0gaW5zdGFuY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRva2VuXG4gICAgICogICAgICAgIFRoZSB0b2tlbiBlbGVtZW50LlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogICAgICAgIFRoZSBwbGF5ZXIgbmFtZSB0byBkaXNwbGF5IHdpdGggdGhlIGNoYXJhY3RlciB0b2tlbi5cbiAgICAgKi9cbiAgICBzZXRQbGF5ZXJOYW1lRm9yVG9rZW4odG9rZW4sIG5hbWUpIHtcbiAgICAgICAgdGhpcy5zZXRQbGF5ZXJOYW1lKHRoaXMuZ2V0Q2hhcmFjdGVyQnlUb2tlbih0b2tlbiksIG5hbWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIGdob3N0IHZvdGUgc3RhdGUgZm9yIHRoZSBjaGFyYWN0ZXIgdGhhdCdzIGJlZW4gZ2l2ZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NoYXJhY3RlclRva2VufSBjaGFyYWN0ZXJcbiAgICAgKiAgICAgICAgVGhlIGNoYXJhY3RlciB3aG9zZSBnaG9zdCB2b3RlIHN0YXRlIHNob3VsZCBiZSB0b2dnbGVkLlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2dob3N0Vm90ZVN0YXRlXVxuICAgICAqICAgICAgICBPcHRpb25hbCBnaG9zdCB2b3RlIHN0YXRlIHRvIHNldC5cbiAgICAgKi9cbiAgICBzZXRHaG9zdFZvdGUoY2hhcmFjdGVyLCBnaG9zdFZvdGVTdGF0ZSkge1xuXG4gICAgICAgIC8vIFByZXZlbnQgdGhlIHZhbHVlIGluIHRoZSBzdG9yZSBicmVha2luZyB0aGUgZ2hvc3Qgdm90ZSB2aXNpYmlsaXR5IGlmXG4gICAgICAgIC8vIHRoZSBjaGFyYWN0ZXIgdG9rZW4gaXMgbm90IGRlYWQuXG4gICAgICAgIGlmICghZ2hvc3RWb3RlU3RhdGUgJiYgIWNoYXJhY3Rlci5nZXRJc0RlYWQoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgfSA9IHRoaXMuZ2V0SW5mb0J5Q2hhcmFjdGVyKGNoYXJhY3RlcikgfHwge307XG5cbiAgICAgICAgaWYgKCF0b2tlbikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaGFzR2hvc3RWb3RlID0gY2hhcmFjdGVyLnRvZ2dsZUdob3N0Vm90ZShnaG9zdFZvdGVTdGF0ZSk7XG4gICAgICAgIHRoaXMuY29uc3RydWN0b3JcbiAgICAgICAgICAgIC5nZXRUb2tlbih0b2tlbilcbiAgICAgICAgICAgIC5jbGFzc0xpc3RcbiAgICAgICAgICAgIC50b2dnbGUoXCJpcy12b3RlbGVzc1wiLCAhaGFzR2hvc3RWb3RlKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlci50cmlnZ2VyKFwiZ2hvc3Qtdm90ZS10b2dnbGVcIiwge1xuICAgICAgICAgICAgaGFzR2hvc3RWb3RlLFxuICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICBjaGFyYWN0ZXJcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBIGhlbHBlciBmdW5jdGlvbiBmb3IgdG9nZ2xpbmcgdGhlIGdob3N0IHZvdGUgc3RhdGUgb2YgYSBjaGFyYWN0ZXIgYnlcbiAgICAgKiB0aGVpciBlbGVtZW50IHJhdGhlciB0aGFuIHRoZSB7QGxpbmsgQ2hhcmFjdGVyVG9rZW59IGluc3RhbmNlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSB0b2tlblxuICAgICAqICAgICAgICBFbGVtZW50IHdob3NlIGFzc29jaWF0ZWQgY2hhcmFjdGVyIHNob3VsZCBoYXZlIHRoZWlyIGdob3N0IHZvdGVcbiAgICAgKiAgICAgICAgc3RhdGUgdG9nZ2xlZC5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtnaG9zdFZvdGVTdGF0ZV1cbiAgICAgKiAgICAgICAgT3B0aW9uYWwgZ2hvc3Qgdm90ZSBzdGF0ZSB0byBzZXQuXG4gICAgICovXG4gICAgc2V0R2hvc3RWb3RlRm9yVG9rZW4odG9rZW4sIGdob3N0Vm90ZVN0YXRlKSB7XG4gICAgICAgIHRoaXMuc2V0R2hvc3RWb3RlKHRoaXMuZ2V0Q2hhcmFjdGVyQnlUb2tlbih0b2tlbiksIGdob3N0Vm90ZVN0YXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcmVtaW5kZXIgdG8ge0BsaW5rIFBhZCNlbGVtZW50fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1JlbWluZGVyVG9rZW59IHJlbWluZGVyXG4gICAgICogICAgICAgICBUaGUgcmVtaW5kZXIgdG8gYWRkLlxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiAgICAgICAgIEFuIG9iamVjdCB3aXRoIHRoZSB0b2tlbiBhbmQgdGhlIHJlbWluZGVyIHRoYXQgd2FzIGFkZGVkLlxuICAgICAqL1xuICAgIGFkZFJlbWluZGVyKHJlbWluZGVyKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgIHJlbWluZGVycyxcbiAgICAgICAgICAgIG9ic2VydmVyLFxuICAgICAgICAgICAgdGVtcGxhdGVcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgZWxlbWVudC5hcHBlbmQoXG4gICAgICAgICAgICB0ZW1wbGF0ZS5kcmF3KHtcbiAgICAgICAgICAgICAgICBcIi5qcy0tdG9rZW4tLXdyYXBwZXJcIihlbGVtZW50KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQocmVtaW5kZXIuZHJhd1Rva2VuKCkpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGFzZXQudG9rZW4gPSBcInJlbWluZGVyXCI7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YXNldC5yZW1pbmRlciA9IHJlbWluZGVyLmdldElkKCk7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHRva2VuID0gZWxlbWVudC5sYXN0RWxlbWVudENoaWxkO1xuICAgICAgICBjb25zdCBpbmZvID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgICAgICAgICByZW1pbmRlcixcbiAgICAgICAgICAgIHRva2VuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJlbWluZGVycy5wdXNoKGluZm8pO1xuICAgICAgICBvYnNlcnZlci50cmlnZ2VyKFwicmVtaW5kZXItYWRkXCIsIGluZm8pO1xuXG4gICAgICAgIHJldHVybiBpbmZvO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgcmVtaW5kZXIgZnJvbSB7QGxpbmsgUGFkI2VsZW1lbnR9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZW1pbmRlclRva2VufSByZW1pbmRlclxuICAgICAqICAgICAgICBUaGUgcmVtaW5kZXIgdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIHJlbW92ZVJlbWluZGVyKHJlbWluZGVyKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgcmVtaW5kZXJzLFxuICAgICAgICAgICAgb2JzZXJ2ZXJcbiAgICAgICAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gcmVtaW5kZXJzLmZpbmRJbmRleCgoaW5mbykgPT4gaW5mby5yZW1pbmRlciA9PT0gcmVtaW5kZXIpO1xuXG4gICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHRva2VuXG4gICAgICAgIH0gPSByZW1pbmRlcnNbaW5kZXhdO1xuXG4gICAgICAgIHRva2VuLnJlbW92ZSgpO1xuXG4gICAgICAgIGlmICghdGhpcy5wcmVzZXJ2ZVJlZmVyZW5jZSkge1xuICAgICAgICAgICAgcmVtaW5kZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cblxuICAgICAgICBvYnNlcnZlci50cmlnZ2VyKFwicmVtaW5kZXItcmVtb3ZlXCIsIHtcbiAgICAgICAgICAgIHJlbWluZGVyLFxuICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB7QGxpbmsgUmVtaW5kZXJUb2tlbn0gdGhhdCdzIGFzc29jaWF0ZWQgd2l0aCB0aGUgZ2l2ZW4gZWxlbWVudC5cbiAgICAgKiBJZiBubyBtYXRjaCBjYW4gYmUgZm91bmQsIHVuZGVmaW5lZCBpcyByZXR1cm5lZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR9IHRva2VuXG4gICAgICogICAgICAgICBUaGUgdG9rZW4gZWxlbWVudCB3aG9zZSBhc3NvY2lhdGVkIHJlbWluZGVyIGRhdGEgc2hvdWxkIGJlXG4gICAgICogICAgICAgICByZXR1cm5lZC5cbiAgICAgKiBAcmV0dXJuIHtSZW1pbmRlclRva2VufHVuZGVmaW5lZH1cbiAgICAgKiAgICAgICAgIFRoZSBtYXRjaGluZyBkYXRhIG9yIHVuZGVmaW5lZCBpZiBubyBtYXRjaCBjYW4gYmUgZm91bmQuXG4gICAgICovXG4gICAgZ2V0UmVtaW5kZXJCeVRva2VuKHRva2VuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbWluZGVycy5maW5kKChpbmZvKSA9PiBpbmZvLnRva2VuID09PSB0b2tlbik/LnJlbWluZGVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIGZ1bmN0aW9uIGZvciByZW1vdmluZyBhIHJlbWluZGVyIGJ5IHRoZSB0b2tlbiBlbGVtZW50IHJhdGhlclxuICAgICAqIHRoYW4gdGhlIHtAbGluayBSZW1pbmRlclRva2VufSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gdG9rZW5cbiAgICAgKiAgICAgICAgVGhlIHJlbWluZGVyIGVsZW1lbnQuXG4gICAgICovXG4gICAgcmVtb3ZlUmVtaW5kZXJCeVRva2VuKHRva2VuKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlUmVtaW5kZXIodGhpcy5nZXRSZW1pbmRlckJ5VG9rZW4odG9rZW4pKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCBjaGFyYWN0ZXJzIGFuZCB0b2tlbnMgZnJvbSB7QGxpbmsgUGFkI2VsZW1lbnR9IGFuZCBjYWxsc1xuICAgICAqIHtAbGluayBUb2tlbnMjcmVzZXR9LlxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNoYXJhY3RlcnMsXG4gICAgICAgICAgICByZW1pbmRlcnNcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZmxhZyB0aGF0IHByZXZlbnRzIHRoZSBhcnJheXMge0BsaW5rIFBhZCNjaGFyYWN0ZXJzfSBhbmRcbiAgICAgICAgICoge0BsaW5rIFBhZCNyZW1pbmRlcnN9IGJlaW5nIG1vZGlmaWVkIHRocm91Z2hcbiAgICAgICAgICoge0BsaW5rIFBhZCNyZW1vdmVDaGFyYWN0ZXJ9IGFuZCB7QGxpbmsgUGFkI3JlbW92ZVJlbWluZGVyfS5cbiAgICAgICAgICogUHJlc2VydmluZyB0aGUgcmVmZXJlbmNlIGFsbG93cyB0aGUgY2hhcmFjdGVycyBhbmQgcmVtaW5kZXJzIHRvIGJlXG4gICAgICAgICAqIHJlbW92ZWQgd2l0aCBhIGxvb3AgYW5kIHdpdGhvdXQgZW50cmllcyBiZWluZyBza2lwcGVkLlxuICAgICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJlc2VydmVSZWZlcmVuY2UgPSB0cnVlO1xuXG4gICAgICAgIGNoYXJhY3RlcnMuZm9yRWFjaCgoeyBjaGFyYWN0ZXIgfSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVDaGFyYWN0ZXIoY2hhcmFjdGVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNoYXJhY3RlcnMubGVuZ3RoID0gMDtcblxuICAgICAgICByZW1pbmRlcnMuZm9yRWFjaCgoeyByZW1pbmRlciB9KSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlbW92ZVJlbWluZGVyKHJlbWluZGVyKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJlbWluZGVycy5sZW5ndGggPSAwO1xuXG4gICAgICAgIHRoaXMucHJlc2VydmVSZWZlcmVuY2UgPSBmYWxzZTtcblxuICAgICAgICB0aGlzLnRva2Vucy5yZXNldCgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBleGVjdXRpbmcge0BsaW5rIFRva2VucyN1cGRhdGVQYWREaW1lbnNpb25zfSBvblxuICAgICAqIHtAbGluayBQYWQjdG9rZW5zfS5cbiAgICAgKi9cbiAgICB1cGRhdGVEaW1lbnNpb25zKCkge1xuICAgICAgICB0aGlzLnRva2Vucy51cGRhdGVQYWREaW1lbnNpb25zKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIGZvciBleGVjdXRpbmcge0BsaW5rIFRva2VucyN6ZXRaSW5kZXh9IG9uXG4gICAgICoge0BsaW5rIFBhZCN0b2tlbnN9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHpJbmRleFxuICAgICAqICAgICAgICBaLWluZGV4IHRvIHNldC5cbiAgICAgKi9cbiAgICBzZXRaSW5kZXgoekluZGV4KSB7XG4gICAgICAgIHRoaXMudG9rZW5zLnNldFpJbmRleCh6SW5kZXgpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHBvc2l0aW9uZXIgdGhhdCB3aWxsIHBsYWNlIHRoZSB0b2tlbnMgY29ycmVjdGx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtQb3NpdGlvbmVyfSBwb3NpdGlvbmVyXG4gICAgICogICAgICAgIFBvc2l0aW9uZXIgdGhhdCB3aWxsIGNvcnJlY3RseSBwbGFjZSB0aGUgdG9rZW5zLlxuICAgICAqL1xuICAgIHNldFBvc2l0aW9uZXIocG9zaXRpb25lcikge1xuICAgICAgICB0aGlzLnBvc2l0aW9uZXIgPSBwb3NpdGlvbmVyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyB0aGUgY28tb3JkaW5hdGVzIGZvciBlYWNoIG9mIHRoZSB0b2tlbnMgYW5kIHN0b3JlcyB0aGVtIGluXG4gICAgICoge0BsaW5rIFBhZCNjb29yZHN9XG4gICAgICovXG4gICAgZ2VuZXJhdGVDb29yZHMoKSB7XG4gICAgICAgIHRoaXMuY29vcmRzID0gdGhpcy5wb3NpdGlvbmVyLmdlbmVyYXRlQ29vcmRzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogV29ya3Mgb3V0IHRoZSBkaW1lbnNpb25zIG9mIHtAbGluayBQYXIjZWxlbWVudH0gaW4gcGl4ZWxzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqICAgICAgICAgQW4gb2JqZWN0IHdpdGggd2lkdGggYW5kIGhlaWdodCBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIGdldFBhZERpbWVuc2lvbnMoKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHRcbiAgICAgICAgfSA9IHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHRcbiAgICAgICAgfTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMge0BsaW5rIFBhZCN0b2tlblN0b3JlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VG9rZW5TdG9yZX1cbiAgICAgKiAgICAgICAgVGhlIHRva2VuIHN0b3JlLlxuICAgICAqL1xuICAgIHNldFRva2VuU3RvcmUodG9rZW5TdG9yZSkge1xuICAgICAgICB0aGlzLnRva2VuU3RvcmUgPSB0b2tlblN0b3JlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGRpbWVuc2lvbnMgb2YgYSB0b2tlbiwgaW5jbHVkaW5nIGl0cyBkcm9wIHNoYWRvdy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiAgICAgICAgIEFuIG9iamVjdCB3aXRoIHdpZHRoIGFuZCBoZWlnaHQgcHJvcGVydGllcy5cbiAgICAgKi9cbiAgICBnZXRUb2tlbkRpbWVuc2lvbnMoKSB7XG5cbiAgICAgICAgY29uc3QgZGltZW5zaW9ucyA9IHtcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCF0aGlzLnRva2VuU3RvcmUpIHtcblxuICAgICAgICAgICAgY29uc29sZS53YXJuKFwiQ2Fubm90IHRlc3QgZGltZW5zaW9ucyBiZWNhdXNlIHRva2VuU3RvcmUgaXMgbm90IHNldFwiKTtcbiAgICAgICAgICAgIHJldHVybiBkaW1lbnNpb25zO1xuXG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBub0NoYXJhY3RlciA9IHRoaXMudG9rZW5TdG9yZS5nZXRFbXB0eUNoYXJhY3RlcigpO1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICB0b2tlblxuICAgICAgICB9ID0gdGhpcy5kcmF3Q2hhcmFjdGVyKG5vQ2hhcmFjdGVyKTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgd2lkdGg6IHRva2VuV2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHRva2VuSGVpZ2h0XG4gICAgICAgIH0gPSB0b2tlbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAvLyBBZGQgdGhlIHNoYWRvdy5cblxuICAgICAgICBjb25zdCBzY2FsZSA9IE51bWJlcihcbiAgICAgICAgICAgIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRva2VuLCBudWxsKS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS10b2tlbi1zaXplXCIpXG4gICAgICAgICAgICB8fCAxXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHRva2VuQ2hhcmFjdGVyID0gdG9rZW4ucXVlcnlTZWxlY3RvcihcIi5qcy0tY2hhcmFjdGVyXCIpO1xuICAgICAgICBjb25zdCBzdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0b2tlbkNoYXJhY3RlciwgbnVsbCk7XG5cbiAgICAgICAgY29uc3Qgc2hhZG93T2Zmc2V0ID0gc3R5bGVzLmdldFByb3BlcnR5VmFsdWUoXCItLXNoYWRvdy1vZmZzZXRcIik7XG4gICAgICAgIGxldCBzaGFkb3dBbW91bnQgPSBwYXJzZUZsb2F0KHNoYWRvd09mZnNldCkgKiBzY2FsZTtcblxuICAgICAgICBpZiAoc2hhZG93T2Zmc2V0LnRyaW0oKS5yZXBsYWNlKC9bXFxkXFwuXS9nLCBcIlwiKSA9PT0gXCJlbVwiKSB7XG4gICAgICAgICAgICBzaGFkb3dBbW91bnQgKj0gcGFyc2VGbG9hdChzdHlsZXMuZ2V0UHJvcGVydHlWYWx1ZShcImZvbnQtc2l6ZVwiKSk7XG4gICAgICAgIH1cblxuICAgICAgICBkaW1lbnNpb25zLndpZHRoID0gdG9rZW5XaWR0aCArIHNoYWRvd0Ftb3VudDtcbiAgICAgICAgZGltZW5zaW9ucy5oZWlnaHQgPSB0b2tlbkhlaWdodCArIHNoYWRvd0Ftb3VudDtcblxuICAgICAgICB0aGlzLnVuZHJhd0NoYXJhY3Rlcihub0NoYXJhY3Rlcik7XG5cbiAgICAgICAgcmV0dXJuIGRpbWVuc2lvbnM7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHtAbGluayBQYWQjcG9zaXRpb25lcn0gd2l0aCB0aGUgZGV0YWlscyB0aGF0IGhhdmUgYmVlbiBwYXNzZWQgaW5cbiAgICAgKiBiZWZvcmUgcmUtZ2VuZXJhdGluZyB0aGUgY28tb3JkaW5hdGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBzZXR0aW5nc1xuICAgICAqICAgICAgICAgU2V0dGluZ3MgdG8gdXNlIHRvIHVwZGF0ZSB0aGUgcG9zaXRpb25lci5cbiAgICAgKiBAcGFyYW0gIHtCb29sZWFufSBbc2V0dGluZ3MuY29udGFpbmVyXVxuICAgICAqICAgICAgICAgdHJ1ZSBpZiB0aGUgY29udGFpbmVyIHNpemUgc2hvdWxkIGJlIHNlbnQgdG8gdGhlIHBvc2l0aW9uZXIuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gW3NldHRpbmdzLnRva2Vuc11cbiAgICAgKiAgICAgICAgIHRydWUgaWYgdGhlIHRva2VuIHNpemUgc2hvdWxkIGJlIHNlbnQgdG8gdGhlIHBvc2l0aW9uZXIuXG4gICAgICogQHBhcmFtICB7TnVtYmVyfFN0cmluZ30gW3NldHRpbmdzLnRvdGFsXVxuICAgICAqICAgICAgICAgVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgZXhwZWN0ZWQuXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBbc2V0dGluZ3MubGF5b3V0XVxuICAgICAqICAgICAgICAgVGhlIGxheW91dCB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHBvc2l0aW9uIHRoZSB0b2tlbnMuXG4gICAgICogQHBhcmFtICB7Qm9vbGVhbn0gW3NldHRpbmdzLmdlbmVyYXRlID0gdHJ1ZV1cbiAgICAgKiAgICAgICAgIFdoZXRoZXIgb3Igbm90IHRvIHJlLWdlbmVyYXRlIHRoZSBjby1vcmRpbmF0ZXMuXG4gICAgICogQHRocm93cyB7UmVmZXJlbmNlRXJyb3J9XG4gICAgICogICAgICAgICB7QGxpbmsgUGFkI3Bvc2l0aW9uZXJ9IG11c3QgYmUgc2V0IGJlZm9yZSB0aGlzIGZ1bmN0aW9uIGlzIHVzZWQuXG4gICAgICovXG4gICAgdXBkYXRlUG9zaXRpb25lcih7IGNvbnRhaW5lciwgdG9rZW5zLCB0b3RhbCwgbGF5b3V0LCBnZW5lcmF0ZSA9IHRydWUgfSkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHBvc2l0aW9uZXJcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFwb3NpdGlvbmVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJUaGUgcG9zaXRpb25lciBoYXMgbm90IGJlZW4gc2V0XCIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgICAgICAgcG9zaXRpb25lci5zZXRDb250YWluZXJTaXplKHRoaXMuZ2V0UGFkRGltZW5zaW9ucygpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0b2tlbnMpIHtcbiAgICAgICAgICAgIHBvc2l0aW9uZXIuc2V0VG9rZW5TaXplKHRoaXMuZ2V0VG9rZW5EaW1lbnNpb25zKCkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGxheW91dCkge1xuICAgICAgICAgICAgcG9zaXRpb25lci5zZXRMYXlvdXQobGF5b3V0KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0b3RhbCAmJiBpc051bWVyaWModG90YWwpKSB7XG4gICAgICAgICAgICBwb3NpdGlvbmVyLnNldFRvdGFsKHRvdGFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChnZW5lcmF0ZSkge1xuICAgICAgICAgICAgdGhpcy5nZW5lcmF0ZUNvb3JkcygpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbn1cbiIsImltcG9ydCB7XG4gICAgdGltZXNcbn0gZnJvbSBcIi4uL3V0aWxzL251bWJlcnMuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9zaXRpb25lciB7XG5cbiAgICAvKipcbiAgICAgKiBBIGNvbGxlY3Rpb24gb2YgbGF5b3V0IG1ldGhvZHMgdGhhdCB3b3JrIG91dCB0aGUgY28tb3JkaW5hdGVzIGZvciB0b2tlbnMuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICBzdGF0aWMgbGF5b3V0cyA9IHtcblxuICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNjk3MjQzNFxuICAgICAgICBlbGxpcHNlKGRhdGEpIHtcblxuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgICAgICB0b2tlbldpZHRoLFxuICAgICAgICAgICAgICAgIHRva2VuSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHRvdGFsXG4gICAgICAgICAgICB9ID0gZGF0YTtcbiAgICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gW107XG4gICAgICAgICAgICBjb25zdCByYWRpdXNYID0gKHdpZHRoIC0gdG9rZW5XaWR0aCkgLyAyO1xuICAgICAgICAgICAgY29uc3QgcmFkaXVzWSA9IChoZWlnaHQgLSB0b2tlbkhlaWdodCkgLyAyO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBkcChyYWRpYW5zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydCggKHJhZGl1c1ggKiBNYXRoLnNpbihyYWRpYW5zKSkgKiogMiArIChyYWRpdXNZICogTWF0aC5jb3MocmFkaWFucykpICoqIDIgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBwcmVjaXNpb24gPSAwLjAwMTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBNYXRoLlBJICogLTAuNTtcbiAgICAgICAgICAgIHZhciBjaXJjID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIHJhZGlhbnMgPSAwICsgb2Zmc2V0OyByYWRpYW5zIDwgKE1hdGguUEkgKiAyICsgb2Zmc2V0KTsgcmFkaWFucyArPSBwcmVjaXNpb24pIHtcbiAgICAgICAgICAgICAgICBjaXJjICs9IGRwKHJhZGlhbnMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIG5leHRQb2ludCA9IDA7XG4gICAgICAgICAgICB2YXIgcnVuID0gMDtcbiAgICAgICAgICAgIGZvciAodmFyIHJhZGlhbnMgPSAwICsgb2Zmc2V0OyByYWRpYW5zIDwgKE1hdGguUEkgKiAyICsgb2Zmc2V0KTsgcmFkaWFucyArPSBwcmVjaXNpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAoKHRvdGFsICogcnVuIC8gY2lyYykgPj0gbmV4dFBvaW50KSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHRQb2ludCsrO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnRYID0gcmFkaXVzWCArIChNYXRoLmNvcyhyYWRpYW5zKSAqIHJhZGl1c1gpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnRZID0gcmFkaXVzWSArIChNYXRoLnNpbihyYWRpYW5zKSAqIHJhZGl1c1kpO1xuICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlcy5wdXNoKFtwb2ludFgsIHBvaW50WV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBydW4gKz0gZHAocmFkaWFucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjb29yZGluYXRlcztcblxuICAgICAgICB9LFxuXG4gICAgICAgIGRpYWdvbmFsKGRhdGEpIHtcblxuICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgIHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodCxcbiAgICAgICAgICAgICAgICB0b2tlbldpZHRoLFxuICAgICAgICAgICAgICAgIHRva2VuSGVpZ2h0LFxuICAgICAgICAgICAgICAgIHRvdGFsXG4gICAgICAgICAgICB9ID0gZGF0YTtcbiAgICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gW107XG4gICAgICAgICAgICBjb25zdCB4SW5jcmVtZW50ID0gKHdpZHRoIC0gdG9rZW5XaWR0aCkgLyB0b3RhbDtcbiAgICAgICAgICAgIGNvbnN0IHlJbmNyZW1lbnQgPSAoaGVpZ2h0IC0gdG9rZW5IZWlnaHQpIC8gdG90YWw7XG5cbiAgICAgICAgICAgIHRpbWVzKHRvdGFsLCAoaW5kZXgpID0+IHtcbiAgICAgICAgICAgICAgICBjb29yZGluYXRlc1tpbmRleF0gPSBbeEluY3JlbWVudCAqIGluZGV4LCB5SW5jcmVtZW50ICogaW5kZXhdO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBjb29yZGluYXRlcztcblxuICAgICAgICB9LFxuXG4gICAgICAgIGhvcml6b250YWwoZGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIFBvc2l0aW9uZXIubGF5b3V0cy5kaWFnb25hbChkYXRhKS5tYXAoKFt4LCB5XSkgPT4gW3gsIDBdKTtcbiAgICAgICAgfSxcblxuICAgICAgICB2ZXJ0aWNhbChkYXRhKSB7XG4gICAgICAgICAgICByZXR1cm4gUG9zaXRpb25lci5sYXlvdXRzLmRpYWdvbmFsKGRhdGEpLm1hcCgoW3gsIHldKSA9PiBbMCwgeV0pO1xuICAgICAgICB9XG5cbiAgICB9O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICAgICAgdGhpcy5zZXREZWZhdWx0cygpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZGVmYXVsdCB2YWx1ZXMgZm9yIHZhcmlvdXMgcGFydHMuXG4gICAgICovXG4gICAgc2V0RGVmYXVsdHMoKSB7XG5cbiAgICAgICAgY29uc3QgdG9wTGVmdCA9IHtcbiAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgaGVpZ2h0OiAwXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zZXRDb250YWluZXJTaXplKHRvcExlZnQpO1xuICAgICAgICB0aGlzLnNldFRva2VuU2l6ZSh0b3BMZWZ0KTtcbiAgICAgICAgdGhpcy5zZXRUb3RhbCgwKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIGNvbnRhaW5lciBzaXplLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNpemVcbiAgICAgKiAgICAgICAgQ29udGFpbmVyIHNpemUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBzaXplLndpZHRoXG4gICAgICogICAgICAgIFdpZHRoIG9mIHRoZSBjb250YWluZXIsIGluIHBpeGVscy5cbiAgICAgKiBAcGFyYW0ge051bWJlcnxTdHJpbmd9IHNpemUuaGVpZ2h0XG4gICAgICogICAgICAgIEhlaWdodCBvZiB0aGUgY29udGFpbmVyLCBpbiBwaXhlbHMuXG4gICAgICovXG4gICAgc2V0Q29udGFpbmVyU2l6ZSh7IHdpZHRoLCBoZWlnaHQgfSkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgd2lkdGggb2YgdGhlIGNvbnRhaW5lciwgaW4gcGl4ZWxzLlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy53aWR0aCA9IE51bWJlcih3aWR0aCkgfHwgMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGhlaWdodCBvZiB0aGUgY29udGFpbmVyLCBpbiBwaXhlbHMuXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmhlaWdodCA9IE51bWJlcihoZWlnaHQpIHx8IDA7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0b2tlbiBzaXplLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHNpemVcbiAgICAgKiAgICAgICAgVG9rZW4gc2l6ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcnxTdHJpbmd9IHNpemUud2lkdGhcbiAgICAgKiAgICAgICAgV2lkdGggb2YgdGhlIHRva2VuLCBpbiBwaXhlbHMuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfSBzaXplLmhlaWdodFxuICAgICAqICAgICAgICBIZWlnaHQgb2YgdGhlIHRva2VuLCBpbiBwaXhlbHMuXG4gICAgICovXG4gICAgc2V0VG9rZW5TaXplKHsgd2lkdGgsIGhlaWdodCB9KSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB3aWR0aCBvZiB0aGUgdG9rZW5zLCBpbiBwaXhlbHMuXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRva2VuV2lkdGggPSBOdW1iZXIod2lkdGgpIHx8IDA7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBoZWlnaHQgb2YgdGhlIHRva2VucywgaW4gcGl4ZWxzLlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50b2tlbkhlaWdodCA9IE51bWJlcihoZWlnaHQpIHx8IDA7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ8U3RyaW5nfVxuICAgICAqICAgICAgICBUaGUgdG90YWwgbnVtYmVyIG9mIGV4cGVjdGVkIHRva2Vucy5cbiAgICAgKi9cbiAgICBzZXRUb3RhbCh0b3RhbCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIGV4cGVjdGVkIHRva2Vucy5cbiAgICAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudG90YWwgPSBOdW1iZXIodG90YWwpIHx8IDA7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBsYXlvdXQgdGhhdCB3aWxsIGJlIHVzZWQgdG8gd29yayBvdXQgdGhlIGNvLW9yZGluYXRlcyBvZiB0aGVcbiAgICAgKiB0b2tlbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbGF5b3V0XG4gICAgICogICAgICAgIFRoZSBsYXlvdXQgdGhhdCBzaG91bGQgYmUgdXNlZC5cbiAgICAgKi9cbiAgICBzZXRMYXlvdXQobGF5b3V0KSB7XG4gICAgICAgIHRoaXMubGF5b3V0ID0gbGF5b3V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGRhdGEgbmVlZGVkIHRvIHdvcmsgb3V0IHRoZSBjby1vcmRpbmF0ZXMgZm9yIHRoZSB0b2tlbnMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBEYXRhIG5lZWRlZCB0byB3b3JrIG91dCB0aGUgY28tb3JkaW5hdGVzLlxuICAgICAqL1xuICAgIGdldERhdGEoKSB7XG5cbiAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgICAgICAgICAgd2lkdGg6IHRoaXMud2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQ6IHRoaXMuaGVpZ2h0LFxuICAgICAgICAgICAgdG9rZW5XaWR0aDogdGhpcy50b2tlbldpZHRoLFxuICAgICAgICAgICAgdG9rZW5IZWlnaHQ6IHRoaXMudG9rZW5IZWlnaHQsXG4gICAgICAgICAgICB0b3RhbDogdGhpcy50b3RhbFxuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdlbmVyYXRlcyB0aGUgY28tb3JkaW5hdGVzIGZvciB0aGUgdG9rZW5zLlxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXkuPEFycmF5Pn1cbiAgICAgKiAgICAgICAgIENvLW9yZGluYXRlcyBmb3IgdGhlIHRva2Vucy5cbiAgICAgKiBAdGhyb3dzIHtSZWZlcmVuY2VFcnJvcn1cbiAgICAgKiAgICAgICAgIHtAbGluayBQb3NpdGlvbmVyI2xheW91dH0gc2hvdWxkIGJlIGEga2V5IGluXG4gICAgICogICAgICAgICB7QGxpbmsgUG9zaXRpb25lci5sYXlvdXRzfS5cbiAgICAgKi9cbiAgICBnZW5lcmF0ZUNvb3JkcygpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcjoge1xuICAgICAgICAgICAgICAgIGxheW91dHNcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYXlvdXRcbiAgICAgICAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IG1ldGhvZCA9IGxheW91dHNbbGF5b3V0XTtcblxuICAgICAgICBpZiAoIW1ldGhvZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKGBVbnJlY29nbmlzZWQgbGF5b3V0IHR5cGUgXCIke2xheW91dH1cImApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG1ldGhvZCh0aGlzLmdldERhdGEoKSk7XG5cbiAgICB9XG5cbn1cbiIsIi8qKlxuICogQSBsaXN0IG9mIHByb2Nlc3NlcyB0aGF0IGNhbiBiZSBleGVjdXRlZC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvY2Vzc0xpc3Qge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiBhbGwgdGhlIHByb2Nlc3NlcyBpbiB0aGUgbGlzdC5cbiAgICAgICAgICogQHR5cGUge0FycmF5LjxPYmplY3Q+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saXN0ID0gW107XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGl0ZW0gdG8ge0BsaW5rIFByb2Nlc3NMaXN0I2xpc3R9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW1cbiAgICAgKiAgICAgICAgSXRlbSB0byBhZGQuXG4gICAgICovXG4gICAgYWRkKGl0ZW0pIHtcbiAgICAgICAgdGhpcy5saXN0LnB1c2goaXRlbSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgZ2l2ZW4gaXRlbSBpcyBhbHJlYWR5IGluIHtAbGluayBQcm9jZXNzTGlzdCNsaXN0fS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gaXRlbVxuICAgICAqICAgICAgICAgT2JqZWN0IHRvIGxvb2sgZm9yLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICAgICAgICB0cnVlIGlmIHRoZSBpdGVtIGlzIGFscmVhZHkgaW4gdGhlIGxpc3QsIGZhbHNlIG90aGVyd2lzZS5cbiAgICAgKi9cbiAgICBoYXMoaXRlbSkge1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0LmluY2x1ZGVzKGl0ZW0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYW4gaXRlbSB0byB7QGxpbmsgUHJvY2Vzc0xpc3QjbGlzdH0gYnV0IG9ubHkgaWYgaXQncyBub3QgYWxyZWFkeVxuICAgICAqIHRoZXJlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGl0ZW1cbiAgICAgKiAgICAgICAgSXRlbSB0byBhZGQuXG4gICAgICovXG4gICAgYWRkVW5pcXVlKGl0ZW0pIHtcblxuICAgICAgICBpZiAoIXRoaXMuaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICB0aGlzLmFkZChpdGVtKTtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbiBpdGVtIGZyb20ge0BsaW5rIFByb2Nlc3NMaXN0I2xpc3R9LiBJZiB0aGUgaXRlbSBpcyBub3QgaW4gdGhlXG4gICAgICogbGlzdCB0aGVuIG5vIGFjdGlvbiBpcyB0YWtlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpdGVtXG4gICAgICogICAgICAgIEl0ZW0gdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIHJlbW92ZShpdGVtKSB7XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmxpc3QuaW5kZXhPZihpdGVtKTtcblxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5saXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGxhc3QgaXRlbSBmcm9tIHtAbGluayBQcm9jZXNzTGlzdCNsaXN0fS4gSWYgdGhlcmUgaXMgbm90aGluZyBpblxuICAgICAqIHRoZSBsaXN0IHRoZW4gdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAgICAgKiAgICAgICAgIEVpdGhlciB0aGUgbGFzdCBpdGVtIGluIHRoZSBsaXN0IG9yIHVuZGVmaW5lZC5cbiAgICAgKi9cbiAgICBsYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5saXN0W3RoaXMubGlzdC5sZW5ndGggLSAxXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gbWV0aG9kIG9uIHRoZSBnaXZlbiBwcm9jZXNzLiBJZiB0aGUgcHJvY2VzcyBkb2Vzbid0XG4gICAgICogZXhpc3Qgb3IgdGhlIGdpdmVuIG1ldGhvZCBuYW1lIGlzbid0IGEgZnVuY3Rpb24gdGhlbiBubyBhY3Rpb24gaXMgdGFrZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvY2Vzc1xuICAgICAqICAgICAgICBUaGUgcHJvY2VzcyB3aG9zZSBtZXRob2Qgc2hvdWxkIGJlIGV4ZWN1dGVkLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtZXRob2RcbiAgICAgKiAgICAgICAgVGhlIG5hbWUgb2YgdGhlIG1ldGhvZCB0byBleGVjdXRlLlxuICAgICAqIEBwYXJhbSB7Li4uP30gYXJnc1xuICAgICAqICAgICAgICBBcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgbWV0aG9kLlxuICAgICAqL1xuICAgIHN0YXRpYyBleGVjdXRlKHByb2Nlc3MsIG1ldGhvZCwgLi4uYXJncykge1xuXG4gICAgICAgIGlmICh0eXBlb2YgcHJvY2Vzcz8uW21ldGhvZF0gPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgcHJvY2Vzc1ttZXRob2RdKC4uLmFyZ3MpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbn1cbiIsImltcG9ydCBUb2tlbiBmcm9tIFwiLi9Ub2tlbi5qc1wiO1xuaW1wb3J0IFRlbXBsYXRlIGZyb20gXCIuL1RlbXBsYXRlLmpzXCI7XG5cbi8qKlxuICogQSB2ZXJzaW9uIG9mIHtAbGluayBUb2tlbn0gZm9yIHJlbWluZGVyIHRva2Vucy5cbiAqIEBleHRlbmRzIFRva2VuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbWluZGVyVG9rZW4gZXh0ZW5kcyBUb2tlbiB7XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0ZW1wbGF0ZXMgdGhhdCB3aWxsIGJlIGFjY2VzcyB3aGVuIGRyYXdpbmcgdmlld3MuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdGVtcGxhdGVzXG4gICAgICogICAgICAgIEEgbWFwIG9mIGtleXMgdG8ge0BsaW5rIFRlbXBsYXRlfSBpbnN0YW5jZXMuXG4gICAgICovXG4gICAgc3RhdGljIHNldFRlbXBsYXRlcyh0ZW1wbGF0ZXMpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRlbXBsYXRlcyB0aGF0IGFsbCBpbnN0YW5jZXMgd2lsbCBhY2Nlc3MuXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRlbXBsYXRlcyA9IHRlbXBsYXRlcztcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgY29sbGVjdGlvbiBvZiBhbGwgZ2xvYmFsIHJlbWluZGVycyAtIHJlbWluZGVycyB0aGF0IGFyZW4ndCBhdHRhY2hlZCB0b1xuICAgICAqIGFueSBjaGFyYWN0ZXIgYnV0IG1pZ2h0IHN0aWxsIGJlIHVzZWZ1bCBmb3IgcGxheS5cbiAgICAgKiBAdHlwZSB7QXJyYXkuPFJlbWluZGVyVG9rZW4+fVxuICAgICAqL1xuICAgIHN0YXRpYyBnbG9iYWwgPSBbXTtcblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSByZW1pbmRlciB0byB7QGxpbmsgUmVtaW5kZXJUb2tlbi5nbG9iYWx9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSZW1pbmRlclRva2VufSByZW1pbmRlclxuICAgICAqICAgICAgICBHbG9iYWwgcmVtaW5kZXIgdG8gYWRkLlxuICAgICAqL1xuICAgIHN0YXRpYyBhZGRHbG9iYWwocmVtaW5kZXIpIHtcbiAgICAgICAgdGhpcy5nbG9iYWwucHVzaChyZW1pbmRlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlcyB7QGxpbmsgUmVtaW5kZXJUb2tlbi5nbG9iYWx9LlxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXkuPFJlbWluZGVyVG9rZW4+fVxuICAgICAqICAgICAgICAgQWxsIGdsb2JhbCByZW1pbmRlcnMuXG4gICAgICovXG4gICAgc3RhdGljIGdldEdsb2JhbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2xvYmFsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0RG9jXG4gICAgICovXG4gICAgcHJvY2Vzc0RhdGEoZGF0YSkge1xuXG4gICAgICAgIC8vIFByb3ZpZGUgc29tZSBkZWZhdWx0IHZhbHVlcyBzbyB0aGF0IC5nZXQoKSBtZXRob2RzIGRvbid0IHdvcnJ5IGFib3V0XG4gICAgICAgIC8vIG1pc3NpbmcgZGF0YSBhbmQgaW5zdGVhZCB3b3JyeSBhYm91dCB0eXBvcy5cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQ6IFwiXCIsXG4gICAgICAgICAgICB0ZXh0OiBcIlwiLFxuICAgICAgICAgICAgaW1hZ2U6IFwiXCIsXG4gICAgICAgICAgICBjaGFyYWN0ZXJJZDogXCJcIixcbiAgICAgICAgICAgIGNoYXJhY3Rlck5hbWU6IFwiXCIsXG4gICAgICAgICAgICBpc0dsb2JhbDogZmFsc2UsXG4gICAgICAgICAgICAuLi5kYXRhXG4gICAgICAgIH07XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEcmF3cyB0aGUgcmVtaW5kZXIgdG9rZW4uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICAgICAqICAgICAgICAgUG9wdWxhdGVkIHRva2VuLlxuICAgICAqL1xuICAgIGRyYXdUb2tlbigpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBpbWFnZSxcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICBjaGFyYWN0ZXJOYW1lXG4gICAgICAgIH0gPSB0aGlzLmRhdGE7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY29uc3RydWN0b3IudGVtcGxhdGVzLnRva2VuLmRyYXcoe1xuICAgICAgICAgICAgXCIuanMtLXJlbWluZGVyLS1uYW1lXCIoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBjaGFyYWN0ZXJOYW1lO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiLmpzLS1yZW1pbmRlci0tdGV4dFwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gdGV4dDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIi5qcy0tcmVtaW5kZXItLWltYWdlXCIoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3JjID0gaW1hZ2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRHJhd3MgdGhlIHJlbWluZGVyIGxpc3QgaXRlbS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gICAgICogICAgICAgICBQb3B1bGF0ZWQgcmVtaW5kZXIgbGlzdCBpdGVtLlxuICAgICAqL1xuICAgIGRyYXdMaXN0KCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgaXNHbG9iYWxcbiAgICAgICAgfSA9IHRoaXMuZGF0YTtcblxuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci50ZW1wbGF0ZXMubGlzdC5kcmF3KHtcbiAgICAgICAgICAgIFwiLmpzLS1yZW1pbmRlci1saXN0LS1pdGVtLC5qcy0tcmVtaW5kZXItbGlzdC0tYnV0dG9uXCIoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YXNldC5yZW1pbmRlcklkID0gaWQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIuanMtLXJlbWluZGVyLWxpc3QtLWl0ZW1cIihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtZ2xvYmFsXCIsIGlzR2xvYmFsKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIi5qcy0tcmVtaW5kZXItbGlzdC0tYnV0dG9uXCI6IChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQodGhpcy5kcmF3VG9rZW4oKSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIuanMtLXJlbWluZGVyLWxpc3QtLWNoZWNrYm94XCIoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQudmFsdWUgPSBpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cblxufVxuIiwiaW1wb3J0IERpYWxvZyBmcm9tIFwiLi9EaWFsb2cuanNcIjtcbmltcG9ydCBQcm9jZXNzTGlzdCBmcm9tIFwiLi9Qcm9jZXNzTGlzdC5qc1wiO1xuaW1wb3J0IHtcbiAgICBsb29rdXBPbmVDYWNoZWRcbn0gZnJvbSBcIi4uL3V0aWxzL2VsZW1lbnRzLmpzXCI7XG5cbi8qKlxuICogQSB2ZXJzaW9uIG9mIHtAbGluayBEaWFsb2d9IHRoYXQgaGFuZGxlcyB0aGUgXCJTZWxlY3QgY2hhcmFjdGVyXCIgZGlhbG9nLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTZWxlY3REaWFsb2cgZXh0ZW5kcyBEaWFsb2cge1xuXG4gICAgLyoqXG4gICAgICogQGluaGVyaXRkb2NcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkaWFsb2cpIHtcblxuICAgICAgICBzdXBlcihkaWFsb2cpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgYWxsIHRoZSBwcm9jZXNzZXMgdGhhdCB0aGlzIGRpYWxvZyBtaWdodCBoYW5kbGUuXG4gICAgICAgICAqIEB0eXBlIHtQcm9jZXNzTGlzdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJvY2Vzc0xpc3QgPSBuZXcgUHJvY2Vzc0xpc3QoKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBwcm9jZXNzIHRvIHtAbGluayBTZWxlY3REaWFsb2cjcHJvY2Vzc0xpc3R9IC0gc2VlXG4gICAgICoge0BsaW5rIFByb2Nlc3NMaXN0I2FkZFVuaXF1ZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvY2Vzc1xuICAgICAqICAgICAgICBQcm9jZXNzIHRvIGFkZC5cbiAgICAgKi9cbiAgICBhZGRQcm9jZXNzKHByb2Nlc3MpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzTGlzdC5hZGRVbmlxdWUocHJvY2Vzcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIGEgcHJvY2VzcyBmcm9tIHtAbGluayBTZWxlY3REaWFsb2cjcHJvY2Vzc0xpc3R9IC0gc2VlXG4gICAgICoge0BsaW5rIFByb2Nlc3NMaXN0I3JlbW92ZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvY2Vzc1xuICAgICAqICAgICAgICBQcm9jZXNzIHRvIHJlbW92ZS5cbiAgICAgKi9cbiAgICByZW1vdmVQcm9jZXNzKHByb2Nlc3MpIHtcbiAgICAgICAgdGhpcy5wcm9jZXNzTGlzdC5yZW1vdmUocHJvY2Vzcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGluaGVyaXRkb2NcbiAgICAgKi9cbiAgICBhZGRMaXN0ZW5lcnMoKSB7XG5cbiAgICAgICAgc3VwZXIuYWRkTGlzdGVuZXJzKCk7XG5cbiAgICAgICAgdGhpcy5kaWFsb2cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KFwiW2RhdGEtdG9rZW4taWRdXCIpO1xuXG4gICAgICAgICAgICBpZiAoIWJ1dHRvbikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgUHJvY2Vzc0xpc3QuZXhlY3V0ZShcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NMaXN0Lmxhc3QoKSxcbiAgICAgICAgICAgICAgICBcImNsaWNrXCIsXG4gICAgICAgICAgICAgICAgYnV0dG9uLmRhdGFzZXQudG9rZW5JZFxuICAgICAgICAgICAgKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLm9uKHRoaXMuY29uc3RydWN0b3IuSElERSwgKCkgPT4ge1xuICAgICAgICAgICAgUHJvY2Vzc0xpc3QuZXhlY3V0ZSh0aGlzLnByb2Nlc3NMaXN0Lmxhc3QoKSwgXCJoaWRlXCIpO1xuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBjYWNoZWQgaW5zdGFuY2Ugb2Yge0BsaW5rIFNlbGVjdERpYWxvZ30sIGFsbG93aW5nIGl0IHRvIGFjdCBsaWtlIGFcbiAgICAgKiBzaW5nbGV0b24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtTZWxlY3REaWFsb2d9XG4gICAgICogICAgICAgICBBbiBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGUobG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1saXN0XCIpKTtcbiAgICB9XG5cbn1cbiIsIi8qKlxuICogTWFuYWdlcyBhIHRpdGxlIHRoYXQgY2FuIGJlIHNldC5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2V0dGFibGVUaXRsZSB7XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gdGl0bGVcbiAgICAgKiAgICAgICAgIFRoZSB0aXRsZSBlbGVtZW50IHRoYXQgd2lsbCBkaXNwbGF5IG5vcm1hbGx5IGRpc3BsYXllZC5cbiAgICAgKiBAcGFyYW0gIHtIVE1MRWxlbWVudH0gaW5wdXRcbiAgICAgKiAgICAgICAgIFRoZSBpbnB1dCBlbGVtZW50IHRoYXQgd2lsbCBhbGxvdyB0aGUgdGl0bGUgdG8gYmUgc2V0LlxuICAgICAqIEB0aHJvd3Mge0Vycm9yfVxuICAgICAqICAgICAgICAgYHRpdGxlYCBhbmQgYGlucHV0YCBtdXN0IGV4aXN0IGFuZCBgaW5wdXRgIG11c3QgaGF2ZSBhIGBsaXN0YC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0aXRsZSwgaW5wdXQpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHRpdGxlIGVsZW1lbnQgdGhhdCB3aWxsIGRpc3BsYXkgbm9ybWFsbHkgZGlzcGxheWVkLlxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnRpdGxlID0gdGl0bGU7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBpbnB1dCBlbGVtZW50IHRoYXQgd2lsbCBhbGxvdyB0aGUgdGl0bGUgdG8gYmUgc2V0LlxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBkYXRhIGxpc3QgZm9yIHtAbGluayBTZXR0YWJsZVRpdGxlI2lucHV0fS5cbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saXN0ID0gaW5wdXQubGlzdDtcblxuICAgICAgICBpZiAoIXRoaXMudGl0bGUgfHwgIXRoaXMuaW5wdXQgfHwgIXRoaXMubGlzdCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiU2V0dGFibGUgdGl0bGUgbm90IHByb3Blcmx5IGNvbmZpZ3VyZWRcIik7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGZvcm0gdGhhdCBlbndyYXBzIHtAbGluayBTZXR0YWJsZVRpdGxlI2lucHV0fS4gVGhpcyBlbGVtZW50IG1pZ2h0XG4gICAgICAgICAqIG5vdCBleGlzdC5cbiAgICAgICAgICogQHR5cGUge0hUTUxFbGVtZW50fG51bGx9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZvcm0gPSBpbnB1dC5mb3JtO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3B0aW9uIHdpdGhpbiB7QGxpbmsgU2V0dGFibGVUaXRsZSNsaXN0fSB0aGF0IGRpc3BsYXlzIHRoZVxuICAgICAgICAgKiBvcmlnaW5hbCwgc3RhcnRpbmcgdmFsdWUgb2YgdGhlIHRpdGxlLlxuICAgICAgICAgKiBAdHlwZSB7SFRNTEVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnN0YXJ0ID0gdGhpcy5saXN0LnF1ZXJ5U2VsZWN0b3IoXCIuanMtLXNldHRhYmxlLXRpdGxlLS1zdGFydFwiKTtcbiAgICAgICAgdGhpcy5zdGFydC52YWx1ZSA9IHRpdGxlLnRleHRDb250ZW50O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb3B0aW9uIHdpdGhpbiB7QGxpbmsgU2V0dGFibGVUaXRsZSNsaXN0fSB0aGF0IGRpc3BsYXlzIHRoZVxuICAgICAgICAgKiB2YWx1ZSB0aGF0IHRoZSB1c2VyIG1vc3QgcmVjZW50bHkgaW5wdXR0ZWQuXG4gICAgICAgICAqIEB0eXBlIHtIVE1MRWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucHJldmlvdXMgPSB0aGlzLmxpc3QucXVlcnlTZWxlY3RvcihcIi5qcy0tc2V0dGFibGUtdGl0bGUtLXByZXZpb3VzXCIpO1xuXG4gICAgICAgIHRoaXMuYWRkTGlzdGVuZXJzKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGV2ZW50IGxpc3RlbmVycyB0byBrZXkgZWxlbWVudHMuXG4gICAgICovXG4gICAgYWRkTGlzdGVuZXJzKCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBmb3JtXG4gICAgICAgIH0gPSB0aGlzO1xuXG4gICAgICAgIHRpdGxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cbiAgICAgICAgICAgIHRoaXMuc2hvd0lucHV0KCk7XG4gICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCAoKSA9PiB7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJibHVyXCIsICgpID0+IHtcblxuICAgICAgICAgICAgdGhpcy5oaWRlSW5wdXQoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJldmlvdXMoKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuXG4gICAgICAgICAgICB0aGlzLnNldFRpdGxlKGlucHV0LnZhbHVlKTtcbiAgICAgICAgICAgIHRoaXMuYW5ub3VuY2VVcGRhdGUoKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICBmb3JtPy5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG5cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBpbnB1dC5ibHVyKCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIHtAbGluayBTZXR0YWJsZVRpdGxlI2lucHV0fSBpcyBjdXJyZW50bHkgdmlzaWJsZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICAgICAgICBgdHJ1ZWAgaWYge0BsaW5rIFNldHRhYmxlVGl0bGUjaW5wdXR9IGlzIGN1cnJlbnRseSB2aXNpYmxlLFxuICAgICAqICAgICAgICAgYGZhbHNlYCBvdGhlcndpc2UuXG4gICAgICovXG4gICAgaXNTaG93aW5nSW5wdXQoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pbnB1dC5oaWRkZW47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgdmlzaWJpbGl0eSBvZiB7QGxpbmsgU2V0dGFibGVUaXRsZSNpbnB1dH0gKGFuZCwgYnkgZXh0ZW5zaW9uLFxuICAgICAqIHtAbGluayBTZXR0YWJsZVRpdGxlI3RpdGxlfSkuIE9wdGlvbmFsbHksIHRoZSB2aXNpYmlsaXR5IHN0YXRlIGNhbiBiZVxuICAgICAqIGZvcmNlZCBieSBwYXNzaW5nIGEgYm9vbGVhbiB0byB0aGlzIGZ1bmN0aW9uLiBJZiB0aGlzIGZ1bmN0aW9uIGF0dGVtcHRzXG4gICAgICogdG8gc2V0IHRoZSB2aXNpYmlsaXR5IHN0YXRlIHRvIHRoZSBzYW1lIGFzIHRoZSBjdXJyZW50IHN0YXRlLCBubyBhY3Rpb25cbiAgICAgKiBpcyB0YWtlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2ZvcmNlU3RhdGVdXG4gICAgICogICAgICAgIE9wdGlvbmFsIHN0YXRlIHRvIGZvcmNlLiBJZiBvbW1pdHRlZCwgdGhlIHZpc2liaWxpdHkgaXMgc2ltcGx5XG4gICAgICogICAgICAgIHRvZ2dsZWQuXG4gICAgICovXG4gICAgdG9nZ2xlSW5wdXQoZm9yY2VTdGF0ZSkge1xuXG4gICAgICAgIGlmIChmb3JjZVN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGZvcmNlU3RhdGUgPSAhdGhpcy5pc1Nob3dpbmdJbnB1dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGZvcmNlU3RhdGUgPT09IHRoaXMuaXNTaG93aW5nSW5wdXQoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgdGl0bGUsXG4gICAgICAgICAgICBpbnB1dFxuICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICB0aXRsZS5oaWRkZW4gPSBmb3JjZVN0YXRlO1xuICAgICAgICBpbnB1dC5oaWRkZW4gPSAhZm9yY2VTdGF0ZTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEEgaGVscGVyIGZ1bmN0aW9uIHRoYXQgbWFrZXMgdGhlIGlucHV0IHZpc2libGUuIFNlZVxuICAgICAqIHtAbGluayBTZXR0YWJsZVRpdGxlI3RvZ2dsZUlucHV0fS5cbiAgICAgKi9cbiAgICBzaG93SW5wdXQoKSB7XG4gICAgICAgIHRoaXMudG9nZ2xlSW5wdXQodHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBoZWxwZXIgZnVuY3Rpb24gdGhhdCBtYWtlcyB0aGUgaW5wdXQgaW52aXNpYmxlLiBTZWVcbiAgICAgKiB7QGxpbmsgU2V0dGFibGVUaXRsZSN0b2dnbGVJbnB1dH0uXG4gICAgICovXG4gICAgaGlkZUlucHV0KCkge1xuICAgICAgICB0aGlzLnRvZ2dsZUlucHV0KGZhbHNlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSB2YWx1ZSBvZiB7QGxpbmsgU2V0dGFibGVUaXRsZSNwcmV2aW91c30gaWYgaXQgZXhpc3RzIGFuZCB0aGVcbiAgICAgKiB2YWx1ZSBpcyBub3QgZW1wdHkuXG4gICAgICovXG4gICAgdXBkYXRlUHJldmlvdXMoKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW5wdXQsXG4gICAgICAgICAgICBwcmV2aW91c1xuICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICBpZiAocHJldmlvdXMgJiYgaW5wdXQudmFsdWUpIHtcbiAgICAgICAgICAgIHByZXZpb3VzLnZhbHVlID0gaW5wdXQudmFsdWU7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHRleHQgb2Yge0BsaW5rIFNldHRhYmxlVGl0bGUjdGl0bGV9IHRvIHRoZSBnaXZlbiB0aXRsZS4gSWYgdGhlXG4gICAgICogZ2l2ZW4gdGl0bGUgaXMgZW1wdHksIHRoZSB2YWx1ZSByZXR1cm5lZCBieVxuICAgICAqIHtAbGluayBTZXR0YWJsZVRpdGxlI2dldFN0YXJ0VGV4dH0gaXMgdXNlZCBpbnN0ZWFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHRpdGxlXG4gICAgICogICAgICAgIFRpdGxlIHRvIHNldC5cbiAgICAgKi9cbiAgICBzZXRUaXRsZSh0aXRsZSkge1xuICAgICAgICB0aGlzLnRpdGxlLnRleHRDb250ZW50ID0gdGl0bGUgfHwgdGhpcy5nZXRTdGFydFRleHQoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHBvc2VzIHRoZSBjdXJyZW50IHRleHQgb2Yge0BsaW5rIFNldHRhYmxlVGl0bGUjdGl0bGV9LlxuICAgICAqXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqICAgICAgICAgQ3VycmVudCB0ZXh0IG9mIHtAbGluayBTZXR0YWJsZVRpdGxlI3RpdGxlfS5cbiAgICAgKi9cbiAgICBnZXRUaXRsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGl0bGUudGV4dENvbnRlbnQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlcyB7QGxpbmsgU2V0dGFibGVUaXRsZSNmb3JtfS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0hUTUxFbGVtZW50fG51bGx9XG4gICAgICogICAgICAgICBGb3JtIGVsZW1lbnQuXG4gICAgICovXG4gICAgZ2V0Rm9ybSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB0ZXh0IG9mIHtAbGluayBTZXR0YWJsZVRpdGxlI3N0YXJ0fS4gSWYgdGhhdCBlbGVtZW50IGRvZXNuJ3RcbiAgICAgKiBleGlzdCB0aGVuIG5vIGFjdGlvbiBpcyB0YWtlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gICAgICogICAgICAgIFN0YXJ0aW5nIHRleHQuXG4gICAgICovXG4gICAgc2V0U3RhcnRUZXh0KHRleHQpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBzdGFydFxuICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICBpZiAoc3RhcnQpIHtcbiAgICAgICAgICAgIHN0YXJ0LnZhbHVlID0gdGV4dDtcbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdGV4dCBvZiB7QGxpbmsgU2V0dGFibGVUaXRsZSNzdGFydH0uIElmIHRoYXQgdGV4dCBjYW5ub3QgYmVcbiAgICAgKiB3b3JrZWQgb3V0LCBhbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogICAgICAgICBTdGFydGluZyB0ZXh0LlxuICAgICAqL1xuICAgIGdldFN0YXJ0VGV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnQ/LnZhbHVlIHx8IFwiXCI7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiB0aGF0J3MgZXhlY3V0ZWQgd2hlbmV2ZXIgdGhlIHZhbHVlIG9mXG4gICAgICoge0BsaW5rIFNldHRhYmxlVGl0bGUjaW5wdXR9IGlzIHVwZGF0ZWQuXG4gICAgICovXG4gICAgYW5ub3VuY2VVcGRhdGUoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbn1cbiIsImltcG9ydCBUb2tlbiBmcm9tIFwiLi9Ub2tlbi5qc1wiO1xuaW1wb3J0IENoYXJhY3RlclRva2VuIGZyb20gXCIuL0NoYXJhY3RlclRva2VuLmpzXCI7XG5pbXBvcnQgSW5mb1Rva2VuIGZyb20gXCIuL0luZm9Ub2tlbi5qc1wiO1xuaW1wb3J0IE9ic2VydmVyIGZyb20gXCIuL09ic2VydmVyLmpzXCI7XG5pbXBvcnQge1xuICAgIGRlZXBDbG9uZSxcbiAgICBkZWVwRnJlZXplXG59IGZyb20gXCIuLi91dGlscy9vYmplY3RzLmpzXCI7XG5pbXBvcnQge1xuICAgIGxvb2t1cFxufSBmcm9tIFwiLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcblxuLyoqXG4gKiBTdG9yZXMgZGF0YSBpbiBsb2NhbFN0b3JhZ2Ugc28gaXQgY2FuIGJlIHF1aWNrbHkgcmV0cmlldmVkLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9yZSB7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgZGVmYXVsdCwgZW1wdHkgaW5mb3JtYXRpb24gZnJvbSBsb2NhbFN0b3JhZ2UuXG4gICAgICogQHR5cGUge09iamVjdH1cbiAgICAgKi9cbiAgICBzdGF0aWMgZGVmYXVsdHMgPSB7XG4gICAgICAgIGxvb2t1cDoge30sXG4gICAgICAgIGNoYXJhY3RlcnM6IHt9LFxuICAgICAgICBibHVmZnM6IHt9LFxuICAgICAgICB0b2tlbnM6IFtdLFxuICAgICAgICBpbnB1dHM6IHt9LFxuICAgICAgICBkZXRhaWxzOiB7fSxcbiAgICAgICAgaW5mb1Rva2VuczogW10sXG4gICAgICAgIG5hbWVzOiBbXSxcbiAgICAgICAgaGVpZ2h0OiBcIlwiLFxuICAgICAgICB2ZXJzaW9uOiBcIlwiLFxuICAgICAgICB1c2VyOiBcIlwiXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEEgY2FjaGUgb2YgYW55IGluc3RhbmNlcyBjcmVhdGVkLlxuICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICovXG4gICAgc3RhdGljIGNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFN0b3JlfSBhbmQgc3RvcmVzIGl0IGluIHtAbGluayBTdG9yZS5jYWNoZX1cbiAgICAgKiBzbyB0aGF0IGl0IGNhbiBiZSByZXRyaWV2ZWQgbGF0ZXIuIElmIGFuIGluc3RhbmNlIGFscmVhZHkgZXhpc3RzIGZvciB0aGVcbiAgICAgKiBnaXZlbiBrZXksIGl0J3MgcmV0dXJuZWQgaW50ZWFkIG9mIGJlYWluZyBjcmVhdGVkIGFuZXcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGtleVxuICAgICAqICAgICAgICAgU3RvcmFnZSBrZXkuXG4gICAgICogQHJldHVybiB7U3RvcmV9XG4gICAgICogICAgICAgICBTdG9yZSBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlKGtleSkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNhY2hlXG4gICAgICAgIH0gPSB0aGlzO1xuXG4gICAgICAgIGlmICghY2FjaGVba2V5XSkge1xuICAgICAgICAgICAgY2FjaGVba2V5XSA9IG5ldyB0aGlzKGtleSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2FjaGVba2V5XTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZSBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgU3RvcmV9LiBUaGUga2V5IGlzIHRoZSBrZXkgdXNlZCBmb3JcbiAgICAgKiBsb2NhbFN0b3JhZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAgICogICAgICAgIFN0b3JhZ2Uga2V5LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGtleSkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTdG9yYWdlIGtleS5cbiAgICAgICAgICogQHR5cGUge1N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMua2V5ID0ga2V5O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgc3RvcmVkIGRhdGEuXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLnJlYWQoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWxsIHRoZSB0b2tlbiBlbGVtZW50cyB0aGF0IGFyZSBiZWluZyByZW1lbWJlcmVkLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXkuPEVsZW1lbnQ+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50b2tlbnMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGluZm8gdG9rZW5zIHRoYXQgaGF2ZSBiZWVuIGFkZGVkLlxuICAgICAgICAgKiBAdHlwZSB7QXJyYXkuPFN0cmluZz59XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmluZm9Ub2tlbnMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gb2JzZXJ2ZXIgdGhhdCB3b3JrcyBiZWhpbmQtdGhlLXNjZW5lcyB0byBhbGxvdyBvdGhlciBjb2RlIHRvXG4gICAgICAgICAqIGxpc3RlbiB0byBjaGFuZ2VzIGluIHRoZSBzdG9yZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIgPSBuZXcgT2JzZXJ2ZXIoKTtcblxuICAgIH1cblxuICAgIGFkZExpc3RlbmVyKGxpc3RlbmVyKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2ZXIub24oXCJ3cml0dGVuXCIsIGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcml0ZXMge0BsaW5rIFN0b3JlI2RhdGF9IHRvIGxvY2FsU3RvcmFnZS5cbiAgICAgKi9cbiAgICB3cml0ZSgpIHtcbiAgICAgICAgd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMua2V5LCBKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKTtcbiAgICAgICAgdGhpcy5vYnNlcnZlci50cmlnZ2VyKFwid3JpdHRlblwiLCB0aGlzLmdldCgpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZGF0YSBmcm9tIGxvY2FsU3RvcmFnZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge09iamVjdH1cbiAgICAgKiAgICAgICAgIFRoZSBzdG9yZWQgZGF0YS5cbiAgICAgKi9cbiAgICByZWFkKCkge1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5kZWVwQ2xvbmUodGhpcy5jb25zdHJ1Y3Rvci5kZWZhdWx0cyksXG4gICAgICAgICAgICAuLi4oSlNPTi5wYXJzZSh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5rZXkpKSB8fCB7fSlcbiAgICAgICAgfTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIGluZm9ybWF0aW9uIGZvciB0aGUgZ2l2ZW4ga2V5IGZyb20ge0BsaW5rIFN0b3JlI2RhdGF9LFxuICAgICAqIHNldHRpbmcgdGhhdCBrZXkgYmFjayB0byBpdHMgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICAgKiAgICAgICAgS2V5IGZvciB0aGUgZGF0YSB0byByZW1vdmUuXG4gICAgICovXG4gICAgZGVsZXRlKGtleSkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGRlZmF1bHRzXG4gICAgICAgIH0gPSB0aGlzLmNvbnN0cnVjdG9yO1xuXG4gICAgICAgIGlmICghT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRlZmF1bHRzLCBrZXkpKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRhdGFba2V5XSA9IGRlZXBDbG9uZShkZWZhdWx0c1trZXldKTtcblxuICAgICAgICBpZiAoa2V5ID09PSBcInRva2Vuc1wiKSB7XG5cbiAgICAgICAgICAgIHRoaXMudG9rZW5zLmxlbmd0aCA9IDA7XG4gICAgICAgICAgICB0aGlzLmRhdGEuYmx1ZmZzID0gZGVlcENsb25lKGRlZmF1bHRzLmJsdWZmcyk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChrZXkgPT09IFwiaW5mb190b2tlbnNcIikge1xuICAgICAgICAgICAgdGhpcy5pbmZvVG9rZW5zLmxlbmd0aCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLndyaXRlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXN0b3JlcyBhbGwgdGhlIGRhdGEgaW4ge0BsaW5rIFN0b3JlI2RhdGF9IHRvIGl0cyBkZWZhdWx0IHZhbHVlLlxuICAgICAqL1xuICAgIGRlbGV0ZUFsbCgpIHtcblxuICAgICAgICBPYmplY3RcbiAgICAgICAgICAgIC5rZXlzKHRoaXMuY29uc3RydWN0b3IuZGVmYXVsdHMpXG4gICAgICAgICAgICAuZm9yRWFjaCgoa2V5KSA9PiB0aGlzLmRlbGV0ZShrZXkpKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBjb3B5IG9mIHtAbGluayBTdG9yZSNkYXRhfSB0aGF0IGNhbid0IGJlIG1vZGlmaWVkLlxuICAgICAqXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqICAgICAgICAgVGhlIHN0b3JlZCBkYXRhLlxuICAgICAqL1xuICAgIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIGRlZXBGcmVlemUoZGVlcENsb25lKHRoaXMuZGF0YSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIHJlc3VsdHMgZnJvbSBhIGxvb2t1cC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gdXJsXG4gICAgICogICAgICAgICBVUkwgZm9yIHRoZSBsb29rdXAuXG4gICAgICogQHJldHVybiB7P31cbiAgICAgKiAgICAgICAgIFRoZSBkYXRhIGZyb20gdGhlIFVSTC5cbiAgICAgKi9cbiAgICBnZXRMb29rdXAodXJsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubG9va3VwW3VybF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2F2ZXMgdGhlIGdpdmVuIHJlc3VsdHMgZm9yIHRoZSBnaXZlbiBsb29rdXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdXJsXG4gICAgICogICAgICAgIFVSTCB0aGF0IGZldGNoZXMgaW5mb3JtYXRpb24uXG4gICAgICogQHBhcmFtIHs/fSByZXN1bHRzXG4gICAgICogICAgICAgIFJlc3VsdHMgZnJvbSB0aGUgbG9va3VwLlxuICAgICAqL1xuICAgIHNldExvb2t1cCh1cmwsIHJlc3VsdHMpIHtcblxuICAgICAgICB0aGlzLmRhdGEubG9va3VwW3VybF0gPSByZXN1bHRzO1xuICAgICAgICB0aGlzLndyaXRlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9yZXMgdGhlIGNoYXJhY3RlciBsaXN0IGFuZCB0aGUgbmFtZSBvZiB0aGUgc2NyaXB0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd8dW5kZWZpbmVkfSBuYW1lXG4gICAgICogICAgICAgIE5hbWUgb2YgdGhlIHNjcmlwdCwgd2hpY2ggbWF5IGJlIGJsYW5rLlxuICAgICAqIEBwYXJhbSB7QXJyYXkuPFN0cmluZz59IGNoYXJhY3RlcnNcbiAgICAgKiAgICAgICAgQXJyYXkgb2YgYWxsIHRoZSBjaGFyYWN0ZXIgSURzIHRoYXQgYXJlIGluIHRoaXMgc2NyaXB0LlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfG51bGx9IGdhbWVcbiAgICAgKiAgICAgICAgVGhlIElEIG9mIHRoZSBob21lYnJldyBnYW1lIGJlaW5nIHVzZWQuIFRoaXMgd2lsbCBiZSBudWxsIGZvciBhbnlcbiAgICAgKiAgICAgICAgZ2FtZSB0aGF0IG9ubHkgY29uc2lzdHMgb2YgcmVjb2duaXNlZCBjaGFyYWN0ZXJzLlxuICAgICAqL1xuICAgIHNldENoYXJhY3RlcnMobmFtZSwgY2hhcmFjdGVycywgZ2FtZSkge1xuXG4gICAgICAgIGNvbnN0IGRhdGEgPSB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJzXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgIGRhdGEubmFtZSA9IG5hbWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZ2FtZSkge1xuICAgICAgICAgICAgZGF0YS5nYW1lID0gZ2FtZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGF0YS5jaGFyYWN0ZXJzID0gZGF0YTtcbiAgICAgICAgdGhpcy53cml0ZSgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHRva2VuIHRvIHRoZSBzdG9yZSBzbyBpdCdzIGV4aXN0ZW5jZSBjYW4gYmUgcmVtZW1iZXJlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VG9rZW59IHRva2VuXG4gICAgICogICAgICAgIFRva2VuIHRvIGFkZC5cbiAgICAgKi9cbiAgICBhZGRUb2tlbih0b2tlbikge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICB0b2tlbnNcbiAgICAgICAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdG9rZW5zLmxlbmd0aDtcblxuICAgICAgICB0b2tlbnMucHVzaCh0b2tlbik7XG4gICAgICAgIGRhdGEudG9rZW5zW2luZGV4XSA9IHtcbiAgICAgICAgICAgIGlkOiB0b2tlbi5nZXRJZCgpXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMud3JpdGUoKTtcblxuICAgICAgICByZXR1cm4gaW5kZXg7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSB0b2tlbiBzbyBpdCdzIG5vIGxvbmdlciByZW1lbWJlcmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUb2tlbn0gdG9rZW5cbiAgICAgKiAgICAgICAgVG9rZW4gdG8gc3RvcCByZW1lbWJlcmluZy5cbiAgICAgKi9cbiAgICByZW1vdmVUb2tlbih0b2tlbikge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICB0b2tlbnNcbiAgICAgICAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdG9rZW5zLmluZGV4T2YodG9rZW4pO1xuXG4gICAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGRhdGEudG9rZW5zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIHRva2Vucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB0aGlzLndyaXRlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdG9yZXMgdGhlIGxvY2F0aW9uIG9mIHRoZSBnaXZlbiB0b2tlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VG9rZW59IHRva2VuXG4gICAgICogICAgICAgIFRva2VuIHdob3NlIHBvc2l0aW9uIHNob3VsZCBiZSBzdG9yZWQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxlZnRcbiAgICAgKiAgICAgICAgVGhlIFggcG9zaXRpb24gb2YgdGhlIHRva2VuLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0b3BcbiAgICAgKiAgICAgICAgVGhlIFkgcG9zaXRpb24gb2YgdGhlIHRva2VuLlxuICAgICAqIEBwYXJhbSB7TnVtYmVyfSB6SW5kZXhcbiAgICAgKiAgICAgICAgVGhlIFogcG9zaXRpb24gb2YgdGhlIHRva2VuLlxuICAgICAqL1xuICAgIG1vdmVUb2tlbih0b2tlbiwgbGVmdCwgdG9wLCB6SW5kZXgpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgdG9rZW5zXG4gICAgICAgIH0gPSB0aGlzO1xuICAgICAgICBsZXQgaW5kZXggPSB0b2tlbnMuaW5kZXhPZih0b2tlbik7XG5cbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgaW5kZXggPSB0aGlzLmFkZFRva2VuKHRva2VuKTtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5hc3NpZ24oZGF0YS50b2tlbnNbaW5kZXhdLCB7XG4gICAgICAgICAgICBsZWZ0LFxuICAgICAgICAgICAgdG9wLFxuICAgICAgICAgICAgekluZGV4XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLndyaXRlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBaIHBvc2l0aW9uIG9mIHRoZSBnaXZlbiB0b2tlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VG9rZW59IHRva2VuXG4gICAgICogICAgICAgIFRva2VuIHdob3NlIFogcG9zaXRpb24gc2hvdWxkIGJlIHVwZGF0ZWQuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IHpJbmRleFxuICAgICAqICAgICAgICBUaGUgWiBwb3NpdGlvbmcgb2YgdGhlIHRva2VuLlxuICAgICAqL1xuICAgIGFsaWduVG9rZW4odG9rZW4sIHpJbmRleCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGRhdGEsXG4gICAgICAgICAgICB0b2tlbnNcbiAgICAgICAgfSA9IHRoaXM7XG4gICAgICAgIGxldCBpbmRleCA9IHRva2Vucy5pbmRleE9mKHRva2VuKTtcblxuICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuYWRkVG9rZW4odG9rZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YS50b2tlbnNbaW5kZXhdLnpJbmRleCA9IHpJbmRleDtcbiAgICAgICAgdGhpcy53cml0ZSgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyB0aGUgXCJkZWFkXCIgc3RhdGUgb2YgdGhlIGdpdmVuIGNoYXJhY3Rlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Q2hhcmFjdGVyVG9rZW59IHRva2VuXG4gICAgICogICAgICAgIENoYXJhY3RlciB3aG9zZSBkZWFkIHN0YXRlIHNob3VsZCBiZSB1cGRhdGVkIGluIHRoZSBzdG9yZS5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzRGVhZFxuICAgICAqICAgICAgICBUaGUgZGVhZCBzdGF0ZSB0byBzdG9yZS5cbiAgICAgKi9cbiAgICB0b2dnbGVEZWFkKHRva2VuLCBpc0RlYWQpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgdG9rZW5zXG4gICAgICAgIH0gPSB0aGlzO1xuICAgICAgICBsZXQgaW5kZXggPSB0b2tlbnMuaW5kZXhPZih0b2tlbik7XG5cbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YS50b2tlbnNbaW5kZXhdLmlzRGVhZCA9IGlzRGVhZDtcblxuICAgICAgICBpZiAoaXNEZWFkKSB7XG4gICAgICAgICAgICB0aGlzLnNldEdob3N0Vm90ZSh0b2tlbiwgdHJ1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlKCk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRvZ2dsZXMgdGhlIFwidXBzaWRlLWRvd25cIiBzdGF0ZSBvZiB0aGUgZ2l2ZW4gY2hhcmFjdGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtDaGFyYWN0ZXJUb2tlbn0gdG9rZW5cbiAgICAgKiAgICAgICAgQ2hhcmFjdGVyIHdob3NlIHVwc2lkZS1kb3duIHN0YXRlIHNob3VsZCBiZSB1cGRhdGVkIGluIHRoZSBzdG9yZS5cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IGlzRGVhZFxuICAgICAqICAgICAgICBUaGUgdXBzaWRlLWRvd24gc3RhdGUgdG8gc3RvcmUuXG4gICAgICovXG4gICAgcm90YXRlKHRva2VuLCBpc1Vwc2lkZURvd24pIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgdG9rZW5zXG4gICAgICAgIH0gPSB0aGlzO1xuICAgICAgICBsZXQgaW5kZXggPSB0b2tlbnMuaW5kZXhPZih0b2tlbik7XG5cbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YS50b2tlbnNbaW5kZXhdLmlzVXBzaWRlRG93biA9IGlzVXBzaWRlRG93bjtcbiAgICAgICAgdGhpcy53cml0ZSgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcGxheWVyIG5hbWUgZm9yIHRoZSBnaXZlbiBjaGFyYWN0ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NoYXJhY3RlclRva2VufSB0b2tlblxuICAgICAqICAgICAgICBDaGFyYWN0ZXIgd2hvc2UgcGxheWVyIG5hbWUgc2hvdWxkIGJlIHVwZGF0ZWQgaW4gdGhlIHN0b3JlLlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAgICogICAgICAgIFRoZSBwbGF5ZXIgbmFtZSBvZiB0aGlzIGNoYXJhY3Rlci5cbiAgICAgKi9cbiAgICBzZXRQbGF5ZXJOYW1lKHRva2VuLCBuYW1lKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgZGF0YSxcbiAgICAgICAgICAgIHRva2Vuc1xuICAgICAgICB9ID0gdGhpcztcbiAgICAgICAgY29uc3QgaW5kZXggPSB0b2tlbnMuaW5kZXhPZih0b2tlbik7XG5cbiAgICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZGF0YS50b2tlbnNbaW5kZXhdLnBsYXllck5hbWUgPSBuYW1lO1xuXG4gICAgICAgIGlmICghZGF0YS5uYW1lcy5pbmNsdWRlcyhuYW1lKSkge1xuICAgICAgICAgICAgZGF0YS5uYW1lcy5wdXNoKG5hbWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy53cml0ZSgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB3aGV0aGVyIG9yIG5vdCB0aGUgZ2l2ZW4gY2hhcmFjdGVyIGhhcyBhIGdob3N0IHZvdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0NoYXJhY3RlclRva2VufSB0b2tlblxuICAgICAqICAgICAgICBDaGFyYWN0ZXIgd2hvc2UgZ2hvc3Qgdm90ZSBzaG91bGQgYmUgdXBkYXRlZCBpbiB0aGUgc3RvcmUuXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBoYXNHaG9zdFZvdGVcbiAgICAgKiAgICAgICAgVGhlIGdob3N0IHZvdGUgc3RhdGUgdG8gc3RvcmUuXG4gICAgICovXG4gICAgc2V0R2hvc3RWb3RlKHRva2VuLCBoYXNHaG9zdFZvdGUpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBkYXRhLFxuICAgICAgICAgICAgdG9rZW5zXG4gICAgICAgIH0gPSB0aGlzO1xuICAgICAgICBjb25zdCBpbmRleCA9IHRva2Vucy5pbmRleE9mKHRva2VuKTtcblxuICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhLnRva2Vuc1tpbmRleF0uZ2hvc3RWb3RlID0gaGFzR2hvc3RWb3RlO1xuICAgICAgICB0aGlzLndyaXRlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlcyB0aGUgc3RhdGUgb2YgdGhlIGdpdmVuIGlucHV0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBpbnB1dFxuICAgICAqICAgICAgICBJbnB1dCBlbGVtZW50IHdob3NlIHZhbHVlIG9yIGNoZWNrZWQgc3RhdGUgc2hvdWxkIGJlIHNhdmVkLlxuICAgICAqL1xuICAgIHNhdmVJbnB1dChpbnB1dCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBmb3JtLFxuICAgICAgICAgICAgdHlwZSxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgY2hlY2tlZCxcbiAgICAgICAgICAgIG5vZGVOYW1lXG4gICAgICAgIH0gPSAoaW5wdXQgfHwge30pO1xuXG4gICAgICAgIGlmICghbmFtZSB8fCB0eXBlID09PSBcImZpbGVcIikge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IHNlbGVjdG9yID0gYCR7bm9kZU5hbWUudG9Mb3dlckNhc2UoKX1bbmFtZT1cIiR7bmFtZX1cIl1gO1xuICAgICAgICBjb25zdCBpc0NoZWNrYm94ID0gdHlwZSA9PT0gXCJjaGVja2JveFwiO1xuXG4gICAgICAgIGlmIChpc0NoZWNrYm94ICYmIGlucHV0Lmhhc0F0dHJpYnV0ZShcInZhbHVlXCIpKSB7XG4gICAgICAgICAgICBzZWxlY3RvciArPSBgW3ZhbHVlPVwiJHt2YWx1ZX1cIl1gO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgZm9ybUlkID0gZm9ybT8uaWQ7XG4gICAgICAgIGlmIChmb3JtSWQpIHtcbiAgICAgICAgICAgIHNlbGVjdG9yID0gYCMke2Zvcm1JZH0gJHtzZWxlY3Rvcn1gO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kYXRhLmlucHV0c1tzZWxlY3Rvcl0gPSAoXG4gICAgICAgICAgICBpc0NoZWNrYm94XG4gICAgICAgICAgICA/IGNoZWNrZWRcbiAgICAgICAgICAgIDogdmFsdWVcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy53cml0ZSgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgaW5wdXRzIGZyb20gdGhlIGRhdGEgdGhhdCBkb24ndCBleGlzdC4gVGhpcyBjYW4gYmUgdXNlZnVsIGZvclxuICAgICAqIHRpbWVzIHdoZW4gYSBsb3Qgb2YgaW5wdXRzIGhhdmUgYmVlbiByZW1vdmVkLCBzdWNoIGFzIHdoZW4gdGhlIGxpc3Qgb2ZcbiAgICAgKiBjaGFyYWN0ZXJzIGhhcyBjaGFuZ2VkLlxuICAgICAqL1xuICAgIHJlbW92ZVN0YWxlSW5wdXRzKCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGRhdGFcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgZGF0YS5pbnB1dHMgPSBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAgICAgICBPYmplY3RcbiAgICAgICAgICAgICAgICAuZW50cmllcyhkYXRhLmlucHV0cylcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChbc2VsZWN0b3JdKSA9PiBsb29rdXAoc2VsZWN0b3IpLmxlbmd0aClcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy53cml0ZSgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2F2ZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIG9wZW4vY2xvc2VkIHN0YXRlIG9mIHRoZSBnaXZlbiBkZXRhaWxzXG4gICAgICogZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZGV0YWlsc1xuICAgICAqICAgICAgICBUaGUgZGV0YWlscyBlbGVtZW50IHdob3NlIG9wZW4vY2xvc2VkIHN0YXRlIHNob3VsZCBiZSBzYXZlZC5cbiAgICAgKi9cbiAgICBzYXZlRGV0YWlscyhkZXRhaWxzKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBvcGVuXG4gICAgICAgIH0gPSBkZXRhaWxzIHx8IHt9O1xuXG4gICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGF0YS5kZXRhaWxzW2AjJHtpZH1gXSA9IG9wZW47XG4gICAgICAgIHRoaXMud3JpdGUoKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBjdXN0b20gaW5mbyB0b2tlbiB0byB0aGUgZGF0YS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SW5mb1Rva2VufSBpbmZvVG9rZW5cbiAgICAgKiAgICAgICAgVGhlIGN1c3RvbSBpbmZvIHRva2VuIHRvIHNhdmUuXG4gICAgICovXG4gICAgc2F2ZUluZm9Ub2tlbihpbmZvVG9rZW4sIGluZGV4KSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW5mb1Rva2VucyxcbiAgICAgICAgICAgIGRhdGFcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKGluZm9Ub2tlbnMuaW5jbHVkZXMoaW5mb1Rva2VuKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBpbmRleCA9PT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgaW5mb1Rva2Vuc1tpbmRleF0gPSBpbmZvVG9rZW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpbmZvVG9rZW5zLnB1c2goaW5mb1Rva2VuKTtcbiAgICAgICAgICAgIGRhdGEuaW5mb1Rva2Vucy5wdXNoKGluZm9Ub2tlbi5nZXRSYXcoKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLndyaXRlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBzdG9yZWQgZGF0YSBmb3IgdGhlIGdpdmVuIGluZm8gdG9rZW4uIElmIHRoZSBpbmZvIHRva2VuIGlzXG4gICAgICogbm90IHJlY29nbmlzZWQsIG5vIGFjdGlvbiBpcyB0YWtlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SW5mb1Rva2VufSBpbmZvVG9rZW5cbiAgICAgKiAgICAgICAgSW5mbyB0b2tlbiB3aG9zZSBkYXRhIHNob3VsZCBiZSB1cGRhdGVkLlxuICAgICAqL1xuICAgIHVwZGF0ZUluZm9Ub2tlbihpbmZvVG9rZW4pIHtcblxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuaW5mb1Rva2Vucy5pbmRleE9mKGluZm9Ub2tlbik7XG5cbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcblxuICAgICAgICAgICAgdGhpcy5kYXRhLmluZm9Ub2tlbnNbaW5kZXhdID0gaW5mb1Rva2VuLmdldFJhdygpO1xuICAgICAgICAgICAgdGhpcy53cml0ZSgpO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgdGhlIGdpdmVuIGluZm8gdG9rZW4gZnJvbSB0aGUgc3RvcmVkIGRhdGEuIElmIHRoZSBpbmZvIHRva2VuIGlzXG4gICAgICogbm90IHJlY29nbmlzZWQgdGhlbiBubyBhY3Rpb24gaXMgdGFrZW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0luZm9Ub2tlbn0gaW5mb1Rva2VuXG4gICAgICogICAgICAgIEluZm8gdG9rZW4gdG8gYmUgcmVtb3ZlZC5cbiAgICAgKi9cbiAgICByZW1vdmVJbmZvVG9rZW4oaW5mb1Rva2VuKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaW5mb1Rva2VucyxcbiAgICAgICAgICAgIGRhdGFcbiAgICAgICAgfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gaW5mb1Rva2Vucy5pbmRleE9mKGluZm9Ub2tlbik7XG5cbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcblxuICAgICAgICAgICAgaW5mb1Rva2Vucy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgZGF0YS5pbmZvVG9rZW5zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICB0aGlzLndyaXRlKCk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2F2ZXMgdGhlIGhlaWdodCBvZiB0aGUgcGFkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGhlaWdodFxuICAgICAqICAgICAgICBIZWlnaHQgb2YgdGhlIHBhZCwgaW4gcGl4ZWxzLlxuICAgICAqL1xuICAgIHNldEhlaWdodChoZWlnaHQpIHtcblxuICAgICAgICB0aGlzLmRhdGEuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICB0aGlzLndyaXRlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlcyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgYmx1ZmZzXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gYmx1ZmZzXG4gICAgICogICAgICAgIFRoZSBzZXJpYWxpc2VkIGRhdGEgYWJvdXQgdGhlIGJsdWZmcy4gU2VlXG4gICAgICogICAgICAgIHtAbGluayBCbHVmZnNHcm91cCNzZXJpYWxpc2V9LlxuICAgICAqL1xuICAgIHNldEJsdWZmcyhibHVmZnMpIHtcblxuICAgICAgICB0aGlzLmRhdGEuYmx1ZmZzID0gYmx1ZmZzO1xuICAgICAgICB0aGlzLndyaXRlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTYXZlcyB0aGUgY3VycmVudCB2ZXJzaW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHZlcnNpb25cbiAgICAgKiAgICAgICAgVGhlIHZlcnNpb24gbnVtYmVyLCBpbiBzZW12ZXIuXG4gICAgICovXG4gICAgc2V0VmVyc2lvbih2ZXJzaW9uKSB7XG5cbiAgICAgICAgdGhpcy5kYXRhLnZlcnNpb24gPSB2ZXJzaW9uO1xuICAgICAgICB0aGlzLndyaXRlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHBvc2VzIHRoZSBjdXJyZW50bHkgc2F2ZWQgdmVyc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICAgKiAgICAgICAgIFRoZSBzYXZlZCB2ZXJzaW9uIG51bWJlciwgaW4gc2VtdmVyLlxuICAgICAqL1xuICAgIGdldFZlcnNpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEudmVyc2lvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSB1c2VyIElELiBJIHVzZSB0aGlzIHRvIHdhdGNoIHNlc3Npb25zIGFuZCBkZWJ1ZyBhbnkgZXJyb3JzLiBJdFxuICAgICAqIHNob3VsZCBiZSB1bmlxdWUgYW5kIGNvbnRhaW4gbm8gaWRlbnRpZmlhYmxlIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHVzZXJcbiAgICAgKiAgICAgICAgQSBzdHJpbmcgaWRlbnRpZnlpbmcgdGhlIHVzZXIuXG4gICAgICovXG4gICAgc2V0VXNlcih1c2VyKSB7XG5cbiAgICAgICAgdGhpcy5kYXRhLnVzZXIgPSB1c2VyO1xuICAgICAgICB0aGlzLndyaXRlKCk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSB1c2VyIElELlxuICAgICAqXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqICAgICAgICAgQSBzdHJpbmcgaWRlbnRpZnlpbmcgdGhlIHVzZXIuXG4gICAgICovXG4gICAgZ2V0VXNlcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGF0YS51c2VyO1xuICAgIH1cblxufVxuIiwiaW1wb3J0IHtcbiAgICBsb29rdXAsXG4gICAgaWRlbnRpZnlcbn0gZnJvbSBcIi4uL3V0aWxzL2VsZW1lbnRzLmpzXCI7XG5cbi8qKlxuICogQSBjbGFzcyB0aGF0IGhlbHBzIHdvcmsgd2l0aCB0ZW1wbGF0ZXMuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRlbXBsYXRlIHtcblxuICAgIC8qKlxuICAgICAqIEEgY2FjaGUgb2YgdGhlIHRlbXBsYXRlIElEcyB0byB7QGxpbmsgVGVtcGxhdGV9IGluc3RhbmNlcy5cbiAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAqL1xuICAgIHN0YXRpYyBjYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAvKipcbiAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgVGVtcGxhdGV9IGJ1dCBhbHNvIHNhdmVzIGl0XG4gICAgICogaW4ge0BsaW5rIFRlbXBsYXRlLmNhY2hlfSBzbyB0aGF0IGl0IGNhbiBiZSBhY2Nlc3NlZCBhZ2Fpbi4gSWYgdGhlXG4gICAgICogaW5zdGFuY2UgYWxyZWFkeSBleGlzdHMsIGl0IGlzIHJldHVybmVkIGluc3RlYWQgb2YgYmVpbmcgcmUtY3JlYXRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge0VsZW1lbnR9IHRlbXBsYXRlXG4gICAgICogICAgICAgICBUZW1wbGF0ZSBlbGVtZW50IHRoYXQgdGhlIGluc3RhbmNlIHNob3VsZCBoZWxwIHdvcmsgd2l0aC5cbiAgICAgKiBAcmV0dXJuIHtUZW1wbGF0ZX1cbiAgICAgKiAgICAgICAgIFRlbXBsYXRlIGluc3RhbmNlLlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUodGVtcGxhdGUpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjYWNoZVxuICAgICAgICB9ID0gdGhpcztcbiAgICAgICAgY29uc3Qga2V5ID0gaWRlbnRpZnkodGVtcGxhdGUpO1xuXG4gICAgICAgIGlmICghY2FjaGVba2V5XSkge1xuICAgICAgICAgICAgY2FjaGVba2V5XSA9IG5ldyB0aGlzKHRlbXBsYXRlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBjYWNoZVtrZXldO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSB0ZW1wbGF0ZVxuICAgICAqICAgICAgICBUZW1wbGF0ZSBlbGVtZW50LlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRlbXBsYXRlIGVsZW1lbnQuXG4gICAgICAgICAqIEB0eXBlIHtFbGVtZW50fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2xvbmVzIHRoZSBjb250ZW50cyBpbiB7QGxpbmsgVGVtcGxhdGUjdGVtcGxhdGV9IGFuZCBwb3B1bGF0ZXMgaXQgYmFzZWRcbiAgICAgKiBvbiB0aGUgaW5mb3JtYXRpb24gZ2l2ZW4uXG4gICAgICpcbiAgICAgKiBUaGUgcG9wdWxhdGlvbiBpcyBhbiBhcnJheSBvZiBhcnJheXMuIEVhY2ggaW5uZXIgYXJyYXkgaGFzIDIgb3IgMyBpdGVtczpcbiAgICAgKiAwOiBBIENTUyBzZWxlY3RvciBpZGVudGlmeWluZyB0aGUgcGFydHMgb2YgdGhlIHRlbXBsYXRlIHRvIHBvcHVsYXRlLlxuICAgICAqIDE6IFRoZSBjb250ZW50cyB0aGF0IHNob3VsZCBiZSBhZGRlZCB0byBhbnl0aGluZyBtYXRjaGluZyB0aGUgc2VsZWN0b3IuXG4gICAgICogMjogQSBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBlbGVtZW50IGFuZCBjb250ZW50IGFuZCBkZXNjcmliZXMgaG93IHRvXG4gICAgICogICAgcG9wdWxhdGUgdGhhdCBjb250ZW50LiBJZiBvbW1pdHRlZCwge0BsaW5rIFRlbXBsYXRlLnNldFRleHR9IGlzIHVzZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IHBvcHVsYXRlc1xuICAgICAqICAgICAgICAgQW4gb2JqZWN0IG9mIHNlbGVjdG9ycyB0byB0aGUgZnVuY3Rpb25zIHRoYXQgd2lsbCBwb3B1bGF0ZSB0aGVcbiAgICAgKiAgICAgICAgIG1hdGNoaW5nIGVsZW1lbnRzLlxuICAgICAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gICAgICogICAgICAgICBUaGUgcG9wdWxhdGVkIHRlbXBsYXRlLlxuICAgICAqL1xuICAgIGRyYXcocG9wdWxhdGVzKSB7XG5cbiAgICAgICAgY29uc3QgY2xvbmUgPSB0aGlzLnRlbXBsYXRlLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKHBvcHVsYXRlcykuZm9yRWFjaCgoW3NlbGVjdG9yLCBwb3B1bGF0ZV0pID0+IHtcbiAgICAgICAgICAgIGxvb2t1cChzZWxlY3RvciwgY2xvbmUpLmZvckVhY2goKGVsZW1lbnQpID0+IHBvcHVsYXRlKGVsZW1lbnQpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGNsb25lO1xuXG4gICAgfVxuXG59XG4iLCIvKipcbiAqIEFuIGFic3RyYWN0IGNsYXNzIGRlc2lnbmVkIGZvciB3b3JraW5nIHdpdGggdGhlIHRva2VuIGRhdGEuIFRoaXMgY2xhc3MgaGFzXG4gKiBtYWdpYyBtZXRob2RzLCBzdGFydGluZyB3aXRoIFwiZ2V0XCIsIHRoYXQgYWNjZXNzIGluZm9ybWF0aW9uIGZyb20gdGhlIGRhdGEuXG4gKiBAYWJzdHJhY3RcbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9rZW4ge1xuXG4gICAgLyoqXG4gICAgICogSGVscGVyIGZ1bmN0aW9uIHRoYXQgY29udmVydHMgYSBwcm9wZXJ0eSBpbnRvIGEgZGF0YSBrZXkuIEZvciBleGFtcGxlLFxuICAgICAqIFwiZ2V0TG9yZW1JcHN1bVwiIGlzIGNvbnZlcnRlZCBpbnRvIFwibG9yZW1JcHN1bVwiLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBwcm9wZXJ0eVxuICAgICAqICAgICAgICAgUHJvcGVydHkgdG8gY29udmVydC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogICAgICAgICBDb252ZXJ0ZWQgcHJvcGVydHkuXG4gICAgICovXG4gICAgc3RhdGljIGNvbnZlcnRQcm9wZXJ0eShwcm9wZXJ0eSkge1xuXG4gICAgICAgIGNvbnN0IGNsaXBwZWQgPSBwcm9wZXJ0eS5yZXBsYWNlKC9eZ2V0LywgXCJcIik7XG5cbiAgICAgICAgcmV0dXJuIGNsaXBwZWQuY2hhckF0KDApLnRvTG93ZXJDYXNlKCkgKyBjbGlwcGVkLnNsaWNlKDEpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgKiAgICAgICAgRGF0YSB0byBhY2Nlc3MuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoZGF0YSkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgZGF0YSB0byBhY2Nlc3MuXG4gICAgICAgICAqIEB0eXBlIHtPYmplY3R9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRhdGEgPSB0aGlzLnByb2Nlc3NEYXRhKGRhdGEpO1xuXG4gICAgICAgIHRoaXMuc2V0dXAoKTtcblxuICAgICAgICBjb25zdCBjb25zdHJ1Y3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh0aGlzLCB7XG5cbiAgICAgICAgICAgIGdldCh0YXJnZXQsIHByb3BlcnR5KSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoIShwcm9wZXJ0eSBpbiB0YXJnZXQpICYmIHByb3BlcnR5LnN0YXJ0c1dpdGgoXCJnZXRcIikpIHtcblxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRbcHJvcGVydHldID0gKCkgPT4gdGFyZ2V0LmdldERhdGEoXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJ1Y3Rvci5jb252ZXJ0UHJvcGVydHkocHJvcGVydHkpXG4gICAgICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0W3Byb3BlcnR5XTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQSBmdW5jdGlvbiBjYWxsZWQgYmVmb3JlIHRoZSBtYWdpYyBtZXRob2RzIGFyZSBjcmVhdGVkLCBhbGxvd2luZ1xuICAgICAqIHN1Yi1jbGFzc2VzIHRvIGFkanVzdCB0aGUgc2V0dXAuXG4gICAgICovXG4gICAgc2V0dXAoKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm9jZXNzZXMgdGhlIGRhdGEuIFRoaXMgbWV0aG9kIG1haW5seSBleGlzdHMgc28gdGhhdCBpdCBjYW4gYmUgZWFzaWx5XG4gICAgICogbW9kaWZpZWQgaW4gc3ViLWNsYXNzZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtPYmplY3R9IGRhdGFcbiAgICAgKiAgICAgICAgIE9yaWdpbmFsIGRhdGEuXG4gICAgICogQHJldHVybiB7T2JqZWN0fVxuICAgICAqICAgICAgICAgUHJvY2Vzc2VkIGRhdGEuXG4gICAgICovXG4gICAgcHJvY2Vzc0RhdGEoZGF0YSkge1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IGluc3RhbmNlIG9mIHtAbGluayBUb2tlbn0gd2l0aCB0aGUgc2FtZSBkYXRhLlxuICAgICAqXG4gICAgICogQHJldHVybiB7VG9rZW59XG4gICAgICogICAgICAgICBBIGNsb25lZCBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB0aGlzLmNvbnN0cnVjdG9yKHRoaXMuZGF0YSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUga2V5IGV4aXN0cyB3aXRoaW4gdGhlIGRhdGEuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGtleVxuICAgICAqICAgICAgICAgS2V5IGZvciB0aGUgZGF0YSB0byBjaGVjayBmb3IuXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICAgKiAgICAgICAgIHRydWUgaWYgdGhlIGRhdGEgaGFzIHRoZSBnaXZlbiBrZXksIGZhbHNlIGlmIGl0IGRvZXNuJ3QuXG4gICAgICovXG4gICAgaGFzRGF0YShrZXkpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmRhdGEsIGtleSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUga2V5IGZyb20ge0BsaW5rIFRlbXBsYXRlI2RhdGF9IGFuZCByZXR1cm5zIHRoZSB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30ga2V5XG4gICAgICogICAgICAgICBLZXkgZm9yIHRoZSBkYXRhIHRvIGFjY2Vzcy5cbiAgICAgKiBAcmV0dXJuIHs/fVxuICAgICAqICAgICAgICAgQ29ycmVzcG9uZGluZyBkYXRhLlxuICAgICAqIEB0aHJvd3Mge1JlZmVyZW5jZUVycm9yfVxuICAgICAqICAgICAgICAgVGhlIGdpdmVuIGtleSBtdXN0IGV4aXN0IGluIHtAbGluayBUb2tlbiNkYXRhfS5cbiAgICAgKi9cbiAgICBnZXREYXRhKGtleSkge1xuXG4gICAgICAgIGlmICghdGhpcy5oYXNEYXRhKGtleSkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihgVW5yZWNvZ25pc2VkIHByb3BlcnR5IFwiJHtrZXl9XCJgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmRhdGFba2V5XTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBjbG9uZSBvZiB7QGxpbmsgVG9rZW4jZGF0YX0sIGFsdGhvdWdoIGFueSBTeW1ib2wgdGhhdCB3YXMgYWRkZWRcbiAgICAgKiB3aWxsIGJlIG1pc3NpbmcuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAgICogICAgICAgICBDbG9uZWQgZGF0YS5cbiAgICAgKi9cbiAgICBnZXRBbGxEYXRhKCkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLmRhdGEpKTtcbiAgICB9XG5cbn1cbiIsImltcG9ydCBEaWFsb2cgZnJvbSBcIi4vRGlhbG9nLmpzXCI7XG5pbXBvcnQgVG9rZW5TdG9yZSBmcm9tIFwiLi9Ub2tlblN0b3JlLmpzXCI7XG5pbXBvcnQgVGVtcGxhdGUgZnJvbSBcIi4vVGVtcGxhdGUuanNcIjtcbmltcG9ydCBDaGFyYWN0ZXJUb2tlbiBmcm9tIFwiLi9DaGFyYWN0ZXJUb2tlbi5qc1wiO1xuaW1wb3J0IFNldHRhYmxlVGl0bGUgZnJvbSBcIi4vU2V0dGFibGVUaXRsZS5qc1wiO1xuaW1wb3J0IERyYWdnYWJsZSBmcm9tIFwiLi9EcmFnZ2FibGUuanNcIjtcbmltcG9ydCB7XG4gICAgZ2V0SW5kZXgsXG4gICAgbG9va3VwT25lLFxuICAgIGxvb2t1cE9uZUNhY2hlZCxcbiAgICByZXBsYWNlQ29udGVudHNNYW55XG59IGZyb20gXCIuLi91dGlscy9lbGVtZW50cy5qc1wiO1xuXG4vKipcbiAqIEEgdmVyc2lvbiBvZiB7QGxpbmsgRGlhbG9nfSB0aGF0IHNob3dzIG9uZSBvciBtb3JlIHRva2VucywgcHJvYmFibHkgdG8gdGhlXG4gKiBwbGF5ZXIuXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRva2VuRGlhbG9nIGV4dGVuZHMgRGlhbG9nIHtcblxuICAgIC8qKlxuICAgICAqIEdldHMgYSBjYWNoZWQgaW5zdGFuY2Ugb2Yge0BsaW5rIFRva2VuRGlhbG9nfSwgYWxsb3dpbmcgaXQgdG8gYWN0IGxpa2UgYVxuICAgICAqIHNpbmdsZXRvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge1Rva2VuRGlhbG9nfVxuICAgICAqICAgICAgICAgQW4gaW5zdGFuY2UuXG4gICAgICovXG4gICAgc3RhdGljIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlKGxvb2t1cE9uZUNhY2hlZChcIiN0b2tlblwiKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGluaGVyaXRkb2NcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihkaWFsb2cpIHtcblxuICAgICAgICBzdXBlcihkaWFsb2cpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdG9rZW4gc3RvcmUgdGhhdCBrZWVwcyBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdG9rZW5zLlxuICAgICAgICAgKiBAdHlwZSB7VG9rZW5TdG9yZX1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudG9rZW5TdG9yZSA9IG51bGw7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB0ZW1wbGF0ZSBmb3Igb25lIHRva2VuLlxuICAgICAgICAgKiBAdHlwZSB7VGVtcGxhdGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmVudHJ5VGVtcGxhdGUgPSBudWxsO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGluaGVyaXRkb2NcbiAgICAgKi9cbiAgICBydW4oKSB7XG5cbiAgICAgICAgdGhpcy5zZXRJZHMoW10pO1xuICAgICAgICB0aGlzLmRpc2NvdmVyRWxlbWVudHMoKTtcbiAgICAgICAgdGhpcy5hY3RpdmF0ZVNldHRhYmxlVGl0bGUoKTtcbiAgICAgICAgdGhpcy5hY3RpdmF0ZURyYWdnYWJsZSgpO1xuICAgICAgICBzdXBlci5ydW4oKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBpbmhlcml0ZG9jXG4gICAgICovXG4gICAgYWRkTGlzdGVuZXJzKCkge1xuXG4gICAgICAgIHN1cGVyLmFkZExpc3RlbmVycygpO1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yOiB7XG4gICAgICAgICAgICAgICAgU0hPVyxcbiAgICAgICAgICAgICAgICBISURFXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZGlhbG9nXG4gICAgICAgIH0gPSB0aGlzO1xuXG4gICAgICAgIHRoaXMub24oU0hPVywgKCkgPT4gdGhpcy5kcmF3Q2hhcmFjdGVycygpKTtcbiAgICAgICAgdGhpcy5vbihISURFLCAoKSA9PiB0aGlzLnNldE11bHRpcGxlVGl0bGUoXCJcIikpO1xuXG4gICAgICAgIGRpYWxvZy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKHsgdGFyZ2V0IH0pID0+IHtcblxuICAgICAgICAgICAgY29uc3QgcmVtb3ZlQnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoXCIuanMtLXRva2VuLS1yZW1vdmVcIik7XG4gICAgICAgICAgICBjb25zdCByZW1vdmVJdGVtID0gcmVtb3ZlQnV0dG9uPy5jbG9zZXN0KFwiLmpzLS10b2tlbi0taXRlbVwiKTtcblxuICAgICAgICAgICAgaWYgKHJlbW92ZUl0ZW0pIHtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlSWRCeUluZGV4KGdldEluZGV4KHJlbW92ZUl0ZW0pKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRyYXdDaGFyYWN0ZXJzKCk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc2NvdmVyZWQgZWxlbWVudHMsIHN0b3JpbmcgdGhlbSBvbiB0aGUgaW5zdGFuY2Ugc28gdGhleSBjYW4gYmVcbiAgICAgKiByZWZlcmVuY2VkIGJ5IG90aGVyIG1ldGhvZHMgd2l0aG91dCBoYXZpbmcgdG8gYmUgZm91bmQgYWdhaW4uXG4gICAgICovXG4gICAgZGlzY292ZXJFbGVtZW50cygpIHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBkaWFsb2dcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBlbGVtZW50IHRoYXQgY29udGFpbnMgYWxsIHRoZSB0b2tlbiByZW5kZXJpbmdzLlxuICAgICAgICAgKiBAdHlwZSB7RWxlbWVudH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaG9sZGVyID0gbG9va3VwT25lKFwiLmpzLS10b2tlbi0taG9sZGVyXCIsIGRpYWxvZyk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3RpdmF0ZXMgdGhlIHtAbGluayBTZXR0YWJsZVRpdGxlfSBjbGFzcyBzbyB0aGF0IHRoZSB0aXRsZSBvZiB0aGUgZGlhbG9nXG4gICAgICogY2FuIGJlIGNoYW5nZWQuXG4gICAgICovXG4gICAgYWN0aXZhdGVTZXR0YWJsZVRpdGxlKCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGRpYWxvZ1xuICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjbGFzcyB0aGF0IGFsbG93cyB0aGUgdGl0bGUgb2YgdGhlIGRpYWxvZyB0byBiZSBzZXQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnNldHRhYmxlVGl0bGUgPSBuZXcgU2V0dGFibGVUaXRsZShcbiAgICAgICAgICAgIGRpYWxvZy5xdWVyeVNlbGVjdG9yKFwiLmpzLS1zZXR0YWJsZS10aXRsZS0tdGl0bGVcIiksXG4gICAgICAgICAgICBkaWFsb2cucXVlcnlTZWxlY3RvcihcIi5qcy0tc2V0dGFibGUtdGl0bGUtLWlucHV0XCIpXG4gICAgICAgICk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBY3RpdmF0ZXMgdGhlIHtAbGluayBEcmFnZ2FibGV9IGNsYXNzIHNvIHRva2VucyB3aXRoaW4gdGhpcyBkaWFsb2cgY2FuIGJlXG4gICAgICogZHJhZ2dlZCBhbmQgcmUtb3JkZXJlZC5cbiAgICAgKi9cbiAgICBhY3RpdmF0ZURyYWdnYWJsZSgpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjbGFzcyB0aGF0IGVuYWJsZXMgdGhlIGRyYWdnaW5nIGFuZCByZS1vcmRlcmluZyBvZiB0b2tlbnMuXG4gICAgICAgICAqIEB0eXBlIHtEcmFnZ2FibGV9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRyYWdnYWJsZSA9IG5ldyBEcmFnZ2FibGUodGhpcy5ob2xkZXIpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIHRva2VuIElEIHRvIHtAbGluayBUb2tlbkRpYWxvZyNpZHN9LiBUaGUgSUQgZG9lcyBub3QgbmVlZCB0byBiZVxuICAgICAqIHVuaXF1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICAgICAqICAgICAgICBJRCB0byBhZGQuXG4gICAgICovXG4gICAgYWRkSWQoaWQpIHtcbiAgICAgICAgdGhpcy5pZHMucHVzaChpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbGwgSURzIGZyb20ge0BsaW5rIFRva2VuRGlhbG9nI2lkc30gdGhhdCBtYXRjaCB0aGUgZ2l2ZW4gSUQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ31cbiAgICAgKiAgICAgICAgSUQgdG8gcmVtb3ZlLlxuICAgICAqL1xuICAgIHJlbW92ZUlkKGlkKSB7XG4gICAgICAgIHRoaXMuaWRzID0gdGhpcy5pZHMuZmlsdGVyKChleGlzdGluZ0lkKSA9PiBleGlzdGluZ0lkICE9PSBpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgSUQgZnJvbSB7QGxpbmsgVG9rZW5EaWFsb2cjaWRzfSB0aGF0J3MgYXQgdGhlIGdpdmVuIGluZGV4LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAgICogICAgICAgIEluZGV4IHRoYXQgc2hvdWxkIGJlIHJlbW92ZWQgZnJvbSB0aGUgSURzLiBJZiB0aGUgaW5kZXggaXMgbGVzc1xuICAgICAqICAgICAgICB0aGFuIDAsIG5vIGFjdGlvbiBpcyB0YWtlbi5cbiAgICAgKi9cbiAgICByZW1vdmVJZEJ5SW5kZXgoaW5kZXgpIHtcblxuICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlkcy5zcGxpY2UoaW5kZXgsIDEpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB7QGxpbmsgVG9rZW5EaWFsb2cjaWRzfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXkuPFN0cmluZz59IGlkc1xuICAgICAqICAgICAgICBJRHMgdG8gc2V0LiBUaGlzIG1heSBiZSBhbiBlbXB0eSBhcnJheS5cbiAgICAgKi9cbiAgICBzZXRJZHMoaWRzKSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgbGlzdCBvZiBhbGwgdGhlIHRva2VuIElEcyB0aGF0IHdpbGwgYmUgZGlzcGxheWVkIHdoZW4gdGhlIGRpYWxvZ1xuICAgICAgICAgKiBzaG93cy5cbiAgICAgICAgICogQHR5cGUge0FycmF5LjxTdHJpbmc+fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pZHMgPSBpZHM7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGEgY29weSBvZiB7QGxpbmsgVG9rZW5EaWFsb2cjaWRzfS4gTW9kaWZ5aW5nIHRoZSBjb3B5IGRvZXMgbm90XG4gICAgICogYWZmZWN0IHRoZSBvcmlnaW5hbC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5LjxTdHJpbmc+fVxuICAgICAqICAgICAgICAgQ29weSBvZiB0aGUgSURzLlxuICAgICAqL1xuICAgIGdldElkcygpIHtcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLmlkc107XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB7QGxpbmsgVG9rZW5EaWFsb2cjdG9rZW5TdG9yZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Rva2VuU3RvcmV9IHRva2VuU3RvcmVcbiAgICAgKiAgICAgICAgVGhlIHRva2VuIHN0b3JlLlxuICAgICAqL1xuICAgIHNldFRva2VuU3RvcmUodG9rZW5TdG9yZSkge1xuICAgICAgICB0aGlzLnRva2VuU3RvcmUgPSB0b2tlblN0b3JlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMge0BsaW5rIFRva2VuRGlhbG9nI2VudHJ5VGVtcGxhdGV9LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZX0gZW50cnlUZW1wbGF0ZVxuICAgICAqICAgICAgICBUaGUgdGVtcGxhdGUuXG4gICAgICovXG4gICAgc2V0RW50cnlUZW1wbGF0ZShlbnRyeVRlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMuZW50cnlUZW1wbGF0ZSA9IGVudHJ5VGVtcGxhdGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIHtAbGluayBDaGFyYWN0ZXJUb2tlbn0gZm9yIGVhY2ggSUQgaW4ge0BsaW5rIFRva2VuRGlhbG9nI2lkc30uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheS48Q2hhcmFjdGVyVG9rZW4+fVxuICAgICAqICAgICAgICAgQ2hhcmFjdGVycyB0aGF0IHRoaXMgZGlhbG9nIHNob3VsZCBzaG93LlxuICAgICAqL1xuICAgIGdldENoYXJhY3RlcnMoKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgdG9rZW5TdG9yZVxuICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICBpZiAoIXRva2VuU3RvcmUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcInRva2VuU3RvcmUgaGFzIG5vdCBiZWVuIHNldFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmlkcy5tYXAoKGlkKSA9PiB0b2tlblN0b3JlLmdldENoYXJhY3RlcihpZCkpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgdGl0bGUgdGV4dCB0byBkaXNwbGF5IHdoZW4gdGhlcmUgaXMgbW9yZSB0aGFuIG9uZSBjaGFyYWN0ZXJcbiAgICAgKiBiZWluZyBkaXNwbGF5ZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogICAgICAgICBUaGUgdGl0bGUgZm9yIG11bHRpcGxlIGNoYXJhY3RlcnMuXG4gICAgICovXG4gICAgZ2V0TXVsdGlwbGVUaXRsZSgpIHtcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgdGhpcy5tdWx0aXBsZVRpdGxlXG4gICAgICAgICAgICB8fCB0aGlzLnNldHRhYmxlVGl0bGUuZ2V0Rm9ybSgpPy5kYXRhc2V0Lm11bHRpcGxlXG4gICAgICAgICAgICB8fCBcIlwiXG4gICAgICAgICk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHtAbGluayBUb2tlbkRpYWxvZyNtdWx0aXBsZVRpdGxlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBtdWx0aXBsZVRpdGxlXG4gICAgICogICAgICAgIFRoZSB0ZXh0IHRvIGRpc3BsYXkgd2hlbiB0aGVyZSBhcmUgbXVsdGlwbGUgY2hhcmFjdGVycyB0byBzaG93LlxuICAgICAqL1xuICAgIHNldE11bHRpcGxlVGl0bGUobXVsdGlwbGVUaXRsZSkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdGV4dCB0byBzaG93IHdoZW4gdGhlcmUgYXJlIG11bHRpcGxlIGNoYXJhY3RlcnMgYmVpbmcgZGlzcGxheWVkLlxuICAgICAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdWx0aXBsZVRpdGxlID0gbXVsdGlwbGVUaXRsZTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERpc3BsYXlzIGFsbCB0aGUgY2hhcmFjdGVycyBpbiB0aGUgZGlhbG9nLlxuICAgICAqXG4gICAgICogQHRocm93cyB7RXJyb3J9XG4gICAgICogICAgICAgICB7QGxpbmsgVG9rZW5EaWFsb2cjZW50cnlUZW1wbGF0ZX0gbXVzdCBiZSBzZXQuXG4gICAgICovXG4gICAgZHJhd0NoYXJhY3RlcnMoKSB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaG9sZGVyLFxuICAgICAgICAgICAgc2V0dGFibGVUaXRsZSxcbiAgICAgICAgICAgIGRyYWdnYWJsZSxcbiAgICAgICAgICAgIGVudHJ5VGVtcGxhdGVcbiAgICAgICAgfSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKCFlbnRyeVRlbXBsYXRlKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJlbnRyeVRlbXBsYXRlIGhhcyBub3QgYmVlbiBzZXRcIik7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjaGFyYWN0ZXJzID0gdGhpcy5nZXRDaGFyYWN0ZXJzKCk7XG4gICAgICAgIGNvbnN0IGlzTXVsdGlwbGUgPSBjaGFyYWN0ZXJzLmxlbmd0aCA+IDE7XG5cbiAgICAgICAgZHJhZ2dhYmxlLnJlbW92ZUFsbENoaWxkcmVuKCk7XG5cbiAgICAgICAgcmVwbGFjZUNvbnRlbnRzTWFueShcbiAgICAgICAgICAgIGhvbGRlcixcbiAgICAgICAgICAgIGNoYXJhY3RlcnMubWFwKChjaGFyYWN0ZXIpID0+IGVudHJ5VGVtcGxhdGUuZHJhdyh7XG4gICAgICAgICAgICAgICAgXCIuanMtLXRva2VuLS1zaG93XCIoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChjaGFyYWN0ZXIuZHJhd1Rva2VuKCkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCIuanMtLXRva2VuLS1hYmlsaXR5XCIoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gY2hhcmFjdGVyLmdldEFiaWxpdHkoKTtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5oaWRkZW4gPSBpc011bHRpcGxlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKVxuICAgICAgICApO1xuXG4gICAgICAgIGNvbnN0IHRpdGxlVGV4dCA9IChcbiAgICAgICAgICAgIGlzTXVsdGlwbGVcbiAgICAgICAgICAgID8gdGhpcy5nZXRNdWx0aXBsZVRpdGxlKClcbiAgICAgICAgICAgIDogKGNoYXJhY3RlcnNbMF0/LmdldE5hbWUoKSB8fCBcIlwiKVxuICAgICAgICApO1xuICAgICAgICBzZXR0YWJsZVRpdGxlLnNldFN0YXJ0VGV4dCh0aXRsZVRleHQpO1xuICAgICAgICBzZXR0YWJsZVRpdGxlLnNldFRpdGxlKHRpdGxlVGV4dCk7XG4gICAgICAgIGhvbGRlci5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtbXVsdGlwbGVcIiwgaXNNdWx0aXBsZSk7XG5cbiAgICAgICAgaWYgKGlzTXVsdGlwbGUpIHtcblxuICAgICAgICAgICAgaG9sZGVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanMtLXRva2VuLS1pdGVtXCIpLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlLmFkZENoaWxkKGNoaWxkKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxufVxuIiwiaW1wb3J0IENoYXJhY3RlclRva2VuIGZyb20gXCIuL0NoYXJhY3RlclRva2VuLmpzXCI7XG5pbXBvcnQgUmVtaW5kZXJUb2tlbiBmcm9tIFwiLi9SZW1pbmRlclRva2VuLmpzXCI7XG5pbXBvcnQgSmlueCBmcm9tIFwiLi9KaW54LmpzXCI7XG5pbXBvcnQge1xuICAgIGRlZmVyXG59IGZyb20gXCIuLi91dGlscy9wcm9taXNlcy5qc1wiO1xuXG4vKipcbiAqIE1hbmFnZXMgYWxsIHRoZSBkYXRhIGZvciBhbGwgdGhlIHRva2VucywgYWxsb3dpbmcgaW5zdGFuY2VzIG9mXG4gKiB7QGxpbmsgQ2hhcmFjdGVyVG9rZW59IGFuZCB7QGxpbmsgUmVtaW5kZXJUb2tlbn0gd2hlbmV2ZXIgbmVlZGVkLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUb2tlblN0b3JlIHtcblxuICAgIC8qKlxuICAgICAqIEFuIElEIHRoYXQgd2lsbCBvbmx5IG1hdGNoIGFuIGVtcHR5IGNoYXJhY3Rlci5cbiAgICAgKiBAdHlwZSB7U3RyaW5nfVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgRU1QVFkoKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFRoZSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgdG9rZW5zIGRhdGEgaXMgbG9hZGVkLlxuICAgICAqIEB0eXBlIHtQcm9taXNlfVxuICAgICAqL1xuICAgIHN0YXRpYyBwcm9taXNlID0gZGVmZXIoKTtcblxuICAgIC8qKlxuICAgICAqIFJlc29sdmVzIHtAbGluayBUb2tlblN0b3JlLnByb21pc2V9IHdpdGggYW4gaW5zdGFuY2Ugb2ZcbiAgICAgKiB7QGxpbmsgVG9rZW5TdG9yZX0gdGhhdCBoYXMgdGhlIGRhdGEgcGFzc2VkIHRvIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtICB7QXJyYXkuPE9iamVjdD59IGRhdGFcbiAgICAgKiAgICAgICAgIERhdGEgZm9yIHRoZSBjaGFyYWN0ZXJzLlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAgICogICAgICAgICBUaGUgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggYW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFRva2VuU3RvcmV9LlxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGUoZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wcm9taXNlLnJlc29sdmUobmV3IHRoaXMoZGF0YSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMge0BsaW5rIFRva2VuU3RvcmUucHJvbWlzZX0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtQcm9taXNlfVxuICAgICAqICAgICAgICAgVGhlIHByb21pc2UgdGhhdCBjYW4gYmUgcmVzb2x2ZWQuXG4gICAgICovXG4gICAgc3RhdGljIGdldCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3MgdG8gc2VlIGlmIHRoZSBnaXZlbiBJRCBsb29rcyBsaWtlIGl0J3MgdGhlIElEIGZvciBhIGNoYXJhY3RlciBvclxuICAgICAqIG5vdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gaWRcbiAgICAgKiAgICAgICAgIElEIHRvIGNoZWNrLlxuICAgICAqIEByZXR1cm4ge0Jvb2xlYW59XG4gICAgICogICAgICAgICB0cnVlIGlmIHRoZSBJRCBsb29rcyBsaWtlIGEgY2hhcmFjdGVyIGlkLCBmYWxzZSBpZiBpdCBkb2Vzbid0LlxuICAgICAqL1xuICAgIHN0YXRpYyBpc0NoYXJhY3RlcklkKGlkKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5pc1JlbWluZGVySWQoaWQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB0byBzZWUgaWYgdGhlIGdpdmVuIElEIGxvb2tzIGxpa2UgaXQncyB0aGUgSUQgZm9yIGEgcmVtaW5kZXIgb3JcbiAgICAgKiBub3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGlkXG4gICAgICogICAgICAgICBJRCB0byBjaGVjay5cbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgICAqICAgICAgICAgdHJ1ZSBpZiB0aGUgSUQgbG9va3MgbGlrZSBhIHJlbWluZGVyIGlkLCBmYWxzZSBpZiBpdCBkb2Vzbid0LlxuICAgICAqL1xuICAgIHN0YXRpYyBpc1JlbWluZGVySWQoaWQpIHtcbiAgICAgICAgcmV0dXJuICgvOlxcZCskLykudGVzdChpZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVGhlIHNjcmlwdCB0b29sIHVzZWQgdG8gY3JlYXRlIElEcyB3aXRoIGEgc2xpZ2h0bHkgZGlmZmVyZW50IGZvcm1hdCBmcm9tXG4gICAgICogb3VyIHZlcnNpb24uIFRoaXMgZnVuY3Rpb24gY29udmVydHMgdGhlIG9sZCBJRCBmb3JtYXQgaW50byBvdXIgb25lLlxuICAgICAqIEV4YW1wbGVzOiB3YXMgPSBsaWxfbW9uc3RhLCBub3cgPSBsaWxtb25zdGFcbiAgICAgKiBFeGFtcGxlczogd2FzID0gYWwtaGFkaWtoaWEsIG5vdyA9IGFsaGFkaWtoaWFcbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gaWRcbiAgICAgKiAgICAgICAgIENoYXJhY3RlciBJRC5cbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICogICAgICAgICBDb3JyZWN0bHkgZm9ybWF0dGVkIGNoYXJhY3RlciBJRC5cbiAgICAgKi9cbiAgICBzdGF0aWMgbm9ybWFsaXNlSWQoaWQpIHtcbiAgICAgICAgcmV0dXJuIGlkLnJlcGxhY2UoL1stX10vZywgXCJcIikudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeGVjdXRlcyB0aGUgZ2l2ZW4gZnVuY3Rpb24gd2hlbiB7QGxpbmsgVG9rZW5TdG9yZS5wcm9taXNlfSBoYXMgcmVzb2x2ZWQuXG4gICAgICogQmUgYXdhcmUgdGhhdCB0aGlzIGlzIGFsd2F5cyBhc3luY2hyb25vdXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtGdW5jdGlvbn0gaGFuZGxlclxuICAgICAqICAgICAgICAgRnVuY3Rpb24gdG8gZXhlY3V0ZSB3aGVuIHRoZSBwcm9taXNlIHJlc29sdmVzLiBJdCdzIHBhc3NlZCBhblxuICAgICAqICAgICAgICAgaW5zdGFuY2Ugb2Yge0BsaW5rIFRva2VuU3RvcmV9LlxuICAgICAqIEByZXR1cm4ge1Byb21pc2V9XG4gICAgICogICAgICAgICBUaGUgcHJvbWlzZSB0aGF0IGhhcyByZXNvbHZlZC5cbiAgICAgKi9cbiAgICBzdGF0aWMgcmVhZHkoaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXQoKS50aGVuKGhhbmRsZXIpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhXG4gICAgICogICAgICAgIERhdGEgdG8gc3RvcmUuXG4gICAgICogQHBhcmFtIHtBcnJheS48T2JqZWN0Pn0gZGF0YS5jaGFyYWN0ZXJzXG4gICAgICogICAgICAgIENoYXJhY3RlciBkYXRhLlxuICAgICAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IGRhdGEucmVtaW5kZXJzXG4gICAgICogICAgICAgIERhdGEgZm9yIHJlbWluZGVycyB0aGF0IGFyZW4ndCBhdHRhY2hlZCB0byBhbnkgY2hhcmFjdGVyLlxuICAgICAqIEBwYXJhbSB7QXJyYXkuPE9iamVjdD59IGRhdGEuamlueGVzXG4gICAgICogICAgICAgIEppbnggZGF0YS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih7XG4gICAgICAgIGNoYXJhY3RlcnMsXG4gICAgICAgIHJlbWluZGVycyxcbiAgICAgICAgamlueGVzXG4gICAgfSkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgYWxsIHRoZSB7QGxpbmsgQ2hhcmFjdGVyVG9rZW59IGluc3RhbmNlcy5cbiAgICAgICAgICogQHR5cGUge09iamVjdH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuY2hhcmFjdGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICogQSBsaXN0IG9mIGFsbCB0aGUge0BsaW5rIFJlbWluZGVyVG9rZW59IGluc3RhbmNlcy5cbiAgICAgICAgKiBAdHlwZSB7T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5yZW1pbmRlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgICAgIGNoYXJhY3RlcnMuZm9yRWFjaCgoY2hhcmFjdGVyKSA9PiB0aGlzLmNyZWF0ZUNoYXJhY3RlcihjaGFyYWN0ZXIpKTtcbiAgICAgICAgcmVtaW5kZXJzPy5mb3JFYWNoKChyZW1pbmRlciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIFJlbWluZGVyVG9rZW4uYWRkR2xvYmFsKHRoaXMuY3JlYXRlUmVtaW5kZXIocmVtaW5kZXIsIGluZGV4KSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvbGxlY3Rpb24gb2YgYWxsIGppbnhlcy5cbiAgICAgICAgICogQHR5cGUge0FycmF5LjxKaW54Pn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuamlueGVzID0gW107XG5cbiAgICAgICAgLy8gQWRkIGFsbCBqaW5lcyBidXQgbGVhdmUgdGhlbSB0aGVvcmV0aWNhbC5cbiAgICAgICAgamlueGVzLmZvckVhY2goKHsgaWQsIGppbnggfSkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCBjaGFyYWN0ZXIgPSB0aGlzLmdldENoYXJhY3RlcihpZCk7XG5cbiAgICAgICAgICAgIGlmICghY2hhcmFjdGVyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBqaW54LmZvckVhY2goKHRyaWNrKSA9PiB7XG5cbiAgICAgICAgICAgICAgICBjb25zdCB0cmlja0NoYXJhY3RlciA9IHRoaXMuZ2V0Q2hhcmFjdGVyKHRyaWNrLmlkKTtcblxuICAgICAgICAgICAgICAgIGlmICghdHJpY2tDaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0ppbnggPSBuZXcgSmlueCh0cmlja0NoYXJhY3RlciwgdHJpY2sucmVhc29uKTtcblxuICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5hZGRKaW54KG5ld0ppbngpO1xuICAgICAgICAgICAgICAgIHRoaXMuamlueGVzLnB1c2gobmV3SmlueCk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHtAbGluayBDaGFyYWN0ZXJUb2tlbn0gaW5zdGFuY2UgZm9yIHRoZSBnaXZlbiBkYXRhIGFuZCBzdG9yZXNcbiAgICAgKiBpdCBpbiB7QGxpbmsgVG9rZW5TdG9yZSNjaGFyYWN0ZXJzfSBiZWZvcmUgcmV0dXJuaW5nIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtICB7T2JqZWN0fSBkYXRhXG4gICAgICogICAgICAgICBDaGFyYWN0ZXIgZGF0YS5cbiAgICAgKiBAcmV0dXJuIHtDaGFyYWN0ZXJUb2tlbn1cbiAgICAgKiAgICAgICAgIENoYXJhY3RlclRva2VuIGluc3RhbmNlIGZvciB0aGUgZGF0YS5cbiAgICAgKi9cbiAgICBjcmVhdGVDaGFyYWN0ZXIoZGF0YSkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBpbWFnZSxcbiAgICAgICAgICAgIHJlbWluZGVycyA9IFtdLFxuICAgICAgICAgICAgcmVtaW5kZXJzR2xvYmFsID0gW11cbiAgICAgICAgfSA9IGRhdGE7XG4gICAgICAgIGNvbnN0IGlkID0gdGhpcy5jb25zdHJ1Y3Rvci5ub3JtYWxpc2VJZChkYXRhLmlkKTtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gbmV3IENoYXJhY3RlclRva2VuKGRhdGEpO1xuXG4gICAgICAgIHJlbWluZGVyc1xuICAgICAgICAgICAgLmNvbmNhdChyZW1pbmRlcnNHbG9iYWwpXG4gICAgICAgICAgICAuZm9yRWFjaCgodGV4dCwgaW5kZXgpID0+IHtcblxuICAgICAgICAgICAgICAgIGNoYXJhY3Rlci5hZGRSZW1pbmRlcihcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jcmVhdGVSZW1pbmRlcih7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbWFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0dsb2JhbDogcmVtaW5kZXJzR2xvYmFsLmluY2x1ZGVzKHRleHQpXG4gICAgICAgICAgICAgICAgICAgIH0sIGluZGV4KVxuICAgICAgICAgICAgICAgICk7XG5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY2hhcmFjdGVyc1tpZF0gPSBjaGFyYWN0ZXI7XG5cbiAgICAgICAgcmV0dXJuIGNoYXJhY3RlcjtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSB7QGxpbmsgQ2hhcmFjdGVyVG9rZW59IGZvciBhIGN1c3RvbSBjaGFyYWN0ZXIgYnkgcGFzc2luZyB0aGVcbiAgICAgKiBkYXRhIHRvIHtAbGluayBUb2tlblN0b3JlI2NyZWF0ZUNoYXJhY3Rlcn0gYnV0IHdpdGggYSBmbGFnIGRlbm90aW5nIHRoZVxuICAgICAqIGZhY3QgdGhhdCBpdCdzIGN1c3RvbS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gZGF0YVxuICAgICAqICAgICAgICAgQ2hhcmFjdGVyIGRhdGEuXG4gICAgICogQHJldHVybiB7Q2hhcmFjdGVyVG9rZW59XG4gICAgICogICAgICAgICBDaGFyYWN0ZXJUb2tlbiBpbnN0YW5jZSBmb3IgdGhlIGRhdGEuXG4gICAgICovXG4gICAgY3JlYXRlQ3VzdG9tQ2hhcmFjdGVyKGRhdGEpIHtcblxuICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVDaGFyYWN0ZXIoe1xuICAgICAgICAgICAgW0NoYXJhY3RlclRva2VuLmN1c3RvbV06IHRydWUsXG4gICAgICAgICAgICAuLi5kYXRhXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIHtAbGluayBSZW1pbmRlclRva2VufSBpbnN0YW5jZSBmb3IgdGhlIGdpdmVuIGRhdGEgYW5kIHN0b3Jlc1xuICAgICAqIGl0IGluIHtAbGluayBUb2tlblN0b3JlI3JlbWluZGVyc30gYmVmb3JlIHJldHVybmluZyBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge09iamVjdH0gZGF0YVxuICAgICAqICAgICAgICAgUmVtaW5kZXIgZGF0YS5cbiAgICAgKiBAcGFyYW0gIHtOdW1iZXJ9IGluZGV4XG4gICAgICogICAgICAgICBUaGUgaW5kZXggb2YgdGhpcyByZW1pbmRlciAtIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHJlbWluZGVyIHdoaWxlXG4gICAgICogICAgICAgICBzdGlsbCBhbGxvd2luZyBmb3IgbG9jYWxpc2F0aW9uLlxuICAgICAqIEByZXR1cm4ge1JlbWluZGVyVG9rZW59XG4gICAgICogICAgICAgICBSZW1pbmRlclRva2VuIGluc3RhbmNlIGZvciB0aGUgZGF0YS5cbiAgICAgKi9cbiAgICBjcmVhdGVSZW1pbmRlcihkYXRhLCBpbmRleCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICB0ZXh0LFxuICAgICAgICAgICAgaW1hZ2UsXG4gICAgICAgICAgICBpc0dsb2JhbFxuICAgICAgICB9ID0gZGF0YTtcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmNvbnN0cnVjdG9yLm5vcm1hbGlzZUlkKGRhdGEuaWQpO1xuICAgICAgICBjb25zdCByZW1pbmRlcklkID0gYCR7aWR9OiR7aW5kZXh9YC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoL1xccysvZywgXCItXCIpO1xuICAgICAgICBjb25zdCByZW1pbmRlciA9IG5ldyBSZW1pbmRlclRva2VuKHtcbiAgICAgICAgICAgIHRleHQsXG4gICAgICAgICAgICBpbWFnZSxcbiAgICAgICAgICAgIGlzR2xvYmFsLFxuICAgICAgICAgICAgaWQ6IHJlbWluZGVySWQsXG4gICAgICAgICAgICBjaGFyYWN0ZXJJZDogaWQsXG4gICAgICAgICAgICBjaGFyYWN0ZXJOYW1lOiBuYW1lXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMucmVtaW5kZXJzW3JlbWluZGVySWRdID0gcmVtaW5kZXI7XG5cbiAgICAgICAgcmV0dXJuIHJlbWluZGVyO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgY2hhcmFjdGVyIGZvciB0aGUgZ2l2ZW4gSUQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gIHtTdHJpbmd9IGlkXG4gICAgICogICAgICAgICBJRCBvZiB0aGUgY2hhcmFjdGVyIHRvIGdldC5cbiAgICAgKiBAcmV0dXJuIHtDaGFyYWN0ZXJUb2tlbnx1bmRlZmluZWR9XG4gICAgICogICAgICAgICBUaGUgbWF0Y2hpbmcgaW5zdGFuY2Ugb3IgdW5kZWZpbmVkIGlmIHRoZSBjaGFyYWN0ZXIgaXNuJ3QgZm91bmQuXG4gICAgICovXG4gICAgZ2V0Q2hhcmFjdGVyKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJhY3RlcnNbdGhpcy5jb25zdHJ1Y3Rvci5ub3JtYWxpc2VJZChpZCldO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGNoYXJhY3RlciBmb3IgdGhlIGdpdmVuIElELCB0aGUgc2FtZSBhc1xuICAgICAqIHtAbGluayBUb2tlblN0b3JlI2dldENoYXJhY3Rlcn0sIGJ1dCBpZiB0aGUgY2hhcmFjdGVyIGlzIGN1c3RvbSB0aGVuXG4gICAgICogdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBpZFxuICAgICAqICAgICAgICAgSUQgb2YgdGhlIGNoYXJhY3RlciB0byBnZXQuXG4gICAgICogQHJldHVybiB7Q2hhcmFjdGVyVG9rZW58dW5kZWZpbmVkfVxuICAgICAqICAgICAgICAgVGhlIG1hdGNoaW5nIGluc3RhbmNlIG9yIHVuZGVmaW5lZCBpZiB0aGUgY2hhcmFjdGVyIGlzbid0IGZvdW5kLlxuICAgICAqL1xuICAgIGdldE9mZmljaWFsQ2hhcmFjdGVyKGlkKSB7XG5cbiAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gdGhpcy5nZXRDaGFyYWN0ZXIoaWQpO1xuXG4gICAgICAgIGlmIChjaGFyYWN0ZXI/LmlzQ3VzdG9tKCkpIHtcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gY2hhcmFjdGVyO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIGNsb25lIG9mIHRoZSBjaGFyYWN0ZXIgZm9yIHRoZSBnaXZlbiBJRC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSAge1N0cmluZ30gaWRcbiAgICAgKiAgICAgICAgIElEIG9mIHRoZSBjaGFyYWN0ZXIgdG8gZ2V0LlxuICAgICAqIEByZXR1cm4ge0NoYXJhY3RlclRva2VufVxuICAgICAqICAgICAgICAgQSBjbG9uZSBvZiB0aGUgbWF0Y2hpbmcgaW5zdGFuY2UuXG4gICAgICogQHRocm93cyB7UmVmZXJlbmNlRXJyb3J9XG4gICAgICogICAgICAgICBUaGUgaWQgbXVzdCBtYXRjaCBhbiBleGlzdGluZyBjaGFyYWN0ZXIuXG4gICAgICovXG4gICAgZ2V0Q2hhcmFjdGVyQ2xvbmUoaWQpIHtcblxuICAgICAgICBjb25zdCBjaGFyYWN0ZXIgPSB0aGlzLmdldENoYXJhY3RlcihpZCk7XG5cbiAgICAgICAgaWYgKCFjaGFyYWN0ZXIpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihgVW5hYmxlIHRvIGZpbmQgXCIke2lkfVwiIGNoYXJhY3RlcmApO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGNoYXJhY3Rlci5jbG9uZSgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbiBhcnJheSBvZiBhbGwgY2hhcmFjdGVycy5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge0FycmF5LjxDaGFyYWN0ZXJUb2tlbj59XG4gICAgICogICAgICAgICBDb2xsZWN0aW9uIG9mIGFsbCBjaGFyYWN0ZXJzLlxuICAgICAqL1xuICAgIGdldEFsbENoYXJhY3RlcnMoKSB7XG4gICAgICAgIHJldHVybiBPYmplY3QudmFsdWVzKHRoaXMuY2hhcmFjdGVycyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBlbXB0eSBjaGFyYWN0ZXIuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtDaGFyYWN0ZXJUb2tlbn1cbiAgICAgKiAgICAgICAgIEEgY2xvbmUgb2YgYW4gZW1wdHkgY2hhcmFjdGVyLlxuICAgICAqL1xuICAgIGdldEVtcHR5Q2hhcmFjdGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRDaGFyYWN0ZXJDbG9uZSh0aGlzLmNvbnN0cnVjdG9yLkVNUFRZKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSByZW1pbmRlciBmb3IgdGhlIGdpdmVuIElELlxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBpZFxuICAgICAqICAgICAgICAgSUQgb2YgdGhlIHJlbWluZGVyIHRvIGdldC5cbiAgICAgKiBAcmV0dXJuIHtSZW1pbmRlclRva2VufHVuZGVmaW5lZH1cbiAgICAgKiAgICAgICAgIFRoZSBtYXRjaGluZyBpbnN0YW5jZSBvciB1bmRlZmluZWQgaWYgdGhlIHJlbWluZGVyIGlzbid0IGZvdW5kLlxuICAgICAqL1xuICAgIGdldFJlbWluZGVyKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbWluZGVyc1tpZF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhIGNsb25lIG9mIHRoZSByZW1pbmRlciBmb3IgdGhlIGdpdmVuIElELlxuICAgICAqXG4gICAgICogQHBhcmFtICB7U3RyaW5nfSBpZFxuICAgICAqICAgICAgICAgSUQgb2YgdGhlIHJlbWluZGVyIHRvIGdldC5cbiAgICAgKiBAcmV0dXJuIHtSZW1pbmRlclRva2VufVxuICAgICAqICAgICAgICAgQSBjbG9uZSBvZiB0aGUgbWF0Y2hpbmcgaW5zdGFuY2UuXG4gICAgICogQHRocm93cyB7UmVmZXJlbmNlRXJyb3J9XG4gICAgICogICAgICAgICBUaGUgaWQgbXVzdCBtYXRjaCBhbiBleGlzdGluZyByZW1pbmRlci5cbiAgICAgKi9cbiAgICBnZXRSZW1pbmRlckNsb25lKGlkKSB7XG5cbiAgICAgICAgY29uc3QgcmVtaW5kZXIgPSB0aGlzLmdldFJlbWluZGVyKGlkKTtcblxuICAgICAgICBpZiAoIXJlbWluZGVyKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoYFVuYWJsZSB0byBmaW5kIHRoZSBcIiR7aWR9XCIgcmVtaW5kZXJgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZW1pbmRlci5jbG9uZSgpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogR2V0cyBhbiBhcnJheSBvZiBhbGwgcmVtaW5kZXJzLlxuICAgICAqXG4gICAgICogQHJldHVybiB7QXJyYXkuPFJlbWluZGVyVG9rZW4+fVxuICAgICAqICAgICAgICAgQ29sbGVjdGlvbiBvZiBhbGwgcmVtaW5kZXJzLlxuICAgICAqL1xuICAgIGdldEFsbFJlbWluZGVycygpIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC52YWx1ZXModGhpcy5yZW1pbmRlcnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgYW4gYXJyYXkgb2YgYWxsIHRoZSBqaW54ZXMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheS48SmlueD59XG4gICAgICogICAgICAgICBDb2xsZWN0aW9uIG9mIGFsbCBqaW54ZXMuXG4gICAgICovXG4gICAgZ2V0QWxsSmlueGVzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5qaW54ZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhIGppbnggdG8ge0BsaW5rIFRva2VuU3RvcmUjamlueGVzfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SmlueH0gamlueFxuICAgICAqICAgICAgICBKaW54IHRvIGFkZC5cbiAgICAgKi9cbiAgICBhZGRKaW54KGppbngpIHtcbiAgICAgICAgdGhpcy5qaW54ZXMucHVzaChqaW54KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXRzIGFsbCB0aGUgaG9tZWJyZXcgamlueGVzIHRoYXQgaGF2ZSBiZWVuIHJlZ2lzdGVyZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtBcnJheS48SmlueD59XG4gICAgICogICAgICAgICBDb2xsZWN0aW9uIG9mIGFsbCBob21lYnJldyBqaW54ZXMuXG4gICAgICovXG4gICAgZ2V0QWxsSG9tZWJyZXdKaW54ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmppbnhlcy5maWx0ZXIoKGppbngpID0+IGppbnguZ2V0SXNIb21lYnJldygpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFsbCB0aGUgaG9tZWJyZXcgamlueGVzIGZyb20ge0BsaW5rIFRva2VuU3RvcmUjamlueGVzfS5cbiAgICAgKi9cbiAgICByZW1vdmVBbGxIb21lYnJld0ppbnhlcygpIHtcbiAgICAgICAgdGhpcy5qaW54ZXMgPSB0aGlzLmppbnhlcy5maWx0ZXIoKGppbngpID0+ICFqaW54LmdldElzSG9tZWJyZXcoKSk7XG4gICAgfVxuXG59XG4iLCJpbXBvcnQgT2JzZXJ2ZXIgZnJvbSBcIi4vT2JzZXJ2ZXIuanNcIjtcbmltcG9ydCB7XG4gICAgY2xhbXBcbn0gZnJvbSBcIi4uL3V0aWxzL251bWJlcnMuanNcIjtcbmltcG9ydCB7XG4gICAgbm9vcCxcbiAgICByYWZUaHJvdHRsZVxufSBmcm9tIFwiLi4vdXRpbHMvZnVuY3Rpb25zLmpzXCI7XG5cbi8qKlxuICogSGFuZGxlcyB0aGUgdG9rZW5zIGJlaW5nIGRyYWdnYWJsZS5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVG9rZW5zIHtcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gcGFkXG4gICAgICogICAgICAgIFRoZSBwYWQgdGhhdCB0aGUgdG9rZW5zIGFyZSBkcmFnZ2VkIGFyb3VuZCB3aXRoaW4uXG4gICAgICogQHBhcmFtIHtPYnNlcnZlcn0gb2JzZXJ2ZXJcbiAgICAgKiAgICAgICAgQW4gb2JzZXJ2ZXIgdGhhdCB0cmlnZ2VycyBldmVudHMgYXQga2V5IHRpbWVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHBhZCwgb2JzZXJ2ZXIpIHtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHBhZCB0aGF0IHRodGUgdG9rZW5zIGFyZSBpbi5cbiAgICAgICAgICogQHR5cGUge0VsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnBhZCA9IHBhZDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gb2JzZXJ2ZXIgdGhhdCB0cmlnZ2VycyBldmVudHMgYXQga2V5IHRpbWVzLlxuICAgICAgICAgKiBAdHlwZSB7T2JzZXJ2ZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXI7XG5cbiAgICAgICAgdGhpcy5yZXNldCgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVBhZERpbWVuc2lvbnMoKTtcbiAgICAgICAgdGhpcy5hZGRMaXN0ZW5lcnMoKTtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlc2V0cyBzb21lIGtleSBwcm9wZXJ0aWVzLlxuICAgICAqL1xuICAgIHJlc2V0KCkge1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgY3VycmVudCB6LWluZGV4LiBCeSBjb25zdGFudGx5IGluY3JlYXNpbmcgdGhpcywgd2UgY2FuIGFsd2F5cyBwdXRcbiAgICAgICAgICogdGhlIG1vc3QgcmVjZW50bHkgdG91Y2hlZCB0b2tlbiBvbiB0aGUgdG9wLCBhbGxvd2luZyByZW1pbmRlcnMgdG8gc2l0XG4gICAgICAgICAqIG9uIHRvcCBvZiBjaGFyYWN0ZXJzLCBmb3IgZXhhbXBsZS5cbiAgICAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuekluZGV4ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIGhhbmRsZXIgdG8gYmUgZXhlY3V0ZWQgd2hlbiBkcmFnZ2luZyBhIHRva2VuIG9yIHJlbWluZGVyLlxuICAgICAgICAgKiBAdHlwZSB7RnVuY3Rpb259XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmRyYWdIYW5kbGVyID0gbm9vcDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIGZvciBrbm93aW5nIHdoZXRoZXIgdGhlIHVzZXIgaW50ZW50aW9uIGlzIGRyYWdnaW5nIG9yXG4gICAgICAgICAqIGNsaWNraW5nLiBUaGlzIG9ubHkgc2VlbXMgdG8gYmUgbmVlZWQgZm9yIHRoZSBkZXNrdG9wLlxuICAgICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuaXNEcmFnZ2luZyA9IGZhbHNlO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaG9yaXpvbnRhbCBvZmZzZXQgZm9yIHRoZSB0b2tlbiBiZWluZyBkcmFnZ2VkLlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy54T2Zmc2V0ID0gMDtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHZlcnRpY2FsIG9mZnNldCBmb3IgdGhlIHRva2VuIGJlaW5nIGRyYWdnZWQuXG4gICAgICAgICAqIEB0eXBlIHtOdW1iZXJ9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnlPZmZzZXQgPSAwO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgcmVjb3JkIG9mIHRoZSBkaW1lbnNpb25zIG9mIHtAbGluayBUb2tlbnMjcGFkfS5cbiAgICAgKi9cbiAgICB1cGRhdGVQYWREaW1lbnNpb25zKCkge1xuXG4gICAgICAgIGNvbnN0IHJlY3QgPSB0aGlzLnBhZC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIG9mZnNldCBsZWZ0IG9mIHtAbGluayBUb2tlbiNwYWR9LlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYWRMZWZ0ID0gcmVjdC5sZWZ0O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgb2Zmc2V0IHRvcCBvZiB7QGxpbmsgVG9rZW4jcGFkfS5cbiAgICAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFkVG9wID0gcmVjdC50b3A7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSB3aWR0aCBvZiB7QGxpbmsgVG9rZW4jcGFkfS5cbiAgICAgICAgICogQHR5cGUge051bWJlcn1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMucGFkV2lkdGggPSByZWN0LndpZHRoO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaGVpZ2h0IG9mIHtAbGluayBUb2tlbiNwYWR9LlxuICAgICAgICAgKiBAdHlwZSB7TnVtYmVyfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5wYWRIZWlnaHQgPSByZWN0LmhlaWdodDtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgZXZlbnQgbGlzdGVuZXJzIHRvIGtleSBlbGVtZW50cy5cbiAgICAgKi9cbiAgICBhZGRMaXN0ZW5lcnMoKSB7XG5cbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNoc3RhcnRcIiwgdGhpcyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIHRoaXMpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidG91Y2hlbmRcIiwgdGhpcyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNvbnRleHRtZW51XCIsIHRoaXMpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzKTtcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgdGhpcyk7XG5cbiAgICAgICAgY29uc3Qgc3R5bGVPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUGFkRGltZW5zaW9ucygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBzdHlsZU9ic2VydmVyLm9ic2VydmUodGhpcy5wYWQsIHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHRydWUsXG4gICAgICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFtcInN0eWxlXCJdXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSB6SW5kZXggdmFsdWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge051bWJlcn0gemluZGV4XG4gICAgICogICAgICAgIFotaW5kZXggdG8gc2V0LlxuICAgICAqL1xuICAgIHNldFpJbmRleCh6SW5kZXgpIHtcbiAgICAgICAgdGhpcy56SW5kZXggPSB6SW5kZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhwb3NlcyB7QGxpbmsgVG9rZW5zI3pJbmRleH0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9XG4gICAgICogICAgICAgICBUaGUgY3VycmVudCB2YWx1ZSBvZiB7QGxpbmsgVG9rZW5zI3pJbmRleH0uXG4gICAgICovXG4gICAgZ2V0WkluZGV4KCkge1xuICAgICAgICByZXR1cm4gdGhpcy56SW5kZXg7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5jcmVhc2VzIHtAbGluayBUb2tlbnMjekluZGV4fSBiZWZvcmUgcmV0dXJuaW5nIGl0LlxuICAgICAqXG4gICAgICogQHJldHVybiB7TnVtYmVyfVxuICAgICAqICAgICAgICAgVGhlIG5leHQgdmFsdWUgb2Yge0BsaW5rIFRva2VucyN6SW5kZXh9LlxuICAgICAqL1xuICAgIGFkdmFuY2VaSW5kZXgoKSB7XG5cbiAgICAgICAgdGhpcy56SW5kZXggKz0gMTtcblxuICAgICAgICByZXR1cm4gdGhpcy56SW5kZXg7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXb3JrcyBvdXQgdGhlIGV2ZW50IGJlaW5nIGhlYXJkIGFuZCBleGVjdXRlcyB0aGUgY29ycmVjdCBoYW5kbGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqICAgICAgICBUaGUgZXZlbnQgdGhhdCBoYXMgYmVlbiBoZWFyZC5cbiAgICAgKi9cbiAgICBoYW5kbGVFdmVudChlKSB7XG5cbiAgICAgICAgY29uc3QgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gICAgICAgIGNvbnN0IHRva2VuID0gKFxuICAgICAgICAgICAgdHlwZW9mIHRhcmdldC5jbG9zZXN0ID09PSBcImZ1bmN0aW9uXCJcbiAgICAgICAgICAgID8gdGFyZ2V0LmNsb3Nlc3QoXCIuanMtLXRva2VuLS13cmFwcGVyXCIpXG4gICAgICAgICAgICA6IG51bGxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3Qgc2NvbGxIYW5kbGVyID0gcmFmVGhyb3R0bGUoKGUpID0+IHRoaXMub25TY3JvbGwoZSkpO1xuXG4gICAgICAgIHN3aXRjaCAoZS50eXBlKSB7XG5cbiAgICAgICAgY2FzZSBcIm1vdXNlZG93blwiOlxuICAgICAgICBjYXNlIFwidG91Y2hzdGFydFwiOlxuICAgICAgICAgICAgdGhpcy5vbk1vdXNlZG93bih0b2tlbiwgZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwibW91c2V1cFwiOlxuICAgICAgICBjYXNlIFwidG91Y2hlbmRcIjpcbiAgICAgICAgY2FzZSBcImNvbnRleHRtZW51XCI6XG4gICAgICAgICAgICB0aGlzLm9uTW91c2V1cChlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJjbGlja1wiOlxuICAgICAgICAgICAgdGhpcy5vbkNsaWNrKHRva2VuLCBlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJyZXNpemVcIjpcbiAgICAgICAgICAgIHRoaXMub25SZXNpemUoZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwic2Nyb2xsXCI6XG4gICAgICAgICAgICBzY29sbEhhbmRsZXIoZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGEgbW91c2UgZG93biBvciB0b3VjaCBzdGFydCBldmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gdG9rZW5cbiAgICAgKiAgICAgICAgVGhlIHRva2VuIHRoYXQgaGFzIGJlZW4gdG91Y2hlZC5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICogICAgICAgIFRoZSBldmVudC5cbiAgICAgKi9cbiAgICBvbk1vdXNlZG93bih0b2tlbiwgZSkge1xuXG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc3RhcnREcmFnKHRva2VuLCBlKTtcblxuICAgICAgICBjb25zdCB6SW5kZXggPSB0aGlzLmFkdmFuY2VaSW5kZXgoKTtcbiAgICAgICAgdG9rZW4uc3R5bGUuc2V0UHJvcGVydHkoXCItLXotaW5kZXhcIiwgekluZGV4KTtcblxuICAgICAgICB0aGlzLm9ic2VydmVyLnRyaWdnZXIoXCJ6aW5kZXhcIiwge1xuICAgICAgICAgICAgekluZGV4LFxuICAgICAgICAgICAgZWxlbWVudDogdG9rZW5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGEgbW91c2UgdXAgb3IgdG91Y2ggZW5kIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqICAgICAgICBUaGUgZXZlbnQuXG4gICAgICovXG4gICAgb25Nb3VzZXVwKGUpIHtcbiAgICAgICAgdGhpcy5lbmREcmFnZ2luZygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZXMgYSBjbGljayBldmVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gdG9rZW5cbiAgICAgKiAgICAgICAgVGhlIHRva2VuIHRoYXQgaGFzIGJlZW4gdG91Y2hlZC5cbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICogICAgICAgIFRoZSBldmVudC5cbiAgICAgKi9cbiAgICBvbkNsaWNrKHRva2VuLCBlKSB7XG5cbiAgICAgICAgaWYgKCF0b2tlbiB8fCB0aGlzLmlzRHJhZ2dpbmcpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHR5cGUgPSB0b2tlbi5jbG9zZXN0KFwiW2RhdGEtdG9rZW5dXCIpO1xuICAgICAgICBjb25zdCB0b2tlblR5cGUgPSB0eXBlLmRhdGFzZXQudG9rZW47XG5cbiAgICAgICAgLy8gY2hhcmFjdGVyLWNsaWNrIG9yIHJlbWluZGVyLWNsaWNrIGV2ZW50LlxuICAgICAgICB0aGlzLm9ic2VydmVyLnRyaWdnZXIoYCR7dG9rZW5UeXBlfS1jbGlja2AsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IHR5cGVcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGEgcmVzaXplIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqICAgICAgICBUaGUgZXZlbnQuXG4gICAgICovXG4gICAgb25SZXNpemUoZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVBhZERpbWVuc2lvbnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGEgc2Nyb2xsIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqICAgICAgICBUaGUgZXZlbnQuXG4gICAgICovXG4gICAgb25TY3JvbGwoZSkge1xuICAgICAgICB0aGlzLnVwZGF0ZVBhZERpbWVuc2lvbnMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIHRoZSBkcmFnZ2luZyBiZWluZyBzdGFydGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gICAgICogICAgICAgIFRoZSB0b2tlbiBiZWluZyBkcmFnZ2VkLlxuICAgICAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50XG4gICAgICogICAgICAgIFRoZSBtb3VzZSBkb3duIG9yIHRvdWNoIHN0YXJ0IGV2ZW50LlxuICAgICAqL1xuICAgIHN0YXJ0RHJhZyhlbGVtZW50LCBldmVudCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgICBjbGllbnRYLFxuICAgICAgICAgICAgY2xpZW50WSxcbiAgICAgICAgICAgIHRhcmdldFRvdWNoZXNcbiAgICAgICAgfSA9IGV2ZW50O1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBsZWZ0LFxuICAgICAgICAgICAgdG9wXG4gICAgICAgIH0gPSBlbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHRoaXMuZW5kRHJhZ2dpbmcoKTtcbiAgICAgICAgdGhpcy5kcmFnSGFuZGxlciA9IChldmVudCkgPT4gdGhpcy5kcmFnT2JqZWN0KGVsZW1lbnQsIGV2ZW50KTtcblxuICAgICAgICBpZiAodHlwZSA9PT0gXCJtb3VzZWRvd25cIikge1xuXG4gICAgICAgICAgICB0aGlzLnhPZmZzZXQgPSBjbGllbnRYIC0gbGVmdCArIHRoaXMucGFkTGVmdDtcbiAgICAgICAgICAgIHRoaXMueU9mZnNldCA9IGNsaWVudFkgLSB0b3AgKyB0aGlzLnBhZFRvcDtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuZHJhZ0hhbmRsZXIpO1xuXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJ0b3VjaHN0YXJ0XCIgJiYgdGFyZ2V0VG91Y2hlcy5sZW5ndGgpIHtcblxuICAgICAgICAgICAgdGhpcy54T2Zmc2V0ID0gdGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYIC0gbGVmdCArIHRoaXMucGFkTGVmdDtcbiAgICAgICAgICAgIHRoaXMueU9mZnNldCA9IHRhcmdldFRvdWNoZXNbMF0uY2xpZW50WSAtIHRvcCArIHRoaXMucGFkVG9wO1xuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5kcmFnSGFuZGxlciwge1xuICAgICAgICAgICAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyBhIHRva2VuIGJlaW5nIGRyYWdnZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgKiAgICAgICAgVGhlIHRva2VuIGJlaW5nIGRyYWdnZWQuXG4gICAgICogQHBhcmFtIHtFdmVudH0gZXZlbnRcbiAgICAgKiAgICAgICAgVGhlIG1vdXNlIG1vdmUgb3IgdG91Y2ggbW92ZSBldmVudC5cbiAgICAgKi9cbiAgICBkcmFnT2JqZWN0KGVsZW1lbnQsIGV2ZW50KSB7XG5cbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgY2xpZW50WCxcbiAgICAgICAgICAgIGNsaWVudFksXG4gICAgICAgICAgICB0YXJnZXRUb3VjaGVzXG4gICAgICAgIH0gPSBldmVudDtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHRcbiAgICAgICAgfSA9IGVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIGxldCBsZWZ0VmFsdWUgPSAwO1xuICAgICAgICBsZXQgdG9wVmFsdWUgPSAwO1xuXG4gICAgICAgIGlmICh0eXBlID09PSBcIm1vdXNlbW92ZVwiKSB7XG5cbiAgICAgICAgICAgIGxlZnRWYWx1ZSA9IGNsaWVudFggLSB0aGlzLnhPZmZzZXQ7XG4gICAgICAgICAgICB0b3BWYWx1ZSA9IGNsaWVudFkgLSB0aGlzLnlPZmZzZXQ7XG4gICAgICAgICAgICB0aGlzLmlzRHJhZ2dpbmcgPSB0cnVlO1xuXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJ0b3VjaG1vdmVcIiAmJiB0YXJnZXRUb3VjaGVzLmxlbmd0aCkge1xuXG4gICAgICAgICAgICBsZWZ0VmFsdWUgPSB0YXJnZXRUb3VjaGVzWzBdLmNsaWVudFggLSB0aGlzLnhPZmZzZXQ7XG4gICAgICAgICAgICB0b3BWYWx1ZSA9IHRhcmdldFRvdWNoZXNbMF0uY2xpZW50WSAtIHRoaXMueU9mZnNldDtcblxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5tb3ZlVG8oXG4gICAgICAgICAgICBlbGVtZW50LFxuICAgICAgICAgICAgY2xhbXAoMCwgbGVmdFZhbHVlLCB0aGlzLnBhZFdpZHRoIC0gd2lkdGgpLFxuICAgICAgICAgICAgY2xhbXAoMCwgdG9wVmFsdWUsIHRoaXMucGFkSGVpZ2h0IC0gaGVpZ2h0KVxuICAgICAgICApO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTW92ZXMgdGhlIGdpdmVuIHRva2VuIGVsZW1lbnQgdG8gdGhlIGNvLW9yZGluYXRlcyBnaXZlbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqICAgICAgICBFbGVtZW50IHRvIG1vdmUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IGxlZnRcbiAgICAgKiAgICAgICAgWCBjby1vcmRpbmF0ZS5cbiAgICAgKiBAcGFyYW0ge051bWJlcn0gdG9wXG4gICAgICogICAgICAgIFkgY28tb3JkaW5hdGUuXG4gICAgICogQHBhcmFtIHtOdW1iZXJ9IFt6SW5kZXg9dGhpcy56SW5kZXhdXG4gICAgICogICAgICAgIE9wdGlvbmFsIFogY28tb3JkaW5hdGUuIElmIG9tbWl0dGVkLCBpdCBkZWZhdWx0cyB0b1xuICAgICAqICAgICAgICB7QGxpbmsgVG9rZW5zI3pJbmRleH0uXG4gICAgICovXG4gICAgbW92ZVRvKGVsZW1lbnQsIGxlZnQsIHRvcCwgekluZGV4KSB7XG5cbiAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tbGVmdFwiLCBsZWZ0KTtcbiAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tdG9wXCIsIHRvcCk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB6SW5kZXggIT09IFwibnVtYmVyXCIgfHwgTnVtYmVyLmlzTmFOKHpJbmRleCkpIHtcbiAgICAgICAgICAgIHpJbmRleCA9IHRoaXMuekluZGV4O1xuICAgICAgICB9XG5cbiAgICAgICAgZWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShcIi0tei1pbmRleFwiLCB6SW5kZXgpO1xuXG4gICAgICAgIHRoaXMub2JzZXJ2ZXIudHJpZ2dlcihcIm1vdmVcIiwge1xuICAgICAgICAgICAgZWxlbWVudCxcbiAgICAgICAgICAgIGxlZnQsXG4gICAgICAgICAgICB0b3AsXG4gICAgICAgICAgICB6SW5kZXhcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHBvc2VzIHRoZSBjby1vcmRpbmF0ZXMgZm9yIHRoZSBnaXZlbiBlbGVtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtICB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqICAgICAgICAgRWxlbWVudCB3aG9zZSBjby1vcmRpbmF0ZXMgc2hvdWxkIGJlIHJldHVybmVkLlxuICAgICAqIEByZXR1cm4ge2Nvb3JkfVxuICAgICAqICAgICAgICAgQ28tb3JkaW5hdGVzIGZvciB0aGUgZWxlbWVudC5cbiAgICAgKi9cbiAgICBnZXRQb3NpdGlvbihlbGVtZW50KSB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlZGVmICB7T2JqZWN0fSBjb29yZFxuICAgICAgICAgKiBAcHJvcGVydHkge051bWJlcn0geFxuICAgICAgICAgKiAgICAgICAgICAgVGhlIGxlZnQgdmFsdWUgaW4gcGl4ZWxzLlxuICAgICAgICAgKiBAcHJvcGVydHkge051bWJlcn0geVxuICAgICAgICAgKiAgICAgICAgICAgVGhlIHRvcCB2YWx1ZSBpbiBwaXhlbHMuXG4gICAgICAgICAqIEBwcm9wZXJ0eSB7TnVtYmVyfSB6XG4gICAgICAgICAqICAgICAgICAgICBUaGUgei1pbmRleCBpbiBwaXhlbHMuXG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBjb29yZCA9IHtcbiAgICAgICAgICAgIHg6IE51bWJlcihlbGVtZW50LnN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCItLWxlZnRcIikpIHx8IDAsXG4gICAgICAgICAgICB5OiBOdW1iZXIoZWxlbWVudC5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS10b3BcIikpIHx8IDAsXG4gICAgICAgICAgICB6OiBOdW1iZXIoZWxlbWVudC5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS16LWluZGV4XCIpKSB8fCAwXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGNvb3JkO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSGFuZGxlcyB0aGUgdG9rZW4gZHJhZ2dpbmcgZmluaXNoaW5nLlxuICAgICAqL1xuICAgIGVuZERyYWdnaW5nKCkge1xuXG4gICAgICAgIGlmICh0aGlzLmRyYWdIYW5kbGVyICE9PSBub29wKSB7XG5cbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMuZHJhZ0hhbmRsZXIpO1xuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaG1vdmVcIiwgdGhpcy5kcmFnSGFuZGxlciwge1xuICAgICAgICAgICAgICAgIHBhc3NpdmU6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuZHJhZ0hhbmRsZXIgPSBub29wO1xuXG4gICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgZXZlbnRzIGlzIG1vdXNlZG93biAtPiBtb3VzZXVwIC0+IGNsaWNrLiBUaGlzIG1lYW5zXG4gICAgICAgICAgICAvLyB0aGF0IHdlIG5lZWQgdG8gZGVsYXkgdGhlIHJlc2V0dGluZyBvZiBgdGhpcy5pc0RyYWdnaW5nYCBzbyB0aGF0XG4gICAgICAgICAgICAvLyB0aGUgaGFuZGxlciBhdHRhY2hlZCB0byB0aGUgY2xpY2sgZXZlbnQgbGlzdGVuZXIgZG9lc24ndCB0cmlnZ2VyXG4gICAgICAgICAgICAvLyBhZnRlciBkcmFnZ2luZy4gVGhpcyBvbmx5IHNlZW1zIHRvIGJlIGFuIGlzc3VlIG9uIGRlc2t0b3AsIG1vYmlsZVxuICAgICAgICAgICAgLy8gc2VlbXMgdG8gYmUgZmluZS5cbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4gdGhpcy5pc0RyYWdnaW5nID0gZmFsc2UpO1xuXG4gICAgICAgIH1cblxuICAgIH1cblxufVxuIiwiLyoqXG4gKiBUaGUgY3VycmVudCBsYW5ndWFnZSB0aGF0IHRoZSB1c2VyIGhhcyB0aGUgYXBwbGljYXRpb24gc2V0IHRvLiBJZiB0aGVcbiAqIGxhbmd1YWdlIGNhbm5vdCBiZSB3b3JrZWQgb3V0IHRoYXQgaXQgZGVmYXVsdHMgdG8gXCJlbi1HQlwiLlxuICogQHR5cGUge1N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IExBTkdVQUdFID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmxhbmcgfHwgXCJlbi1HQlwiO1xuIiwiLyoqXG4gKiBUaGUgY3VycmVudCB2ZXJzaW9uLCBpbiBzZW12ZXIuXG4gKiBAdHlwZSB7U3RyaW5nfVxuICovXG5leHBvcnQgY29uc3QgVkVSU0lPTiA9IFwiMC45LjQ0XCI7XG4iLCIvLyBpbXBvcnQgXCIuL3Byb2Nlc3Nlcy9lcnJvcnMuanNcIjtcblxuaW1wb3J0IFwiLi9wcm9jZXNzZXMvc2V0dXAvZ2VuZXJhbC5qc1wiO1xuaW1wb3J0IFwiLi9wcm9jZXNzZXMvc2V0dXAvc2VsZWN0LWVkaXRpb24uanNcIjtcbmltcG9ydCBcIi4vcHJvY2Vzc2VzL3NldHVwL3NlbGVjdC1jaGFyYWN0ZXJzLmpzXCI7XG5pbXBvcnQgXCIuL3Byb2Nlc3Nlcy9zZXR1cC9zZWxlY3QteW91ci1jaGFyYWN0ZXIuanNcIjtcbmltcG9ydCBcIi4vcHJvY2Vzc2VzL3NldHVwL2NoYXJhY3Rlci1zaGVldC5qc1wiO1xuaW1wb3J0IFwiLi9wcm9jZXNzZXMvc2V0dXAvY2xlYXItY2FjaGUuanNcIjtcblxuaW1wb3J0IFwiLi9wcm9jZXNzZXMvZ3JpbW9pcmUvZ2VuZXJhbC5qc1wiO1xuaW1wb3J0IFwiLi9wcm9jZXNzZXMvZ3JpbW9pcmUvY2hhcmFjdGVycy5qc1wiO1xuaW1wb3J0IFwiLi9wcm9jZXNzZXMvZ3JpbW9pcmUvcmVtaW5kZXJzLmpzXCI7XG5pbXBvcnQgXCIuL3Byb2Nlc3Nlcy9ncmltb2lyZS9kZW1vbi1ibHVmZnMuanNcIjtcbmltcG9ydCBcIi4vcHJvY2Vzc2VzL2dyaW1vaXJlL3Jlc2V0LmpzXCI7XG5pbXBvcnQgXCIuL3Byb2Nlc3Nlcy9ncmltb2lyZS90cmF2ZWxsZXJzLmpzXCI7XG5pbXBvcnQgXCIuL3Byb2Nlc3Nlcy9ncmltb2lyZS9mYWJsZWQuanNcIjtcbmltcG9ydCBcIi4vcHJvY2Vzc2VzL2dyaW1vaXJlL2V4cG9ydC5qc1wiO1xuXG5pbXBvcnQgXCIuL3Byb2Nlc3Nlcy9qaW54ZXMuanNcIjtcblxuaW1wb3J0IFwiLi9wcm9jZXNzZXMvbmlnaHQtb3JkZXIuanNcIjtcblxuaW1wb3J0IFwiLi9wcm9jZXNzZXMvaW5mby10b2tlbnMuanNcIjtcblxuaW1wb3J0IFwiLi9wcm9jZXNzZXMvbm90ZXMuanNcIjtcblxuaW1wb3J0IFwiLi9wcm9jZXNzZXMvYWNrbm93bGVkZ2VtZW50cy5qc1wiO1xuXG5pbXBvcnQgXCIuL3Byb2Nlc3Nlcy9zdG9yZS5qc1wiO1xuIiwiaW1wb3J0IHtcbiAgICBWRVJTSU9OXG59IGZyb20gXCIuLi9jb25zdGFudHMvdmVyc2lvbi5qc1wiO1xuaW1wb3J0IHtcbiAgICBsb29rdXBPbmVcbn0gZnJvbSBcIi4uL3V0aWxzL2VsZW1lbnRzLmpzXCI7XG5cbi8vIFBvcHVsYXRlIHRoZSB2ZXJzaW9uIG51bWJlci5cbmxvb2t1cE9uZShcIiN2ZXJzaW9uXCIpLnRleHRDb250ZW50ID0gVkVSU0lPTjtcbiIsImltcG9ydCBEaWFsb2cgZnJvbSBcIi4uLy4uL2NsYXNzZXMvRGlhbG9nLmpzXCI7XG5pbXBvcnQgU2VsZWN0RGlhbG9nIGZyb20gXCIuLi8uLi9jbGFzc2VzL1NlbGVjdERpYWxvZy5qc1wiO1xuaW1wb3J0IE9ic2VydmVyIGZyb20gXCIuLi8uLi9jbGFzc2VzL09ic2VydmVyLmpzXCI7XG5pbXBvcnQgUGFkIGZyb20gXCIuLi8uLi9jbGFzc2VzL1BhZC5qc1wiO1xuaW1wb3J0IFRlbXBsYXRlIGZyb20gXCIuLi8uLi9jbGFzc2VzL1RlbXBsYXRlLmpzXCI7XG5pbXBvcnQgVG9rZW5TdG9yZSBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9Ub2tlblN0b3JlLmpzXCI7XG5pbXBvcnQgVG9rZW5EaWFsb2cgZnJvbSBcIi4uLy4uL2NsYXNzZXMvVG9rZW5EaWFsb2cuanNcIjtcbmltcG9ydCBOYW1lcyBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9OYW1lcy5qc1wiO1xuaW1wb3J0IHtcbiAgICBpZGVudGlmeSxcbiAgICBsb29rdXAsXG4gICAgbG9va3VwT25lLFxuICAgIGxvb2t1cE9uZUNhY2hlZCxcbiAgICByZXBsYWNlQ29udGVudHNNYW55XG59IGZyb20gXCIuLi8uLi91dGlscy9lbGVtZW50cy5qc1wiO1xuXG5jb25zdCBnYW1lT2JzZXJ2ZXIgPSBPYnNlcnZlci5jcmVhdGUoXCJnYW1lXCIpO1xuY29uc3QgdG9rZW5PYnNlcnZlciA9IE9ic2VydmVyLmNyZWF0ZShcInRva2VuXCIpO1xuY29uc3QgcGFkID0gbG9va3VwT25lQ2FjaGVkKFwiLmpzLS1wYWRcIikucGFkO1xuY29uc3QgcmVjZW50UmVtaW5kZXJzID0gbG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1zaG93LXJlbWluZGVyc1wiKTtcbmNvbnN0IGNoYXJhY3RlclNob3dEaWFsb2cgPSBEaWFsb2cuY3JlYXRlKGxvb2t1cE9uZUNhY2hlZChcIiNjaGFyYWN0ZXItc2hvd1wiKSk7XG5jb25zdCB0b2tlbkRpYWxvZyA9IFRva2VuRGlhbG9nLmdldCgpO1xudG9rZW5EaWFsb2cuc2V0RW50cnlUZW1wbGF0ZShuZXcgVGVtcGxhdGUobG9va3VwT25lKFwiI3Rva2VuLWVudHJ5LXRlbXBsYXRlXCIpKSk7XG5cbi8vIFNldCB1cCB0aGUgdG9rZW4gZGlhbG9nIHdoZW4gYSBjaGFyYWN0ZXIgdG9rZW4gaXMgY2xpY2tlZC5cbnRva2VuT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXItY2xpY2tcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgZWxlbWVudFxuICAgIH0gPSBkZXRhaWw7XG4gICAgY29uc3QgY2hhcmFjdGVyID0gcGFkLmdldENoYXJhY3RlckJ5VG9rZW4oZWxlbWVudCk7XG5cbiAgICBjaGFyYWN0ZXJTaG93RGlhbG9nLmdldEVsZW1lbnQoKS5kYXRhc2V0LnRva2VuID0gYCMke2lkZW50aWZ5KGVsZW1lbnQpfWA7XG4gICAgbG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1zaG93LW5hbWVcIikudGV4dENvbnRlbnQgPSBjaGFyYWN0ZXIuZ2V0TmFtZSgpO1xuICAgIGxvb2t1cE9uZUNhY2hlZChcIiNjaGFyYWN0ZXItc2hvdy1hYmlsaXR5XCIpLnRleHRDb250ZW50ID0gY2hhcmFjdGVyLmdldEFiaWxpdHkoKTtcbiAgICByZWNlbnRSZW1pbmRlcnMuZGF0YXNldC5jb29yZHMgPSBKU09OLnN0cmluZ2lmeShwYWQuZ2V0VG9rZW5Qb3NpdGlvbihlbGVtZW50KSk7XG5cbiAgICBjaGFyYWN0ZXJTaG93RGlhbG9nLnNob3coKTtcblxufSk7XG5cbi8vIFVwZGF0ZSB0aGUgcmVjZW50bHktYWRkZWQtcmVtaW5kZXJzIGxpc3QgYXMgYSByZW1pbmRlciBpcyBhZGRlZC5cbnRva2VuT2JzZXJ2ZXIub24oXCJyZW1pbmRlci1hZGRcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgcmVtaW5kZXJcbiAgICB9ID0gZGV0YWlsO1xuICAgIGNvbnN0IGlkID0gcmVtaW5kZXIuZ2V0SWQoKTtcbiAgICBjb25zdCBpdGVtcyA9IGxvb2t1cChcIi5qcy0tcmVtaW5kZXItbGlzdC0taXRlbVwiLCByZWNlbnRSZW1pbmRlcnMpO1xuXG4gICAgY29uc3QgZXhpc3RpbmcgPSBpdGVtcy5maW5kKCh7IGRhdGFzZXQgfSkgPT4gZGF0YXNldC5yZW1pbmRlcklkID09PSBpZCk7XG5cbiAgICBpZiAoZXhpc3RpbmcgJiYgZXhpc3RpbmcgPT09IGl0ZW1zWzBdKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXRlbXMubGVuZ3RoID4gMiB8fCAoZXhpc3RpbmcgJiYgZXhpc3RpbmcgIT09IGl0ZW1zWzBdKSkge1xuICAgICAgICAoZXhpc3RpbmcgfHwgaXRlbXNbaXRlbXMubGVuZ3RoIC0gMV0pLnJlbW92ZSgpO1xuICAgIH1cblxuICAgIHJlY2VudFJlbWluZGVycy5wcmVwZW5kKHJlbWluZGVyLmRyYXdMaXN0KCkpO1xuXG59KTtcblxuZnVuY3Rpb24gZ2V0VG9rZW4odGFyZ2V0KSB7XG4gICAgcmV0dXJuIGxvb2t1cE9uZSh0YXJnZXQuY2xvc2VzdChcIltkYXRhLXRva2VuXVwiKS5kYXRhc2V0LnRva2VuKTtcbn1cblxuZnVuY3Rpb24gaGlkZURpYWxvZyh0YXJnZXQpIHtcbiAgICBEaWFsb2cuY3JlYXRlKHRhcmdldC5jbG9zZXN0KFwiLmRpYWxvZ1wiKSkuaGlkZSgpO1xufVxuXG5Ub2tlblN0b3JlLnJlYWR5KCgpID0+IHtcblxuICAgIC8vIFNob3cgYSB0b2tlbiBhcyBpdCdzIGNsaWNrZWQgZnJvbSB0aGUgXCJzaG93IHRva2Vuc1wiIGRpYWxvZy5cbiAgICBsb29rdXBPbmUoXCIjY2hhcmFjdGVyLXNob3ctdG9rZW5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICAgICAgdG9rZW5EaWFsb2cuc2V0SWRzKFtcbiAgICAgICAgICAgIHBhZC5nZXRDaGFyYWN0ZXJCeVRva2VuKGdldFRva2VuKHRhcmdldCkpLmdldElkKClcbiAgICAgICAgXSk7XG4gICAgICAgIHRva2VuRGlhbG9nLnNob3coKTtcblxuICAgICAgICBoaWRlRGlhbG9nKHRhcmdldCk7XG5cbiAgICB9KTtcblxufSk7XG5cbmxvb2t1cE9uZShcIiNjaGFyYWN0ZXItc2hyb3VkLXRvZ2dsZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKHsgdGFyZ2V0IH0pID0+IHtcblxuICAgIHBhZC50b2dnbGVEZWFkQnlUb2tlbihnZXRUb2tlbih0YXJnZXQpKTtcbiAgICBoaWRlRGlhbG9nKHRhcmdldCk7XG5cbn0pO1xuXG5sb29rdXBPbmUoXCIjY2hhcmFjdGVyLXJvdGF0ZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKHsgdGFyZ2V0IH0pID0+IHtcblxuICAgIHBhZC5yb3RhdGVCeVRva2VuKGdldFRva2VuKHRhcmdldCkpO1xuICAgIGhpZGVEaWFsb2codGFyZ2V0KTtcblxufSk7XG5cbmxvb2t1cE9uZShcIiNjaGFyYWN0ZXItcmVtaW5kZXJcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICBjb25zdCByZW1pbmRlciA9IGxvb2t1cE9uZUNhY2hlZChcIiNyZW1pbmRlci1saXN0XCIpO1xuICAgIGNvbnN0IHRva2VuID0gZ2V0VG9rZW4odGFyZ2V0KTtcblxuICAgIHJlbWluZGVyLmRhdGFzZXQuY29vcmRzID0gSlNPTi5zdHJpbmdpZnkocGFkLmdldFRva2VuUG9zaXRpb24odG9rZW4pKTtcbiAgICBEaWFsb2cuY3JlYXRlKHJlbWluZGVyKS5zaG93KCk7XG4gICAgaGlkZURpYWxvZyh0YXJnZXQpO1xuXG59KTtcblxuY29uc3QgY2hhcmFjdGVyTGlzdERpYWxvZyA9IFNlbGVjdERpYWxvZy5nZXQoKTtcbmNoYXJhY3Rlckxpc3REaWFsb2cuYWRkUHJvY2Vzcyh7XG5cbiAgICAvLyBUaGUgZ2VuZXJpYyBwcm9jZXNzOiBhZGQgYSB0b2tlbiB0byB0aGUgcGFkIHdoZW4gdGhlIGljb24gaXMgY2xpY2tlZC5cblxuICAgIGNsaWNrKHRva2VuSWQpIHtcblxuICAgICAgICBUb2tlblN0b3JlLnJlYWR5KCh0b2tlblN0b3JlKSA9PiB7XG4gICAgICAgICAgICBwYWQuYWRkQ2hhcmFjdGVyKHRva2VuU3RvcmUuZ2V0Q2hhcmFjdGVyQ2xvbmUodG9rZW5JZCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgY2hhcmFjdGVyTGlzdERpYWxvZy5oaWRlKCk7XG5cbiAgICB9XG5cbn0pO1xuXG4vLyBUaGUgcHJvY2VzcyB0aGF0IHdpbGwgcmVwbGFjZSBvbmUgdG9rZW4gaW4gdGhlIGdyaW1vaXJlIHdpdGggYW5vdGhlciBvbmUuXG5jb25zdCByZXBsYWNlT25QYWRQcm9jZXNzID0ge1xuXG4gICAgZGF0YTogbnVsbCxcblxuICAgIGNsaWNrKHRva2VuSWQpIHtcblxuICAgICAgICBUb2tlblN0b3JlLnJlYWR5KCh0b2tlblN0b3JlKSA9PiB7XG5cbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICBjaGFyYWN0ZXIsXG4gICAgICAgICAgICAgICAgdG9rZW46IG5ld1Rva2VuXG4gICAgICAgICAgICB9ID0gcGFkLmFkZENoYXJhY3Rlcih0b2tlblN0b3JlLmdldENoYXJhY3RlckNsb25lKHRva2VuSWQpKTtcbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICBkYXRhXG4gICAgICAgICAgICB9ID0gdGhpcztcblxuICAgICAgICAgICAgaWYgKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICAgICAgdG9rZW4sXG4gICAgICAgICAgICAgICAgICAgIGNvb3Jkczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgeCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHksXG4gICAgICAgICAgICAgICAgICAgICAgICB6XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ID0gZGF0YTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IG9sZENoYXJhY3RlciA9IHBhZC5nZXRDaGFyYWN0ZXJCeVRva2VuKGxvb2t1cE9uZSh0b2tlbikpO1xuICAgICAgICAgICAgICAgIHBhZC50b2dnbGVEZWFkKGNoYXJhY3Rlciwgb2xkQ2hhcmFjdGVyLmdldElzRGVhZCgpKTtcbiAgICAgICAgICAgICAgICBwYWQucm90YXRlKGNoYXJhY3Rlciwgb2xkQ2hhcmFjdGVyLmdldElzVXBzaWRlRG93bigpKTtcbiAgICAgICAgICAgICAgICBwYWQuc2V0UGxheWVyTmFtZShjaGFyYWN0ZXIsIHBhZC5nZXRQbGF5ZXJOYW1lKG9sZENoYXJhY3RlcikpO1xuICAgICAgICAgICAgICAgIHBhZC5yZW1vdmVDaGFyYWN0ZXIob2xkQ2hhcmFjdGVyKTtcbiAgICAgICAgICAgICAgICBwYWQubW92ZVRva2VuKG5ld1Rva2VuLCB4LCB5LCB6KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNoYXJhY3Rlckxpc3REaWFsb2cuaGlkZSgpO1xuXG4gICAgfSxcblxuICAgIGhpZGUoKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IG51bGw7XG4gICAgICAgIGNoYXJhY3Rlckxpc3REaWFsb2cucmVtb3ZlUHJvY2VzcyhyZXBsYWNlT25QYWRQcm9jZXNzKTtcbiAgICB9XG5cbn07XG5cbmxvb2t1cE9uZShcIiNjaGFyYWN0ZXItcmVwbGFjZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKHsgdGFyZ2V0IH0pID0+IHtcblxuICAgIGNvbnN0IHRva2VuID0gZ2V0VG9rZW4odGFyZ2V0KTtcbiAgICByZXBsYWNlT25QYWRQcm9jZXNzLmRhdGEgPSB7XG4gICAgICAgIGNvb3JkczogcGFkLmdldFRva2VuUG9zaXRpb24odG9rZW4pLFxuICAgICAgICB0b2tlbjogYCMke2lkZW50aWZ5KHRva2VuKX1gXG4gICAgfTtcbiAgICBjaGFyYWN0ZXJMaXN0RGlhbG9nLmFkZFByb2Nlc3MocmVwbGFjZU9uUGFkUHJvY2Vzcyk7XG4gICAgY2hhcmFjdGVyTGlzdERpYWxvZy5zaG93KCk7XG4gICAgaGlkZURpYWxvZyh0YXJnZXQpO1xuXG59KTtcblxuLy8gVGhlIHByb2Nlc3MgdGhhdCB3aWxsIGFkZCBhbm90aGVyIHRva2VuIHRvIHRoZSB0b2tlbiBkaWFsb2cuXG5jb25zdCBhZGRUb0RpYWxvZ1Byb2Nlc3MgPSB7XG5cbiAgICBjbGljayh0b2tlbklkKSB7XG4gICAgICAgIHRva2VuRGlhbG9nLmFkZElkKHRva2VuSWQpO1xuICAgICAgICB0b2tlbkRpYWxvZy5zaG93KCk7XG4gICAgICAgIGNoYXJhY3Rlckxpc3REaWFsb2cuaGlkZSgpO1xuICAgIH0sXG5cbiAgICBoaWRlKCkge1xuICAgICAgICBjaGFyYWN0ZXJMaXN0RGlhbG9nLnJlbW92ZVByb2Nlc3MoYWRkVG9EaWFsb2dQcm9jZXNzKTtcbiAgICB9XG5cbn07XG5cbmxvb2t1cE9uZShcIi5qcy0tdG9rZW4tLWFkZFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNoYXJhY3Rlckxpc3REaWFsb2cuYWRkUHJvY2VzcyhhZGRUb0RpYWxvZ1Byb2Nlc3MpO1xuICAgIGNoYXJhY3Rlckxpc3REaWFsb2cuc2hvdygpO1xuICAgIHRva2VuRGlhbG9nLmhpZGUoKTtcbn0pO1xuXG5jb25zdCBjaGFyYWN0ZXJOYW1lSW5wdXQgPSBsb29rdXBPbmUoXCIjY2hhcmFjdGVyLW5hbWUtaW5wdXRcIik7XG5sb29rdXBPbmUoXCIjY2hhcmFjdGVyLW5hbWVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIHZhbHVlXG4gICAgfSA9IGNoYXJhY3Rlck5hbWVJbnB1dDtcbiAgICBjb25zdCBuYW1lID0gKHZhbHVlIHx8IFwiXCIpLnRyaW0oKTtcblxuICAgIHBhZC5zZXRQbGF5ZXJOYW1lRm9yVG9rZW4oZ2V0VG9rZW4odGFyZ2V0KSwgbmFtZSk7XG4gICAgaGlkZURpYWxvZyh0YXJnZXQpO1xuXG59KTtcblxuY29uc3QgZ2hvc3RWb3RlQnV0dG9uID0gbG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1naG9zdC12b3RlXCIpO1xuXG5mdW5jdGlvbiBzZXRHaG9zdEJ1dHRvblN0YXRlKGNoYXJhY3Rlcikge1xuXG4gICAgZ2hvc3RWb3RlQnV0dG9uLmRpc2FibGVkID0gKFxuICAgICAgICBnaG9zdFZvdGVCdXR0b24sXG4gICAgICAgICFjaGFyYWN0ZXIuZ2V0SXNEZWFkKCkgfHwgIWNoYXJhY3Rlci5nZXRIYXNHaG9zdFZvdGUoKVxuICAgICk7XG5cbn1cblxubG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1zaG93XCIpLmFkZEV2ZW50TGlzdGVuZXIoRGlhbG9nLlNIT1csICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICBjb25zdCB0b2tlbiA9IGxvb2t1cE9uZSh0YXJnZXQuZGF0YXNldC50b2tlbik7XG4gICAgY29uc3QgY2hhcmFjdGVyID0gcGFkLmdldENoYXJhY3RlckJ5VG9rZW4odG9rZW4pO1xuXG4gICAgc2V0R2hvc3RCdXR0b25TdGF0ZShjaGFyYWN0ZXIpO1xuXG59KTtcblxuZ2hvc3RWb3RlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgY29uc3QgdG9rZW4gPSBnZXRUb2tlbih0YXJnZXQpO1xuICAgIHBhZC5zZXRHaG9zdFZvdGVGb3JUb2tlbih0b2tlbiwgZmFsc2UpO1xuXG4gICAgY29uc3QgY2hhcmFjdGVyID0gcGFkLmdldENoYXJhY3RlckJ5VG9rZW4odG9rZW4pO1xuICAgIHNldEdob3N0QnV0dG9uU3RhdGUoY2hhcmFjdGVyKTtcblxuICAgIGhpZGVEaWFsb2codGFyZ2V0KTtcblxufSk7XG5cbmNoYXJhY3RlclNob3dEaWFsb2cub24oRGlhbG9nLlNIT1csICgpID0+IHtcblxuICAgIGNvbnN0IHRva2VuID0gZ2V0VG9rZW4oY2hhcmFjdGVyU2hvd0RpYWxvZy5nZXRFbGVtZW50KCkpO1xuICAgIGNoYXJhY3Rlck5hbWVJbnB1dC52YWx1ZSA9IHBhZC5nZXRQbGF5ZXJOYW1lRm9yVG9rZW4odG9rZW4pO1xuXG4gICAgbG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1zaG93LW9ycGhhblwiKS5oaWRkZW4gPSAoXG4gICAgICAgICF0b2tlbi5jbGFzc0xpc3QuY29udGFpbnMoXCJpcy1vcnBoYW5cIilcbiAgICApO1xuXG59KTtcblxuY2hhcmFjdGVyU2hvd0RpYWxvZy5vbihEaWFsb2cuSElERSwgKCkgPT4ge1xuICAgIGNoYXJhY3Rlck5hbWVJbnB1dC52YWx1ZSA9IGNoYXJhY3Rlck5hbWVJbnB1dC5kZWZhdWx0VmFsdWU7XG59KTtcblxubG9va3VwT25lKFwiI2NoYXJhY3Rlci1yZW1vdmVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICBwYWQucmVtb3ZlQ2hhcmFjdGVyQnlUb2tlbihnZXRUb2tlbih0YXJnZXQpKTtcbiAgICBoaWRlRGlhbG9nKHRhcmdldCk7XG5cbn0pO1xuXG4vLyBVcGRhdGUgdGhlIG5pZ2h0IG9yZGVyIG9uIHRoZSB0b2tlbnMuXG4vLyAjNzI6IFVzZSBvYmplY3RzIHJhdGhlciB0aGFuIGFycmF5cyB0byBhbGxvdyBmb3IgZGVjaW1hbHMgaW4gbmlnaHQgb3JkZXJzLlxuY29uc3QgbmlnaHRPcmRlciA9IHtcbiAgICBmaXJzdDogT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICBvdGhlcjogT2JqZWN0LmNyZWF0ZShudWxsKVxufTtcblxuZnVuY3Rpb24gZ2V0U29ydGVkS2V5cyhvYmplY3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KS5zb3J0KChhLCBiKSA9PiBOdW1iZXIoYSkgLSBOdW1iZXIoYikpO1xufVxuXG5mdW5jdGlvbiBhc3NpZ25Db3VudHMob2JqZWN0LCBkYXRhS2V5KSB7XG5cbiAgICBsZXQgY291bnQgPSAwO1xuXG4gICAgZ2V0U29ydGVkS2V5cyhvYmplY3QpLmZvckVhY2goKGtleSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IHRva2VucyA9IG9iamVjdFtrZXldO1xuXG4gICAgICAgIGNvdW50ICs9IDE7XG5cbiAgICAgICAgdG9rZW5zLmZvckVhY2goKHsgdG9rZW4gfSkgPT4ge1xuICAgICAgICAgICAgUGFkLmdldFRva2VuKHRva2VuKS5kYXRhc2V0W2RhdGFLZXldID0gY291bnQ7XG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbn1cblxuZnVuY3Rpb24gdXBkYXRlVG9rZW5zKCkge1xuXG4gICAgYXNzaWduQ291bnRzKG5pZ2h0T3JkZXIuZmlyc3QsIFwiZmlyc3ROaWdodFwiKTtcbiAgICBhc3NpZ25Db3VudHMobmlnaHRPcmRlci5vdGhlciwgXCJvdGhlck5pZ2h0XCIpO1xuXG59XG5cbnRva2VuT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXItYWRkXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGNoYXJhY3RlcixcbiAgICAgICAgdG9rZW5cbiAgICB9ID0gZGV0YWlsO1xuICAgIGNvbnN0IHtcbiAgICAgICAgZmlyc3QsXG4gICAgICAgIG90aGVyXG4gICAgfSA9IG5pZ2h0T3JkZXI7XG5cbiAgICBjb25zdCBmaXJzdE5pZ2h0ID0gY2hhcmFjdGVyLmdldEZpcnN0TmlnaHQoKTtcblxuICAgIGlmIChmaXJzdE5pZ2h0KSB7XG5cbiAgICAgICAgaWYgKCFmaXJzdFtmaXJzdE5pZ2h0XSkge1xuICAgICAgICAgICAgZmlyc3RbZmlyc3ROaWdodF0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZpcnN0W2ZpcnN0TmlnaHRdLnB1c2goe1xuICAgICAgICAgICAgY2hhcmFjdGVyLFxuICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICBjb25zdCBvdGhlck5pZ2h0ID0gY2hhcmFjdGVyLmdldE90aGVyTmlnaHQoKTtcblxuICAgIGlmIChvdGhlck5pZ2h0KSB7XG5cbiAgICAgICAgaWYgKCFvdGhlcltvdGhlck5pZ2h0XSkge1xuICAgICAgICAgICAgb3RoZXJbb3RoZXJOaWdodF0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIG90aGVyW290aGVyTmlnaHRdLnB1c2goe1xuICAgICAgICAgICAgY2hhcmFjdGVyLFxuICAgICAgICAgICAgdG9rZW5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICB1cGRhdGVUb2tlbnMoKTtcblxufSk7XG5cbnRva2VuT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXItcmVtb3ZlXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGNoYXJhY3RlcixcbiAgICAgICAgdG9rZW5cbiAgICB9ID0gZGV0YWlsO1xuICAgIGNvbnN0IHtcbiAgICAgICAgZmlyc3QsXG4gICAgICAgIG90aGVyXG4gICAgfSA9IG5pZ2h0T3JkZXI7XG5cbiAgICBjb25zdCBmaXJzdE5pZ2h0ID0gY2hhcmFjdGVyLmdldEZpcnN0TmlnaHQoKTtcbiAgICBjb25zdCBmaXJzdEFycmF5ID0gZmlyc3RbZmlyc3ROaWdodF07XG5cbiAgICBpZiAoZmlyc3RBcnJheSkge1xuXG4gICAgICAgIGNvbnN0IGluZGV4ID0gZmlyc3RBcnJheS5maW5kSW5kZXgoKGluZm8pID0+IGluZm8udG9rZW4gPT09IHRva2VuKTtcblxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgZmlyc3RBcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFmaXJzdEFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICAgZGVsZXRlIGZpcnN0W2ZpcnN0TmlnaHRdO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBjb25zdCBvdGhlck5pZ2h0ID0gY2hhcmFjdGVyLmdldE90aGVyTmlnaHQoKTtcbiAgICBjb25zdCBvdGhlckFycmF5ID0gb3RoZXJbb3RoZXJOaWdodF07XG5cbiAgICBpZiAob3RoZXJBcnJheSkge1xuXG4gICAgICAgIGNvbnN0IGluZGV4ID0gb3RoZXJBcnJheS5maW5kSW5kZXgoKGluZm8pID0+IGluZm8udG9rZW4gPT09IHRva2VuKTtcblxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgb3RoZXJBcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFvdGhlckFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICAgZGVsZXRlIG90aGVyW290aGVyTmlnaHRdO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICB1cGRhdGVUb2tlbnMoKTtcblxufSk7XG5cbi8vIExpc3Qgb2YgdG9rZW5zLlxuLy8gVE9ETzogY291bGQgd2UgdXNlIGNoYXJhY3Rlci5kcmF3TGlzdCgpIGhlcmU/XG5cbmNvbnN0IHRva2VuTGlzdFRlbXBsYXRlID0gVGVtcGxhdGUuY3JlYXRlKGxvb2t1cE9uZShcIiN0b2tlbi1saXN0LXRlbXBsYXRlXCIpKTtcbmNvbnN0IHRva2VuTGlzdCA9IGxvb2t1cE9uZShcIiN0b2tlbi1saXN0X19saXN0XCIpO1xuXG5nYW1lT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXJzLXNlbGVjdGVkXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBjb25zdCBjaGFyYWN0ZXJzID0gZGV0YWlsLmNoYXJhY3RlcnMuZmlsdGVyKChjaGFyYWN0ZXIpID0+IHtcbiAgICAgICAgY29uc3QgdGVhbSA9IGNoYXJhY3Rlci5nZXRUZWFtKCk7XG4gICAgICAgIHJldHVybiB0ZWFtICE9PSBcInRyYXZlbGxlclwiO1xuICAgIH0pO1xuXG4gICAgcmVwbGFjZUNvbnRlbnRzTWFueShcbiAgICAgICAgdG9rZW5MaXN0LFxuICAgICAgICBjaGFyYWN0ZXJzLm1hcCgoY2hhcmFjdGVyKSA9PiB0b2tlbkxpc3RUZW1wbGF0ZS5kcmF3KHtcbiAgICAgICAgICAgIFwiLmpzLS10b2tlbi1saXN0LS1idXR0b25cIihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5kYXRhc2V0LnRva2VuSWQgPSBjaGFyYWN0ZXIuZ2V0SWQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIi5qcy0tdG9rZW4tbGlzdC0tdG9rZW5cIihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQoY2hhcmFjdGVyLmRyYXdUb2tlbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpXG4gICAgKTtcblxufSk7XG5cbi8vICMxMzEgLSBoaWdobGlnaHQgYW55IG9ycGhhbiBjaGFyYWN0ZXIgYW5kIHJlbWluZGVyIHRva2Vucy5cbmdhbWVPYnNlcnZlci5vbihcImNoYXJhY3RlcnMtc2VsZWN0ZWRcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIFRva2VuU3RvcmUucmVhZHkoKHN0b3JlKSA9PiB7XG5cbiAgICAgICAgcGFkLmNoYXJhY3RlcnMuZm9yRWFjaCgoeyBjaGFyYWN0ZXIsIHRva2VuIH0pID0+IHtcblxuICAgICAgICAgICAgaWYgKFtcInRyYXZlbGxlclwiLCBcImZhYmxlZFwiXS5pbmNsdWRlcyhjaGFyYWN0ZXIuZ2V0VGVhbSgpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBkZXRhaWwuY2hhcmFjdGVycy5maW5kSW5kZXgoKGNoYXIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhci5nZXRJZCgpID09PSBjaGFyYWN0ZXIuZ2V0SWQoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0b2tlbi5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtb3JwaGFuXCIsIGluZGV4IDwgMCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgcGFkLnJlbWluZGVycy5mb3JFYWNoKCh7IHJlbWluZGVyLCB0b2tlbiB9KSA9PiB7XG5cbiAgICAgICAgICAgIGNvbnN0IGNoYXJhY3RlciA9IHN0b3JlLmdldENoYXJhY3RlcihyZW1pbmRlci5nZXRDaGFyYWN0ZXJJZCgpKTtcblxuICAgICAgICAgICAgaWYgKFtcInRyYXZlbGxlclwiLCBcImZhYmxlZFwiXS5pbmNsdWRlcyhjaGFyYWN0ZXIuZ2V0VGVhbSgpKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgY29uc3QgaW5kZXggPSBkZXRhaWwuY2hhcmFjdGVycy5maW5kSW5kZXgoKGNoYXIpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY2hhci5nZXRJZCgpID09PSBjaGFyYWN0ZXIuZ2V0SWQoKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0b2tlbi5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtb3JwaGFuXCIsIGluZGV4IDwgMCk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxufSk7XG5cblRva2VuU3RvcmUucmVhZHkoKHRva2VuU3RvcmUpID0+IHtcblxuICAgIHRva2VuRGlhbG9nLnNldFRva2VuU3RvcmUodG9rZW5TdG9yZSk7XG4gICAgY29uc3QgdG9rZW5MaXN0RGlhbG9nID0gRGlhbG9nLmNyZWF0ZShsb29rdXBPbmUoXCIjdG9rZW4tbGlzdFwiKSk7XG5cbiAgICB0b2tlbkxpc3QuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoXCJbZGF0YS10b2tlbi1pZF1cIik7XG5cbiAgICAgICAgaWYgKCFidXR0b24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRva2VuRGlhbG9nLnNldElkcyhbYnV0dG9uLmRhdGFzZXQudG9rZW5JZF0pO1xuICAgICAgICB0b2tlbkRpYWxvZy5zaG93KCk7XG4gICAgICAgIHRva2VuTGlzdERpYWxvZy5oaWRlKCk7XG5cbiAgICB9KTtcblxufSk7XG5cbi8vIFVwZGF0ZSB0aGUgbGlzdCBvZiBzdWdnZXN0ZWQgbmFtZXMgdGhhdCBjYW4gYmUgc2V0IHdoZW4gYSB0b2tlbiBpcyBkcmF3bi5cblxuY29uc3QgbmFtZXMgPSBOYW1lcy5jcmVhdGUoKTtcblxubmFtZXMub24oXCJuYW1lcy1hZGRlZFwiLCAoKSA9PiB7XG5cbiAgICByZXBsYWNlQ29udGVudHNNYW55KFxuICAgICAgICBsb29rdXBPbmVDYWNoZWQoXCIjcGxheWVyLW5hbWUtb3B0aW9uc1wiKSxcbiAgICAgICAgbmFtZXMuZHJhd0xpc3QoKVxuICAgICk7XG4gICAgcmVwbGFjZUNvbnRlbnRzTWFueShcbiAgICAgICAgbG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1uYW1lLWlucHV0LW9wdGlvbnNcIiksXG4gICAgICAgIG5hbWVzLmRyYXdMaXN0KClcbiAgICApO1xuXG59KTtcblxubmFtZXMub24oXCJuYW1lcy1jbGVhcmVkXCIsICgpID0+IHtcblxuICAgIGVtcHR5KGxvb2t1cE9uZUNhY2hlZChcIiNwbGF5ZXItbmFtZS1vcHRpb25zXCIpKTtcbiAgICBlbXB0eShsb29rdXBPbmVDYWNoZWQoXCIjY2hhcmFjdGVyLW5hbWUtaW5wdXQtb3B0aW9uc1wiKSk7XG5cbn0pO1xuIiwiaW1wb3J0IFRlbXBsYXRlIGZyb20gXCIuLi8uLi9jbGFzc2VzL1RlbXBsYXRlLmpzXCI7XG5pbXBvcnQgVG9rZW5TdG9yZSBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9Ub2tlblN0b3JlLmpzXCI7XG5pbXBvcnQgT2JzZXJ2ZXIgZnJvbSBcIi4uLy4uL2NsYXNzZXMvT2JzZXJ2ZXIuanNcIjtcbmltcG9ydCBEaWFsb2cgZnJvbSBcIi4uLy4uL2NsYXNzZXMvRGlhbG9nLmpzXCI7XG5pbXBvcnQgQmx1ZmZEaWFsb2cgZnJvbSBcIi4uLy4uL2NsYXNzZXMvQmx1ZmZEaWFsb2cuanNcIjtcbmltcG9ydCBUb2tlbkRpYWxvZyBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9Ub2tlbkRpYWxvZy5qc1wiO1xuaW1wb3J0IEJsdWZmc0dyb3VwcyBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9CbHVmZnNHcm91cHMuanNcIjtcbmltcG9ydCBCbHVmZnNHcm91cCBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9CbHVmZnNHcm91cC5qc1wiO1xuaW1wb3J0IEJsdWZmU2V0IGZyb20gXCIuLi8uLi9jbGFzc2VzL0JsdWZmU2V0LmpzXCI7XG5pbXBvcnQgU2V0dGFibGVUaXRsZSBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9TZXR0YWJsZVRpdGxlLmpzXCI7XG5pbXBvcnQge1xuICAgIGxvb2t1cCxcbiAgICBsb29rdXBPbmUsXG4gICAgbG9va3VwT25lQ2FjaGVkLFxuICAgIHJlcGxhY2VDb250ZW50c01hbnlcbn0gZnJvbSBcIi4uLy4uL3V0aWxzL2VsZW1lbnRzLmpzXCI7XG5cbmNvbnN0IGdhbWVPYnNlcnZlciA9IE9ic2VydmVyLmNyZWF0ZShcImdhbWVcIik7XG5jb25zdCB0b2tlbk9ic2VydmVyID0gT2JzZXJ2ZXIuY3JlYXRlKFwidG9rZW5cIik7XG5jb25zdCB0b2tlbkRpYWxvZyA9IFRva2VuRGlhbG9nLmdldCgpO1xuY29uc3QgYmx1ZmZEaWFsb2cgPSBCbHVmZkRpYWxvZy5jcmVhdGUobG9va3VwT25lKFwiI2JsdWZmLXNob3dcIikpO1xuXG5CbHVmZnNHcm91cC5zZXRUZW1wbGF0ZShUZW1wbGF0ZS5jcmVhdGUobG9va3VwT25lKFwiI2RlbW9uLWJsdWZmcy10ZW1wbGF0ZVwiKSkpO1xuXG5Ub2tlblN0b3JlLnJlYWR5KCh0b2tlblN0b3JlKSA9PiB7XG5cbiAgICBCbHVmZlNldC5zZXRFbXB0eUNoYXJhY3Rlcih0b2tlblN0b3JlLmdldEVtcHR5Q2hhcmFjdGVyKCkpO1xuXG4gICAgY29uc3QgYmx1ZmZHcm91cHNDb250YWluZXIgPSBsb29rdXBPbmUoXCIjZGVtb24tYmx1ZmZzLWdyb3VwXCIpO1xuICAgIGNvbnN0IGJsdWZmR3JvdXBzID0gQmx1ZmZzR3JvdXBzLmNyZWF0ZShibHVmZkdyb3Vwc0NvbnRhaW5lcik7XG4gICAgYmx1ZmZHcm91cHMuY3JlYXRlRW1wdHlHcm91cCA9ICgpID0+IG5ldyBCbHVmZnNHcm91cChuZXcgQmx1ZmZTZXQoKSk7XG4gICAgYmx1ZmZHcm91cHMuY29udmVydElkID0gKGlkKSA9PiB0b2tlblN0b3JlLmdldENoYXJhY3RlcihpZCk7XG4gICAgYmx1ZmZHcm91cHMuYW5ub3VuY2VVcGRhdGUgPSAoKSA9PiB7XG5cbiAgICAgICAgdG9rZW5PYnNlcnZlci50cmlnZ2VyKFwiYmx1ZmZcIiwge1xuICAgICAgICAgICAgZGF0YTogYmx1ZmZHcm91cHMuc2VyaWFsaXNlKClcbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgYmx1ZmZHcm91cHNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoXCIuanMtLWRlbW9uLWJsdWZmcy0tcmVtb3ZlXCIpO1xuICAgICAgICBjb25zdCBncm91cCA9IGJ1dHRvbj8uY2xvc2VzdChcIi5qcy0tZGVtb24tYmx1ZmZzLS1ncm91cFwiKTtcblxuICAgICAgICBpZiAoIWJ1dHRvbiB8fCAhZ3JvdXApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJsdWZmR3JvdXBzLnJlbW92ZUJ5SW5kZXgoZ3JvdXAuZGF0YXNldC5ncm91cElkKTtcblxuICAgIH0pO1xuXG4gICAgYmx1ZmZHcm91cHNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoXCIuanMtLWRlbW9uLWJsdWZmcy0tYmx1ZmZbZGF0YS1pbmRleF1cIik7XG5cbiAgICAgICAgaWYgKCFidXR0b24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGJsdWZmR3JvdXBzLnNldElubmVySW5kZXgoYnV0dG9uLmRhdGFzZXQuaW5kZXgpO1xuICAgICAgICBibHVmZkRpYWxvZy5kaXNwbGF5KFxuICAgICAgICAgICAgYmx1ZmZHcm91cHMuZ2V0VmlzaWJsZUdyb3VwKCkuZ2V0Q2hhcmFjdGVyKCksXG4gICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiaXMtb3JwaGFuXCIpXG4gICAgICAgICk7XG5cbiAgICB9KTtcblxuICAgIGJsdWZmR3JvdXBzQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoQmx1ZmZzR3JvdXBzLlZJU0lCTEUsICh7IHRhcmdldCB9KSA9PiB7XG4gICAgICAgIGJsdWZmR3JvdXBzLnNldFZpc2libGVHcm91cEluZGV4KHRhcmdldC5kYXRhc2V0Lmdyb3VwSWQpO1xuICAgIH0pO1xuXG4gICAgYmx1ZmZHcm91cHNDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcihCbHVmZnNHcm91cC5SRUFEWSwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBibHVmZkdyb3VwXG4gICAgICAgIH0gPSBkZXRhaWw7XG4gICAgICAgIGNvbnN0IGVsZW1lbnQgPSBibHVmZkdyb3VwLmdldEVsZW1lbnQoKTtcblxuICAgICAgICBsb29rdXAoXCJbZGF0YS1ibHVmZi1kaWFsb2ddXCIsIGVsZW1lbnQpLmZvckVhY2goKHRyaWdnZXIpID0+IHtcbiAgICAgICAgICAgIHRyaWdnZXIuZGlhbG9nID0gQmx1ZmZEaWFsb2cuY3JlYXRlRnJvbVRyaWdnZXIodHJpZ2dlcik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHNldHRhYmxlVGl0bGUgPSBuZXcgU2V0dGFibGVUaXRsZShcbiAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy0tc2V0dGFibGUtdGl0bGUtLXRpdGxlXCIpLFxuICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmpzLS1zZXR0YWJsZS10aXRsZS0taW5wdXRcIilcbiAgICAgICAgKTtcbiAgICAgICAgc2V0dGFibGVUaXRsZS5hbm5vdW5jZVVwZGF0ZSA9ICgpID0+IGJsdWZmR3JvdXBzLmFubm91bmNlVXBkYXRlKCk7XG4gICAgICAgIGJsdWZmR3JvdXAuc2V0U2V0dGFibGVUaXRsZShzZXR0YWJsZVRpdGxlKTtcblxuICAgIH0pO1xuXG4gICAgYmx1ZmZHcm91cHMuZGlzYWJsZUFubm91bmNlbWVudHMoKTtcbiAgICBibHVmZkdyb3Vwcy5yZWFkeShCbHVmZnNHcm91cHMuZ2V0RW1wdHlEYXRhKCkpO1xuICAgIGJsdWZmR3JvdXBzLmVuYWJsZUFubm91bmNlbWVudHMoKTtcblxuICAgIGxvb2t1cE9uZShcIiNhZGQtYmx1ZmZzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgIGJsdWZmR3JvdXBzLmFkZEVtcHR5KCk7XG4gICAgfSk7XG5cbiAgICBnYW1lT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXJzLXNlbGVjdGVkXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICAgICAgY29uc3QgY2hhcmFjdGVyVGVtcGxhdGUgPSBUZW1wbGF0ZS5jcmVhdGUoXG4gICAgICAgICAgICBsb29rdXBPbmVDYWNoZWQoXCIjY2hhcmFjdGVyLWxpc3QtdGVtcGxhdGVcIilcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVycyA9IFtcbiAgICAgICAgICAgIHRva2VuU3RvcmUuY2hhcmFjdGVyc1tUb2tlblN0b3JlLkVNUFRZXSxcbiAgICAgICAgICAgIC4uLmRldGFpbC5jaGFyYWN0ZXJzXG4gICAgICAgIF07XG5cbiAgICAgICAgcmVwbGFjZUNvbnRlbnRzTWFueShcbiAgICAgICAgICAgIGxvb2t1cE9uZUNhY2hlZChcIiNjaGFyYWN0ZXItbGlzdF9fYmx1ZmZzXCIpLFxuICAgICAgICAgICAgY2hhcmFjdGVycy5tYXAoKGNoYXJhY3RlcikgPT4gY2hhcmFjdGVyVGVtcGxhdGUuZHJhdyh7XG4gICAgICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci1saXN0LS1pdGVtXCIoZWxlbWVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGF0YXNldC5jaGFyYWN0ZXJJZCA9IGNoYXJhY3Rlci5nZXRJZCgpO1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGFzZXQudGVhbSA9IGNoYXJhY3Rlci5nZXRUZWFtKCk7XG5cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwiLmpzLS1jaGFyYWN0ZXItbGlzdC0tYnV0dG9uXCIoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGFzZXQudG9rZW5JZCA9IGNoYXJhY3Rlci5nZXRJZCgpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci1saXN0LS10b2tlblwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQoY2hhcmFjdGVyLmRyYXdUb2tlbigpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSlcbiAgICAgICAgKTtcblxuICAgIH0pO1xuXG4gICAgLy8gU2hvdyBhbGwgcG9zc2libGUgYmx1ZmZzIGRpYWxvZy5cblxuICAgIGZ1bmN0aW9uIHRvZ2dsZUJsdWZmTGlzdENsYXNzKGNsYXNzTmFtZSwgc3RhdGUpIHtcblxuICAgICAgICBsb29rdXBPbmVDYWNoZWQoXCIjY2hhcmFjdGVyLWxpc3RfX2JsdWZmc1wiKVxuICAgICAgICAgICAgLmNsYXNzTGlzdFxuICAgICAgICAgICAgLnRvZ2dsZShjbGFzc05hbWUsIHN0YXRlKTtcblxuICAgIH1cblxuICAgIGxvb2t1cE9uZShcIiNzaG93LWV4aXN0aW5nXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKHsgdGFyZ2V0IH0pID0+IHtcbiAgICAgICAgdG9nZ2xlQmx1ZmZMaXN0Q2xhc3MoXCJpcy1zaG93LWV4aXN0aW5nXCIsIHRhcmdldC5jaGVja2VkKTtcbiAgICB9KTtcblxuICAgIGxvb2t1cE9uZShcIiNzaG93LXRyYXZlbGxlcnNcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuICAgICAgICB0b2dnbGVCbHVmZkxpc3RDbGFzcyhcImlzLXNob3ctdHJhdmVsbGVyc1wiLCB0YXJnZXQuY2hlY2tlZCk7XG4gICAgfSk7XG5cbiAgICBsb29rdXBPbmUoXCIjc2hvdy1ldmlsXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKHsgdGFyZ2V0IH0pID0+IHtcbiAgICAgICAgdG9nZ2xlQmx1ZmZMaXN0Q2xhc3MoXCJpcy1zaG93LWV2aWxcIiwgdGFyZ2V0LmNoZWNrZWQpO1xuICAgIH0pO1xuXG4gICAgY29uc3Qgcm9sZXNJblBsYXkgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gICAgdG9rZW5PYnNlcnZlci5vbihcImNoYXJhY3Rlci1hZGRcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgICAgICBjb25zdCBpZCA9IGRldGFpbC5jaGFyYWN0ZXIuZ2V0SWQoKTtcblxuICAgICAgICBpZiAoIXJvbGVzSW5QbGF5W2lkXSkge1xuICAgICAgICAgICAgcm9sZXNJblBsYXlbaWRdID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJvbGVzSW5QbGF5W2lkXSArPSAxO1xuXG4gICAgfSk7XG5cbiAgICB0b2tlbk9ic2VydmVyLm9uKFwiY2hhcmFjdGVyLXJlbW92ZVwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IGlkID0gZGV0YWlsLmNoYXJhY3Rlci5nZXRJZCgpO1xuXG4gICAgICAgIGlmIChyb2xlc0luUGxheVtpZF0pIHtcbiAgICAgICAgICAgIHJvbGVzSW5QbGF5W2lkXSAtPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFyb2xlc0luUGxheVtpZF0gfHwgcm9sZXNJblBsYXlbaWRdIDwgMCkge1xuICAgICAgICAgICAgZGVsZXRlIHJvbGVzSW5QbGF5W2lkXTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBjb25zdCBibHVmZkxpc3REaWFsb2cgPSBEaWFsb2cuY3JlYXRlKGxvb2t1cE9uZShcIiNibHVmZi1saXN0XCIpKTtcblxuICAgIGJsdWZmTGlzdERpYWxvZy5vbihEaWFsb2cuU0hPVywgKCkgPT4ge1xuXG4gICAgICAgIE9iamVjdFxuICAgICAgICAgICAgLmtleXMocm9sZXNJblBsYXkpXG4gICAgICAgICAgICAuY29uY2F0KGJsdWZmR3JvdXBzLmdldFZpc2libGVHcm91cCgpLnNlcmlhbGlzZSgpLnNldClcbiAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbikgLy8gcmVtb3ZlIGFueSBlbXB0eSBJRHNcbiAgICAgICAgICAgIC5mb3JFYWNoKChpZCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgY29uc3QgdG9rZW4gPSBsb29rdXBPbmUoXG4gICAgICAgICAgICAgICAgICAgIGAjY2hhcmFjdGVyLWxpc3RfX2JsdWZmcyBbZGF0YS1jaGFyYWN0ZXItaWQ9XCIke2lkfVwiXWBcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHRva2VuPy5jbGFzc0xpc3QuYWRkKFwiaXMtaW4tcGxheVwiKTtcblxuICAgICAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGJsdWZmTGlzdERpYWxvZy5vbihEaWFsb2cuSElERSwgKCkgPT4ge1xuXG4gICAgICAgIGxvb2t1cChcIiNjaGFyYWN0ZXItbGlzdF9fYmx1ZmZzIC5pcy1pbi1wbGF5XCIpLmZvckVhY2goKHRva2VuKSA9PiB7XG4gICAgICAgICAgICB0b2tlbi5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtaW4tcGxheVwiKTtcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIGxvb2t1cE9uZShcIiNjaGFyYWN0ZXItbGlzdF9fYmx1ZmZzXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KFwiW2RhdGEtdG9rZW4taWRdXCIpXG5cbiAgICAgICAgaWYgKCFidXR0b24pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGFzc2lnbiB0aGUgY2hvc2VuIGNoYXJhY3RlciB0byB0aGUgY29ycmVjdCBzZXRcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gdG9rZW5TdG9yZS5nZXRDaGFyYWN0ZXIoYnV0dG9uLmRhdGFzZXQudG9rZW5JZCk7XG4gICAgICAgIGJsdWZmR3JvdXBzLnNldENoYXJhY3RlcihjaGFyYWN0ZXIpO1xuICAgICAgICBibHVmZkdyb3Vwcy5yZWRyYXcoKTtcbiAgICAgICAgLy8gY2xvc2UgdGhlIGRpYWxvZ1xuICAgICAgICBibHVmZkxpc3REaWFsb2cuaGlkZSgpO1xuICAgICAgICBibHVmZkRpYWxvZy5oaWRlKCk7XG5cbiAgICB9KTtcblxuICAgIC8vIEJsdWZmIHRva2VuIGRpYWxvZy5cblxuICAgIGxvb2t1cE9uZUNhY2hlZChcbiAgICAgICAgXCIjYmx1ZmYtc2hvdy10b2tlblwiLFxuICAgICAgICBibHVmZkRpYWxvZy5nZXRFbGVtZW50KClcbiAgICApLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IGlkID0gdGFyZ2V0LmNsb3Nlc3QoXCJbZGF0YS1jaGFyYWN0ZXItaWRdXCIpPy5kYXRhc2V0LmNoYXJhY3RlcklkO1xuXG4gICAgICAgIGlmICghaWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRva2VuRGlhbG9nLnNldElkcyhbaWRdKTtcbiAgICAgICAgdG9rZW5EaWFsb2cuc2hvdygpO1xuICAgICAgICBibHVmZkRpYWxvZy5oaWRlKCk7XG5cbiAgICB9KTtcblxuICAgIGxvb2t1cE9uZUNhY2hlZChcIiNzaG93LWFsbC1ibHVmZnNcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICAgICAgdG9rZW5EaWFsb2cuc2V0SWRzKGJsdWZmR3JvdXBzLmdldFZpc2libGVHcm91cCgpLnNlcmlhbGlzZSgpLnNldCk7XG4gICAgICAgIHRva2VuRGlhbG9nLnNldE11bHRpcGxlVGl0bGUodGFyZ2V0LmRhdGFzZXQudGl0bGUpO1xuICAgICAgICB0b2tlbkRpYWxvZy5zaG93KCk7XG5cbiAgICB9KTtcblxuICAgIGdhbWVPYnNlcnZlci5vbihcImNsZWFyXCIsICgpID0+IHtcblxuICAgICAgICBibHVmZkdyb3Vwcy5yZW1vdmVBbGwoKTtcbiAgICAgICAgYmx1ZmZHcm91cHMuYWRkRW1wdHkoKTtcblxuICAgIH0pO1xuXG4gICAgLy8gIzEzMSAtIGhpZ2hsaWdodCBhbnkgb3JwaGFuIGNoYXJhY3RlcnMuXG4gICAgZ2FtZU9ic2VydmVyLm9uKFwiY2hhcmFjdGVycy1zZWxlY3RlZFwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgICAgIFRva2VuU3RvcmUucmVhZHkoKCkgPT4ge1xuXG4gICAgICAgICAgICBjb25zdCBncm91cCA9IGJsdWZmR3JvdXBzLmdldFZpc2libGVHcm91cCgpO1xuXG4gICAgICAgICAgICBncm91cFxuICAgICAgICAgICAgICAgIC5lbGVtZW50XG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuanMtLWRlbW9uLWJsdWZmcy0tYmx1ZmZcIilcbiAgICAgICAgICAgICAgICAuZm9yRWFjaCgoYnV0dG9uKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSBidXR0b24uZGF0YXNldC5pbmRleDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gZ3JvdXAuYmx1ZmZTZXQuY2hhcmFjdGVyc1tpbmRleF07XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGNoYXJhY3Rlci5nZXRJZCgpID09PSBCbHVmZlNldC5lbXB0eUNoYXJhY3Rlci5nZXRJZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGFySW5kZXggPSBkZXRhaWwuY2hhcmFjdGVycy5maW5kSW5kZXgoKGNoYXIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjaGFyLmdldElkKCkgPT09IGNoYXJhY3Rlci5nZXRJZCgpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJpcy1vcnBoYW5cIiwgY2hhckluZGV4IDwgMCk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG59KTtcbiIsImltcG9ydCBTdG9yZSBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9TdG9yZS5qc1wiO1xuaW1wb3J0IERpYWxvZyBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9EaWFsb2cuanNcIjtcbmltcG9ydCB7XG4gICAgbG9va3VwT25lLFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcbmltcG9ydCB7XG4gICAgZW1wdHksXG59IGZyb20gXCIuLi8uLi91dGlscy9vYmplY3RzLmpzXCI7XG5cbmNvbnN0IGdhbWVEYXRhID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuU3RvcmUuY3JlYXRlKFwicG9ja2V0LWdyaW1vaXJlXCIpLmFkZExpc3RlbmVyKCh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBlbXB0eShnYW1lRGF0YSk7XG4gICAgT2JqZWN0LmFzc2lnbihnYW1lRGF0YSwge1xuICAgICAgICBzY3JpcHQ6IGRldGFpbC5jaGFyYWN0ZXJzLm5hbWUsXG4gICAgICAgIGRhdGU6IChuZXcgRGF0ZSgpKS50b0lTT1N0cmluZygpLFxuICAgICAgICBkYXk6IDEsXG4gICAgICAgIHBsYXllcnM6IGRldGFpbC50b2tlbnMubWFwKCh0b2tlbikgPT4ge1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHRva2VuczogW10sXG4gICAgICAgICAgICAgICAgbmFtZTogdG9rZW4ucGxheWVyTmFtZSxcbiAgICAgICAgICAgICAgICBtZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZGVhZDogdG9rZW4uaXNEZWFkLFxuICAgICAgICAgICAgICAgIGlkOiB3aW5kb3cuY3J5cHRvLnJhbmRvbVVVSUQoKSxcbiAgICAgICAgICAgICAgICBzdXNwZWN0ZWRSb2xlOiB7XG4gICAgICAgICAgICAgICAgICAgIGlkOiB0b2tlbi5pZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgfSlcbiAgICB9KTtcblxufSk7XG5cbmNvbnN0IHRyaWdnZXIgPSBsb29rdXBPbmUoXCIjZXhwb3J0LXRyaWdnZXJcIik7XG5jb25zdCBob2xkZXIgPSBsb29rdXBPbmUoXCIjZXhwb3J0LWhvbGRlclwiKTtcbmNvbnN0IGltYWdlID0gbG9va3VwT25lKFwiI2V4cG9ydC1pbWFnZVwiKTtcblxudHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXG4gICAgdHJpZ2dlci5jbGFzc0xpc3QuYWRkKFwiaXMtbG9hZGluZ1wiKTtcblxuICAgIGZldGNoKFwiaHR0cHM6Ly9xci10aGluZy5uZXRsaWZ5LmFwcC8ubmV0bGlmeS9mdW5jdGlvbnMvcXJcIiwge1xuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShnYW1lRGF0YSksXG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKVxuICAgICAgICAudGhlbigoanNvbikgPT4ge1xuXG4gICAgICAgICAgICBpbWFnZS5zcmMgPSBqc29uLnFyO1xuICAgICAgICAgICAgdHJpZ2dlci5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtbG9hZGluZ1wiKTtcbiAgICAgICAgICAgIGhvbGRlci5oaWRkZW4gPSBmYWxzZTtcblxuICAgICAgICB9KTtcblxufSk7XG5cbmNvbnN0IGRpYWxvZyA9IERpYWxvZy5jcmVhdGUobG9va3VwT25lKFwiI2dhbWUtZXhwb3J0XCIpKTtcblxuZGlhbG9nLm9uKERpYWxvZy5ISURFLCAoKSA9PiB7XG4gICAgaG9sZGVyLmhpZGRlbiA9IHRydWU7XG4gICAgdHJpZ2dlci5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtbG9hZGluZ1wiKTtcbn0pO1xuIiwiaW1wb3J0IE9ic2VydmVyIGZyb20gXCIuLi8uLi9jbGFzc2VzL09ic2VydmVyLmpzXCI7XG5pbXBvcnQgVG9rZW5TdG9yZSBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9Ub2tlblN0b3JlLmpzXCI7XG5pbXBvcnQgRGlhbG9nIGZyb20gXCIuLi8uLi9jbGFzc2VzL0RpYWxvZy5qc1wiO1xuaW1wb3J0IFRlbXBsYXRlIGZyb20gXCIuLi8uLi9jbGFzc2VzL1RlbXBsYXRlLmpzXCI7XG5pbXBvcnQge1xuICAgIGxvb2t1cCxcbiAgICBsb29rdXBPbmUsXG4gICAgbG9va3VwT25lQ2FjaGVkLFxuICAgIHJlcGxhY2VDb250ZW50c01hbnlcbn0gZnJvbSBcIi4uLy4uL3V0aWxzL2VsZW1lbnRzLmpzXCI7XG5pbXBvcnQge1xuICAgIGVtcHR5XG59IGZyb20gXCIuLi8uLi91dGlscy9vYmplY3RzLmpzXCI7XG5cbmNvbnN0IGdhbWVPYnNlcnZlciA9IE9ic2VydmVyLmNyZWF0ZShcImdhbWVcIik7XG5jb25zdCB0b2tlbk9ic2VydmVyID0gT2JzZXJ2ZXIuY3JlYXRlKFwidG9rZW5cIik7XG5cblxuLy8gSW5jbHVkZSBhbGwgdGhlIEZhYmxlZCBpbiB0aGUgZmFibGVkIGxpc3QuXG5cbmNvbnN0IGhvbWVicmV3RmFibGVkID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmNvbnN0IG9mZmljaWFsRmFibGVkID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbmxldCBjaGFyYWN0ZXJUZW1wbGF0ZSA9IG51bGw7XG5cbmZ1bmN0aW9uIHBvcHVsYXRlRmFibGVkKCkge1xuXG4gICAgY29uc3QgZmFibGVkID0gT2JqZWN0LnZhbHVlcyh7Li4ub2ZmaWNpYWxGYWJsZWQsIC4uLmhvbWVicmV3RmFibGVkfSk7XG5cbiAgICBpZiAoIWNoYXJhY3RlclRlbXBsYXRlKSB7XG5cbiAgICAgICAgY2hhcmFjdGVyVGVtcGxhdGUgPSBUZW1wbGF0ZS5jcmVhdGUoXG4gICAgICAgICAgICBsb29rdXBPbmVDYWNoZWQoXCIjY2hhcmFjdGVyLWxpc3QtdGVtcGxhdGVcIilcbiAgICAgICAgKTtcblxuICAgIH1cblxuICAgIHJlcGxhY2VDb250ZW50c01hbnkoXG4gICAgICAgIGxvb2t1cE9uZUNhY2hlZChcIiNmYWJsZWQtbGlzdF9fbGlzdFwiKSxcbiAgICAgICAgZmFibGVkLm1hcCgoZmFibGUpID0+IGNoYXJhY3RlclRlbXBsYXRlLmRyYXcoe1xuICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci1saXN0LS1pdGVtLC5qcy0tY2hhcmFjdGVyLWxpc3QtLWJ1dHRvblwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGFzZXQudG9rZW5JZCA9IGZhYmxlLmdldElkKCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci1saXN0LS10b2tlblwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmFwcGVuZChmYWJsZS5kcmF3VG9rZW4oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKVxuICAgICk7XG5cbiAgICBsb29rdXBPbmVDYWNoZWQoXCIjYWRkLWZhYmxlZFwiKS5kaXNhYmxlZCA9IGZhbHNlO1xuXG59XG5cbmdhbWVPYnNlcnZlci5vbihcImNoYXJhY3RlcnMtc2VsZWN0ZWRcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIGVtcHR5KGhvbWVicmV3RmFibGVkKTtcblxuICAgIGRldGFpbC5jaGFyYWN0ZXJzXG4gICAgICAgIC5maWx0ZXIoKGNoYXJhY3RlcikgPT4gY2hhcmFjdGVyLmdldFRlYW0oKSA9PT0gXCJmYWJsZWRcIilcbiAgICAgICAgLmZvckVhY2goKGNoYXJhY3RlcikgPT4gaG9tZWJyZXdGYWJsZWRbY2hhcmFjdGVyLmdldElkKCldID0gY2hhcmFjdGVyKTtcblxuICAgIHBvcHVsYXRlRmFibGVkKCk7XG5cbn0pO1xuXG5Ub2tlblN0b3JlLnJlYWR5KCh0b2tlblN0b3JlKSA9PiB7XG5cbiAgICBlbXB0eShvZmZpY2lhbEZhYmxlZCk7XG5cbiAgICB0b2tlblN0b3JlXG4gICAgICAgIC5nZXRBbGxDaGFyYWN0ZXJzKClcbiAgICAgICAgLmZpbHRlcigoY2hhcmFjdGVyKSA9PiBjaGFyYWN0ZXIuZ2V0VGVhbSgpID09PSBcImZhYmxlZFwiKVxuICAgICAgICAuZm9yRWFjaCgoY2hhcmFjdGVyKSA9PiBvZmZpY2lhbEZhYmxlZFtjaGFyYWN0ZXIuZ2V0SWQoKV0gPSBjaGFyYWN0ZXIpO1xuXG4gICAgcG9wdWxhdGVGYWJsZWQoKTtcblxufSk7XG5cbi8vIEFkZCB0byB0aGUgZ3JpbW9pcmUgd2hlbiBjbGlja2VkLlxuXG5jb25zdCBwYWQgPSBsb29rdXBPbmVDYWNoZWQoXCIuanMtLXBhZFwiKS5wYWQ7XG5cbmxvb2t1cE9uZUNhY2hlZChcIiNmYWJsZWQtbGlzdF9fbGlzdFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKHsgdGFyZ2V0IH0pID0+IHtcblxuICAgIGNvbnN0IGJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KFwiW2RhdGEtdG9rZW4taWRdXCIpO1xuXG4gICAgaWYgKCFidXR0b24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIFRva2VuU3RvcmUucmVhZHkoKHRva2VuU3RvcmUpID0+IHtcblxuICAgICAgICBwYWQuYWRkQ2hhcmFjdGVyKHRva2VuU3RvcmUuZ2V0Q2hhcmFjdGVyKGJ1dHRvbi5kYXRhc2V0LnRva2VuSWQpKTtcbiAgICAgICAgRGlhbG9nLmNyZWF0ZShsb29rdXBPbmVDYWNoZWQoXCIjZmFibGVkLWxpc3RcIikpLmhpZGUoKTtcblxuICAgIH0pO1xuXG59KTtcblxuLy8gTmlnaHQgT3JkZXIuXG4vLyAjMTU1IC0gTGV0IHRoZSBOaWdodE9yZGVyIGNsYXNzIG1hbmFnZSB0aGUgbmlnaHQgb3JkZXIuXG5cbmNvbnN0IGZhYmxlZENvdW50ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxudG9rZW5PYnNlcnZlci5vbihcImNoYXJhY3Rlci1hZGRcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIGNvbnN0IGNoYXJhY3RlciA9IGRldGFpbC5jaGFyYWN0ZXI7XG5cbiAgICBpZiAoY2hhcmFjdGVyLmdldFRlYW0oKSAhPT0gXCJmYWJsZWRcIikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaWQgPSBjaGFyYWN0ZXIuZ2V0SWQoKTtcblxuICAgIGlmICghZmFibGVkQ291bnRbaWRdKSB7XG4gICAgICAgIGZhYmxlZENvdW50W2lkXSA9IDA7XG4gICAgfVxuXG4gICAgZmFibGVkQ291bnRbaWRdICs9IDE7XG5cbn0pO1xuXG50b2tlbk9ic2VydmVyLm9uKFwiY2hhcmFjdGVyLXJlbW92ZVwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgY29uc3QgY2hhcmFjdGVyID0gZGV0YWlsLmNoYXJhY3RlcjtcblxuICAgIGlmIChjaGFyYWN0ZXIuZ2V0VGVhbSgpICE9PSBcImZhYmxlZFwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpZCA9IGNoYXJhY3Rlci5nZXRJZCgpO1xuXG4gICAgaWYgKGZhYmxlZENvdW50W2lkXSkge1xuICAgICAgICBmYWJsZWRDb3VudFtpZF0gLT0gMTtcbiAgICB9XG5cbn0pO1xuXG4vLyBSZW1pbmRlciB0b2tlbnMuXG5cbnRva2VuT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXItYWRkXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBjb25zdCBjaGFyYWN0ZXIgPSBkZXRhaWwuY2hhcmFjdGVyO1xuXG4gICAgaWYgKGNoYXJhY3Rlci5nZXRUZWFtKCkgIT09IFwiZmFibGVkXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNoYXJhY3Rlci5nZXRSZW1pbmRlcnMoKS5mb3JFYWNoKChyZW1pbmRlcikgPT4ge1xuICAgICAgICBsb29rdXBPbmVDYWNoZWQoXCIjcmVtaW5kZXItbGlzdF9fbGlzdFwiKS5hcHBlbmQocmVtaW5kZXIuZHJhd0xpc3QoKSk7XG4gICAgfSk7XG5cbn0pO1xuXG50b2tlbk9ic2VydmVyLm9uKFwiY2hhcmFjdGVyLXJlbW92ZVwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgY29uc3QgY2hhcmFjdGVyID0gZGV0YWlsLmNoYXJhY3RlcjtcbiAgICBjb25zdCBjb3VudCA9IGZhYmxlZENvdW50W2NoYXJhY3Rlci5nZXRJZCgpXTtcblxuICAgIGlmIChjaGFyYWN0ZXIuZ2V0VGVhbSgpICE9PSBcImZhYmxlZFwiIHx8IGNvdW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjaGFyYWN0ZXIuZ2V0UmVtaW5kZXJzKCkuZm9yRWFjaCgocmVtaW5kZXIpID0+IHtcblxuICAgICAgICBsb29rdXBPbmUoXG4gICAgICAgICAgICBgW2RhdGEtcmVtaW5kZXItaWQ9XCIke3JlbWluZGVyLmdldElkKCl9XCJdYCxcbiAgICAgICAgICAgIGxvb2t1cE9uZUNhY2hlZChcIiNyZW1pbmRlci1saXN0X19saXN0XCIpXG4gICAgICAgICk/LnJlbW92ZSgpO1xuXG4gICAgfSk7XG5cbn0pO1xuIiwiaW1wb3J0IFBhZCBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9QYWQuanNcIjtcbmltcG9ydCBQb3NpdGlvbmVyIGZyb20gXCIuLi8uLi9jbGFzc2VzL1Bvc2l0aW9uZXIuanNcIjtcbmltcG9ydCBPYnNlcnZlciBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9PYnNlcnZlci5qc1wiO1xuaW1wb3J0IFJlbWluZGVyVG9rZW4gZnJvbSBcIi4uLy4uL2NsYXNzZXMvUmVtaW5kZXJUb2tlbi5qc1wiO1xuaW1wb3J0IERpYWxvZyBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9EaWFsb2cuanNcIjtcbmltcG9ydCBUb2tlblN0b3JlIGZyb20gXCIuLi8uLi9jbGFzc2VzL1Rva2VuU3RvcmUuanNcIjtcbmltcG9ydCB7XG4gICAgbG9va3VwLFxuICAgIGxvb2t1cE9uZSxcbiAgICBsb29rdXBPbmVDYWNoZWQsXG4gICAgcmVwbGFjZUNvbnRlbnRzTWFueVxufSBmcm9tIFwiLi4vLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcblxuY29uc3QgZ2FtZU9ic2VydmVyID0gT2JzZXJ2ZXIuY3JlYXRlKFwiZ2FtZVwiKTtcbmNvbnN0IHRva2VuT2JzZXJ2ZXIgPSBPYnNlcnZlci5jcmVhdGUoXCJ0b2tlblwiKTtcblxuY29uc3QgcGFkRWxlbWVudCA9IGxvb2t1cE9uZUNhY2hlZChcIi5qcy0tcGFkXCIpO1xuY29uc3QgcGFkID0gbmV3IFBhZChwYWRFbGVtZW50LCB0b2tlbk9ic2VydmVyKTtcbnBhZEVsZW1lbnQucGFkID0gcGFkO1xuXG5jb25zdCBzdHlsZU9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG11dGF0aW9ucykgPT4ge1xuXG4gICAgZ2FtZU9ic2VydmVyLnRyaWdnZXIoXCJwYWQtaGVpZ2h0LWNoYW5nZVwiLCB7XG4gICAgICAgIGhlaWdodDogbXV0YXRpb25zWzBdLnRhcmdldC5zdHlsZS5oZWlnaHRcbiAgICB9KTtcblxufSk7XG5cbnN0eWxlT2JzZXJ2ZXIub2JzZXJ2ZShwYWRFbGVtZW50LCB7XG4gICAgYXR0cmlidXRlczogdHJ1ZSxcbiAgICBhdHRyaWJ1dGVGaWx0ZXI6IFtcInN0eWxlXCJdXG59KTtcblxuLy8gSWYgdGhlIGVsZW1lbnRzIGFyZSB3aXRoaW4gYSBjbG9zZWQgPGRldGFpbHM+IGVsZW1lbnQgdGhlbiB0aGVpciBoZWlnaHQgYW5kXG4vLyB3aWR0aCB3aWxsIGJlIDAuIExpc3RlbiBmb3IgdGhlIHBhZCBiZWNvbWluZyB2aXNpYmxlIGFuZCB1cGRhdGUgdGhlIGNsYXNzLlxubG9va3VwKFwiZGV0YWlsc1wiKS5mb3JFYWNoKChkZXRhaWxzKSA9PiB7XG5cbiAgICBkZXRhaWxzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b2dnbGVcIiwgKCkgPT4ge1xuICAgICAgICBwYWQudXBkYXRlRGltZW5zaW9ucygpO1xuICAgIH0pO1xuXG59KTtcblxuZ2FtZU9ic2VydmVyLm9uKFwiY2hhcmFjdGVycy1zZWxlY3RlZFwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgY29uc3QgY2hhcmFjdGVycyA9IGRldGFpbC5jaGFyYWN0ZXJzLmZpbHRlcigoY2hhcmFjdGVyKSA9PiB7XG4gICAgICAgIGNvbnN0IHRlYW0gPSBjaGFyYWN0ZXIuZ2V0VGVhbSgpO1xuICAgICAgICByZXR1cm4gdGVhbSAhPT0gXCJmYWJsZWRcIiAmJiB0ZWFtICE9PSBcInRyYXZlbGxlclwiO1xuICAgIH0pO1xuXG4gICAgcmVwbGFjZUNvbnRlbnRzTWFueShcbiAgICAgICAgbG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1saXN0X19saXN0XCIpLFxuICAgICAgICBjaGFyYWN0ZXJzLm1hcCgoY2hhcmFjdGVyKSA9PiBjaGFyYWN0ZXIuZHJhd0xpc3QoKSlcbiAgICApO1xuXG4gICAgY29uc3QgcmVtaW5kZXJzID0gY2hhcmFjdGVycy5yZWR1Y2UoKHJlbWluZGVycywgY2hhcmFjdGVyKSA9PiB7XG4gICAgICAgIHJldHVybiByZW1pbmRlcnMuY29uY2F0KGNoYXJhY3Rlci5nZXRSZW1pbmRlcnMoKSk7XG4gICAgfSwgUmVtaW5kZXJUb2tlbi5nZXRHbG9iYWwoKSk7XG5cbiAgICByZXBsYWNlQ29udGVudHNNYW55KFxuICAgICAgICBsb29rdXBPbmVDYWNoZWQoXCIjcmVtaW5kZXItbGlzdF9fbGlzdFwiKSxcbiAgICAgICAgcmVtaW5kZXJzLm1hcCgocmVtaW5kZXIpID0+IHJlbWluZGVyLmRyYXdMaXN0KCkpXG4gICAgKTtcblxuICAgIGxvb2t1cE9uZUNhY2hlZChcIiNhZGQtdG9rZW5cIikuZGlzYWJsZWQgPSBmYWxzZTtcbiAgICBsb29rdXBPbmVDYWNoZWQoXCIjYWRkLXJlbWluZGVyXCIpLmRpc2FibGVkID0gZmFsc2U7XG4gICAgbG9va3VwT25lQ2FjaGVkKFwiI3Nob3ctdG9rZW5zXCIpLmRpc2FibGVkID0gZmFsc2U7XG5cbn0pO1xuXG5nYW1lT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXItZHJhd25cIiwgKHsgZGV0YWlsIH0pID0+IHtcbiAgICBwYWQuYWRkTmV3Q2hhcmFjdGVyKGRldGFpbC5jaGFyYWN0ZXIpO1xufSk7XG5cbmxvb2t1cE9uZShcIiNzaG93LW5pZ2h0LW9yZGVyXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKHsgdGFyZ2V0IH0pID0+IHtcblxuICAgIHBhZEVsZW1lbnQuc3R5bGVbXG4gICAgICAgIHRhcmdldC5jaGVja2VkXG4gICAgICAgID8gXCJyZW1vdmVQcm9wZXJ0eVwiXG4gICAgICAgIDogXCJzZXRQcm9wZXJ0eVwiXG4gICAgXShcIi0tbmlnaHQtb3JkZXItZGlzcGxheVwiLCBcIm5vbmVcIik7XG5cbn0pO1xuXG5nYW1lT2JzZXJ2ZXIub24oXCJjbGVhclwiLCAoKSA9PiBwYWQucmVzZXQoKSk7XG5cbi8vIENoYXJhY3RlciBhbmQgUmVtaW5kZXIgdG9rZW4gc2l6ZXMuXG5cbmNvbnN0IGh0bWwgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cbmxvb2t1cE9uZShcIiN0b2tlbi1zaXplXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuICAgIGh0bWwuc3R5bGUuc2V0UHJvcGVydHkoXCItLXRva2VuLXNpemVcIiwgdGFyZ2V0LnZhbHVlKTtcbn0pO1xuXG5sb29rdXBPbmUoXCIjcmVtaW5kZXItc2l6ZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKHsgdGFyZ2V0IH0pID0+IHtcbiAgICBodG1sLnN0eWxlLnNldFByb3BlcnR5KFwiLS1yZW1pbmRlci1zaXplXCIsIHRhcmdldC52YWx1ZSk7XG59KTtcblxuLy8gVG9rZW4gYXV0by1wbGFjZW1lbnRzLlxuXG5wYWQuc2V0UG9zaXRpb25lcihuZXcgUG9zaXRpb25lcigpKTtcblxuY29uc3QgdG9rZW5MYXlvdXQgPSBsb29rdXBPbmUoXCIjdG9rZW4tbGF5b3V0XCIpO1xuXG5wYWQudXBkYXRlUG9zaXRpb25lcih7XG4gICAgbGF5b3V0OiB0b2tlbkxheW91dC52YWx1ZSxcbiAgICAvLyBBdCB0aGlzIHN0YWdlLCBtb3N0IG9mIHRoZSBwb3NpdGlvbmVyIHByb2JhYmx5IGhhc24ndCBiZWVuIHNldCB1cCBzbyB3ZSdkXG4gICAgLy8gZ2V0IGEgZmV3IGlzc3VlcyBpZiB3ZSB0cnkgdG8gZ2VuZXJhdGUgdGhlIGNvLW9yZGluYXRlcy4gQmV0dGVyIHRvIGp1c3RcbiAgICAvLyBnaXZlIHRoZSBwb3NpdGlvbmVyIHNvbWUgZGF0YSBhbmQgZ2VuZXJhdGUgdGhlIGNvLW9yZGluYXRlcyBsYXRlci5cbiAgICBnZW5lcmF0ZTogZmFsc2Vcbn0pO1xuXG50b2tlbkxheW91dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICBwYWQudXBkYXRlUG9zaXRpb25lcih7IGxheW91dDogdG9rZW5MYXlvdXQudmFsdWUgfSk7XG59KTtcblxuZ2FtZU9ic2VydmVyLm9uKFwicGxheWVyLWNvdW50XCIsICh7IGRldGFpbCB9KSA9PiB7XG4gICAgcGFkLnVwZGF0ZVBvc2l0aW9uZXIoeyB0b3RhbDogZGV0YWlsLmNvdW50IH0pO1xufSk7XG5cbmdhbWVPYnNlcnZlci5vbihcInBhZC1oZWlnaHQtY2hhbmdlXCIsICgpID0+IHtcbiAgICBwYWQudXBkYXRlUG9zaXRpb25lcih7IGNvbnRhaW5lcjogdHJ1ZSB9KTtcbn0pO1xuXG5EaWFsb2cuY3JlYXRlKGxvb2t1cE9uZUNhY2hlZChcIiNjaGFyYWN0ZXItc2VsZWN0XCIpKS5vbihEaWFsb2cuU0hPVywgKCkgPT4ge1xuXG4gICAgY29uc3QgZ3JpbW9pcmVTZWN0aW9uID0gbG9va3VwT25lQ2FjaGVkKFwiI2dyaW1vaXJlXCIpO1xuICAgIGNvbnN0IGlzT3BlbiA9IGdyaW1vaXJlU2VjdGlvbi5vcGVuO1xuXG4gICAgaWYgKCFpc09wZW4pIHtcbiAgICAgICAgZ3JpbW9pcmVTZWN0aW9uLm9wZW4gPSB0cnVlO1xuICAgIH1cblxuICAgIHBhZC51cGRhdGVQb3NpdGlvbmVyKHtcbiAgICAgICAgY29udGFpbmVyOiB0cnVlLFxuICAgICAgICB0b2tlbnM6IHRydWUsXG4gICAgICAgIHRvdGFsOiBsb29rdXBPbmVDYWNoZWQoXCIjcGxheWVyLWNvdW50XCIpLnZhbHVlXG4gICAgfSk7XG5cbiAgICBpZiAoIWlzT3Blbikge1xuICAgICAgICBncmltb2lyZVNlY3Rpb24ub3BlbiA9IGZhbHNlO1xuICAgIH1cblxufSk7XG5cblRva2VuU3RvcmUucmVhZHkoKHRva2VuU3RvcmUpID0+IHtcbiAgICBwYWQuc2V0VG9rZW5TdG9yZSh0b2tlblN0b3JlKTtcbn0pO1xuIiwiaW1wb3J0IE9ic2VydmVyIGZyb20gXCIuLi8uLi9jbGFzc2VzL09ic2VydmVyLmpzXCI7XG5pbXBvcnQgRGlhbG9nIGZyb20gXCIuLi8uLi9jbGFzc2VzL0RpYWxvZy5qc1wiO1xuaW1wb3J0IFRva2VuU3RvcmUgZnJvbSBcIi4uLy4uL2NsYXNzZXMvVG9rZW5TdG9yZS5qc1wiO1xuaW1wb3J0IHtcbiAgICBlbXB0eSxcbiAgICBpZGVudGlmeSxcbiAgICBsb29rdXAsXG4gICAgbG9va3VwT25lLFxuICAgIGxvb2t1cE9uZUNhY2hlZFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcblxuY29uc3QgdG9rZW5PYnNlcnZlciA9IE9ic2VydmVyLmNyZWF0ZShcInRva2VuXCIpO1xuY29uc3QgcGFkID0gbG9va3VwT25lQ2FjaGVkKFwiLmpzLS1wYWRcIikucGFkO1xuY29uc3QgcmVtaW5kZXJMaXN0ID0gbG9va3VwT25lQ2FjaGVkKFwiI3JlbWluZGVyLWxpc3RcIik7XG5jb25zdCByZW1pbmRlckxpc3REaWFsb2cgPSBEaWFsb2cuY3JlYXRlKHJlbWluZGVyTGlzdCk7XG5cbmZ1bmN0aW9uIGdldENvb3JkcyhlbGVtZW50KSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZWxlbWVudC5kYXRhc2V0LmNvb3JkcyB8fCBcIm51bGxcIik7XG59XG5cbmZ1bmN0aW9uIGFkZFJlbWluZGVyUXVpY2sodGFyZ2V0LCB0b2tlblN0b3JlLCBjb29yZHMpIHtcblxuICAgIGNvbnN0IGJ1dHRvbiA9IHRhcmdldD8uY2xvc2VzdChcIltkYXRhLXJlbWluZGVyLWlkXVwiKTtcblxuICAgIGlmICghYnV0dG9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjbG9uZSA9IHRva2VuU3RvcmUuZ2V0UmVtaW5kZXJDbG9uZShidXR0b24uZGF0YXNldC5yZW1pbmRlcklkKTtcbiAgICBjb25zdCB7XG4gICAgICAgIHRva2VuXG4gICAgfSA9IHBhZC5hZGRSZW1pbmRlcihjbG9uZSk7XG5cbiAgICBpZiAoY29vcmRzKSB7XG4gICAgICAgIHBhZC5tb3ZlVG9rZW4odG9rZW4sIGNvb3Jkcy54LCBjb29yZHMueSk7XG4gICAgfVxuXG4gICAgcmVtaW5kZXJMaXN0RGlhbG9nLmhpZGUoKTtcblxufVxuXG5mdW5jdGlvbiB0b2dnbGVSZW1pbmRlcih0YXJnZXQpIHtcblxuICAgIGNvbnN0IGJ1dHRvbiA9IHRhcmdldC5jbG9zZXN0KFwiW2RhdGEtcmVtaW5kZXItaWRdXCIpO1xuICAgIGNvbnN0IGNoZWNrYm94ID0gbG9va3VwT25lKFxuICAgICAgICBgLmpzLS1yZW1pbmRlci1saXN0LS1jaGVja2JveFt2YWx1ZT1cIiR7YnV0dG9uPy5kYXRhc2V0LnJlbWluZGVySWR9XCJdYFxuICAgICk7XG5cbiAgICBpZiAoIWJ1dHRvbiB8fCAhY2hlY2tib3gpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNoZWNrYm94LmNoZWNrZWQgPSAhY2hlY2tib3guY2hlY2tlZDtcblxufVxuXG5Ub2tlblN0b3JlLnJlYWR5KCh0b2tlblN0b3JlKSA9PiB7XG5cbiAgICBsZXQgaXNBZGRNdWx0aXBsZSA9IGZhbHNlO1xuXG4gICAgLy8gQWRkIGEgcmVtaW5kZXIgdG8gdGhlIHBhZ2UgaWYgaXQncyBjbGlja2VkIGZyb20gdGhlIGxpc3QuXG4gICAgbG9va3VwT25lQ2FjaGVkKFwiI3JlbWluZGVyLWxpc3RfX2xpc3RcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICAgICAgaWYgKGlzQWRkTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIHRvZ2dsZVJlbWluZGVyKHRhcmdldCk7XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGFkZFJlbWluZGVyUXVpY2sodGFyZ2V0LCB0b2tlblN0b3JlLCBnZXRDb29yZHMocmVtaW5kZXJMaXN0KSk7XG4gICAgICAgICAgICByZW1pbmRlckxpc3REaWFsb2cuaGlkZSgpO1xuXG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgY29uc3QgbXVsdGlwbGVSZW1pbmRlcnMgPSBsb29rdXBPbmUoXCIjbXVsdGlwbGUtcmVtaW5kZXJzXCIpO1xuICAgIGNvbnN0IGFkZEFsbFJlbWluZGVycyA9IGxvb2t1cE9uZShcIi5qcy0tcmVtaW5kZXItbGlzdC0tbXVsdGlwbGVcIik7XG5cbiAgICBtdWx0aXBsZVJlbWluZGVycy5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcblxuICAgICAgICBjb25zdCBpc05vd0FkZE11bHRpcGxlID0gbXVsdGlwbGVSZW1pbmRlcnMuY2hlY2tlZDtcblxuICAgICAgICBpc0FkZE11bHRpcGxlID0gaXNOb3dBZGRNdWx0aXBsZTtcbiAgICAgICAgYWRkQWxsUmVtaW5kZXJzLmhpZGRlbiA9ICFpc05vd0FkZE11bHRpcGxlO1xuXG4gICAgICAgIGlmICghaXNOb3dBZGRNdWx0aXBsZSkge1xuXG4gICAgICAgICAgICBsb29rdXAoXCIuanMtLXJlbWluZGVyLWxpc3QtLWNoZWNrYm94XCIpLmZvckVhY2goKGNoZWNrYm94KSA9PiB7XG4gICAgICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICBhZGRBbGxSZW1pbmRlcnMuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblxuICAgICAgICBjb25zdCBjb29yZHMgPSBnZXRDb29yZHMocmVtaW5kZXJMaXN0KSB8fCB7IHg6IDAsIHk6IDAgfTtcblxuICAgICAgICBsb29rdXAoXCIuanMtLXJlbWluZGVyLWxpc3QtLWNoZWNrYm94OmNoZWNrZWRcIikuZm9yRWFjaCgoY2hlY2tib3gpID0+IHtcblxuICAgICAgICAgICAgLy8gVE9ETzogcmVwbGFjZSB0aGlzIHdpdGggYSBQb3NpdGlvbmVyP1xuICAgICAgICAgICAgY29vcmRzLnggKz0gMTU7XG4gICAgICAgICAgICBjb29yZHMueSArPSAxNTtcbiAgICAgICAgICAgIGFkZFJlbWluZGVyUXVpY2soXG4gICAgICAgICAgICAgICAgbG9va3VwT25lKGAuanMtLXJlbWluZGVyLWxpc3QtLWJ1dHRvbltkYXRhLXJlbWluZGVyLWlkPVwiJHtjaGVja2JveC52YWx1ZX1cIl1gKSxcbiAgICAgICAgICAgICAgICB0b2tlblN0b3JlLFxuICAgICAgICAgICAgICAgIGNvb3Jkc1xuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGNoZWNrYm94LmNoZWNrZWQgPSBmYWxzZTtcblxuICAgICAgICB9KTtcblxuICAgICAgICByZW1pbmRlckxpc3REaWFsb2cuaGlkZSgpO1xuXG4gICAgfSk7XG5cbiAgICBjb25zdCByZWNlbnRSZW1pbmRlcnMgPSBsb29rdXBPbmVDYWNoZWQoXCIjY2hhcmFjdGVyLXNob3ctcmVtaW5kZXJzXCIpO1xuXG4gICAgLy8gQWRkIGEgcmVtaW5kZXIgdG9rZW4gdG8gdGhlIHBhZ2UgaWYgdGhlIHJlY2VudGx5LWFkZGVkLXJlbWluZGVyIGlzIGNsaWNrZWQuXG4gICAgcmVjZW50UmVtaW5kZXJzLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgICAgIGFkZFJlbWluZGVyUXVpY2sodGFyZ2V0LCB0b2tlblN0b3JlLCBnZXRDb29yZHMocmVjZW50UmVtaW5kZXJzKSk7XG4gICAgICAgIERpYWxvZy5jcmVhdGUobG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1zaG93XCIpKS5oaWRlKCk7XG5cbiAgICB9KTtcblxuICAgIGNvbnN0IHJlbWluZGVyRGlhbG9nID0gRGlhbG9nLmNyZWF0ZShsb29rdXBPbmUoXCIjcmVtaW5kZXItc2hvd1wiKSk7XG4gICAgY29uc3QgcmVtaW5kZXJIb2xkZXIgPSBsb29rdXBPbmUoXCIjcmVtaW5kZXItc2hvdy10b2tlblwiKTtcblxuICAgIC8vIFBvcHVsYXRlIHRoZSByZW1pbmRlciBkaWFsb2cgYXMgYSByZW1pbmRlciBpcyBjbGlja2VkLlxuICAgIHRva2VuT2JzZXJ2ZXIub24oXCJyZW1pbmRlci1jbGlja1wiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGVsZW1lbnRcbiAgICAgICAgfSA9IGRldGFpbDtcbiAgICAgICAgY29uc3QgcmVtaW5kZXIgPSB0b2tlblN0b3JlLmdldFJlbWluZGVyKGVsZW1lbnQuZGF0YXNldC5yZW1pbmRlcik7XG5cbiAgICAgICAgZW1wdHkocmVtaW5kZXJIb2xkZXIpLmFwcGVuZChyZW1pbmRlci5kcmF3VG9rZW4oKSk7XG4gICAgICAgIHJlbWluZGVySG9sZGVyLmRhdGFzZXQudG9rZW4gPSBgIyR7aWRlbnRpZnkoZWxlbWVudCl9YDtcbiAgICAgICAgbG9va3VwT25lQ2FjaGVkKFwiI3JlbWluZGVyLXNob3ctb3JwaGFuXCIpLmhpZGRlbiA9IChcbiAgICAgICAgICAgICFlbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhcImlzLW9ycGhhblwiKVxuICAgICAgICApO1xuICAgICAgICByZW1pbmRlckRpYWxvZy5zaG93KCk7XG5cbiAgICB9KTtcblxuICAgIC8vIFJlbW92ZSBhIHJlbWluZGVyIHdoZW4gaXRzIFwicmVtb3ZlXCIgYnV0dG9uIGlzIGNsaWNrZWQuXG4gICAgbG9va3VwT25lKFwiI3JlbWluZGVyLXJlbW92ZVwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IHRva2VuID0gbG9va3VwT25lKHJlbWluZGVySG9sZGVyLmRhdGFzZXQudG9rZW4pO1xuXG4gICAgICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhZC5yZW1vdmVSZW1pbmRlckJ5VG9rZW4odG9rZW4pO1xuICAgICAgICByZW1pbmRlckRpYWxvZy5oaWRlKCk7XG5cbiAgICB9KTtcblxuICAgIGNvbnN0IGNvdW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgY29uc3QgbGlzdCA9IGxvb2t1cE9uZUNhY2hlZChcIiNyZW1pbmRlci1saXN0X19saXN0XCIpO1xuXG4gICAgLy8gSWYgYSBjaGFyYWN0ZXIgaXMgYWRkZWQgdG8gdGhlIGdyaW1vaXJlLCBtYWtlIHN1cmUgdGhhdCBpdHMgcmVtaW5kZXJzIGFyZVxuICAgIC8vIHZpc2libGUgaW4gdGhlIGxpc3QuXG4gICAgdG9rZW5PYnNlcnZlci5vbihcImNoYXJhY3Rlci1hZGRcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJcbiAgICAgICAgfSA9IGRldGFpbDtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVySWQgPSBjaGFyYWN0ZXIuZ2V0SWQoKTtcblxuICAgICAgICBpZiAoIWNvdW50c1tjaGFyYWN0ZXJJZF0pIHtcbiAgICAgICAgICAgIGNvdW50c1tjaGFyYWN0ZXJJZF0gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgY291bnRzW2NoYXJhY3RlcklkXSArPSAxO1xuXG4gICAgICAgIGNoYXJhY3Rlci5nZXRSZW1pbmRlcnMoKS5mb3JFYWNoKChyZW1pbmRlcikgPT4ge1xuXG4gICAgICAgICAgICBsb29rdXBPbmUoXG4gICAgICAgICAgICAgICAgYFtkYXRhLXJlbWluZGVyLWlkPVwiJHtyZW1pbmRlci5nZXRJZCgpfVwiXWAsXG4gICAgICAgICAgICAgICAgbGlzdFxuICAgICAgICAgICAgKT8uY2xhc3NMaXN0LmFkZChcImlzLWluLXBsYXlcIik7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIC8vIElmIGEgY2hhcmFjdGVyIGlzIHJlbW92ZWQgZnJvbSB0aGUgZ3JpbW9pcmUsIGFuZCB0aGVyZSBhcmUgbm8gb3RoZXJcbiAgICAvLyBjb3BpZXMgb2YgdGhhdCBjaGFyYWN0ZXIgaW4gdGhlIGdyaW1vaXJlLCBoaWRlIGl0cyByZW1pbmRlcnMuXG4gICAgdG9rZW5PYnNlcnZlci5vbihcImNoYXJhY3Rlci1yZW1vdmVcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBjaGFyYWN0ZXJcbiAgICAgICAgfSA9IGRldGFpbDtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVySWQgPSBjaGFyYWN0ZXIuZ2V0SWQoKTtcblxuICAgICAgICBpZiAoY291bnRzW2NoYXJhY3RlcklkXSkge1xuICAgICAgICAgICAgY291bnRzW2NoYXJhY3RlcklkXSAtPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFjb3VudHNbY2hhcmFjdGVySWRdKSB7XG5cbiAgICAgICAgICAgIGNoYXJhY3Rlci5nZXRSZW1pbmRlcnMoKS5mb3JFYWNoKChyZW1pbmRlcikgPT4ge1xuXG4gICAgICAgICAgICAgICAgbG9va3VwT25lKFxuICAgICAgICAgICAgICAgICAgICBgW2RhdGEtcmVtaW5kZXItaWQ9XCIke3JlbWluZGVyLmdldElkKCl9XCJdYCxcbiAgICAgICAgICAgICAgICAgICAgbGlzdFxuICAgICAgICAgICAgICAgICk/LmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1pbi1wbGF5XCIpO1xuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgIGxvb2t1cE9uZShcIiNzaG93LWFsbC1yZW1pbmRlcnNcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuICAgICAgICBsaXN0LmNsYXNzTGlzdC50b2dnbGUoXCJpcy1zaG93LWFsbFwiLCB0YXJnZXQuY2hlY2tlZCk7XG4gICAgfSk7XG5cbn0pO1xuXG5yZW1pbmRlckxpc3REaWFsb2cub24oRGlhbG9nLkhJREUsICh7IHRhcmdldCB9KSA9PiB7XG4gICAgdGFyZ2V0LnJlbW92ZUF0dHJpYnV0ZShcImRhdGEtY29vcmRzXCIpO1xufSk7XG4iLCJpbXBvcnQgT2JzZXJ2ZXIgZnJvbSBcIi4uLy4uL2NsYXNzZXMvT2JzZXJ2ZXIuanNcIjtcbmltcG9ydCB7XG4gICAgbG9va3VwT25lLFxuICAgIGxvb2t1cE9uZUNhY2hlZFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcblxuY29uc3QgZ2FtZU9ic2VydmVyID0gT2JzZXJ2ZXIuY3JlYXRlKFwiZ2FtZVwiKTtcblxubG9va3VwT25lKFwiI3Jlc2V0LWhlaWdodFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGxvb2t1cE9uZUNhY2hlZChcIi5qcy0tcGFkXCIpLnN0eWxlLmhlaWdodCA9IFwiXCI7XG59KTtcblxubG9va3VwT25lKFwiI2NsZWFyLWdyaW1vaXJlXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgaWYgKHdpbmRvdy5jb25maXJtKHRhcmdldC5kYXRhc2V0LmNvbmZpcm0pKSB7XG4gICAgICAgIGdhbWVPYnNlcnZlci50cmlnZ2VyKFwiY2xlYXJcIik7XG4gICAgfVxuXG59KTtcbiIsImltcG9ydCBPYnNlcnZlciBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9PYnNlcnZlci5qc1wiO1xuaW1wb3J0IFRlbXBsYXRlIGZyb20gXCIuLi8uLi9jbGFzc2VzL1RlbXBsYXRlLmpzXCI7XG5pbXBvcnQgRGlhbG9nIGZyb20gXCIuLi8uLi9jbGFzc2VzL0RpYWxvZy5qc1wiO1xuaW1wb3J0IFRva2VuU3RvcmUgZnJvbSBcIi4uLy4uL2NsYXNzZXMvVG9rZW5TdG9yZS5qc1wiO1xuaW1wb3J0IHtcbiAgICBsb29rdXAsXG4gICAgbG9va3VwT25lLFxuICAgIGxvb2t1cE9uZUNhY2hlZCxcbiAgICByZXBsYWNlQ29udGVudHNNYW55XG59IGZyb20gXCIuLi8uLi91dGlscy9lbGVtZW50cy5qc1wiO1xuaW1wb3J0IHtcbiAgICBlbXB0eVxufSBmcm9tIFwiLi4vLi4vdXRpbHMvb2JqZWN0cy5qc1wiO1xuXG5jb25zdCBnYW1lT2JzZXJ2ZXIgPSBPYnNlcnZlci5jcmVhdGUoXCJnYW1lXCIpO1xuY29uc3QgdG9rZW5PYnNlcnZlciA9IE9ic2VydmVyLmNyZWF0ZShcInRva2VuXCIpO1xuXG4vLyBJbmNsdWRlIGFsbCB0aGUgVHJhdmVsbGVycyBpbiB0aGUgdHJhdmVsbGVyIGxpc3QuXG5cbmNvbnN0IG9mZmljaWFsVHJhdmVsbGVycyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5jb25zdCBob21lYnJld1RyYXZlbGxlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xubGV0IGNoYXJhY3RlclRlbXBsYXRlID0gbnVsbDtcblxuZnVuY3Rpb24gcG9wdWxhdGVUcmF2ZWxsZXJzKCkge1xuXG4gICAgY29uc3QgdHJhdmVsbGVycyA9IE9iamVjdC52YWx1ZXMoe1xuICAgICAgICAuLi5vZmZpY2lhbFRyYXZlbGxlcnMsXG4gICAgICAgIC4uLmhvbWVicmV3VHJhdmVsbGVyc1xuICAgIH0pO1xuXG4gICAgaWYgKCFjaGFyYWN0ZXJUZW1wbGF0ZSkge1xuXG4gICAgICAgIGNoYXJhY3RlclRlbXBsYXRlID0gVGVtcGxhdGUuY3JlYXRlKFxuICAgICAgICAgICAgbG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1saXN0LXRlbXBsYXRlXCIpXG4gICAgICAgICk7XG5cbiAgICB9XG5cbiAgICByZXBsYWNlQ29udGVudHNNYW55KFxuICAgICAgICBsb29rdXBPbmVDYWNoZWQoXCIjdHJhdmVsbGVyLWxpc3RfX2xpc3RcIiksXG4gICAgICAgIHRyYXZlbGxlcnMubWFwKCh0cmF2ZWxsZXIpID0+IGNoYXJhY3RlclRlbXBsYXRlLmRyYXcoe1xuICAgICAgICAgICAgXCIuanMtLWNoYXJhY3Rlci1saXN0LS1pdGVtLC5qcy0tY2hhcmFjdGVyLWxpc3QtLWJ1dHRvblwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICBlbGVtZW50LmRhdGFzZXQudG9rZW5JZCA9IHRyYXZlbGxlci5nZXRJZCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiLmpzLS1jaGFyYWN0ZXItbGlzdC0tdG9rZW5cIihlbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5hcHBlbmQodHJhdmVsbGVyLmRyYXdUb2tlbigpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpXG4gICAgKTtcblxuICAgIGxvb2t1cE9uZUNhY2hlZChcIiNhZGQtdHJhdmVsbGVyXCIpLmRpc2FibGVkID0gZmFsc2U7XG5cbn1cblxuVG9rZW5TdG9yZS5yZWFkeSgodG9rZW5TdG9yZSkgPT4ge1xuXG4gICAgZW1wdHkob2ZmaWNpYWxUcmF2ZWxsZXJzKTtcblxuICAgIHRva2VuU3RvcmVcbiAgICAgICAgLmdldEFsbENoYXJhY3RlcnMoKVxuICAgICAgICAuZmlsdGVyKChjaGFyYWN0ZXIpID0+IGNoYXJhY3Rlci5nZXRUZWFtKCkgPT09IFwidHJhdmVsbGVyXCIpXG4gICAgICAgIC5mb3JFYWNoKCh0cmF2ZWxsZXIpID0+IG9mZmljaWFsVHJhdmVsbGVyc1t0cmF2ZWxsZXIuZ2V0SWQoKV0gPSB0cmF2ZWxsZXIpO1xuXG4gICAgcG9wdWxhdGVUcmF2ZWxsZXJzKCk7XG5cbn0pO1xuXG5nYW1lT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXJzLXNlbGVjdGVkXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICAvLyBBZGQgYW55IGhvbWVicmV3IGNoYXJhY3RlcnMgdG8gdGhlIGxpc3QuXG5cbiAgICBlbXB0eShob21lYnJld1RyYXZlbGxlcnMpO1xuXG4gICAgZGV0YWlsLmNoYXJhY3RlcnNcbiAgICAgICAgLmZpbHRlcigoY2hhcmFjdGVyKSA9PiBjaGFyYWN0ZXIuZ2V0VGVhbSgpID09PSBcInRyYXZlbGxlclwiKVxuICAgICAgICAuZm9yRWFjaCgodHJhdmVsbGVyKSA9PiBob21lYnJld1RyYXZlbGxlcnNbdHJhdmVsbGVyLmdldElkKCldID0gdHJhdmVsbGVyKTtcblxuICAgIHBvcHVsYXRlVHJhdmVsbGVycygpO1xuXG4gICAgLy8gRmxhZyBUcmF2ZWxsZXJzIGluIHRoZSBzY3JpcHQgYXMgYmVpbmcgaW5jbHVkZWQuIEZvciBleGFtcGxlLCB0aGUgbWFpbiAzXG4gICAgLy8gZWRpdGlvbnMgaGF2ZSBUcmF2ZWxsZXJzIHRoYXQgY29tcGxlbWVudCB0aGUgc2NyaXB0LiBIb21lYnJldyBzY3JpcHRzXG4gICAgLy8gbWFpZ2h0IGhhdmUgdGhlaXIgb3duIFRyYXZlbGxlcnMgYXMgd2VsbC5cblxuICAgIGNvbnN0IHRyYXZlbGxlcklEcyA9IGRldGFpbC5jaGFyYWN0ZXJzXG4gICAgICAgIC5maWx0ZXIoKGNoYXJhY3RlcikgPT4gY2hhcmFjdGVyLmdldFRlYW0oKSA9PT0gXCJ0cmF2ZWxsZXJcIilcbiAgICAgICAgLm1hcCgoY2hhcmFjdGVyKSA9PiBjaGFyYWN0ZXIuZ2V0SWQoKSk7XG5cbiAgICBsb29rdXAoXG4gICAgICAgIFwiLmpzLS1jaGFyYWN0ZXItbGlzdC0taXRlbVtkYXRhLXRva2VuLWlkXVwiLFxuICAgICAgICBsb29rdXBPbmVDYWNoZWQoXCIjdHJhdmVsbGVyLWxpc3RfX2xpc3RcIilcbiAgICApLmZvckVhY2goKGl0ZW0pID0+IGl0ZW0uY2xhc3NMaXN0LnRvZ2dsZShcbiAgICAgICAgXCJpcy1pbmNsdWRlZFwiLFxuICAgICAgICB0cmF2ZWxsZXJJRHMuaW5jbHVkZXMoaXRlbS5kYXRhc2V0LnRva2VuSWQpXG4gICAgKSk7XG5cbn0pO1xuXG4vLyBBZGQgdG8gdGhlIGdyaW1vaXJlIHdoZW4gY2xpY2tlZC5cblxuY29uc3QgcGFkID0gbG9va3VwT25lQ2FjaGVkKFwiLmpzLS1wYWRcIikucGFkO1xuXG5sb29rdXBPbmVDYWNoZWQoXCIjdHJhdmVsbGVyLWxpc3RfX2xpc3RcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICBjb25zdCBidXR0b24gPSB0YXJnZXQuY2xvc2VzdChcIltkYXRhLXRva2VuLWlkXVwiKTtcblxuICAgIGlmICghYnV0dG9uKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBUb2tlblN0b3JlLnJlYWR5KCh0b2tlblN0b3JlKSA9PiB7XG5cbiAgICAgICAgcGFkLmFkZENoYXJhY3Rlcih0b2tlblN0b3JlLmdldENoYXJhY3RlcihidXR0b24uZGF0YXNldC50b2tlbklkKSk7XG4gICAgICAgIERpYWxvZy5jcmVhdGUobG9va3VwT25lQ2FjaGVkKFwiI3RyYXZlbGxlci1saXN0XCIpKS5oaWRlKCk7XG5cbiAgICB9KTtcblxufSk7XG5cbi8vIE5pZ2h0IE9yZGVyLlxuLy8gIzE1NSAtIExldCB0aGUgTmlnaHRPcmRlciBjbGFzcyBtYW5hZ2UgdGhlIG5pZ2h0IG9yZGVyLlxuXG5jb25zdCB0cmF2ZWxsZXJDb3VudCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbnRva2VuT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXItYWRkXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBjb25zdCBjaGFyYWN0ZXIgPSBkZXRhaWwuY2hhcmFjdGVyO1xuXG4gICAgaWYgKGNoYXJhY3Rlci5nZXRUZWFtKCkgIT09IFwidHJhdmVsbGVyXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGlkID0gY2hhcmFjdGVyLmdldElkKCk7XG5cbiAgICBpZiAoIXRyYXZlbGxlckNvdW50W2lkXSkge1xuICAgICAgICB0cmF2ZWxsZXJDb3VudFtpZF0gPSAwO1xuICAgIH1cblxuICAgIHRyYXZlbGxlckNvdW50W2lkXSArPSAxO1xuXG59KTtcblxudG9rZW5PYnNlcnZlci5vbihcImNoYXJhY3Rlci1yZW1vdmVcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIGNvbnN0IGNoYXJhY3RlciA9IGRldGFpbC5jaGFyYWN0ZXI7XG5cbiAgICBpZiAoY2hhcmFjdGVyLmdldFRlYW0oKSAhPT0gXCJ0cmF2ZWxsZXJcIikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgaWQgPSBjaGFyYWN0ZXIuZ2V0SWQoKTtcblxuICAgIGlmICh0cmF2ZWxsZXJDb3VudFtpZF0pIHtcbiAgICAgICAgdHJhdmVsbGVyQ291bnRbaWRdIC09IDE7XG4gICAgfVxuXG59KTtcblxuLy8gUmVtaW5kZXIgdG9rZW5zLlxuXG50b2tlbk9ic2VydmVyLm9uKFwiY2hhcmFjdGVyLWFkZFwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgY29uc3QgY2hhcmFjdGVyID0gZGV0YWlsLmNoYXJhY3RlcjtcblxuICAgIGlmIChjaGFyYWN0ZXIuZ2V0VGVhbSgpICE9PSBcInRyYXZlbGxlclwiKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjaGFyYWN0ZXIuZ2V0UmVtaW5kZXJzKCkuZm9yRWFjaCgocmVtaW5kZXIpID0+IHtcbiAgICAgICAgbG9va3VwT25lQ2FjaGVkKFwiI3JlbWluZGVyLWxpc3RfX2xpc3RcIikuYXBwZW5kKHJlbWluZGVyLmRyYXdMaXN0KCkpO1xuICAgIH0pO1xuXG59KTtcblxudG9rZW5PYnNlcnZlci5vbihcImNoYXJhY3Rlci1yZW1vdmVcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIGNvbnN0IGNoYXJhY3RlciA9IGRldGFpbC5jaGFyYWN0ZXI7XG4gICAgY29uc3QgY291bnQgPSB0cmF2ZWxsZXJDb3VudFtjaGFyYWN0ZXIuZ2V0SWQoKV07XG5cbiAgICBpZiAoY2hhcmFjdGVyLmdldFRlYW0oKSAhPT0gXCJ0cmF2ZWxsZXJcIiB8fCBjb3VudCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY2hhcmFjdGVyLmdldFJlbWluZGVycygpLmZvckVhY2goKHJlbWluZGVyKSA9PiB7XG5cbiAgICAgICAgbG9va3VwT25lKFxuICAgICAgICAgICAgYFtkYXRhLXJlbWluZGVyLWlkPVwiJHtyZW1pbmRlci5nZXRJZCgpfVwiXWAsXG4gICAgICAgICAgICBsb29rdXBPbmVDYWNoZWQoXCIjcmVtaW5kZXItbGlzdF9fbGlzdFwiKVxuICAgICAgICApPy5yZW1vdmUoKTtcblxuICAgIH0pO1xuXG59KTtcbiIsImltcG9ydCBUZW1wbGF0ZSBmcm9tIFwiLi4vY2xhc3Nlcy9UZW1wbGF0ZS5qc1wiO1xuaW1wb3J0IEluZm9Ub2tlbiBmcm9tIFwiLi4vY2xhc3Nlcy9JbmZvVG9rZW4uanNcIjtcbmltcG9ydCBPYnNlcnZlciBmcm9tIFwiLi4vY2xhc3Nlcy9PYnNlcnZlci5qc1wiO1xuaW1wb3J0IERpYWxvZyBmcm9tIFwiLi4vY2xhc3Nlcy9EaWFsb2cuanNcIjtcbmltcG9ydCB7XG4gICAgbG9va3VwT25lXG59IGZyb20gXCIuLi91dGlscy9lbGVtZW50cy5qc1wiO1xuXG5jb25zdCBidXR0b25Ib2xkZXIgPSBsb29rdXBPbmUoXCIjaW5mby10b2tlbi1idXR0b24taG9sZGVyXCIpO1xuY29uc3QgZGlhbG9nSG9sZGVyID0gbG9va3VwT25lKFwiI2luZm8tdG9rZW4tZGlhbG9nLWhvbGRlclwiKTtcblxuSW5mb1Rva2VuLnNldFRlbXBsYXRlcyh7XG4gICAgYnV0dG9uOiBUZW1wbGF0ZS5jcmVhdGUobG9va3VwT25lKFwiI2luZm8tdG9rZW4tYnV0dG9uLXRlbXBsYXRlXCIpKSxcbiAgICBkaWFsb2c6IFRlbXBsYXRlLmNyZWF0ZShsb29rdXBPbmUoXCIjaW5mby10b2tlbi1kaWFsb2ctdGVtcGxhdGVcIikpXG59KTtcbkluZm9Ub2tlbi5zZXRIb2xkZXJzKHtcbiAgICBidXR0b246IGJ1dHRvbkhvbGRlcixcbiAgICBjdXN0b206IGxvb2t1cE9uZShcIiNpbmZvLXRva2VuLWN1c3RvbS1ob2xkZXJcIiksXG4gICAgZGlhbG9nOiBkaWFsb2dIb2xkZXJcbn0pO1xuXG5KU09OLnBhcnNlKGJ1dHRvbkhvbGRlci5kYXRhc2V0LmluZm9Ub2tlbnMpLmZvckVhY2goKGRhdGEpID0+IHtcblxuICAgIGNvbnN0IHRva2VuID0gbmV3IEluZm9Ub2tlbihkYXRhKTtcbiAgICB0b2tlbi5kcmF3KCk7XG5cbn0pO1xuXG5jb25zdCBvYnNlcnZlciA9IE9ic2VydmVyLmNyZWF0ZShcImluZm8tdG9rZW5cIik7XG5cbmxvb2t1cE9uZShcIiNhZGQtaW5mby10b2tlblwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuXG4gICAgY29uc3QgdGV4dCA9IHdpbmRvdy5wcm9tcHQod2luZG93LkkxOE4uY3VzdG9tSW5mb1Rva2VuKTtcblxuICAgIGlmICghdGV4dCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdG9rZW4gPSBuZXcgSW5mb1Rva2VuKHtcbiAgICAgICAgcmF3OiB0ZXh0LFxuICAgICAgICBjdXN0b206IHRydWVcbiAgICB9KTtcbiAgICB0b2tlbi5kcmF3KCk7XG5cbiAgICBvYnNlcnZlci50cmlnZ2VyKFwiaW5mby10b2tlbi1hZGRlZFwiLCB7XG4gICAgICAgIHRva2VuXG4gICAgfSk7XG5cbn0pO1xuXG5jb25zdCBkaWFsb2cydG9rZW4gPSBuZXcgV2Vha01hcCgpO1xuXG5vYnNlcnZlci5vbihcImluZm8tdG9rZW4tYWRkZWRcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgdG9rZW5cbiAgICB9ID0gZGV0YWlsO1xuXG4gICAgZGlhbG9nMnRva2VuLnNldCh0b2tlbi5nZXREaWFsb2coKSwgdG9rZW4pO1xuXG59KTtcblxuZnVuY3Rpb24gZWRpdFRva2VuKHRva2VuLCByYXcpIHtcblxuICAgIHRva2VuLnVwZGF0ZVJhdyhyYXcpO1xuICAgIG9ic2VydmVyLnRyaWdnZXIoXCJpbmZvLXRva2VuLXVwZGF0ZWRcIiwge1xuICAgICAgICB0b2tlblxuICAgIH0pO1xuXG59XG5cbmZ1bmN0aW9uIGRlbGV0ZVRva2VuKHRva2VuKSB7XG5cbiAgICBEaWFsb2cuY3JlYXRlKHRva2VuLmdldERpYWxvZygpKS5oaWRlKCk7XG4gICAgdG9rZW4ucmVtb3ZlKCk7XG4gICAgb2JzZXJ2ZXIudHJpZ2dlcihcImluZm8tdG9rZW4tZGVsZXRlZFwiLCB7XG4gICAgICAgIHRva2VuXG4gICAgfSk7XG5cbn1cblxuZGlhbG9nSG9sZGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgY29uc3QgYnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoXCJidXR0b25bZGF0YS1hY3Rpb25dXCIpO1xuXG4gICAgaWYgKCFidXR0b24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRva2VuID0gZGlhbG9nMnRva2VuLmdldChidXR0b24uY2xvc2VzdChcIi5qcy0taW5mby10b2tlbi0tZGlhbG9nXCIpKTtcblxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHN3aXRjaCAoYnV0dG9uLmRhdGFzZXQuYWN0aW9uKSB7XG5cbiAgICBjYXNlIFwiZWRpdFwiOlxuXG4gICAgICAgIGNvbnN0IGRhdGEgPSB0b2tlbi5nZXREYXRhKCk7XG4gICAgICAgIGNvbnN0IHRleHQgPSB3aW5kb3cucHJvbXB0KHdpbmRvdy5JMThOLmN1c3RvbUluZm9Ub2tlbiwgZGF0YS5yYXcpO1xuXG4gICAgICAgIGlmICh0ZXh0KSB7XG4gICAgICAgICAgICBlZGl0VG9rZW4odG9rZW4sIHRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZGVsZXRlVG9rZW4odG9rZW4pO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG5cbiAgICBjYXNlIFwiZGVsZXRlXCI6XG5cbiAgICAgICAgZGVsZXRlVG9rZW4odG9rZW4pO1xuICAgICAgICBicmVhaztcblxuICAgIH1cblxufSk7XG4iLCJpbXBvcnQgT2JzZXJ2ZXIgZnJvbSBcIi4uL2NsYXNzZXMvT2JzZXJ2ZXIuanNcIjtcbmltcG9ydCBUb2tlblN0b3JlIGZyb20gXCIuLi9jbGFzc2VzL1Rva2VuU3RvcmUuanNcIjtcbmltcG9ydCBUZW1wbGF0ZSBmcm9tIFwiLi4vY2xhc3Nlcy9UZW1wbGF0ZS5qc1wiO1xuaW1wb3J0IEppbnggZnJvbSBcIi4uL2NsYXNzZXMvSmlueC5qc1wiO1xuaW1wb3J0IHtcbiAgICBsb29rdXBPbmUsXG4gICAgcmVwbGFjZUNvbnRlbnRzTWFueVxufSBmcm9tIFwiLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcblxuY29uc3QgZ2FtZU9ic2VydmVyID0gT2JzZXJ2ZXIuY3JlYXRlKFwiZ2FtZVwiKTtcbmNvbnN0IHRva2VuT2JzZXJ2ZXIgPSBPYnNlcnZlci5jcmVhdGUoXCJ0b2tlblwiKTtcblxuVG9rZW5TdG9yZS5yZWFkeSgodG9rZW5TdG9yZSkgPT4ge1xuXG4gICAgY29uc3QgdHJpY2tUb1RhcmdldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgY29uc3QgamlueFRlbXBsYXRlID0gVGVtcGxhdGUuY3JlYXRlKGxvb2t1cE9uZShcIiNqaW54LXRhYmxlLXRlbXBsYXRlXCIpKTtcblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGppbnggaW4gdGhlIHtAbGluayB0cmlja1RvVGFyZ2V0fSBtYXAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0ppbnh9IGppbnhcbiAgICAgKiAgICAgICAgSmlueCB0byByZWdpc3Rlci5cbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZWdpc3RlckppbngoamlueCkge1xuXG4gICAgICAgIGNvbnN0IHRyaWNrSWQgPSBqaW54LmdldFRyaWNrKCk/LmdldElkKCk7XG5cbiAgICAgICAgaWYgKCF0cmlja0lkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRyaWNrVG9UYXJnZXRbdHJpY2tJZF0pIHtcbiAgICAgICAgICAgIHRyaWNrVG9UYXJnZXRbdHJpY2tJZF0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyaWNrVG9UYXJnZXRbdHJpY2tJZF0ucHVzaChqaW54LmdldFRhcmdldCgpLmdldElkKCkpO1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGppbnggZnJvbSB0aGUge0BsaW5rIHRyaWNrVG9UYXJnZXR9IG1hcCwga2VlcGluZyBpdCB0aWR5IGFuZFxuICAgICAqIHByZXZlbnRpbmcgb2xkIGRhdGEgZnJvbSBjcmVhdGluZyBmYWxzZSBwb3NpdGl2ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0ppbnh9IGppbnhcbiAgICAgKiAgICAgICAgSmlueCB0byB1bnJlZ2lzdGVyLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIHVucmVnaXN0ZXJKaW54KGppbngpIHtcblxuICAgICAgICBjb25zdCB0cmlja0lkID0gamlueC5nZXRUcmljaygpPy5nZXRJZCgpO1xuXG4gICAgICAgIGlmICghdHJpY2tJZCB8fCAhdHJpY2tUb1RhcmdldFt0cmlja0lkXSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaW5kZXggPSB0cmlja1RvVGFyZ2V0W3RyaWNrSWRdLmluZGV4T2YoamlueC5nZXRUYXJnZXQoKS5nZXRJZCgpKTtcblxuICAgICAgICBpZiAoaW5kZXggPCAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cmlja1RvVGFyZ2V0W3RyaWNrSWRdLnNwbGljZShpbmRleCwgMSk7XG5cbiAgICAgICAgaWYgKCF0cmlja1RvVGFyZ2V0W3RyaWNrSWRdLmxlbmd0aCkge1xuICAgICAgICAgICAgZGVsZXRlIHRyaWNrVG9UYXJnZXRbdHJpY2tJZF07XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFjdGl2YXRlcyB0aGUgZ2l2ZW4gSmlueCwgc2V0dGluZyB0aGUgb2JzZXJ2ZXIgYW5kIHRlbXBsYXRlLCBhbmRcbiAgICAgKiByZWdpc3RlcmluZyBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SmlueH0gamlueFxuICAgICAqICAgICAgICBKaW54IHRvIGFjdGl2YXRlLlxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGFjdGl2YXRlSmlueChqaW54KSB7XG5cbiAgICAgICAgamlueC5zZXRPYnNlcnZlcih0b2tlbk9ic2VydmVyKTtcbiAgICAgICAgamlueC5zZXRUZW1wbGF0ZShqaW54VGVtcGxhdGUpO1xuICAgICAgICByZWdpc3RlckppbngoamlueCk7XG5cbiAgICB9XG5cbiAgICB0b2tlblN0b3JlLmdldEFsbEppbnhlcygpLmZvckVhY2goYWN0aXZhdGVKaW54KTtcblxuICAgIC8vIFVucmVhZHkgYW55IG9sZCBqaW54ZXMgYW5kIHJlYWR5IGFueSBqaW54ZXMgb24gdGhlIGN1cnJlbnQgc2NyaXB0LlxuICAgIGdhbWVPYnNlcnZlci5vbihcImNoYXJhY3RlcnMtc2VsZWN0ZWRcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgICAgICB0b2tlblN0b3JlLmdldEFsbEppbnhlcygpLmZvckVhY2goKGppbngpID0+IGppbngudG9nZ2xlUmVhZHkoZmFsc2UpKTtcbiAgICAgICAgdG9rZW5TdG9yZS5nZXRBbGxIb21lYnJld0ppbnhlcygpLmZvckVhY2godW5yZWdpc3RlckppbngpO1xuICAgICAgICB0b2tlblN0b3JlLnJlbW92ZUFsbEhvbWVicmV3SmlueGVzKCk7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgY2hhcmFjdGVyc1xuICAgICAgICB9ID0gZGV0YWlsO1xuXG4gICAgICAgIGNoYXJhY3RlcnMuZm9yRWFjaCgoY2hhcmFjdGVyKSA9PiB7XG5cbiAgICAgICAgICAgIC8vIEEgY2hhcmFjdGVyIHdpbGwgb25seSBoYXZlIFwiamlueGVzXCIgZGF0YSBpZiBpdCdzIGEgaG9tZWJyZXcgcm9sZVxuICAgICAgICAgICAgLy8gdGhhdCBpbmNsdWRlcyBqaW54ZXMuIFdoZW4gdGhhdCBoYXBwZW5zIC0gY3JlYXRlIEppbnggaW5zdGFuY2VzXG4gICAgICAgICAgICAvLyBmb3IgdGhlbSwgYWRkIHRoZW0gdG8gdGhlIGNoYXJhY3RlciwgYW5kIHJlZ2lzdGVyIHRoZW0gaW4gdGhlXG4gICAgICAgICAgICAvLyBzdG9yZSBzbyB0aGF0IHRoZXkgY2FuIGludGVyYWN0IHdpdGggdGhlIHN5c3RlbS5cbiAgICAgICAgICAgIGlmIChjaGFyYWN0ZXIuaGFzRGF0YShcImppbnhlc1wiKSkge1xuXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyLmdldERhdGEoXCJqaW54ZXNcIikuZm9yRWFjaCgoeyBpZCwgcmVhc29uIH0pID0+IHtcblxuICAgICAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHRyaWNrIGZyb20gdGhlIHRva2VuIHN0b3JlIG9yIHRoZSBjaGFyYWN0ZXJzXG4gICAgICAgICAgICAgICAgICAgIC8vIHRoYXQgaGF2ZSBiZWVuIHBhc3NlZCBpbiAtIHRoaXMgYWxsb3dzIG9uZSBob21lYnJld1xuICAgICAgICAgICAgICAgICAgICAvLyBjaGFyYWN0ZXIgdG8gYmUgamlueGVkIHdpdGggYW5vdGhlci5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdHJpY2sgPSAoXG4gICAgICAgICAgICAgICAgICAgICAgICB0b2tlblN0b3JlLmdldENoYXJhY3RlcihpZClcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8IGNoYXJhY3RlcnMuZmluZCgoY2hhcmFjdGVyKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYXJhY3Rlci5nZXRJZCgpID09PSBpZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGppbnggPSBuZXcgSmlueCh0cmljaywgcmVhc29uKTtcbiAgICAgICAgICAgICAgICAgICAgamlueC5zZXRJc0hvbWVicmV3KHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBjaGFyYWN0ZXIuYWRkSmlueChqaW54KTtcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZhdGVKaW54KGppbngpO1xuICAgICAgICAgICAgICAgICAgICB0b2tlblN0b3JlLmFkZEppbngoamlueCk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjaGFyYWN0ZXIucmVhZHlBbGxKaW54ZXMoY2hhcmFjdGVycyk7XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc3QgYWxsSmlueGVzID0gdG9rZW5TdG9yZS5nZXRBbGxKaW54ZXMoKTtcblxuICAgICAgICBnYW1lT2JzZXJ2ZXIudHJpZ2dlcihcImppbnhlcy1yZWFkeVwiLCB7XG4gICAgICAgICAgICBqaW54ZXM6IGFsbEppbnhlcy5maWx0ZXIoKGppbngpID0+IGppbnguaXNSZWFkeSgpKVxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgLy8gVG9nZ2xlIGppbnggc3RhdGVzIGJhc2VkIG9uIGNoYXJhY3RlcnMgYmVpbmcgc2VsZWN0ZWQgb3IgdW5zZWxlY3RlZC5cbiAgICBnYW1lT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXItdG9nZ2xlXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBhY3RpdmVcbiAgICAgICAgfSA9IGRldGFpbDtcblxuICAgICAgICBjb25zdCBjaGFyYWN0ZXIgPSB0b2tlblN0b3JlLmdldENoYXJhY3RlcihpZCk7XG5cbiAgICAgICAgY2hhcmFjdGVyLnRvZ2dsZUppbnhUYXJnZXQoYWN0aXZlKTtcblxuICAgICAgICB0cmlja1RvVGFyZ2V0W2lkXT8uZm9yRWFjaCgodGFyZ2V0SWQpID0+IHtcblxuICAgICAgICAgICAgdG9rZW5TdG9yZVxuICAgICAgICAgICAgICAgIC5nZXRDaGFyYWN0ZXIodGFyZ2V0SWQpXG4gICAgICAgICAgICAgICAgLnRvZ2dsZUppbnhUcmljayhjaGFyYWN0ZXIsIGFjdGl2ZSk7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIC8vIERyYXcgYWxsIHJlYWR5IGppbnhlcy5cbiAgICBjb25zdCBqaW54U2VjdGlvbiA9IGxvb2t1cE9uZShcIiNqaW54ZXNcIik7XG4gICAgY29uc3QgamlueFRhYmxlID0gbG9va3VwT25lKFwiI2ppbngtdGFibGVcIik7XG5cbiAgICBnYW1lT2JzZXJ2ZXIub24oXCJqaW54ZXMtcmVhZHlcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgICBqaW54ZXNcbiAgICAgICAgfSA9IGRldGFpbDtcblxuICAgICAgICBqaW54U2VjdGlvbi5oaWRkZW4gPSBqaW54ZXMubGVuZ3RoID09PSAwO1xuXG4gICAgICAgIHJlcGxhY2VDb250ZW50c01hbnkoXG4gICAgICAgICAgICBqaW54VGFibGUsXG4gICAgICAgICAgICBqaW54ZXMubWFwKChqaW54KSA9PiBqaW54LmRyYXcoKSlcbiAgICAgICAgKTtcblxuICAgIH0pO1xuXG4gICAgdG9rZW5PYnNlcnZlci5vbihcInRvZ2dsZS1qaW54LWFjdGl2ZVwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGppbngsXG4gICAgICAgICAgICBhY3RpdmVcbiAgICAgICAgfSA9IGRldGFpbDtcblxuICAgICAgICBsb29rdXBPbmUoYCMke2ppbnguZ2V0SWQoKX1gKT8uY2xhc3NMaXN0LnRvZ2dsZShcImlzLWFjdGl2ZVwiLCBhY3RpdmUpO1xuXG4gICAgfSk7XG5cbiAgICAvLyBBY3RpdmF0ZSBhbmQgZGVhY3RpdmF0ZSB0aGUgamlueGVzIGFzIGNoYXJhY3RlcnMgYXJlIGFkZGVkIHRvIHRoZVxuICAgIC8vIGdyaW1vaXJlIHBhZC5cbiAgICBjb25zdCBjaGFyYWN0ZXJzID0gW107XG5cbiAgICBmdW5jdGlvbiBhZGRDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XG5cbiAgICAgICAgY29uc3QgamlueGVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgICAgICBjaGFyYWN0ZXIuZ2V0SmlueGVzKCkuZm9yRWFjaCgoamlueCkgPT4ge1xuXG4gICAgICAgICAgICBqaW54LnRvZ2dsZVRhcmdldCh0cnVlKTtcbiAgICAgICAgICAgIGppbnhlc1tqaW54LmdldFRyaWNrKCkuZ2V0SWQoKV0gPSBqaW54O1xuXG4gICAgICAgIH0pO1xuICAgICAgICBjaGFyYWN0ZXJzLmZvckVhY2goKGNoYXIpID0+IHtcblxuICAgICAgICAgICAgY2hhci50b2dnbGVKaW54VHJpY2soY2hhcmFjdGVyLCB0cnVlKTtcbiAgICAgICAgICAgIGppbnhlc1tjaGFyLmdldElkKCldPy50b2dnbGVUcmljayh0cnVlKTtcblxuICAgICAgICB9KTtcbiAgICAgICAgY2hhcmFjdGVycy5wdXNoKGNoYXJhY3Rlcik7XG5cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVDaGFyYWN0ZXIoY2hhcmFjdGVyKSB7XG5cbiAgICAgICAgY29uc3QgaWQgPSBjaGFyYWN0ZXIuZ2V0SWQoKTtcblxuICAgICAgICBjaGFyYWN0ZXJzLnNwbGljZShjaGFyYWN0ZXJzLmluZGV4T2YoY2hhcmFjdGVyKSwgMSk7XG5cbiAgICAgICAgaWYgKCFjaGFyYWN0ZXJzLmZpbmQoKGNoYXIpID0+IGNoYXIuZ2V0SWQoKSA9PT0gaWQpKSB7XG5cbiAgICAgICAgICAgIGNoYXJhY3Rlci5nZXRKaW54ZXMoKS5mb3JFYWNoKChqaW54KSA9PiBqaW54LnRvZ2dsZVRhcmdldChmYWxzZSkpO1xuICAgICAgICAgICAgY2hhcmFjdGVycy5mb3JFYWNoKChjaGFyKSA9PiBjaGFyLnRvZ2dsZUppbnhUcmljayhjaGFyYWN0ZXIsIGZhbHNlKSk7XG5cbiAgICAgICAgfVxuXG4gICAgfVxuXG4gICAgdG9rZW5PYnNlcnZlci5vbihcImNoYXJhY3Rlci1hZGRcIiwgKHsgZGV0YWlsIH0pID0+IHtcbiAgICAgICAgYWRkQ2hhcmFjdGVyKGRldGFpbC5jaGFyYWN0ZXIpO1xuICAgIH0pO1xuXG4gICAgdG9rZW5PYnNlcnZlci5vbihcImNoYXJhY3Rlci1yZW1vdmVcIiwgKHsgZGV0YWlsIH0pID0+IHtcbiAgICAgICAgcmVtb3ZlQ2hhcmFjdGVyKGRldGFpbC5jaGFyYWN0ZXIpO1xuICAgIH0pO1xuXG4gICAgLy8gIzEyOCAtIHNvbWUgcmVtaW5kZXJzIHN0YW5kIGluIHBsYWNlIG9mIHRoZSBhY3R1YWwgdG9rZW4uXG4gICAgdG9rZW5PYnNlcnZlci5vbihcInJlbWluZGVyLWFkZFwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHJlbWluZGVyXG4gICAgICAgIH0gPSBkZXRhaWw7XG4gICAgICAgIGNvbnN0IGNoYXJhY3RlciA9IHRva2VuU3RvcmUuZ2V0Q2hhcmFjdGVyKHJlbWluZGVyLmdldENoYXJhY3RlcklkKCkpO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIHJlbWluZGVyLmdldElzR2xvYmFsKClcbiAgICAgICAgICAgICYmIHJlbWluZGVyLmdldElkKCkuZW5kc1dpdGgoXCI6MFwiKVxuICAgICAgICAgICAgJiYgY2hhcmFjdGVyLmhhc1NwZWNpYWxEYXRhKFwicmV2ZWFsXCIsIFwicmVwbGFjZS1jaGFyYWN0ZXJcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBhZGRDaGFyYWN0ZXIoY2hhcmFjdGVyKTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICAvLyAjMTI4IC0gc29tZSByZW1pbmRlcnMgc3RhbmQgaW4gcGxhY2Ugb2YgdGhlIGFjdHVhbCB0b2tlbi5cbiAgICB0b2tlbk9ic2VydmVyLm9uKFwicmVtaW5kZXItcmVtb3ZlXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgcmVtaW5kZXJcbiAgICAgICAgfSA9IGRldGFpbDtcbiAgICAgICAgY29uc3QgY2hhcmFjdGVyID0gdG9rZW5TdG9yZS5nZXRDaGFyYWN0ZXIocmVtaW5kZXIuZ2V0Q2hhcmFjdGVySWQoKSk7XG5cbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgcmVtaW5kZXIuZ2V0SXNHbG9iYWwoKVxuICAgICAgICAgICAgJiYgcmVtaW5kZXIuZ2V0SWQoKS5lbmRzV2l0aChcIjowXCIpXG4gICAgICAgICAgICAmJiBjaGFyYWN0ZXIuaGFzU3BlY2lhbERhdGEoXCJyZXZlYWxcIiwgXCJyZXBsYWNlLWNoYXJhY3RlclwiKVxuICAgICAgICApIHtcbiAgICAgICAgICAgIHJlbW92ZUNoYXJhY3RlcihjaGFyYWN0ZXIpO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgIC8vIEFsbG93IGFsbCBKaW54ZXMgdG8gYmUgc2hvd24gYmFzZWQgb24gdXNlciBwcmVmZXJlbmNlLlxuICAgIGxvb2t1cE9uZShcIiNzaG93LWFsbC1qaW54ZXNcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuICAgICAgICBqaW54VGFibGUuY2xhc3NMaXN0LnRvZ2dsZShcImlzLXNob3ctYWxsXCIsIHRhcmdldC5jaGVja2VkKTtcbiAgICB9KTtcblxufSk7XG4iLCJpbXBvcnQgT2JzZXJ2ZXIgZnJvbSBcIi4uL2NsYXNzZXMvT2JzZXJ2ZXIuanNcIjtcbmltcG9ydCBOaWdodE9yZGVyIGZyb20gXCIuLi9jbGFzc2VzL05pZ2h0T3JkZXIuanNcIjtcbmltcG9ydCB7XG4gICAgbG9va3VwT25lLFxuICAgIGxvb2t1cE9uZUNhY2hlZCxcbiAgICBhbm5vdW5jZUlucHV0LFxufSBmcm9tIFwiLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcblxuY29uc3QgZ2FtZU9ic2VydmVyID0gT2JzZXJ2ZXIuY3JlYXRlKFwiZ2FtZVwiKTtcbmNvbnN0IHRva2VuT2JzZXJ2ZXIgPSBPYnNlcnZlci5jcmVhdGUoXCJ0b2tlblwiKTtcbmNvbnN0IG5pZ2h0T3JkZXIgPSBuZXcgTmlnaHRPcmRlcigpO1xuXG5uaWdodE9yZGVyLnNldEhvbGRlcnMoe1xuICAgIGZpcnN0OiBsb29rdXBPbmVDYWNoZWQoXCIjZmlyc3QtbmlnaHRcIiksXG4gICAgb3RoZXI6IGxvb2t1cE9uZUNhY2hlZChcIiNvdGhlci1uaWdodHNcIilcbn0pO1xuXG5nYW1lT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXJzLXNlbGVjdGVkXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBuaWdodE9yZGVyLnJlc2V0KCk7XG4gICAgbmlnaHRPcmRlci5zZXRDaGFyYWN0ZXJzKFxuICAgICAgICBkZXRhaWwuY2hhcmFjdGVyc1xuICAgICAgICAgICAgLmZpbHRlcigoY2hhcmFjdGVyKSA9PiAhW1wiZmFibGVkXCIsIFwidHJhdmVsbGVyXCJdLmluY2x1ZGVzKGNoYXJhY3Rlci5nZXRUZWFtKCkpKVxuICAgICk7XG4gICAgbmlnaHRPcmRlci5kcmF3QWxsTmlnaHRPcmRlcnMoKTtcblxufSk7XG5cbi8vICMxNDUgLSBTaG93IHRoZSBcIkZpcnN0IE5pZ2h0XCIgb3JkZXIgYWZ0ZXIgY2xlYXJpbmcgdGhlIGdyaW1vaXJlLlxuZ2FtZU9ic2VydmVyLm9uKFwiY2xlYXJcIiwgKCkgPT4ge1xuICAgIGxvb2t1cE9uZUNhY2hlZChcIi5qcy0tbmlnaHQtb3JkZXItLWNhcm91c2VsXCIpLnNjcm9sbExlZnQgPSAwO1xufSk7XG5cbi8vIFRPRE86IFRyYXZlbGxlcnMgYW5kIEZhYmxlZCBzaG91bGQgYmUgdW5pcXVlLCBpdCBzaG91bGQgb25seSBiZSBwb3NzaWJsZSB0b1xuLy8gYWRkIDEgb2YgZWFjaC4gQWRkIHRoYXQgbGltaXRhdGlvbiBzbyB3ZSBkb24ndCBuZWVkIHRvIGNvdW50IHRoZW0gYW55bW9yZS5cbmNvbnN0IHNwZWNpYWxSb2xlcyA9IHtcbiAgICBmYWJsZWQ6IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgdHJhdmVsbGVyOiBPYmplY3QuY3JlYXRlKG51bGwpXG59XG5cbnRva2VuT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXItYWRkXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGNoYXJhY3RlclxuICAgIH0gPSBkZXRhaWw7XG4gICAgY29uc3QgdGVhbSA9IGNoYXJhY3Rlci5nZXRUZWFtKCk7XG5cbiAgICAvLyAjMTU1IC0gSWYgd2UgaGF2ZSBhIHRyYXZlbGxlciBvciBhIGZhYmxlZCwgYWRkIGl0IHRvIHRoZSBuaWdodCBvcmRlci5cbiAgICBpZiAoc3BlY2lhbFJvbGVzW3RlYW1dKSB7XG5cbiAgICAgICAgY29uc3QgaWQgPSBjaGFyYWN0ZXIuZ2V0SWQoKTtcblxuICAgICAgICBpZiAoIXNwZWNpYWxSb2xlc1t0ZWFtXVtpZF0pIHtcbiAgICAgICAgICAgIHNwZWNpYWxSb2xlc1t0ZWFtXVtpZF0gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgc3BlY2lhbFJvbGVzW3RlYW1dW2lkXSArPSAxO1xuXG4gICAgICAgIG5pZ2h0T3JkZXIuc2V0Q2hhcmFjdGVyKGNoYXJhY3Rlcik7XG4gICAgICAgIG5pZ2h0T3JkZXIucGxhY2VJbk9yZGVyKGNoYXJhY3Rlcik7XG5cbiAgICB9XG5cbiAgICAvLyAjMTMxIC0gY2hlY2sgdGhlIGNoYXJhY3RlciBpc24ndCBmcm9tIHRoZSBwcmV2aW91cyBzY3JpcHQuXG4gICAgaWYgKCFuaWdodE9yZGVyLmhhc0NoYXJhY3RlcihjaGFyYWN0ZXIpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBuaWdodE9yZGVyLmFkZENoYXJhY3RlcihjaGFyYWN0ZXIpO1xuXG59KTtcblxudG9rZW5PYnNlcnZlci5vbihcImNoYXJhY3Rlci1yZW1vdmVcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgY2hhcmFjdGVyXG4gICAgfSA9IGRldGFpbDtcbiAgICBjb25zdCB0ZWFtID0gY2hhcmFjdGVyLmdldFRlYW0oKTtcblxuICAgIC8vICMxNTUgLSBJZiB3ZSdyZSByZW1vdmluZyBhIGZhYmxlZCBvciB0cmF2ZWxsZXIsIHJlbW92ZSB0aGVtIGlmIG5lY2Vzc2FyeS5cbiAgICBpZiAoc3BlY2lhbFJvbGVzW3RlYW1dKSB7XG5cbiAgICAgICAgY29uc3QgaWQgPSBjaGFyYWN0ZXIuZ2V0SWQoKTtcblxuICAgICAgICBpZiAoc3BlY2lhbFJvbGVzW3RlYW1dW2lkXSkge1xuXG4gICAgICAgICAgICBzcGVjaWFsUm9sZXNbdGVhbV1baWRdIC09IDE7XG5cbiAgICAgICAgICAgIGlmIChzcGVjaWFsUm9sZXNbdGVhbV1baWRdIDw9IDApIHtcblxuICAgICAgICAgICAgICAgIG5pZ2h0T3JkZXIudW5zZXRDaGFyYWN0ZXIoY2hhcmFjdGVyKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgc3BlY2lhbFJvbGVzW3RlYW1dW2lkXTtcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIC8vICMxMzEgLSBjaGVjayB0aGUgY2hhcmFjdGVyIGlzbid0IGZyb20gdGhlIHByZXZpb3VzIHNjcmlwdC5cbiAgICBpZiAoIW5pZ2h0T3JkZXIuaGFzQ2hhcmFjdGVyKGNoYXJhY3RlcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5pZ2h0T3JkZXIucmVtb3ZlQ2hhcmFjdGVyKGNoYXJhY3Rlcik7XG5cbn0pO1xuXG50b2tlbk9ic2VydmVyLm9uKFwic2hyb3VkLXRvZ2dsZVwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgLy8gIzEzMSAtIGNoZWNrIHRoZSBjaGFyYWN0ZXIgaXNuJ3QgZnJvbSB0aGUgcHJldmlvdXMgc2NyaXB0LlxuICAgIGlmICghbmlnaHRPcmRlci5oYXNDaGFyYWN0ZXIoZGV0YWlsLmNoYXJhY3RlcikpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIG5pZ2h0T3JkZXIudG9nZ2xlRGVhZChkZXRhaWwuY2hhcmFjdGVyLCBkZXRhaWwuaXNEZWFkKTtcblxufSk7XG5cbmNvbnN0IHNob3dEZWFkID0gbG9va3VwT25lKFwiI3Nob3ctZGVhZFwiKTtcblxuc2hvd0RlYWQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgY29uc3Qgc2hvd0RlYWQgPSB0YXJnZXQuY2hlY2tlZDtcblxuICAgIG5pZ2h0T3JkZXIuc2V0U2hvd0RlYWQoc2hvd0RlYWQpO1xuICAgIGdhbWVPYnNlcnZlci50cmlnZ2VyKFwibmlnaHQtb3JkZXItc2hvdy1kZWFkXCIsIHtcbiAgICAgICAgc2hvd0RlYWRcbiAgICB9KTtcblxufSk7XG5cbmxvb2t1cE9uZShcIiNzaG93LWFsbFwiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICBjb25zdCBzaG93QWxsID0gdGFyZ2V0LmNoZWNrZWQ7XG5cbiAgICBuaWdodE9yZGVyLnNldFNob3dOb3RJblBsYXkoc2hvd0FsbCk7XG4gICAgZ2FtZU9ic2VydmVyLnRyaWdnZXIoXCJuaWdodC1vcmRlci1zaG93LWFsbFwiLCB7XG4gICAgICAgIHNob3dBbGxcbiAgICB9KTtcblxuICAgIC8vIFNob3dpbmcgYWxsIGNoYXJhY3RlcnMgbm90IGluIHBsYXkgYnV0IGhpZGluZyB0aGUgZGVhZCBjYW4gc2VlbVxuICAgIC8vIGNvbmZ1c2luZy4gVGhpcyBmb3JjZXMgXCJzaG93IGRlYWRcIiB0byBiZSB0cnVlIHdoZW4gc2hvd2luZyBhbGwsIGFsdGhvdWdoXG4gICAgLy8gdGhlIHVzZXIgY2FuIGhpZGUgdGhlIGRlYWQgc2VwZXJhdGVseS5cbiAgICBpZiAoc2hvd0FsbCAmJiAhc2hvd0RlYWQuY2hlY2tlZCkge1xuXG4gICAgICAgIHNob3dEZWFkLmNoZWNrZWQgPSB0cnVlO1xuICAgICAgICBhbm5vdW5jZUlucHV0KHNob3dEZWFkKTtcblxuICAgIH1cblxufSk7XG4iLCJpbXBvcnQge1xuICAgIGxvb2t1cE9uZSxcbiAgICBhbm5vdW5jZUlucHV0XG59IGZyb20gXCIuLi91dGlscy9lbGVtZW50cy5qc1wiO1xuXG5jb25zdCBidXR0b24gPSBsb29rdXBPbmUoXCIjY2xlYXItc3Qtbm90ZXNcIik7XG5jb25zdCBmaWVsZCA9IGxvb2t1cE9uZShcIiNzdC1ub3Rlc1wiKTtcblxuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG5cbiAgICBpZiAod2luZG93LmNvbmZpcm0oYnV0dG9uLmRhdGFzZXQud2FybmluZykpIHtcblxuICAgICAgICBmaWVsZC52YWx1ZSA9IFwiXCI7XG4gICAgICAgIGFubm91bmNlSW5wdXQoZmllbGQpO1xuXG4gICAgfVxuXG59KTtcbiIsImltcG9ydCBPYnNlcnZlciBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9PYnNlcnZlci5qc1wiO1xuaW1wb3J0IFFSQ29kZSBmcm9tIFwiLi4vLi4vbGliL3FyY29kZS1zdmcuanNcIjtcbmltcG9ydCB7XG4gICAgZW1wdHksXG4gICAgbG9va3VwT25lQ2FjaGVkXG59IGZyb20gXCIuLi8uLi91dGlscy9lbGVtZW50cy5qc1wiO1xuXG5jb25zdCBnYW1lT2JzZXJ2ZXIgPSBPYnNlcnZlci5jcmVhdGUoXCJnYW1lXCIpO1xuY29uc3QgY2hhcmFjdGVyU3RvcmUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4vKipcbiAqIERyYXdzIHRoZSBRUiBjb2RlIGJhc2VkIG9uIGluZm9ybWF0aW9uIG9uIHRoZSBRUiBjb2RlIGVsZW1lbnQuXG4gKi9cbmZ1bmN0aW9uIGRyYXdRUkNvZGUoKSB7XG5cbiAgICBjb25zdCBpbmNsdWRlVHJhdmVsbGVycyA9IGxvb2t1cE9uZUNhY2hlZChcIiNpbmNsdWRlLXRyYXZlbGxlcnNcIikuY2hlY2tlZDtcbiAgICBjb25zdCBpbmNsdWRlRmFibGVkID0gbG9va3VwT25lQ2FjaGVkKFwiI2luY2x1ZGUtZmFibGVkXCIpLmNoZWNrZWQ7XG4gICAgY29uc3QgcXJDb2RlID0gbG9va3VwT25lQ2FjaGVkKFwiI3FyLWNvZGVcIik7XG4gICAgY29uc3QgYW5jaG9yID0gbG9va3VwT25lQ2FjaGVkKFwiI3FyLWNvZGUtbGlua1wiKTtcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKGFuY2hvci5ocmVmKTtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgZ2FtZVxuICAgIH0gPSBxckNvZGUuZGF0YXNldDtcblxuICAgIGlmIChuYW1lKSB7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwibmFtZVwiLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZShcIm5hbWVcIik7XG4gICAgfVxuXG4gICAgaWYgKGdhbWUpIHtcblxuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImdhbWVcIiwgZ2FtZSk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwidHJhdmVsbGVyXCIsIE51bWJlcihpbmNsdWRlVHJhdmVsbGVycykpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldChcImZhYmxlZFwiLCBOdW1iZXIoaW5jbHVkZUZhYmxlZCkpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImNoYXJhY3RlcnNcIik7XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICAgIGNvbnN0IHRlYW1zID0gW1xuICAgICAgICAgICAgXCJ0b3duc2ZvbGtcIixcbiAgICAgICAgICAgIFwib3V0c2lkZXJcIixcbiAgICAgICAgICAgIFwibWluaW9uXCIsXG4gICAgICAgICAgICBcImRlbW9uXCJcbiAgICAgICAgXTtcblxuICAgICAgICBpZiAoaW5jbHVkZVRyYXZlbGxlcnMpIHtcbiAgICAgICAgICAgIHRlYW1zLnB1c2goXCJ0cmF2ZWxsZXJcIik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaW5jbHVkZUZhYmxlZCkge1xuICAgICAgICAgICAgdGVhbXMucHVzaChcImZhYmxlZFwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGlkcyA9IGNoYXJhY3RlclN0b3JlW3FyQ29kZS5kYXRhc2V0LmNoYXJhY3RlcnNdXG4gICAgICAgICAgICAuZmlsdGVyKChjaGFyYWN0ZXIpID0+IHRlYW1zLmluY2x1ZGVzKGNoYXJhY3Rlci5nZXRUZWFtKCkpKVxuICAgICAgICAgICAgLm1hcCgoY2hhcmFjdGVyKSA9PiBjaGFyYWN0ZXIuZ2V0SWQoKSk7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuc2V0KFwiY2hhcmFjdGVyc1wiLCBpZHMpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImdhbWVcIik7XG4gICAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKFwidHJhdmVsbGVyXCIpO1xuICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLmRlbGV0ZShcImZhYmxlZFwiKTtcblxuICAgIH1cblxuICAgIGVtcHR5KHFyQ29kZSkuYXBwZW5kKFFSQ29kZSh7XG4gICAgICAgIG1zZzogdXJsLnRvU3RyaW5nKCksXG4gICAgICAgIGVjbDogXCJMXCJcbiAgICB9KSk7XG4gICAgbG9va3VwT25lQ2FjaGVkKFwiI3FyLWNvZGUtYnV0dG9uXCIpLmRpc2FibGVkID0gZmFsc2U7XG4gICAgYW5jaG9yLmhyZWYgPSB1cmwudG9TdHJpbmcoKTtcbiAgICBsb29rdXBPbmVDYWNoZWQoXCIjcXItY29kZS1saW5rXCIpLmRpc2FibGVkID0gZmFsc2U7XG5cbn1cblxuZ2FtZU9ic2VydmVyLm9uKFwiY2hhcmFjdGVycy1zZWxlY3RlZFwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgY29uc3Qge1xuICAgICAgICBuYW1lLFxuICAgICAgICBjaGFyYWN0ZXJzLFxuICAgICAgICBnYW1lXG4gICAgfSA9IGRldGFpbDtcblxuICAgIGNvbnN0IHFyQ29kZSA9IGxvb2t1cE9uZUNhY2hlZChcIiNxci1jb2RlXCIpO1xuXG4gICAgaWYgKGdhbWUpIHtcblxuICAgICAgICBxckNvZGUuZGF0YXNldC5nYW1lID0gZ2FtZTtcbiAgICAgICAgZGVsZXRlIHFyQ29kZS5kYXRhc2V0LmNoYXJhY3RlcnM7XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICAgIGNvbnN0IGlkcyA9IEpTT04uc3RyaW5naWZ5KFxuICAgICAgICAgICAgY2hhcmFjdGVycy5tYXAoKGNoYXJhY3RlcikgPT4gY2hhcmFjdGVyLmdldElkKCkpXG4gICAgICAgICk7XG5cbiAgICAgICAgY2hhcmFjdGVyU3RvcmVbaWRzXSA9IGNoYXJhY3RlcnM7XG4gICAgICAgIHFyQ29kZS5kYXRhc2V0LmNoYXJhY3RlcnMgPSBpZHM7XG4gICAgICAgIGRlbGV0ZSBxckNvZGUuZGF0YXNldC5nYW1lO1xuXG4gICAgfVxuXG4gICAgaWYgKG5hbWUpIHtcbiAgICAgICAgcXJDb2RlLmRhdGFzZXQubmFtZSA9IG5hbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZGVsZXRlIHFyQ29kZS5kYXRhc2V0Lm5hbWU7XG4gICAgfVxuXG4gICAgZHJhd1FSQ29kZSgpO1xuXG59KTtcblxubG9va3VwT25lQ2FjaGVkKFwiI2luY2x1ZGUtdHJhdmVsbGVyc1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+IHtcbiAgICBkcmF3UVJDb2RlKCk7XG59KTtcblxubG9va3VwT25lQ2FjaGVkKFwiI2luY2x1ZGUtZmFibGVkXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgIGRyYXdRUkNvZGUoKTtcbn0pO1xuIiwiaW1wb3J0IFN0b3JlIGZyb20gXCIuLi8uLi9jbGFzc2VzL1N0b3JlLmpzXCI7XG5pbXBvcnQgRGlhbG9nIGZyb20gXCIuLi8uLi9jbGFzc2VzL0RpYWxvZy5qc1wiO1xuaW1wb3J0IHtcbiAgICBsb29rdXBPbmUsXG4gICAgbG9va3VwQ2FjaGVkLFxuICAgIGxvb2t1cE9uZUNhY2hlZCxcbiAgICBhbm5vdW5jZUlucHV0XG59IGZyb20gXCIuLi8uLi91dGlscy9lbGVtZW50cy5qc1wiO1xuXG5jb25zdCBzdG9yZSA9IFN0b3JlLmNyZWF0ZShcInBvY2tldC1ncmltb2lyZVwiKTtcbmNvbnN0IGNsZWFycyA9IGxvb2t1cENhY2hlZChcImlucHV0W25hbWU9XFxcImNsZWFyXFxcIl1cIik7XG5cbmxvb2t1cE9uZShcIiNjbGVhci1hbGxcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgbG9va3VwT25lQ2FjaGVkKFwiI2NsZWFyLWluZGl2aWR1YWxcIikuaGlkZGVuID0gdGFyZ2V0LmNoZWNrZWQ7XG5cbiAgICBpZiAodGFyZ2V0LmNoZWNrZWQpIHtcblxuICAgICAgICBjbGVhcnMuZm9yRWFjaCgoaW5wdXQpID0+IHtcblxuICAgICAgICAgICAgaW5wdXQuY2hlY2tlZCA9IHRydWU7XG4gICAgICAgICAgICBhbm5vdW5jZUlucHV0KGlucHV0KTtcblxuICAgICAgICB9KTtcblxuICAgIH1cblxufSk7XG5cbmxvb2t1cE9uZShcIiNjbGVhci10b2tlbnNcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuICAgIGxvb2t1cE9uZUNhY2hlZChcIiN0b2tlbi13YXJuaW5nXCIpLmhpZGRlbiA9ICF0YXJnZXQuY2hlY2tlZDtcbn0pO1xuXG5sb29rdXBPbmUoXCIjY2xlYXItaW5mb1Rva2Vuc1wiKS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICh7IHRhcmdldCB9KSA9PiB7XG4gICAgbG9va3VwT25lQ2FjaGVkKFwiI2luZm8tdG9rZW4td2FybmluZ1wiKS5oaWRkZW4gPSAhdGFyZ2V0LmNoZWNrZWQ7XG59KTtcblxubG9va3VwT25lKFwiI2NhY2hlLWZvcm1cIikuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY2xlYXJzLmZvckVhY2goKHsgdmFsdWUsIGNoZWNrZWQgfSkgPT4ge1xuXG4gICAgICAgIGlmIChjaGVja2VkKSB7XG4gICAgICAgICAgICBzdG9yZS5kZWxldGUodmFsdWUpO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgIGlmIChsb29rdXBPbmVDYWNoZWQoXCIjY2xlYXItcmVmcmVzaFwiKS5jaGVja2VkKSB7XG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICB9XG5cbiAgICBEaWFsb2cuY3JlYXRlKGxvb2t1cE9uZUNhY2hlZChcIiNjbGVhci1jYWNoZVwiKSkuaGlkZSgpO1xuXG59KTtcbiIsImltcG9ydCBTdG9yZSBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9TdG9yZS5qc1wiO1xuaW1wb3J0IE9ic2VydmVyIGZyb20gXCIuLi8uLi9jbGFzc2VzL09ic2VydmVyLmpzXCI7XG5pbXBvcnQgVGVtcGxhdGUgZnJvbSBcIi4uLy4uL2NsYXNzZXMvVGVtcGxhdGUuanNcIjtcbmltcG9ydCBDaGFyYWN0ZXJUb2tlbiBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9DaGFyYWN0ZXJUb2tlbi5qc1wiO1xuaW1wb3J0IFJlbWluZGVyVG9rZW4gZnJvbSBcIi4uLy4uL2NsYXNzZXMvUmVtaW5kZXJUb2tlbi5qc1wiO1xuaW1wb3J0IFRva2VuU3RvcmUgZnJvbSBcIi4uLy4uL2NsYXNzZXMvVG9rZW5TdG9yZS5qc1wiO1xuaW1wb3J0IERpYWxvZyBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9EaWFsb2cuanNcIjtcbmltcG9ydCBOYW1lcyBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9OYW1lcy5qc1wiO1xuaW1wb3J0IHtcbiAgICBmZXRjaEZyb21TdG9yZVxufSBmcm9tIFwiLi4vLi4vdXRpbHMvZmV0Y2guanNcIjtcbmltcG9ydCB7XG4gICAgbG9va3VwLFxuICAgIGxvb2t1cE9uZSxcbiAgICBsb29rdXBPbmVDYWNoZWRcbn0gZnJvbSBcIi4uLy4uL3V0aWxzL2VsZW1lbnRzLmpzXCI7XG5pbXBvcnQge1xuICAgIExBTkdVQUdFXG59IGZyb20gXCIuLi8uLi9jb25zdGFudHMvbGFuZ3VhZ2UuanNcIjtcblxuY29uc3Qgc3RvcmUgPSBTdG9yZS5jcmVhdGUoXCJwb2NrZXQtZ3JpbW9pcmVcIik7XG5jb25zdCBnYW1lT2JzZXJ2ZXIgPSBPYnNlcnZlci5jcmVhdGUoXCJnYW1lXCIpO1xuXG5mZXRjaEZyb21TdG9yZShgY2hhcmFjdGVyc18ke0xBTkdVQUdFfWAsIFVSTFMuY2hhcmFjdGVycywgc3RvcmUpLnRoZW4oKGNoYXJhY3RlcnMpID0+IHtcbiAgICBnYW1lT2JzZXJ2ZXIudHJpZ2dlcihcImNoYXJhY3RlcnMtbG9hZGVkXCIsIHsgY2hhcmFjdGVycyB9KTtcbn0pO1xuXG5mZXRjaEZyb21TdG9yZShgamlueGVzXyR7TEFOR1VBR0V9YCwgVVJMUy5qaW54ZXMsIHN0b3JlKS50aGVuKChqaW54ZXMpID0+IHtcbiAgICBnYW1lT2JzZXJ2ZXIudHJpZ2dlcihcImppbnhlcy1sb2FkZWRcIiwgeyBqaW54ZXMgfSk7XG59KTtcblxuZmV0Y2hGcm9tU3RvcmUoXCJnYW1lXCIsIFVSTFMuZ2FtZSwgc3RvcmUpLnRoZW4oKGJyZWFrZG93bikgPT4ge1xuICAgIGdhbWVPYnNlcnZlci50cmlnZ2VyKFwidGVhbS1icmVha2Rvd24tbG9hZGVkXCIsIHsgYnJlYWtkb3duIH0pO1xufSk7XG5cbkNoYXJhY3RlclRva2VuLnNldFRlbXBsYXRlcyh7XG4gICAgdG9rZW46IFRlbXBsYXRlLmNyZWF0ZShsb29rdXBPbmUoXCIjY2hhcmFjdGVyLXRlbXBsYXRlXCIpKSxcbiAgICBsaXN0OiBUZW1wbGF0ZS5jcmVhdGUobG9va3VwT25lKFwiI2NoYXJhY3Rlci1saXN0LXRlbXBsYXRlXCIpKSxcbiAgICBzZWxlY3Q6IFRlbXBsYXRlLmNyZWF0ZShsb29rdXBPbmUoXCIjY2hhcmFjdGVyLXNlbGVjdC10ZW1wbGF0ZVwiKSksXG4gICAgbmlnaHRPcmRlcjogVGVtcGxhdGUuY3JlYXRlKGxvb2t1cE9uZShcIiNuaWdodC1pbmZvLXRlbXBsYXRlXCIpKVxufSk7XG5SZW1pbmRlclRva2VuLnNldFRlbXBsYXRlcyh7XG4gICAgdG9rZW46IFRlbXBsYXRlLmNyZWF0ZShsb29rdXBPbmUoXCIjcmVtaW5kZXItdGVtcGxhdGVcIikpLFxuICAgIGxpc3Q6IFRlbXBsYXRlLmNyZWF0ZShsb29rdXBPbmUoXCIjcmVtaW5kZXItbGlzdC10ZW1wbGF0ZVwiKSlcbn0pO1xuTmFtZXMuY3JlYXRlKClcbiAgICAuc2V0VGVtcGxhdGUoVGVtcGxhdGUuY3JlYXRlKGxvb2t1cE9uZShcIiNwbGF5ZXItbmFtZS10ZW1wbGF0ZVwiKSkpXG4gICAgLnNldE9ic2VydmVyKG5ldyBPYnNlcnZlcigpKTtcblxuUHJvbWlzZS5hbGwoW1xuICAgIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGdhbWVPYnNlcnZlci5vbihcImNoYXJhY3RlcnMtbG9hZGVkXCIsICh7IGRldGFpbCB9KSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKGRldGFpbC5jaGFyYWN0ZXJzKTtcbiAgICAgICAgfSk7XG4gICAgfSksXG4gICAgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgZ2FtZU9ic2VydmVyLm9uKFwiamlueGVzLWxvYWRlZFwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuICAgICAgICAgICAgcmVzb2x2ZShkZXRhaWwuamlueGVzKTtcbiAgICAgICAgfSk7XG4gICAgfSlcbl0pLnRoZW4oKFsgY2hhcmFjdGVycywgamlueGVzIF0pID0+IHtcblxuICAgIFRva2VuU3RvcmUuY3JlYXRlKHtcbiAgICAgICAgY2hhcmFjdGVyczogW1xuICAgICAgICAgICAgLy8gQ3JlYXRlIGFuIGVtcHR5IGNoYXJhY3RlciB3aGljaCB3ZSBjYW4gdXNlIGFzIGEgdG9rZW4gcGxhY2Vob2xkZXIuXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6IFRva2VuU3RvcmUuRU1QVFksXG4gICAgICAgICAgICAgICAgaW1hZ2U6IFwiZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUFBQUFBQVAvLy95SDVCQUVBQUFBQUxBQUFBQUFCQUFFQUFBSUJSQUE3XCIsXG4gICAgICAgICAgICAgICAgYWJpbGl0eTogSTE4Ti5lbXB0eUNoYXJhY3RlckFiaWxpdHksXG4gICAgICAgICAgICAgICAgW0NoYXJhY3RlclRva2VuLmVtcHR5XTogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAuLi5jaGFyYWN0ZXJzXG4gICAgICAgIF0sXG4gICAgICAgIHJlbWluZGVyczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiBUb2tlblN0b3JlLkVNUFRZLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgdGV4dDogSTE4Ti5nb29kVGVhbSxcbiAgICAgICAgICAgICAgICBpbWFnZTogXCIvYnVpbGQvaW1nL2ljb25zL3Rvd25zZm9say53ZWJwXCIsXG4gICAgICAgICAgICAgICAgaXNHbG9iYWw6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6IFRva2VuU3RvcmUuRU1QVFksXG4gICAgICAgICAgICAgICAgbmFtZTogXCJcIixcbiAgICAgICAgICAgICAgICB0ZXh0OiBJMThOLmV2aWxUZWFtLFxuICAgICAgICAgICAgICAgIGltYWdlOiBcIi9idWlsZC9pbWcvaWNvbnMvZGVtb24ud2VicFwiLFxuICAgICAgICAgICAgICAgIGlzR2xvYmFsOiB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIGppbnhlc1xuICAgIH0pO1xuXG59KTtcblxuLy8gRGVsZWdhdGUgdGhpcyBldmVudCBmb3IgdHdvIHJlYXNvbnM6XG4vLyAxLiBXZSBjYW4gYWRkIGRpYWxvZ3MgZHluYW1pY2FsbHkgYW5kIHRoZXknbGwgc3RpbGwgd29yay5cbi8vIDIuIEl0J3MgbW9yZSBlZmZpY2llbnQgdG8gb25seSBjcmVhdGUgdGhlIGluc3RhbmNlIHdoZW4gaXQncyBuZWVkZWQuXG5kb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgaWYgKHRhcmdldC5oYXNBdHRyaWJ1dGUoXCJkYXRhLWRpYWxvZ1wiKSAmJiAhdGFyZ2V0LmRpYWxvZykge1xuXG4gICAgICAgIHRhcmdldC5kaWFsb2cgPSBEaWFsb2cuY3JlYXRlRnJvbVRyaWdnZXIodGFyZ2V0KTtcbiAgICAgICAgdGFyZ2V0LmRpYWxvZy5zaG93KCk7XG5cbiAgICB9XG5cbn0pO1xuXG5sb29rdXAoXCJpbnB1dFtkYXRhLWZpbHRlci1saXN0XVwiKS5mb3JFYWNoKChpbnB1dCkgPT4ge1xuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IGxpc3QgPSBsb29rdXBPbmVDYWNoZWQodGFyZ2V0LmRhdGFzZXQuZmlsdGVyTGlzdCk7XG5cbiAgICAgICAgaWYgKCFsaXN0KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBsaXN0LmNsYXNzTGlzdC50b2dnbGUoXCJpcy1zaG93LWFsbFwiLCB0YXJnZXQuY2hlY2tlZCk7XG5cbiAgICB9KTtcblxufSk7XG5cbmxvb2t1cE9uZShcIiNsb2NhbGUtZm9ybVwiKS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gbG9va3VwT25lQ2FjaGVkKFwiI3NlbGVjdC1sb2NhbGVcIikudmFsdWU7XG59KTtcblxubG9va3VwT25lQ2FjaGVkKFwiI3NlbGVjdC1sb2NhbGVcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuICAgIHRhcmdldC5mb3JtLnJlcXVlc3RTdWJtaXQoKTtcbn0pO1xuXG5mdW5jdGlvbiBzZXRUcmFja1dpZHRoKGlucHV0KSB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIG1pbixcbiAgICAgICAgbWF4LFxuICAgICAgICB2YWx1ZVxuICAgIH0gPSBpbnB1dDtcblxuICAgIGlucHV0LnN0eWxlLnNldFByb3BlcnR5KFxuICAgICAgICBcIi0tc2l6ZVwiLFxuICAgICAgICAoKHZhbHVlIC0gbWluKSAqIDEwMCkgLyAobWF4IC0gbWluKVxuICAgICk7XG5cbn1cblxuY29uc3QgcmFuZ2VPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChlbnRyaWVzKSA9PiB7XG5cbiAgICBlbnRyaWVzLmZvckVhY2goKHsgdHlwZSwgdGFyZ2V0IH0pID0+IHtcblxuICAgICAgICBpZiAodHlwZSA9PSBcImF0dHJpYnV0ZXNcIikge1xuICAgICAgICAgICAgc2V0VHJhY2tXaWR0aCh0YXJnZXQpO1xuICAgICAgICB9XG5cbiAgICB9KTtcblxufSk7XG5cbmxvb2t1cChcImlucHV0W3R5cGU9XFxcInJhbmdlXFxcIl1bZGF0YS1vdXRwdXRdXCIpLmZvckVhY2goKGlucHV0KSA9PiB7XG5cbiAgICBjb25zdCBvdXRwdXQgPSBsb29rdXBPbmUoaW5wdXQuZGF0YXNldC5vdXRwdXQpO1xuXG4gICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcblxuICAgICAgICBzZXRUcmFja1dpZHRoKGlucHV0KTtcblxuICAgICAgICBpZiAob3V0cHV0KSB7XG4gICAgICAgICAgICBvdXRwdXQudmFsdWUgPSBpbnB1dC52YWx1ZVxuICAgICAgICB9XG5cbiAgICB9KTtcblxuICAgIHNldFRyYWNrV2lkdGgoaW5wdXQpO1xuICAgIHJhbmdlT2JzZXJ2ZXIub2JzZXJ2ZShpbnB1dCwge1xuICAgICAgICBhdHRyaWJ1dGVzOiB0cnVlLFxuICAgICAgICBhdHRyaWJ1dGVGaWx0ZXI6IFtcIm1pblwiLCBcIm1heFwiLCBcInZhbHVlXCJdXG4gICAgfSk7XG5cbn0pO1xuIiwiaW1wb3J0IE9ic2VydmVyIGZyb20gXCIuLi8uLi9jbGFzc2VzL09ic2VydmVyLmpzXCI7XG5pbXBvcnQgVG9rZW5TdG9yZSBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9Ub2tlblN0b3JlLmpzXCI7XG5pbXBvcnQgRGlhbG9nIGZyb20gXCIuLi8uLi9jbGFzc2VzL0RpYWxvZy5qc1wiO1xuaW1wb3J0IHtcbiAgICBsb29rdXAsXG4gICAgbG9va3VwT25lLFxuICAgIGxvb2t1cENhY2hlZCxcbiAgICBsb29rdXBPbmVDYWNoZWQsXG4gICAgcmVwbGFjZUNvbnRlbnRzTWFueSxcbiAgICBhbm5vdW5jZUlucHV0LFxuICAgIGdldEluZGV4LFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcbmltcG9ydCB7XG4gICAgc2h1ZmZsZSxcbiAgICBncm91cEJ5XG59IGZyb20gXCIuLi8uLi91dGlscy9hcnJheXMuanNcIjtcbmltcG9ydCB7XG4gICAgY2xhbXAsXG4gICAgdGltZXNcbn0gZnJvbSBcIi4uLy4uL3V0aWxzL251bWJlcnMuanNcIjtcbmltcG9ydCB7XG4gICAgc3VwcGxhbnRcbn0gZnJvbSBcIi4uLy4uL3V0aWxzL3N0cmluZ3MuanNcIjtcblxuY29uc3QgZ2FtZU9ic2VydmVyID0gT2JzZXJ2ZXIuY3JlYXRlKFwiZ2FtZVwiKTtcbmNvbnN0IHRva2VuT2JzZXJ2ZXIgPSBPYnNlcnZlci5jcmVhdGUoXCJ0b2tlblwiKTtcblxuLyoqXG4gKiBTZXRzIHRoZSB0b3RhbHMgZm9yIGVhY2ggdGVhbSBiYXNlZCBvbiB0aGUgYnJlYWtkb3duIHRoYXQncyBnaXZlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gYnJlYWtkb3duXG4gKiAgICAgICAgQnJlYWtkb3duIG9mIHRoZSBudW1iZXJzIGZvciB0aGUgdGVhbXMuXG4gKi9cbmZ1bmN0aW9uIHNldFRvdGFscyhicmVha2Rvd24pIHtcblxuICAgIE9iamVjdC5lbnRyaWVzKGJyZWFrZG93bikuZm9yRWFjaCgoW3RlYW0sIGNvdW50XSkgPT4ge1xuXG4gICAgICAgIGxvb2t1cENhY2hlZChgW2RhdGEtdGVhbT1cIiR7dGVhbX1cIl0gLmpzLS1jaGFyYWN0ZXItc2VsZWN0LS10b3RhbGApXG4gICAgICAgICAgICAuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGVsZW1lbnQudGV4dENvbnRlbnQgPSBjb3VudDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbn1cblxuLyoqXG4gKiBIaWdobGlnaHRzIHJhbmRvbWx5IHNlbGVjdGVkIGVudHJpZXMgaW4gZWFjaCBvZiB0aGUgdGVhbXMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRlYW1cbiAqICAgICAgICBOYW1lIG9mIHRoZSB0ZWFtIHRoYXQgc2hvdWxkIGhhdmUgZW50cmllcyByYW5kb21seSBoaWdobGlnaHRlZC5cbiAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudFxuICogICAgICAgIFRoZSBudW1iZXIgb2YgcmFuZG9tbHkgc2VsZWN0ZWQgaXRlbXMgdGhhdCBzaG91bGQgYmUgaGlnaGxpZ2h0ZWQuXG4gKi9cbmZ1bmN0aW9uIGhpZ2hsaWdodFJhbmRvbUluVGVhbSh0ZWFtLCBjb3VudCkge1xuXG4gICAgLy8gRG9uJ3QgY2FjaGUgdGhpcyBzaW5jZSB0aGV5IHdpbGwgY2hhbmdlIGlmIGEgZGlmZmVyZW50IGVkaXRpb24gaXMgY2hvc2VuLlxuICAgIGNvbnN0IGlucHV0cyA9IGxvb2t1cChgW2RhdGEtdGVhbT1cIiR7dGVhbX1cIl0gW25hbWU9XCJjaGFyYWN0ZXJcIl1gKTtcblxuICAgIGlmICghaW5wdXRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY2hvc2VuID0gc2h1ZmZsZShpbnB1dHMpLnNsaWNlKDAsIGNvdW50KTtcblxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuXG4gICAgICAgIGNvbnN0IGlzQ2hlY2tlZCA9IGlucHV0LmNoZWNrZWQ7XG4gICAgICAgIGlucHV0LmNoZWNrZWQgPSBjaG9zZW4uaW5jbHVkZXMoaW5wdXQpO1xuXG4gICAgICAgIGlmIChpc0NoZWNrZWQpIHtcbiAgICAgICAgICAgIGxvb2t1cE9uZShgaW5wdXRbbmFtZT1cImNvdW50LSR7aW5wdXQudmFsdWV9XCJdYCkudmFsdWUgPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGlucHV0LmNoZWNrZWQgIT09IGlzQ2hlY2tlZCkge1xuICAgICAgICAgICAgYW5ub3VuY2VJbnB1dChpbnB1dCk7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG59XG5cbmdhbWVPYnNlcnZlci5vbihcInRlYW0tYnJlYWtkb3duLWxvYWRlZFwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgY29uc3QgcGxheWVyQ291bnQgPSBsb29rdXBPbmVDYWNoZWQoXCIjcGxheWVyLWNvdW50XCIpO1xuXG4gICAgcGxheWVyQ291bnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcblxuICAgICAgICBnYW1lT2JzZXJ2ZXIudHJpZ2dlcihcInBsYXllci1jb3VudFwiLCB7XG4gICAgICAgICAgICBjb3VudDogTnVtYmVyKHBsYXllckNvdW50LnZhbHVlKVxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gZ2V0QnJlYWtkb3duKCkge1xuXG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGJyZWFrZG93blxuICAgICAgICB9ID0gZGV0YWlsO1xuXG4gICAgICAgIHJldHVybiBicmVha2Rvd25bY2xhbXAoMCwgcGxheWVyQ291bnQudmFsdWUgLSA1LCBicmVha2Rvd24ubGVuZ3RoIC0gMSldO1xuXG4gICAgfVxuXG4gICAgcGxheWVyQ291bnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHNldFRvdGFscyhnZXRCcmVha2Rvd24oKSkpO1xuICAgIHNldFRvdGFscyhnZXRCcmVha2Rvd24oKSk7XG5cbiAgICBsb29rdXBPbmUoXCIjcGxheWVyLXNlbGVjdC1yYW5kb21cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcblxuICAgICAgICBsZXQgdG90YWwgPSAwO1xuXG4gICAgICAgIE9iamVjdC5lbnRyaWVzKGdldEJyZWFrZG93bigpKS5mb3JFYWNoKChbdGVhbSwgY291bnRdKSA9PiB7XG5cbiAgICAgICAgICAgIGhpZ2hsaWdodFJhbmRvbUluVGVhbSh0ZWFtLCBjb3VudCk7XG4gICAgICAgICAgICB0b3RhbCArPSBjb3VudDtcblxuICAgICAgICB9KTtcblxuICAgICAgICBoaWdobGlnaHRSYW5kb21JblRlYW0oXCJ0cmF2ZWxsZXJcIiwgcGxheWVyQ291bnQudmFsdWUgLSB0b3RhbCk7XG5cbiAgICB9KTtcblxufSk7XG5cbmdhbWVPYnNlcnZlci5vbihcImNoYXJhY3RlcnMtc2VsZWN0ZWRcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgY2hhcmFjdGVyc1xuICAgIH0gPSBkZXRhaWw7XG4gICAgY29uc3QgdGVhbXMgPSBncm91cEJ5KGNoYXJhY3RlcnMsIChjaGFyYWN0ZXIpID0+IGNoYXJhY3Rlci5nZXRUZWFtKCkpO1xuXG4gICAgbG9va3VwQ2FjaGVkKFwiW2RhdGEtdGVhbV1cIikuZm9yRWFjaCgod3JhcHBlcikgPT4ge1xuXG4gICAgICAgIC8vIFBvcHVsYXRlIHRoZSB0ZWFtIHNlY3Rpb25zLlxuICAgICAgICBjb25zdCB0ZWFtID0gd3JhcHBlci5kYXRhc2V0LnRlYW07XG4gICAgICAgIGNvbnN0IGlzVGVhbVBvcHVsYXRlZCA9IEFycmF5LmlzQXJyYXkodGVhbXNbdGVhbV0pO1xuICAgICAgICB3cmFwcGVyLmhpZGRlbiA9ICFpc1RlYW1Qb3B1bGF0ZWQ7XG5cbiAgICAgICAgcmVwbGFjZUNvbnRlbnRzTWFueShcbiAgICAgICAgICAgIGxvb2t1cE9uZUNhY2hlZChcIi5qcy0tY2hhcmFjdGVyLXNlbGVjdC0tbGlzdFwiLCB3cmFwcGVyKSxcbiAgICAgICAgICAgICh0ZWFtc1t0ZWFtXSB8fCBbXSkubWFwKChjaGFyYWN0ZXIpID0+IGNoYXJhY3Rlci5kcmF3U2VsZWN0KCkpXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gRGVzZWxlY3QgYW55IGNoZWNrYm94ZXMgYW5kIHNldCB0aGUgY291bnRzIHRvIHplcm8uXG4gICAgICAgIGxvb2t1cChcIi5qcy0tY2hhcmFjdGVyLXNlbGVjdC0taW5wdXRcIiwgd3JhcHBlcikuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgbG9va3VwT25lQ2FjaGVkKFwiLmpzLS1jaGFyYWN0ZXItc2VsZWN0LS1jb3VudFwiLCB3cmFwcGVyKS50ZXh0Q29udGVudCA9IDA7XG5cbiAgICAgICAgLy8gU3RvcmUgdGhlIFwiY291bnRcIiBpbnB1dHMuXG4gICAgICAgIC8vIFRoaXMgYWxsb3dzIHVzIHRvIHF1aWNrbHkgYWRkIGFsbCB0aGUgdmFsdWVzIHRvZ2V0aGVyIHRvIGdldCB0aGVcbiAgICAgICAgLy8gbnVtYmVyIG9mIHRva2VucyBzZWxlY3RlZCBpbiB0aGlzIGdyb3VwLCByZWdhcmRsZXNzIG9mIHdoZXRoZXIgdG9rZW5zXG4gICAgICAgIC8vIGhhdmUgYmVlbiBhZGRlZCwgcmVtb3ZlZCwgb3IgZHVwbGljYXRlZC5cbiAgICAgICAgd3JhcHBlci5jb3VudElucHV0cyA9IGxvb2t1cChcImlucHV0W25hbWVePVxcXCJjb3VudFxcXCJdXCIsIHdyYXBwZXIpO1xuXG4gICAgfSk7XG5cbiAgICAvLyBNYWtlIHN1cmUgdGhlIE51bWJlciBvZiBwbGF5ZXJzIGNhbid0IGV4Y2VlZCB0aGUgbnVtYmVyIG9mIGNoYXJhY3RlcnMuXG4gICAgbGV0IG1heFBsYXllcnMgPSAxNTtcbiAgICBtYXhQbGF5ZXJzICs9IE1hdGgubWluKCh0ZWFtcy50cmF2ZWxsZXIgfHwgW10pLmxlbmd0aCwgNSk7XG4gICAgbWF4UGxheWVycyA9IE1hdGgubWluKG1heFBsYXllcnMsIGNoYXJhY3RlcnMubGVuZ3RoKTtcbiAgICBjb25zdCBwbGF5ZXJDb3VudCA9IGxvb2t1cE9uZUNhY2hlZChcIiNwbGF5ZXItY291bnRcIik7XG5cbiAgICBwbGF5ZXJDb3VudC5tYXggPSBtYXhQbGF5ZXJzO1xuXG4gICAgaWYgKHBsYXllckNvdW50LnZhbHVlID49IG1heFBsYXllcnMpIHtcblxuICAgICAgICBwbGF5ZXJDb3VudC52YWx1ZSA9IG1heFBsYXllcnM7XG4gICAgICAgIGFubm91bmNlSW5wdXQocGxheWVyQ291bnQpO1xuXG4gICAgfVxuXG4gICAgLy8gRW5hYmxlIHRoZSBcIlNlbGVjdCBDaGFyYWN0ZXJzXCIgYnV0dG9uLlxuICAgIGxvb2t1cE9uZUNhY2hlZChcIiNzZWxlY3QtY2hhcmFjdGVyc1wiKS5kaXNhYmxlZCA9IGZhbHNlO1xuXG59KTtcblxubG9va3VwT25lKFwiI3RvZ2dsZS1hYmlsaXRpZXNcIikuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICBsb29rdXBDYWNoZWQoXCJbZGF0YS10ZWFtXVwiKS5mb3JFYWNoKCh3cmFwcGVyKSA9PiB7XG4gICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZShcImlzLWhpZGUtYWJpbGl0aWVzXCIsICF0YXJnZXQuY2hlY2tlZCk7XG4gICAgfSk7XG5cbn0pO1xuXG5sb29rdXBPbmUoXCIjdG9nZ2xlLWR1cGxpY2F0ZXNcIikuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGNoZWNrZWRcbiAgICB9ID0gdGFyZ2V0O1xuXG4gICAgbG9va3VwQ2FjaGVkKFwiW2RhdGEtdGVhbV1cIikuZm9yRWFjaCgod3JhcHBlcikgPT4ge1xuXG4gICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZShcImlzLXNob3ctZHVwbGljYXRlc1wiLCBjaGVja2VkKTtcblxuICAgICAgICBpZiAoIWNoZWNrZWQpIHtcblxuICAgICAgICAgICAgbG9va3VwKFwiW25hbWVePVxcXCJjb3VudC1cXFwiXVwiLCB3cmFwcGVyKS5mb3JFYWNoKChpbnB1dCkgPT4ge1xuXG4gICAgICAgICAgICAgICAgY29uc3Qge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZVxuICAgICAgICAgICAgICAgIH0gPSBpbnB1dDtcblxuICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA+IDEpIHtcblxuICAgICAgICAgICAgICAgICAgICBpbnB1dC52YWx1ZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIGFubm91bmNlSW5wdXQoaW5wdXQpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9XG5cbiAgICB9KTtcblxufSk7XG5cbmxvb2t1cENhY2hlZChcIltkYXRhLXRlYW1dXCIpLmZvckVhY2goKHdyYXBwZXIpID0+IHtcblxuICAgIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgICAgIGlmICghdGFyZ2V0Lm1hdGNoZXMoXCJpbnB1dFtuYW1lPVxcXCJjaGFyYWN0ZXJcXFwiXVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2FtZU9ic2VydmVyLnRyaWdnZXIoXCJjaGFyYWN0ZXItdG9nZ2xlXCIsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IHRhcmdldCxcbiAgICAgICAgICAgIGlkOiB0YXJnZXQudmFsdWUsXG4gICAgICAgICAgICBhY3RpdmU6IHRhcmdldC5jaGVja2VkXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbiAgICB3cmFwcGVyLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgICAgIGlmICghdGFyZ2V0Lm1hdGNoZXMoXCJpbnB1dFtuYW1lXj1cXFwiY291bnRcXFwiXVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZ2FtZU9ic2VydmVyLnRyaWdnZXIoXCJjaGFyYWN0ZXItY291bnQtY2hhbmdlXCIsIHtcbiAgICAgICAgICAgIGVsZW1lbnQ6IHRhcmdldCxcbiAgICAgICAgICAgIGlkOiB0YXJnZXQuZGF0YXNldC5mb3IsXG4gICAgICAgICAgICBjb3VudDogTnVtYmVyKHRhcmdldC52YWx1ZSlcbiAgICAgICAgfSk7XG5cbiAgICB9KTtcblxuICAgIHdyYXBwZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICAgICAgY29uc3QgYnV0dG9uID0gdGFyZ2V0LmNsb3Nlc3QoXCJbZGF0YS1xdWFudGl0eS1hbW91bnRdXCIpO1xuXG4gICAgICAgIGlmICghYnV0dG9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBpbnB1dCA9IGJ1dHRvbi5pbnB1dCB8fCBsb29rdXBPbmUoXG4gICAgICAgICAgICBcIi5qcy0tY2hhcmFjdGVyLXNlbGVjdC0tY291bnRcIixcbiAgICAgICAgICAgIGJ1dHRvbi5jbG9zZXN0KFwiLmpzLS1jaGFyYWN0ZXItc2VsZWN0LS1kdXBsaWNhdGUtd3JhcHBlclwiKVxuICAgICAgICApO1xuICAgICAgICBidXR0b24uaW5wdXQgPSBpbnB1dDtcblxuICAgICAgICBjb25zdCB2YWx1ZSA9IE51bWJlcihpbnB1dC52YWx1ZSkgfHwgMDtcbiAgICAgICAgY29uc3QgZGVsdGEgPSBOdW1iZXIoYnV0dG9uLmRhdGFzZXQucXVhbnRpdHlBbW91bnQpIHx8IDA7XG4gICAgICAgIGNvbnN0IGFtb3VudCA9IHZhbHVlICsgZGVsdGE7XG5cbiAgICAgICAgaW5wdXQudmFsdWUgPSBhbW91bnQ7XG5cbiAgICAgICAgaWYgKGFtb3VudCkge1xuICAgICAgICAgICAgYW5ub3VuY2VJbnB1dChpbnB1dCk7XG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGNvbnN0IGNoZWNrYm94ID0gbG9va3VwT25lKFxuICAgICAgICAgICAgICAgIFwiLmpzLS1jaGFyYWN0ZXItc2VsZWN0LS1pbnB1dFwiLFxuICAgICAgICAgICAgICAgIGJ1dHRvbi5jbG9zZXN0KFwiLmpzLS1jaGFyYWN0ZXItc2VsZWN0XCIpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgY2hlY2tib3guY2hlY2tlZCA9IGZhbHNlO1xuICAgICAgICAgICAgYW5ub3VuY2VJbnB1dChjaGVja2JveCk7XG5cbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbn0pO1xuXG5nYW1lT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXItdG9nZ2xlXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGlkLFxuICAgICAgICBhY3RpdmUsXG4gICAgICAgIGVsZW1lbnRcbiAgICB9ID0gZGV0YWlsO1xuXG4gICAgY29uc3QgaW5wdXQgPSBsb29rdXBPbmUoYGlucHV0W25hbWU9XCJjb3VudC0ke2lkfVwiXWApO1xuICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKGlucHV0LnZhbHVlKTtcblxuICAgIGVsZW1lbnRcbiAgICAgICAgLmNsb3Nlc3QoXCIuanMtLWNoYXJhY3Rlci1zZWxlY3RcIilcbiAgICAgICAgLmNsYXNzTGlzdFxuICAgICAgICAudG9nZ2xlKFwiaXMtc2VsZWN0ZWRcIiwgYWN0aXZlKTtcblxuICAgIGlmIChhY3RpdmUpIHtcblxuICAgICAgICBpZiAodmFsdWUgPCAxKSB7XG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IDE7XG4gICAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICAgIGlucHV0LnZhbHVlID0gMDtcbiAgICB9XG5cbiAgICBhbm5vdW5jZUlucHV0KGlucHV0KTtcblxufSk7XG5cbmNvbnN0IHZhbGlkYXRpb25JbnB1dCA9IGxvb2t1cE9uZShcIiNwbGF5ZXItc2VsZWN0LXZhbGlkYXRpb25cIik7XG5cbmdhbWVPYnNlcnZlci5vbihcImNoYXJhY3Rlci1jb3VudC1jaGFuZ2VcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgZWxlbWVudFxuICAgIH0gPSBkZXRhaWw7XG4gICAgY29uc3Qgd3JhcHBlciA9IGVsZW1lbnQuY2xvc2VzdChcIltkYXRhLXRlYW1dXCIpO1xuICAgIGNvbnN0IGNvdW50RWxlbWVudCA9IGxvb2t1cE9uZUNhY2hlZChcbiAgICAgICAgXCIuanMtLWNoYXJhY3Rlci1zZWxlY3QtLWNvdW50XCIsXG4gICAgICAgIHdyYXBwZXJcbiAgICApO1xuXG4gICAgY291bnRFbGVtZW50LnRleHRDb250ZW50ID0gd3JhcHBlci5jb3VudElucHV0cy5yZWR1Y2UoKHRvdGFsLCBpbnB1dCkgPT4ge1xuICAgICAgICByZXR1cm4gdG90YWwgKyBOdW1iZXIoaW5wdXQudmFsdWUpO1xuICAgIH0sIDApO1xuXG4gICAgdmFsaWRhdGlvbklucHV0LnNldEN1c3RvbVZhbGlkaXR5KFwiXCIpO1xuXG59KTtcblxubG9va3VwT25lKFwiI3BsYXllci1zZWxlY3RcIikuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY29uc3QgaWRzID0gbG9va3VwKFwiLmpzLS1jaGFyYWN0ZXItc2VsZWN0LS1pbnB1dDpjaGVja2VkXCIsIGUudGFyZ2V0KVxuICAgICAgICAubWFwKCh7IHZhbHVlIH0pID0+IHZhbHVlKTtcblxuICAgIFRva2VuU3RvcmUucmVhZHkoKHRva2VuU3RvcmUpID0+IHtcblxuICAgICAgICBjb25zdCBmaWx0ZXJlZCA9IHRva2VuU3RvcmVcbiAgICAgICAgICAgIC5nZXRBbGxDaGFyYWN0ZXJzKClcbiAgICAgICAgICAgIC5maWx0ZXIoKGNoYXJhY3RlcikgPT4gaWRzLmluY2x1ZGVzKGNoYXJhY3Rlci5nZXRJZCgpKSlcbiAgICAgICAgICAgIC5tYXAoKGNoYXJhY3RlcikgPT4ge1xuXG4gICAgICAgICAgICAgICAgLy8gV2UgdXNlIHRpbWVzKCkgaW5zdGVhZCBvZiBBcnJheSNmaWxsKCkgaGVyZSBiZWNhdXNlIGZpbGwoKVxuICAgICAgICAgICAgICAgIC8vIGRpZG4ndCBzZWVtIHRvIHdvcmsgY29ycmVjdGx5LlxuXG4gICAgICAgICAgICAgICAgY29uc3QgZHVwbGljYXRlcyA9IFtdO1xuXG4gICAgICAgICAgICAgICAgdGltZXMoXG4gICAgICAgICAgICAgICAgICAgIGxvb2t1cE9uZShgaW5wdXRbbmFtZT1cImNvdW50LSR7Y2hhcmFjdGVyLmdldElkKCl9XCJdYCkudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICgpID0+IGR1cGxpY2F0ZXMucHVzaChjaGFyYWN0ZXIpXG4gICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiBkdXBsaWNhdGVzO1xuXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZsYXQoKTtcblxuICAgICAgICBjb25zdCBiYWdEaXNhYmxlZCA9IGZpbHRlcmVkLmZpbHRlcigoY2hhcmFjdGVyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gY2hhcmFjdGVyLmhhc1NwZWNpYWxEYXRhKFwic2VsZWN0aW9uXCIsIFwiYmFnLWRpc2FibGVkXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoYmFnRGlzYWJsZWQubGVuZ3RoKSB7XG5cbiAgICAgICAgICAgIHZhbGlkYXRpb25JbnB1dC5zZXRDdXN0b21WYWxpZGl0eShzdXBwbGFudChcbiAgICAgICAgICAgICAgICB3aW5kb3cuSTE4Ti5iYWdEaXNhYmxlZCxcbiAgICAgICAgICAgICAgICBbYmFnRGlzYWJsZWQubWFwKChjaGFyYWN0ZXIpID0+IGNoYXJhY3Rlci5nZXROYW1lKCkpLmpvaW4oXCIsIFwiKV1cbiAgICAgICAgICAgICkpO1xuICAgICAgICAgICAgdmFsaWRhdGlvbklucHV0LmZvcm0ucmVwb3J0VmFsaWRpdHkoKTtcblxuICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICB2YWxpZGF0aW9uSW5wdXQuc2V0Q3VzdG9tVmFsaWRpdHkoXCJcIik7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzU2hvd0FsbCA9IEJvb2xlYW4oZS5zdWJtaXR0ZXI/LmlkID09PSBcInBsYXllci1zZWxlY3QtYWxsXCIpO1xuXG4gICAgICAgICAgICBnYW1lT2JzZXJ2ZXIudHJpZ2dlcihcImNoYXJhY3Rlci1kcmF3XCIsIHtcbiAgICAgICAgICAgICAgICBpc1Nob3dBbGwsXG4gICAgICAgICAgICAgICAgY2hhcmFjdGVyczogKFxuICAgICAgICAgICAgICAgICAgICBpc1Nob3dBbGxcbiAgICAgICAgICAgICAgICAgICAgPyBzaHVmZmxlKGZpbHRlcmVkKVxuICAgICAgICAgICAgICAgICAgICA6IGZpbHRlcmVkXG4gICAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIERpYWxvZy5jcmVhdGUobG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1zZWxlY3RcIikpLmhpZGUoKTtcblxuICAgICAgICB9XG5cbiAgICB9KTtcblxufSk7XG5cbnRva2VuT2JzZXJ2ZXIub24oXCJ0b2dnbGUtamlueC1hY3RpdmVcIiwgKHsgZGV0YWlsIH0pID0+IHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgamlueCxcbiAgICAgICAgc3RhdGVcbiAgICB9ID0gZGV0YWlsO1xuICAgIGNvbnN0IGlucHV0ID0gbG9va3VwT25lKFxuICAgICAgICBgLmpzLS1jaGFyYWN0ZXItc2VsZWN0LS1pbnB1dFt2YWx1ZT1cIiR7amlueC5nZXRUYXJnZXQoKT8uZ2V0SWQoKX1cIl1gXG4gICAgKTtcblxuICAgIGlmIChpbnB1dCkge1xuXG4gICAgICAgIGlucHV0XG4gICAgICAgICAgICAuY2xvc2VzdChcIi5qcy0tY2hhcmFjdGVyLXNlbGVjdC0tbGFiZWxcIilcbiAgICAgICAgICAgID8ucXVlcnlTZWxlY3RvcihcIi5qcy0tY2hhcmFjdGVyLXNlbGVjdC0tbmFtZVwiKVxuICAgICAgICAgICAgPy5jbGFzc0xpc3QudG9nZ2xlKFwiaXMtamlueFwiLCBzdGF0ZSk7XG5cbiAgICB9XG5cbn0pO1xuXG5jb25zdCBicmVha2Rvd25UYWJsZSA9IGxvb2t1cE9uZShcIiNicmVha2Rvd24tdGFibGVcIik7XG5cbmZ1bmN0aW9uIGhpZ2hsaWdodEJyZWFrZG93bihudW1iZXIpIHtcblxuICAgIGlmIChudW1iZXIgPiAxNSkge1xuICAgICAgICBudW1iZXIgPSAxNTtcbiAgICB9XG5cbiAgICBudW1iZXIgPSBTdHJpbmcobnVtYmVyKTtcblxuICAgIGNvbnN0IGluZGV4ID0gbG9va3VwQ2FjaGVkKFwiW2RhdGEtY291bnRdXCIsIGJyZWFrZG93blRhYmxlKVxuICAgICAgICAuZmluZEluZGV4KChjZWxsKSA9PiBjZWxsLmRhdGFzZXQuY291bnQgPT09IG51bWJlcik7XG5cbiAgICBsb29rdXAoXCIuaXMtY291bnRcIiwgYnJlYWtkb3duVGFibGUpXG4gICAgICAgIC5mb3JFYWNoKChjZWxsKSA9PiBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoXCJpcy1jb3VudFwiKSk7XG5cbiAgICBsb29rdXBDYWNoZWQoXCJ0Ym9keT50clwiLCBicmVha2Rvd25UYWJsZSkuZm9yRWFjaCgocm93KSA9PiB7XG4gICAgICAgIGxvb2t1cENhY2hlZChcIi5qcy0tYnJlYWtkb3duLS1jZWxsXCIsIHJvdylbaW5kZXhdPy5jbGFzc0xpc3QuYWRkKFwiaXMtY291bnRcIik7XG4gICAgfSk7XG5cbn1cblxubG9va3VwT25lQ2FjaGVkKFwiI3BsYXllci1jb3VudFwiKS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKHsgdGFyZ2V0IH0pID0+IHtcbiAgICBoaWdobGlnaHRCcmVha2Rvd24odGFyZ2V0LnZhbHVlKTtcbn0pO1xuaGlnaGxpZ2h0QnJlYWtkb3duKGxvb2t1cE9uZUNhY2hlZChcIiNwbGF5ZXItY291bnRcIikudmFsdWUpO1xuIiwiaW1wb3J0IE9ic2VydmVyIGZyb20gXCIuLi8uLi9jbGFzc2VzL09ic2VydmVyLmpzXCI7XG5pbXBvcnQgVG9rZW5TdG9yZSBmcm9tIFwiLi4vLi4vY2xhc3Nlcy9Ub2tlblN0b3JlLmpzXCI7XG5pbXBvcnQgRGlhbG9nIGZyb20gXCIuLi8uLi9jbGFzc2VzL0RpYWxvZy5qc1wiO1xuaW1wb3J0IHtcbiAgICBsb29rdXAsXG4gICAgbG9va3VwT25lLFxuICAgIGxvb2t1cE9uZUNhY2hlZCxcbiAgICBnZXRMYWJlbFRleHQsXG4gICAgYW5ub3VuY2VJbnB1dFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcbmltcG9ydCB7XG4gICAgc3VwcGxhbnRcbn0gZnJvbSBcIi4uLy4uL3V0aWxzL3N0cmluZ3MuanNcIjtcbmltcG9ydCB7XG4gICAgcG9zdFxufSBmcm9tIFwiLi4vLi4vdXRpbHMvZmV0Y2guanNcIjtcblxuLyoqXG4gKiBDaGVja3MgdG8gc2VlIGlmIHRoZSBnaXZlbiBkYXRhIGxvb2tzIGxpa2UgYSBzY3JpcHQuXG4gKlxuICogQHBhcmFtICB7QXJyYXkuPE9iamVjdHxTdHJpbmc+fSBqc29uXG4gKiAgICAgICAgIERhdGEgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogICAgICAgICB0cnVlIGlmIHRoZSBkYXRhIGxvb2tzIGxpa2UgYSBzY3JpcHQsIGZhbHNlIGlmIGl0IGRvZXNuJ3QuXG4gKi9cbmZ1bmN0aW9uIGlzU2NyaXB0SnNvbihqc29uKSB7XG5cbiAgICByZXR1cm4gKFxuICAgICAgICBBcnJheS5pc0FycmF5KGpzb24pXG4gICAgICAgICYmIGpzb24ubGVuZ3RoXG4gICAgICAgICYmIGpzb24uZXZlcnkoKGl0ZW0pID0+IChcbiAgICAgICAgICAgIChcbiAgICAgICAgICAgICAgICB0eXBlb2YgaXRlbSA9PT0gXCJvYmplY3RcIlxuICAgICAgICAgICAgICAgICYmIHR5cGVvZiBpdGVtPy5pZCA9PT0gXCJzdHJpbmdcIlxuICAgICAgICAgICAgKVxuICAgICAgICAgICAgfHwgdHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCJcbiAgICAgICAgKSlcbiAgICApO1xuXG59XG5cbi8qKlxuICogQ2hlY2tzIHRvIHNlZSBpZiB0aGUgZ2l2ZW4ganNvbiBsb29rcyBsaWtlIGl0IGNvbnRhaW5zIGFueSBob21lYnJldyBjb250ZW50LlxuICpcbiAqIEBwYXJhbSAge0FycmF5LjxPYmplY3Q+fSBqc29uXG4gKiAgICAgICAgIERhdGEgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogICAgICAgICB0cnVlIGlmIHRoZSBkYXRhIHNlZW1zIHRvIGNvbnRhaW4gYW55IGhvbWVicmV3LCBmYWxzZSBpZiBpdCBkb2Vzbid0XG4gKiAgICAgICAgIHNlZW0gdG8gY29udGFpbiBhbnkgaG9tZWJyZXcuXG4gKi9cbmZ1bmN0aW9uIGNvbnRhaW5zSG9tZWJyZXcoanNvbikge1xuXG4gICAgcmV0dXJuIGpzb25cbiAgICAgICAgLmZpbHRlcigoeyBpZCB9KSA9PiBpZCAhPT0gXCJfbWV0YVwiKVxuICAgICAgICAuc29tZSgoeyBhYmlsaXR5IH0pID0+IHR5cGVvZiBhYmlsaXR5ID09PSBcInN0cmluZ1wiKTtcblxufVxuXG4vKipcbiAqIEFubm91bmNlcyB0aGF0IGEgc2NyaXB0IGhhcyBiZWVuIGFkZGVkIHRvIHRoZSBncmltb2lyZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogICAgICAgIE5hbWUgb2YgdGhlIHNjcmlwdC4gVGhpcyBtYXkgYmUgYW4gZW1wdHkgc3RyaW5nLlxuICogQHBhcmFtIHtBcnJheS48T2JqZWN0Pn0gY2hhcmFjdGVyc1xuICogICAgICAgIENoYXJhY3RlcnMgaW4gdGhlIHNjcmlwdC5cbiAqIEBwYXJhbSB7U3RyaW5nfG51bGx9IFtnYW1lPW51bGxdXG4gKiAgICAgICAgVGhlIElEIG9mIHRoZSBob21lYnJldyBzY3JpcHQgdGhhdCB3YXMgdXBsb2FkZWQuIFRoaXMgd2lsbCBiZSBudWxsIGZvclxuICogICAgICAgIGEgZ2FtZSB0aGF0IG9ubHkgY29uc2lzdHMgb2YgcmVjb2duaXNlZCBjaGFyYWN0ZXJzLlxuICovXG5mdW5jdGlvbiBhbm5vdW5jZVNjcmlwdChuYW1lLCBjaGFyYWN0ZXJzLCBnYW1lID0gbnVsbCkge1xuXG4gICAgT2JzZXJ2ZXIuY3JlYXRlKFwiZ2FtZVwiKS50cmlnZ2VyKFwiY2hhcmFjdGVycy1zZWxlY3RlZFwiLCB7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGNoYXJhY3RlcnMsXG4gICAgICAgIGdhbWVcbiAgICB9KTtcbiAgICBEaWFsb2cuY3JlYXRlKGxvb2t1cE9uZUNhY2hlZChcIiNlZGl0aW9uLWxpc3RcIikpLmhpZGUoKTtcblxufVxuXG4vKipcbiAqIFNob3dzIHRoZSBnaXZlbiBlcnJvciBtZXNzYWdlIG9uIHRoZSBnaXZlbiBpbnB1dC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGlucHV0XG4gKiAgICAgICAgRWxlbWVudCB0aGF0IHNob3VsZCBzaG93IGFuIGVycm9yLlxuICogQHBhcmFtIHtTdHJpbmd9IGVycm9yXG4gKiAgICAgICAgRXJyb3IgbWVzc2FnZSB0byBzaG93LlxuICovXG5mdW5jdGlvbiBzaG93SW5wdXRFcnJvcihpbnB1dCwgZXJyb3IpIHtcblxuICAgIGlucHV0LnNldEN1c3RvbVZhbGlkaXR5KGVycm9yKTtcbiAgICBpbnB1dC5mb3JtLnJlcG9ydFZhbGlkaXR5KCk7XG5cbn1cblxuLy8gQSBtYXAgb2YgYW55IGNvbW1vbiBtaXN0YWtlcyB0aGF0IHdlIGZpbmQgaW4gdGhlIGhvbWVicmV3IGNvZGUuXG5jb25zdCBub3JtYWxNYXAgPSB7XG4gICAgdGVhbToge1xuICAgICAgICAvLyBUaGUgQW1lcmljYW4gc3BlbGxpbmcgaGFzIG9uZSBMLCBidXQgSSdtIEJyaXRpc2ggYW5kIEkgdXNlIHR3byBMJ3MuXG4gICAgICAgIFwidHJhdmVsZXJcIjogXCJ0cmF2ZWxsZXJcIlxuICAgIH1cbn07XG5cbi8qKlxuICogRml4ZXMgYW55IGNvbW1vbiBtaXN0YWtlcyBpbiB0aGUgaG9tZWJyZXcgY29kZS5cbiAqXG4gKiBAcGFyYW0gIHtBcnJheX0ganNvblxuICogICAgICAgICBIb21lYnJldyBKU09OLlxuICogQHJldHVybiB7QXJyYXl9XG4gKiAgICAgICAgIFRoZSBob21lYnJldyBKU09OLCBtYXBwZWQgc28gdGhhdCBpdCB3b3JrcyB3aXRoIG91ciBzeXN0ZW0uXG4gKi9cbmZ1bmN0aW9uIG5vcm1hbGlzZUhvbWVicmV3KGpzb24pIHtcblxuICAgIHJldHVybiBqc29uLm1hcCgoZW50cnkpID0+IHtcblxuICAgICAgICAvLyBBbiBvZmZpY2lhbCBjaGFyYWN0ZXIgbWF5IGJlIGEgc2ltcGxlIHN0cmluZyByYXRoZXIgdGhhbiB0aGVcbiAgICAgICAgLy8gb2xkLXNjaG9vbCBhcHByb2FjaCBvZiBhbiBvYmplY3Qgd2l0aCBhbiBcImlkXCIga2V5LlxuICAgICAgICBpZiAodHlwZW9mIGVudHJ5ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICBlbnRyeSA9IHsgaWQ6IGVudHJ5IH07XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZW50cmllcyhub3JtYWxNYXApLmZvckVhY2goKFtrZXksIG1hcF0pID0+IHtcbiAgICAgICAgICAgIGVudHJ5W2tleV0gPSBtYXBbZW50cnlba2V5XV0gfHwgZW50cnlba2V5XTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZW50cnkuaW1hZ2UpKSB7XG4gICAgICAgICAgICBlbnRyeS5pbWFnZSA9IGVudHJ5LmltYWdlWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVudHJ5LnRlYW0gJiYgIWVudHJ5LmltYWdlKSB7XG4gICAgICAgICAgICBlbnRyeS5pbWFnZSA9IGAvYnVpbGQvaW1nL2ljb25zLyR7ZW50cnkudGVhbX0ucG5nYDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbnRyeTtcblxuICAgIH0pO1xuXG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgXCJfbWV0YVwiIGVudHJ5IGZyb20gdGhlIGdpdmVuIEpTT04gZGF0YSwgaWYgaXQgZXhpc3RzLCBhbmQgcmV0dXJuc1xuICogdGhlIG5hbWUgd2l0aGluIHRoYXQgZW50cnkuIElmIHRoZSBlbnRyeSBpc24ndCBmb3VuZCwgYW4gZW1wdHkgc3RyaW5nIGlzXG4gKiByZXR1cm5lZC5cbiAqXG4gKiBAcGFyYW0gIHtBcnJheS48T2JqZWN0Pn0ganNvblxuICogICAgICAgICBKU09OIGRhdGEgd2hvc2UgXCJfbWV0YVwiIGVudHJ5IHNob3VsZCBiZSByZW1vdmVkLlxuICogQHJldHVybiB7U3RyaW5nfVxuICogICAgICAgICBOYW1lIG9mIHRoZSBzY3JpcHQsIHRha2luZyBmcm9tIHRoZSBcIl9tZXRhXCIgZW50cnksIG9yIGFuIGVtcHR5IHN0cmluZ1xuICogICAgICAgICBpZiB0aGUgbmFtZSBjYW5ub3QgYmUgZm91bmQuXG4gKi9cbmZ1bmN0aW9uIGV4dHJhY3RNZXRhRW50cnkoanNvbikge1xuXG4gICAgbGV0IG5hbWUgPSBcIlwiO1xuICAgIGNvbnN0IG1ldGFJbmRleCA9IGpzb24uZmluZEluZGV4KCh7IGlkIH0pID0+IGlkID09PSBcIl9tZXRhXCIpO1xuXG4gICAgaWYgKG1ldGFJbmRleCA+IC0xKSB7XG5cbiAgICAgICAgbmFtZSA9IGpzb25bbWV0YUluZGV4XS5uYW1lO1xuICAgICAgICBqc29uLnNwbGljZShtZXRhSW5kZXgsIDEpO1xuXG4gICAgfVxuXG4gICAgcmV0dXJuIG5hbWU7XG5cbn1cblxuLyoqXG4gKiBTZXRzIHRoZSBsb2FkaW5nIHN0YXRlIG9mIHRoZSBmb3JtLCBzZXR0aW5nIHRoZSBzdGF0ZSBvZiB0aGUgbG9hZGluZ1xuICogYW5pbWF0aW9uIGluIHRoZSBzdWJtaXQgYnV0dG9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZm9ybVxuICogICAgICAgIEZvcm0gd2hvc2UgbG9hZGluZyBzdGF0ZSBzaG91bGQgYmUgc2V0LlxuICogQHBhcmFtIHtCb29sZWFufSBzdGF0ZVxuICogICAgICAgIHRydWUgaWYgdGhlIGZvcm0gaXMgbG9hZGluZywgZmFsc2UgaWYgaXQncyBub3QuXG4gKi9cbmZ1bmN0aW9uIHNldEZvcm1Mb2FkaW5nU3RhdGUoZm9ybSwgc3RhdGUpIHtcblxuICAgIGlmIChcbiAgICAgICAgZm9ybS5kYXRhc2V0LmlzTG9hZGluZyA9PT0gc3RhdGVcbiAgICAgICAgfHwgU3RyaW5nKGZvcm0uZGF0YXNldC5pc0xvYWRpbmcpID09PSBTdHJpbmcoc3RhdGUpXG4gICAgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3JtLmRhdGFzZXQuaXNMb2FkaW5nID0gc3RhdGU7XG5cbiAgICBjb25zdCBzdWJtaXQgPSBsb29rdXBPbmVDYWNoZWQoXCJbdHlwZT1cXFwic3VibWl0XFxcIl1cIiwgZm9ybSk7XG4gICAgc3VibWl0LmNsYXNzTGlzdC50b2dnbGUoXCJpcy1sb2FkaW5nXCIsIHN0YXRlKTtcblxuICAgIGNvbnN0IHByb2dyZXNzID0gbG9va3VwT25lQ2FjaGVkKFwiW3JvbGU9XFxcInByb2dyZXNzYmFyXFxcIl1cIiwgc3VibWl0KTtcbiAgICBwcm9ncmVzcy5zZXRBdHRyaWJ1dGUoXCJhcmlhLWJ1c3lcIiwgc3RhdGUpO1xuICAgIHByb2dyZXNzLnNldEF0dHJpYnV0ZShcbiAgICAgICAgXCJhcmlhLXZhbHVlbm93XCIsXG4gICAgICAgIChcbiAgICAgICAgICAgIHN0YXRlXG4gICAgICAgICAgICA/IFwiMFwiXG4gICAgICAgICAgICA6IHByb2dyZXNzLmdldEF0dHJpYnV0ZShcImFyaWEtdmFsdWVtYXhcIilcbiAgICAgICAgKVxuICAgICk7XG5cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBhIGNoYXJhY3RlciBlbnRyeSBpbnRvIGEgbm9ybWFsaXNlZCBJRC5cbiAqXG4gKiBAcGFyYW0gIHtPYmplY3R8U3RyaW5nfSBpdGVtXG4gKiAgICAgICAgIEl0ZW0gd2hvc2Ugbm9ybWFsaXNlZCBJRCBzaG91bGQgYmUgcmV0dXJuZWQuXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiAgICAgICAgIE5vcm1hbGlzZWQgY2hhcmFjdGVyIElELlxuICovXG5mdW5jdGlvbiBjb252ZXJ0Q2hhcmFjdGVySWQoaXRlbSkge1xuXG4gICAgbGV0IGlkID0gXCJcIjtcblxuICAgIGlmICh0eXBlb2YgaXRlbSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICBpZCA9IGl0ZW07XG4gICAgfSBlbHNlIGlmIChpdGVtICYmIHR5cGVvZiBpdGVtID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGlkID0gaXRlbS5pZCB8fCBcIlwiO1xuICAgIH1cblxuICAgIHJldHVybiBUb2tlblN0b3JlLm5vcm1hbGlzZUlkKGlkKTtcblxufVxuXG4vKipcbiAqIFByb2Nlc3NlcyB0aGUgSlNPTiB0byBzZXQgdXAgdGhlIGdhbWUuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fSBqc29uXG4gKiAgICAgICAgIEpTT04gdG8gcHJvY2Vzcy5cbiAqIEBwYXJhbSAge0VsZW1lbnR9IGpzb24uZm9ybVxuICogICAgICAgICBUaGUgZm9ybSB0aGF0IHdhcyBzdWJtaXR0ZWQgc28gdGhlIEpTT04gY291bGQgYmUgcHJvY2Vzc2VkLlxuICogQHBhcmFtICB7QXJyYXkuPE9iamVjdD59IGpzb24uanNvblxuICogICAgICAgICBTY3JpcHQgdG8gcHJvY2Vzcy5cbiAqIEBwYXJhbSAge0VsZW1lbnR9IGpzb24uaW5wdXRcbiAqICAgICAgICAgRmlsZSBpbnB1dCB0aGF0IHVwbG9hZHMgc2NyaXB0cy5cbiAqIEBwYXJhbSAge1Rva2VuU3RvcmV9IGpzb24uc3RvcmVcbiAqICAgICAgICAgU3RvcmUgZm9yIGFueSBkYXRhLlxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqICAgICAgICAgQW4gZW1wdHksIHJlc29sdmVkIFByb21pc2UuXG4gKi9cbmZ1bmN0aW9uIHByb2Nlc3NKU09OKHtcbiAgICBmb3JtLFxuICAgIGpzb24sXG4gICAgaW5wdXQsXG4gICAgc3RvcmVcbn0pIHtcblxuICAgIGlmICghaXNTY3JpcHRKc29uKGpzb24pKSB7XG5cbiAgICAgICAgc2hvd0lucHV0RXJyb3IoaW5wdXQsIEkxOE4uaW52YWxpZFNjcmlwdCk7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcblxuICAgIH1cblxuICAgIGlmIChjb250YWluc0hvbWVicmV3KGpzb24pKSB7XG5cbiAgICAgICAgY29uc3Qgbm9ybWFsaXNlZCA9IG5vcm1hbGlzZUhvbWVicmV3KGpzb24pO1xuXG4gICAgICAgIHNldEZvcm1Mb2FkaW5nU3RhdGUoZm9ybSwgdHJ1ZSk7XG5cbiAgICAgICAgcmV0dXJuIHBvc3QoVVJMUy5ob21lYnJldywgbm9ybWFsaXNlZClcbiAgICAgICAgICAgIC50aGVuKCh7IHN1Y2Nlc3MsIGdhbWUsIG1lc3NhZ2UsIHJlYXNvbnMgfSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgc2V0Rm9ybUxvYWRpbmdTdGF0ZShmb3JtLCBmYWxzZSk7XG5cbiAgICAgICAgICAgICAgICBpZiAoc3VjY2Vzcykge1xuXG4gICAgICAgICAgICAgICAgICAgIGFubm91bmNlU2NyaXB0KFxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdE1ldGFFbnRyeShub3JtYWxpc2VkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbGlzZWQubWFwKChpdGVtKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuZ2V0T2ZmaWNpYWxDaGFyYWN0ZXIoY29udmVydENoYXJhY3RlcklkKGl0ZW0pKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHx8IHN0b3JlLmNyZWF0ZUN1c3RvbUNoYXJhY3RlcihpdGVtKVxuICAgICAgICAgICAgICAgICAgICAgICAgKSksXG4gICAgICAgICAgICAgICAgICAgICAgICBnYW1lXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIERpYWxvZy5jcmVhdGUobG9va3VwT25lQ2FjaGVkKFwiI2VkaXRpb24tbGlzdFwiKSkuaGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAocmVhc29ucyAmJiByZWFzb25zLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSArPSBcIlxcblxcblwiICsgcmVhc29ucy5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgc2hvd0lucHV0RXJyb3IoaW5wdXQsIG1lc3NhZ2UpO1xuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgfVxuXG4gICAgY29uc3QgbmFtZSA9IGV4dHJhY3RNZXRhRW50cnkoanNvbik7XG4gICAgY29uc3QgY2hhcmFjdGVycyA9IGpzb25cbiAgICAgICAgLm1hcCgoaXRlbSkgPT4gc3RvcmUuZ2V0Q2hhcmFjdGVyKGNvbnZlcnRDaGFyYWN0ZXJJZChpdGVtKSkpXG4gICAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICBpZiAoIWNoYXJhY3RlcnMubGVuZ3RoKSB7XG5cbiAgICAgICAgc2hvd0lucHV0RXJyb3IoaW5wdXQsIEkxOE4ubm9DaGFyYWN0ZXJzKTtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgfVxuXG4gICAgYW5ub3VuY2VTY3JpcHQobmFtZSwgY2hhcmFjdGVycyk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmFsaWRhdGlvbiBvbiB0aGUgZ2l2ZW4gZmllbGRzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPEVsZW1lbnQ+fSBmaWVsZHNcbiAqICAgICAgICBJbnB1dCBmaWVsZHMgdGhhdCBzaG91bGQgaGF2ZSB0aGVpciB2YWxpZGl0eSBzZXQuXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGlzVmlzaWJsZVxuICogICAgICAgIHRydWUgaWYgdGhlIGZpZWxkcyBhcmUgdmlzaWJsZSBhbmQgdGhlaXIgdmFsaWRpdHkgc2hvdWxkIGJlIHNldCwgZmFsc2VcbiAqICAgICAgICBpZiB0aGV5J3JlIG5vdCB2aXNpYmxlIGFuZCB0aGVpciB2YWxpZGl0eSBzaG91bGQgYmUgcmVtb3ZlZC5cbiAqL1xuZnVuY3Rpb24gc2V0RmllbGRzVmFsaWRpdHkoZmllbGRzLCBpc1Zpc2libGUpIHtcblxuICAgIGlmIChpc1Zpc2libGUpIHtcblxuICAgICAgICBjb25zdCBpbnB1dHRlZCA9IGZpZWxkcy5maW5kKChmaWVsZCkgPT4gZmllbGQudmFsdWUpO1xuICAgICAgICBmaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgICAgIGZpZWxkLnJlcXVpcmVkID0gIWlucHV0dGVkIHx8IGZpZWxkID09PSBpbnB1dHRlZDtcbiAgICAgICAgfSk7XG5cbiAgICB9IGVsc2Uge1xuXG4gICAgICAgIGZpZWxkcy5mb3JFYWNoKChmaWVsZCkgPT4ge1xuXG4gICAgICAgICAgICBmaWVsZC5zZXRDdXN0b21WYWxpZGl0eShcIlwiKTtcbiAgICAgICAgICAgIGZpZWxkLnJlcXVpcmVkID0gZmFsc2U7XG5cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbn1cblxuY29uc3QgZm9ybSA9IGxvb2t1cE9uZShcIiNzZWxlY3QtZWRpdGlvbi1mb3JtXCIpO1xuY29uc3QgZmlsZUlucHV0ID0gbG9va3VwT25lKFwiI2N1c3RvbS1zY3JpcHQtdXBsb2FkXCIpO1xuY29uc3QgZmlsZUlucHV0UmVuZGVyID0gZmlsZUlucHV0Lm5leHRFbGVtZW50U2libGluZztcbmNvbnN0IHVybElucHV0ID0gbG9va3VwT25lKFwiI2N1c3RvbS1zY3JpcHQtdXJsXCIpO1xuY29uc3QgcGFzdGVJbnB1dCA9IGxvb2t1cE9uZShcIiNjdXN0b20tc2NyaXB0LXBhc3RlXCIpO1xuY29uc3QgdXBsb2FkZXIgPSBsb29rdXBPbmUoXCIjY3VzdG9tLXNjcmlwdFwiKTtcbmNvbnN0IHJhZGlvcyA9IGxvb2t1cChcIltuYW1lPVxcXCJlZGl0aW9uXFxcIl1cIiwgZm9ybSk7XG5jb25zdCBjdXN0b21JbnB1dHMgPSBbZmlsZUlucHV0LCB1cmxJbnB1dCwgcGFzdGVJbnB1dF07XG5cbnJhZGlvcy5mb3JFYWNoKChyYWRpbykgPT4ge1xuXG4gICAgcmFkaW8uYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICAgICAgY29uc3QgaXNDdXN0b20gPSB0YXJnZXQudmFsdWUgPT09IFwiY3VzdG9tXCI7XG5cbiAgICAgICAgdXBsb2FkZXIuaGlkZGVuID0gIWlzQ3VzdG9tO1xuICAgICAgICBzZXRGaWVsZHNWYWxpZGl0eShjdXN0b21JbnB1dHMsIGlzQ3VzdG9tKTtcblxuICAgIH0pO1xuXG59KTtcblxuY3VzdG9tSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG5cbiAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuXG4gICAgICAgIGlucHV0LnNldEN1c3RvbVZhbGlkaXR5KFwiXCIpO1xuICAgICAgICBzZXRGaWVsZHNWYWxpZGl0eShjdXN0b21JbnB1dHMsIHRydWUpO1xuXG4gICAgfSk7XG5cbn0pO1xuXG5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcblxuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGlmIChmb3JtLmRhdGFzZXQuaXNMb2FkaW5nID09PSBcInRydWVcIikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmFkaW8gPSByYWRpb3MuZmluZCgoeyBjaGVja2VkIH0pID0+IGNoZWNrZWQpO1xuICAgIGNvbnN0IGVkaXRpb24gPSByYWRpbz8udmFsdWU7XG5cbiAgICBpZiAoIWVkaXRpb24pIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIFRva2VuU3RvcmUucmVhZHkoKHRva2VuU3RvcmUpID0+IHtcblxuICAgICAgICBpZiAoZWRpdGlvbiA9PT0gXCJjdXN0b21cIikge1xuXG4gICAgICAgICAgICBpZiAodXJsSW5wdXQudmFsdWUpIHtcblxuICAgICAgICAgICAgICAgIHNldEZvcm1Mb2FkaW5nU3RhdGUoZm9ybSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBteVVSTCA9IHN1cHBsYW50KHdpbmRvdy5kZWNvZGVVUklDb21wb25lbnQoVVJMUy51cmwpLCB7XG4gICAgICAgICAgICAgICAgICAgIHVybDogd2luZG93LmVuY29kZVVSSUNvbXBvbmVudCh1cmxJbnB1dC52YWx1ZSlcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGZldGNoKG15VVJMKVxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93SW5wdXRFcnJvcih1cmxJbnB1dCwgZXJyb3IubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRGb3JtTG9hZGluZ1N0YXRlKGZvcm0sIGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzaG93SW5wdXRFcnJvcih1cmxJbnB1dCwgSTE4Ti5pbnZhbGlkU2NyaXB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldEZvcm1Mb2FkaW5nU3RhdGUoZm9ybSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChqc29uKSA9PiB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWpzb24uc3VjY2Vzcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dJbnB1dEVycm9yKHVybElucHV0LCBqc29uLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEZvcm1Mb2FkaW5nU3RhdGUoZm9ybSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc0pTT04oe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAganNvbjoganNvbi5kYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OiB1cmxJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZTogdG9rZW5TdG9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiBzZXRGb3JtTG9hZGluZ1N0YXRlKGZvcm0sIGZhbHNlKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZUlucHV0LmZpbGVzLmxlbmd0aCkge1xuXG4gICAgICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcblxuICAgICAgICAgICAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCAoeyB0YXJnZXQgfSkgPT4ge1xuXG4gICAgICAgICAgICAgICAgICAgIGxldCBqc29uID0gW107XG5cbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGpzb24gPSBKU09OLnBhcnNlKHRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNob3dJbnB1dEVycm9yKGZpbGVJbnB1dCwgSTE4Ti5pbnZhbGlkU2NyaXB0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NKU09OKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm0sXG4gICAgICAgICAgICAgICAgICAgICAgICBqc29uLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IGZpbGVJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiB0b2tlblN0b3JlXG4gICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KGZpbGVJbnB1dC5maWxlc1swXSk7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocGFzdGVJbnB1dC52YWx1ZSkge1xuXG4gICAgICAgICAgICAgICAgbGV0IGpzb24gPSBbXTtcblxuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGpzb24gPSBKU09OLnBhcnNlKHBhc3RlSW5wdXQudmFsdWUpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG93SW5wdXRFcnJvcihwYXN0ZUlucHV0LCBJMThOLmludmFsaWRTY3JpcHQpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHByb2Nlc3NKU09OKHtcbiAgICAgICAgICAgICAgICAgICAgZm9ybSxcbiAgICAgICAgICAgICAgICAgICAganNvbixcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQ6IHBhc3RlSW5wdXQsXG4gICAgICAgICAgICAgICAgICAgIHN0b3JlOiB0b2tlblN0b3JlXG4gICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgIGFubm91bmNlU2NyaXB0KFxuICAgICAgICAgICAgICAgIGdldExhYmVsVGV4dChyYWRpbyksXG4gICAgICAgICAgICAgICAgdG9rZW5TdG9yZVxuICAgICAgICAgICAgICAgICAgICAuZ2V0QWxsQ2hhcmFjdGVycygpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKGNoYXJhY3RlcikgPT4gY2hhcmFjdGVyLmdldEVkaXRpb24oKSA9PT0gZWRpdGlvbilcbiAgICAgICAgICAgICk7XG5cbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbn0pO1xuXG5maWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcblxuICAgIGNvbnN0IHtcbiAgICAgICAgdmFsdWVcbiAgICB9ID0gZmlsZUlucHV0O1xuXG4gICAgZmlsZUlucHV0LnNldEN1c3RvbVZhbGlkaXR5KFwiXCIpO1xuICAgIGZpbGVJbnB1dFJlbmRlci5kYXRhc2V0LnZhbHVlID0gKFxuICAgICAgICB2YWx1ZVxuICAgICAgICA/IHZhbHVlLnNsaWNlKHZhbHVlLmxhc3RJbmRleE9mKFwiXFxcXFwiKSArIDEpXG4gICAgICAgIDogZmlsZUlucHV0UmVuZGVyLmRhdGFzZXQucGxhY2Vob2xkZXJcbiAgICApO1xuXG4gICAgaWYgKHZhbHVlICYmIHVybElucHV0LnZhbHVlKSB7XG5cbiAgICAgICAgdXJsSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBhbm5vdW5jZUlucHV0KHVybElucHV0KTtcblxuICAgIH1cblxufSk7XG5cbnVybElucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XG5cbiAgICB1cmxJbnB1dC5zZXRDdXN0b21WYWxpZGl0eShcIlwiKTtcblxuICAgIGlmICh1cmxJbnB1dC52YWx1ZSAmJiBmaWxlSW5wdXQudmFsdWUpIHtcblxuICAgICAgICBmaWxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgICAgICBhbm5vdW5jZUlucHV0KGZpbGVJbnB1dCk7XG5cbiAgICB9XG5cbn0pO1xuXG5EaWFsb2cuY3JlYXRlKGxvb2t1cE9uZShcIiNlZGl0aW9uLWxpc3RcIikpLm9uKERpYWxvZy5ISURFLCAoKSA9PiB7XG5cbiAgICBmaWxlSW5wdXQudmFsdWUgPSBcIlwiO1xuICAgIGFubm91bmNlSW5wdXQoZmlsZUlucHV0KTtcbiAgICB1cmxJbnB1dC52YWx1ZSA9IFwiXCI7XG4gICAgYW5ub3VuY2VJbnB1dCh1cmxJbnB1dCk7XG5cbn0pO1xuIiwiaW1wb3J0IE9ic2VydmVyIGZyb20gXCIuLi8uLi9jbGFzc2VzL09ic2VydmVyLmpzXCI7XG5pbXBvcnQgRGlhbG9nIGZyb20gXCIuLi8uLi9jbGFzc2VzL0RpYWxvZy5qc1wiO1xuaW1wb3J0IFRva2VuU3RvcmUgZnJvbSBcIi4uLy4uL2NsYXNzZXMvVG9rZW5TdG9yZS5qc1wiO1xuaW1wb3J0IFRlbXBsYXRlIGZyb20gXCIuLi8uLi9jbGFzc2VzL1RlbXBsYXRlLmpzXCI7XG5pbXBvcnQge1xuICAgIGVtcHR5LFxuICAgIGxvb2t1cE9uZSxcbiAgICBsb29rdXBPbmVDYWNoZWQsXG4gICAgcmVwbGFjZUNvbnRlbnRzTWFueVxufSBmcm9tIFwiLi4vLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcbmltcG9ydCB7XG4gICAgc2h1ZmZsZVxufSBmcm9tIFwiLi4vLi4vdXRpbHMvYXJyYXlzLmpzXCI7XG5cbmNvbnN0IGdhbWVPYnNlcnZlciA9IE9ic2VydmVyLmNyZWF0ZShcImdhbWVcIik7XG5jb25zdCBjaGFyYWN0ZXJEZWNpc2lvbkRpYWxvZyA9IERpYWxvZy5jcmVhdGUobG9va3VwT25lKFwiI2NoYXJhY3Rlci1kZWNpc2lvblwiKSk7XG5jb25zdCBwbGF5ZXJOYW1lID0gbG9va3VwT25lKFwiI3BsYXllci1uYW1lXCIpO1xuXG5nYW1lT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXItZHJhd1wiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgaWYgKGRldGFpbC5pc1Nob3dBbGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHRlbXBsYXRlID0gVGVtcGxhdGUuY3JlYXRlKFxuICAgICAgICBsb29rdXBPbmVDYWNoZWQoXCIjY2hhcmFjdGVyLWNob2ljZS10ZW1wbGF0ZVwiKVxuICAgICk7XG5cbiAgICByZXBsYWNlQ29udGVudHNNYW55KFxuICAgICAgICBsb29rdXBPbmVDYWNoZWQoXCIjY2hhcmFjdGVyLWNob2ljZS13cmFwcGVyXCIpLFxuICAgICAgICBzaHVmZmxlKGRldGFpbC5jaGFyYWN0ZXJzKVxuICAgICAgICAgICAgLm1hcCgoY2hhcmFjdGVyLCBpKSA9PiB0ZW1wbGF0ZS5kcmF3KHtcbiAgICAgICAgICAgICAgICBcIltkYXRhLWlkXVwiKGVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5kYXRhc2V0LmlkID0gY2hhcmFjdGVyLmdldElkKCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIi5qcy0tY2hhcmFjdGVyLWNob2ljZS0tbnVtYmVyXCIoZWxlbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnRleHRDb250ZW50ID0gaSArIDE7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpXG4gICAgKTtcblxuICAgIERpYWxvZy5jcmVhdGUobG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1jaG9pY2VcIikpLnNob3coKTtcblxufSk7XG5cbmdhbWVPYnNlcnZlci5vbihcImNoYXJhY3Rlci1kcmF3XCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBpZiAoIWRldGFpbC5pc1Nob3dBbGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGxvb2t1cE9uZUNhY2hlZChcIiNncmltb2lyZVwiKS5vcGVuID0gdHJ1ZTtcblxuICAgIFRva2VuU3RvcmUucmVhZHkoKHRva2VuU3RvcmUpID0+IHtcblxuICAgICAgICBkZXRhaWwuY2hhcmFjdGVycy5mb3JFYWNoKChjaGFyYWN0ZXIpID0+IHtcblxuICAgICAgICAgICAgZ2FtZU9ic2VydmVyLnRyaWdnZXIoXCJjaGFyYWN0ZXItZHJhd25cIiwge1xuICAgICAgICAgICAgICAgIGNoYXJhY3RlcjogY2hhcmFjdGVyLmNsb25lKCksXG4gICAgICAgICAgICAgICAgaXNBdXRvQWRkOiB0cnVlXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG59KTtcblxubG9va3VwT25lQ2FjaGVkKFwiI2NoYXJhY3Rlci1jaG9pY2VcIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICBjb25zdCBlbGVtZW50ID0gdGFyZ2V0LmNsb3Nlc3QoXCJbZGF0YS1pZF1cIik7XG5cbiAgICBpZiAoIWVsZW1lbnQgfHwgZWxlbWVudC5kaXNhYmxlZCkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgVG9rZW5TdG9yZS5yZWFkeSgodG9rZW5TdG9yZSkgPT4ge1xuXG4gICAgICAgIC8vIEFkZCBhIGNsb25lIG9mIHRoZSBjaGFyYWN0ZXIgc28gdGhhdCBkdXBsaWNhdGVkIGNoYXJhY3RlcnMgYXJlIHN0aWxsXG4gICAgICAgIC8vIGNvbnNpZGVyZWQgdW5pcXVlLlxuXG4gICAgICAgIGdhbWVPYnNlcnZlci50cmlnZ2VyKFwiY2hhcmFjdGVyLWRyYXduXCIsIHtcbiAgICAgICAgICAgIGVsZW1lbnQsXG4gICAgICAgICAgICBjaGFyYWN0ZXI6IHRva2VuU3RvcmUuZ2V0Q2hhcmFjdGVyKGVsZW1lbnQuZGF0YXNldC5pZCkuY2xvbmUoKVxuICAgICAgICB9KTtcblxuICAgIH0pO1xuXG59KTtcblxuZ2FtZU9ic2VydmVyLm9uKFwiY2hhcmFjdGVyLWRyYXduXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGVsZW1lbnRcbiAgICB9ID0gZGV0YWlsO1xuXG4gICAgaWYgKGVsZW1lbnQpIHtcbiAgICAgICAgZWxlbWVudC5kaXNhYmxlZCA9IHRydWU7XG4gICAgfVxuXG59KTtcblxuZ2FtZU9ic2VydmVyLm9uKFwiY2hhcmFjdGVyLWRyYXduXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGlzQXV0b0FkZCxcbiAgICAgICAgY2hhcmFjdGVyXG4gICAgfSA9IGRldGFpbDtcblxuICAgIGlmIChpc0F1dG9BZGQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVtcHR5KGxvb2t1cE9uZUNhY2hlZChcIiNjaGFyYWN0ZXItZGVjaXNpb24td3JhcHBlclwiKSkuYXBwZW5kKFxuICAgICAgICBjaGFyYWN0ZXIuZHJhd1Rva2VuKClcbiAgICApO1xuICAgIGxvb2t1cE9uZUNhY2hlZChcIiNjaGFyYWN0ZXItZGVjaXNpb24tYWJpbGl0eVwiKS50ZXh0Q29udGVudCA9IChcbiAgICAgICAgY2hhcmFjdGVyLmdldEFiaWxpdHkoKVxuICAgICk7XG4gICAgY2hhcmFjdGVyRGVjaXNpb25EaWFsb2cuc2hvdygpO1xuXG59KTtcblxuLy8gQWxsb3cgYSBuYW1lIHRvIGJlIHNldCB3aGVuIHRoZSBjaGFyYWN0ZXIgaXMgcmV2ZWFsZWQuXG4vLyBXZSBkbyB0aGlzIGJ5IGNoZWNraW5nIHRvIHNlZSBpZiBhIG5hbWUgd2FzIGVudGVyZWQgd2hlbiB0aGUgXCJyZW1lbWJlciB5b3VyXG4vLyBjaGFyYWN0ZXJcIiBkaWFsb2cgaXMgY2xvc2VkLCB1c2luZyBpdCBpZiBpdCB3YXMuXG5cbmxldCBjaGFyYWN0ZXIgPSBudWxsO1xuXG5nYW1lT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXItZHJhd25cIiwgKHsgZGV0YWlsIH0pID0+IHtcbiAgICBjaGFyYWN0ZXIgPSBkZXRhaWwuY2hhcmFjdGVyO1xufSk7XG5cbmNoYXJhY3RlckRlY2lzaW9uRGlhbG9nLm9uKERpYWxvZy5TSE9XLCAoKSA9PiB7XG4gICAgcGxheWVyTmFtZS52YWx1ZSA9IHBsYXllck5hbWUuZGVmYXVsdFZhbHVlO1xufSk7XG5cbmNoYXJhY3RlckRlY2lzaW9uRGlhbG9nLm9uKERpYWxvZy5ISURFLCAoKSA9PiB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIHBhZFxuICAgIH0gPSBsb29rdXBPbmVDYWNoZWQoXCIuanMtLXBhZFwiKTtcbiAgICBjb25zdCB7XG4gICAgICAgIHZhbHVlXG4gICAgfSA9IHBsYXllck5hbWU7XG4gICAgY29uc3QgdHJpbW1lZCA9ICh2YWx1ZSB8fCBcIlwiKS50cmltKCk7XG5cbiAgICBpZiAocGFkICYmIHRyaW1tZWQgJiYgY2hhcmFjdGVyKSB7XG4gICAgICAgIHBhZC5zZXRQbGF5ZXJOYW1lKGNoYXJhY3RlciwgdHJpbW1lZCk7XG4gICAgfVxuXG4gICAgY2hhcmFjdGVyID0gbnVsbDtcblxufSk7XG5cbmxvb2t1cE9uZShcIiNjaGFyYWN0ZXItZGVjaXNpb24tZm9ybVwiKS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNoYXJhY3RlckRlY2lzaW9uRGlhbG9nLmhpZGUoKTtcbn0pO1xuIiwiaW1wb3J0IFN0b3JlIGZyb20gXCIuLi9jbGFzc2VzL1N0b3JlLmpzXCI7XG5pbXBvcnQgT2JzZXJ2ZXIgZnJvbSBcIi4uL2NsYXNzZXMvT2JzZXJ2ZXIuanNcIjtcbmltcG9ydCBUb2tlblN0b3JlIGZyb20gXCIuLi9jbGFzc2VzL1Rva2VuU3RvcmUuanNcIjtcbi8vIGltcG9ydCBCbHVmZnMgZnJvbSBcIi4uL2NsYXNzZXMvQmx1ZmZzLmpzXCI7XG5pbXBvcnQgQmx1ZmZzR3JvdXBzIGZyb20gXCIuLi9jbGFzc2VzL0JsdWZmc0dyb3Vwcy5qc1wiO1xuaW1wb3J0IERpYWxvZyBmcm9tIFwiLi4vY2xhc3Nlcy9EaWFsb2cuanNcIjtcbmltcG9ydCBJbmZvVG9rZW4gZnJvbSBcIi4uL2NsYXNzZXMvSW5mb1Rva2VuLmpzXCI7XG5pbXBvcnQgTmFtZXMgZnJvbSBcIi4uL2NsYXNzZXMvTmFtZXMuanNcIjtcbmltcG9ydCB7XG4gICAgbG9va3VwLFxuICAgIGxvb2t1cE9uZSxcbiAgICBsb29rdXBPbmVDYWNoZWQsXG4gICAgYW5ub3VuY2VJbnB1dFxufSBmcm9tIFwiLi4vdXRpbHMvZWxlbWVudHMuanNcIjtcbmltcG9ydCB7XG4gICAgVkVSU0lPTlxufSBmcm9tIFwiLi4vY29uc3RhbnRzL3ZlcnNpb24uanNcIjtcbmltcG9ydCB7XG4gICAgY29tcGFyZVZlcnNpb25zXG59IGZyb20gXCIuLi91dGlscy9udW1iZXJzLmpzXCI7XG5cbmNvbnN0IHN0b3JlID0gU3RvcmUuY3JlYXRlKFwicG9ja2V0LWdyaW1vaXJlXCIpO1xuY29uc3QgZ2FtZU9ic2VydmVyID0gT2JzZXJ2ZXIuY3JlYXRlKFwiZ2FtZVwiKTtcbmNvbnN0IHRva2VuT2JzZXJ2ZXIgPSBPYnNlcnZlci5jcmVhdGUoXCJ0b2tlblwiKTtcbmNvbnN0IGluZm9Ub2tlbk9ic2VydmVyID0gT2JzZXJ2ZXIuY3JlYXRlKFwiaW5mby10b2tlblwiKTtcblxuY29uc3QgcGFkRWxlbWVudCA9IGxvb2t1cE9uZUNhY2hlZChcIi5qcy0tcGFkXCIpO1xuY29uc3QgcGFkID0gcGFkRWxlbWVudC5wYWQ7XG5jb25zdCBuYW1lcyA9IE5hbWVzLmNyZWF0ZSgpO1xuXG5nYW1lT2JzZXJ2ZXIub24oXCJjaGFyYWN0ZXJzLXNlbGVjdGVkXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBzdG9yZS5zZXRDaGFyYWN0ZXJzKFxuICAgICAgICBkZXRhaWwubmFtZSxcbiAgICAgICAgZGV0YWlsLmNoYXJhY3RlcnMubWFwKChjaGFyYWN0ZXIpID0+IChcbiAgICAgICAgICAgIGNoYXJhY3Rlci5pc0N1c3RvbSgpXG4gICAgICAgICAgICA/IGNoYXJhY3Rlci5nZXRBbGxEYXRhKClcbiAgICAgICAgICAgIDogY2hhcmFjdGVyLmdldElkKClcbiAgICAgICAgKSksXG4gICAgICAgIGRldGFpbC5nYW1lXG4gICAgKTtcbiAgICBzdG9yZS5yZW1vdmVTdGFsZUlucHV0cygpO1xuXG59KTtcblxuZ2FtZU9ic2VydmVyLm9uKFwicGFkLWhlaWdodC1jaGFuZ2VcIiwgKHsgZGV0YWlsIH0pID0+IHtcbiAgICBzdG9yZS5zZXRIZWlnaHQoZGV0YWlsLmhlaWdodCk7XG59KTtcblxudG9rZW5PYnNlcnZlci5vbihcImNoYXJhY3Rlci1hZGRcIiwgKHsgZGV0YWlsIH0pID0+IHtcbiAgICBzdG9yZS5hZGRUb2tlbihkZXRhaWwuY2hhcmFjdGVyKTtcbn0pO1xuXG50b2tlbk9ic2VydmVyLm9uKFwiY2hhcmFjdGVyLXJlbW92ZVwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuICAgIHN0b3JlLnJlbW92ZVRva2VuKGRldGFpbC5jaGFyYWN0ZXIpO1xufSk7XG5cbnRva2VuT2JzZXJ2ZXIub24oXCJyZW1pbmRlci1hZGRcIiwgKHsgZGV0YWlsIH0pID0+IHtcbiAgICBzdG9yZS5hZGRUb2tlbihkZXRhaWwucmVtaW5kZXIpO1xufSk7XG5cbnRva2VuT2JzZXJ2ZXIub24oXCJyZW1pbmRlci1yZW1vdmVcIiwgKHsgZGV0YWlsIH0pID0+IHtcbiAgICBzdG9yZS5yZW1vdmVUb2tlbihkZXRhaWwucmVtaW5kZXIpO1xufSk7XG5cbnRva2VuT2JzZXJ2ZXIub24oXCJtb3ZlXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBjb25zdCB7XG4gICAgICAgIGVsZW1lbnQsXG4gICAgICAgIGxlZnQsXG4gICAgICAgIHRvcCxcbiAgICAgICAgekluZGV4XG4gICAgfSA9IGRldGFpbDtcbiAgICBjb25zdCB0b2tlbiA9IChcbiAgICAgICAgcGFkLmdldENoYXJhY3RlckJ5VG9rZW4oZWxlbWVudClcbiAgICAgICAgfHwgcGFkLmdldFJlbWluZGVyQnlUb2tlbihlbGVtZW50KVxuICAgICk7XG5cbiAgICBpZiAodG9rZW4pIHtcbiAgICAgICAgc3RvcmUubW92ZVRva2VuKHRva2VuLCBsZWZ0LCB0b3AsIHpJbmRleCk7XG4gICAgfVxuXG59KTtcblxudG9rZW5PYnNlcnZlci5vbihcInppbmRleFwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuXG4gICAgY29uc3Qge1xuICAgICAgICBlbGVtZW50LFxuICAgICAgICB6SW5kZXhcbiAgICB9ID0gZGV0YWlsO1xuICAgIGNvbnN0IHRva2VuID0gKFxuICAgICAgICBwYWQuZ2V0Q2hhcmFjdGVyQnlUb2tlbihlbGVtZW50KVxuICAgICAgICB8fCBwYWQuZ2V0UmVtaW5kZXJCeVRva2VuKGVsZW1lbnQpXG4gICAgKTtcblxuICAgIGlmICh0b2tlbikge1xuICAgICAgICBzdG9yZS5hbGlnblRva2VuKHRva2VuLCB6SW5kZXgpO1xuICAgIH1cblxufSk7XG5cbnRva2VuT2JzZXJ2ZXIub24oXCJzaHJvdWQtdG9nZ2xlXCIsICh7IGRldGFpbCB9KSA9PiB7XG4gICAgc3RvcmUudG9nZ2xlRGVhZChwYWQuZ2V0Q2hhcmFjdGVyQnlUb2tlbihkZXRhaWwudG9rZW4pLCBkZXRhaWwuaXNEZWFkKTtcbn0pO1xuXG50b2tlbk9ic2VydmVyLm9uKFwicm90YXRlLXRvZ2dsZVwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuICAgIHN0b3JlLnJvdGF0ZShwYWQuZ2V0Q2hhcmFjdGVyQnlUb2tlbihkZXRhaWwudG9rZW4pLCBkZXRhaWwuaXNVcHNpZGVEb3duKTtcbn0pO1xuXG50b2tlbk9ic2VydmVyLm9uKFwic2V0LXBsYXllci1uYW1lXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBzdG9yZS5zZXRQbGF5ZXJOYW1lKHBhZC5nZXRDaGFyYWN0ZXJCeVRva2VuKGRldGFpbC50b2tlbiksIGRldGFpbC5uYW1lKTtcbiAgICBuYW1lcy5hZGQoZGV0YWlsLm5hbWUpO1xuXG59KTtcblxudG9rZW5PYnNlcnZlci5vbihcImdob3N0LXZvdGUtdG9nZ2xlXCIsICh7IGRldGFpbCB9KSA9PiB7XG5cbiAgICBzdG9yZS5zZXRHaG9zdFZvdGUoXG4gICAgICAgIHBhZC5nZXRDaGFyYWN0ZXJCeVRva2VuKGRldGFpbC50b2tlbiksXG4gICAgICAgIGRldGFpbC5oYXNHaG9zdFZvdGVcbiAgICApO1xuXG59KTtcblxudG9rZW5PYnNlcnZlci5vbihcImJsdWZmXCIsICh7IGRldGFpbCB9KSA9PiB7XG4gICAgc3RvcmUuc2V0Qmx1ZmZzKGRldGFpbC5kYXRhKTtcbn0pO1xuXG5pbmZvVG9rZW5PYnNlcnZlci5vbihcImluZm8tdG9rZW4tYWRkZWRcIiwgKHsgZGV0YWlsIH0pID0+IHtcbiAgICBzdG9yZS5zYXZlSW5mb1Rva2VuKGRldGFpbC50b2tlbiwgZGV0YWlsLmluZGV4KTtcbn0pO1xuXG5pbmZvVG9rZW5PYnNlcnZlci5vbihcImluZm8tdG9rZW4tdXBkYXRlZFwiLCAoeyBkZXRhaWwgfSkgPT4ge1xuICAgIHN0b3JlLnVwZGF0ZUluZm9Ub2tlbihkZXRhaWwudG9rZW4pO1xufSk7XG5cbmluZm9Ub2tlbk9ic2VydmVyLm9uKFwiaW5mby10b2tlbi1kZWxldGVkXCIsICh7IGRldGFpbCB9KSA9PiB7XG4gICAgc3RvcmUucmVtb3ZlSW5mb1Rva2VuKGRldGFpbC50b2tlbik7XG59KTtcblxuY29uc3Qgc2F2ZWRWZXJzaW9uID0gc3RvcmUuZ2V0VmVyc2lvbigpO1xuXG5pZiAoIXNhdmVkVmVyc2lvbiB8fCBjb21wYXJlVmVyc2lvbnMoc2F2ZWRWZXJzaW9uLCBWRVJTSU9OKSA9PT0gLTEpIHtcblxuICAgIGlmIChcbiAgICAgICAgc2F2ZWRWZXJzaW9uXG4gICAgICAgICYmIHdpbmRvdy5jb25maXJtKEkxOE4udmVyc2lvbkNoYW5nZSlcbiAgICApIHtcbiAgICAgICAgRGlhbG9nLmNyZWF0ZShsb29rdXBPbmVDYWNoZWQoXCIjY2xlYXItY2FjaGVcIikpLnNob3coKTtcbiAgICB9XG5cbiAgICBzdG9yZS5zZXRWZXJzaW9uKFZFUlNJT04pO1xuXG59XG5cbmNvbnN0IHtcbiAgICBib2R5XG59ID0gZG9jdW1lbnQ7XG5cbmJvZHkuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICh7IHRhcmdldCB9KSA9PiB7XG5cbiAgICBjb25zdCBpbnB1dCA9IHRhcmdldC5jbG9zZXN0KFwiaW5wdXQsc2VsZWN0LHRleHRhcmVhXCIpO1xuXG4gICAgaWYgKCFpbnB1dC5oYXNBdHRyaWJ1dGUoXCJkYXRhLW5vLXN0b3JlXCIpKSB7XG4gICAgICAgIHN0b3JlLnNhdmVJbnB1dChpbnB1dCk7XG4gICAgfVxuXG59KTtcblxuYm9keS5hZGRFdmVudExpc3RlbmVyKFwidG9nZ2xlXCIsICh7IHRhcmdldCB9KSA9PiB7XG4gICAgc3RvcmUuc2F2ZURldGFpbHModGFyZ2V0LmNsb3Nlc3QoXCJkZXRhaWxzXCIpKTtcbn0sIHtcbiAgICBjYXB0dXJlOiB0cnVlXG59KTtcblxuY29uc3Qgc3RvcmVEYXRhID0gc3RvcmUucmVhZCgpO1xuXG5Ub2tlblN0b3JlLnJlYWR5KCh0b2tlblN0b3JlKSA9PiB7XG5cbiAgICAvLyBSZS1zZWxlY3QgdGhlIGNoYXJhY3RlcnMuXG5cbiAgICBjb25zdCBpbmZvID0gc3RvcmVEYXRhLmNoYXJhY3RlcnM7XG5cbiAgICBpZiAoaW5mbyAmJiBpbmZvLmNoYXJhY3RlcnMgJiYgaW5mby5jaGFyYWN0ZXJzLmxlbmd0aCkge1xuXG4gICAgICAgIGdhbWVPYnNlcnZlci50cmlnZ2VyKFwiY2hhcmFjdGVycy1zZWxlY3RlZFwiLCB7XG4gICAgICAgICAgICBuYW1lOiBpbmZvLm5hbWUsXG4gICAgICAgICAgICBjaGFyYWN0ZXJzOiBpbmZvLmNoYXJhY3RlcnNcbiAgICAgICAgICAgICAgICAubWFwKChpdGVtKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIHRva2VuU3RvcmUuZ2V0Q2hhcmFjdGVyKFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZW9mIGl0ZW0gPT09IFwic3RyaW5nXCJcbiAgICAgICAgICAgICAgICAgICAgICAgID8gaXRlbVxuICAgICAgICAgICAgICAgICAgICAgICAgOiBpdGVtLmlkXG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgfHwgdG9rZW5TdG9yZS5jcmVhdGVDdXN0b21DaGFyYWN0ZXIoaXRlbSlcbiAgICAgICAgICAgICAgICApKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoQm9vbGVhbiksXG4gICAgICAgICAgICBnYW1lOiBpbmZvLmdhbWVcbiAgICAgICAgfSk7XG5cbiAgICB9XG5cbiAgICAvLyBSZS1wbGFjZSB0aGUgdG9rZW5zLlxuXG4gICAgbGV0IGZpbmFsWkluZGV4ID0gMDtcblxuICAgIHN0b3JlRGF0YS50b2tlbnMuZm9yRWFjaCgoe1xuICAgICAgICBpZCxcbiAgICAgICAgbGVmdCxcbiAgICAgICAgdG9wLFxuICAgICAgICB6SW5kZXgsXG4gICAgICAgIGlzRGVhZCxcbiAgICAgICAgaXNVcHNpZGVEb3duLFxuICAgICAgICBwbGF5ZXJOYW1lLFxuICAgICAgICBnaG9zdFZvdGVcbiAgICB9KSA9PiB7XG5cbiAgICAgICAgY29uc3QgaXNDaGFyYWN0ZXIgPSBUb2tlblN0b3JlLmlzQ2hhcmFjdGVySWQoaWQpO1xuICAgICAgICBjb25zdCBpbmZvID0gKFxuICAgICAgICAgICAgaXNDaGFyYWN0ZXJcbiAgICAgICAgICAgID8gcGFkLmFkZENoYXJhY3Rlcih0b2tlblN0b3JlLmdldENoYXJhY3RlckNsb25lKGlkKSlcbiAgICAgICAgICAgIDogcGFkLmFkZFJlbWluZGVyKHRva2VuU3RvcmUuZ2V0UmVtaW5kZXJDbG9uZShpZCkpXG4gICAgICAgICk7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIHRva2VuLFxuICAgICAgICAgICAgY2hhcmFjdGVyXG4gICAgICAgIH0gPSBpbmZvO1xuXG4gICAgICAgIHBhZC5tb3ZlVG9rZW4odG9rZW4sIGxlZnQsIHRvcCwgekluZGV4KTtcblxuICAgICAgICBpZiAoaXNDaGFyYWN0ZXIpIHtcblxuICAgICAgICAgICAgcGFkLnRvZ2dsZURlYWQoY2hhcmFjdGVyLCBCb29sZWFuKGlzRGVhZCkpO1xuICAgICAgICAgICAgcGFkLnJvdGF0ZShjaGFyYWN0ZXIsIEJvb2xlYW4oaXNVcHNpZGVEb3duKSk7XG4gICAgICAgICAgICBwYWQuc2V0UGxheWVyTmFtZShjaGFyYWN0ZXIsIHBsYXllck5hbWUpO1xuICAgICAgICAgICAgcGFkLnNldEdob3N0Vm90ZShjaGFyYWN0ZXIsIEJvb2xlYW4oZ2hvc3RWb3RlKSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh6SW5kZXggPiBmaW5hbFpJbmRleCkge1xuICAgICAgICAgICAgZmluYWxaSW5kZXggPSB6SW5kZXg7XG4gICAgICAgIH1cblxuICAgIH0pO1xuXG4gICAgcGFkLnNldFpJbmRleChmaW5hbFpJbmRleCk7XG5cbiAgICAvLyBSZS1zZXQgdGhlIGJsdWZmcy5cbiAgICAvLyBDb252ZXJ0IHRoZSBwcmV2aW91cyBibHVmZnMgZm9ybWF0IGludG8gdGhlIG5ldyBvbmUuXG5cbiAgICBsZXQge1xuICAgICAgICBibHVmZnNcbiAgICB9ID0gc3RvcmVEYXRhO1xuXG4gICAgaWYgKCFPYmplY3Qua2V5cyhibHVmZnMpLmxlbmd0aCkge1xuICAgICAgICBibHVmZnMgPSBCbHVmZnNHcm91cHMuZ2V0RW1wdHlEYXRhKCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBibHVmZnNbXCIjYmx1ZmYtMVwiXSA9PT0gXCJzdHJpbmdcIikge1xuXG4gICAgICAgIGNvbnN0IGVtcHR5ID0gQmx1ZmZzR3JvdXBzLmdldEVtcHR5RGF0YSgpO1xuICAgICAgICBlbXB0eS5ncm91cHNbMF0uc2V0ID0gT2JqZWN0LnZhbHVlcyhibHVmZnMpO1xuICAgICAgICBibHVmZnMgPSBlbXB0eTtcblxuICAgIH1cblxuICAgIEJsdWZmc0dyb3Vwcy5nZXQoKS5yZWFkeShibHVmZnMpO1xuXG4gICAgLy8gUmUtcG9wdWxhdGUgdGhlIGlucHV0cy5cblxuICAgIE9iamVjdC5lbnRyaWVzKHN0b3JlRGF0YS5pbnB1dHMpLmZvckVhY2goKFtzZWxlY3RvciwgdmFsdWVdKSA9PiB7XG5cbiAgICAgICAgY29uc3QgaW5wdXRzID0gbG9va3VwKHNlbGVjdG9yKTtcblxuICAgICAgICBjb25zdCB0eXBlID0gaW5wdXRzWzBdPy50eXBlO1xuICAgICAgICBjb25zdCBpc1JhZGlvID0gdHlwZSA9PT0gXCJyYWRpb1wiO1xuICAgICAgICBjb25zdCBpbnB1dCA9IChcbiAgICAgICAgICAgIGlzUmFkaW9cbiAgICAgICAgICAgID8gaW5wdXRzLmZpbmQoKGlucHV0KSA9PiBpbnB1dC52YWx1ZSA9PT0gdmFsdWUpXG4gICAgICAgICAgICA6IGlucHV0c1swXVxuICAgICAgICApO1xuXG4gICAgICAgIGlmICghaW5wdXQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc1JhZGlvKSB7XG4gICAgICAgICAgICBpbnB1dC5jaGVja2VkID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSBcImNoZWNrYm94XCIpIHtcbiAgICAgICAgICAgIGlucHV0LmNoZWNrZWQgPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlucHV0LnZhbHVlID0gdmFsdWU7XG4gICAgICAgIH1cblxuICAgICAgICBhbm5vdW5jZUlucHV0KGlucHV0KTtcblxuICAgIH0pO1xuXG4gICAgZ2FtZU9ic2VydmVyLnRyaWdnZXIoXCJpbnB1dHMtcmVwb3B1bGF0ZWRcIik7XG5cbiAgICAvLyBSZS1vcGVuIG9yIHJlLWNsb3NlIHRoZSBkZXRhaWxzLlxuXG4gICAgT2JqZWN0LmVudHJpZXMoc3RvcmVEYXRhLmRldGFpbHMpLmZvckVhY2goKFtzZWxlY3RvciwgaXNPcGVuXSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IGRldGFpbHMgPSBsb29rdXBPbmUoc2VsZWN0b3IpO1xuXG4gICAgICAgIGlmICghZGV0YWlscykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgaXNPcGVuTm93ID0gZGV0YWlscy5oYXNBdHRyaWJ1dGUoXCJvcGVuXCIpO1xuICAgICAgICBkZXRhaWxzLm9wZW4gPSBpc09wZW47XG5cbiAgICAgICAgaWYgKGlzT3Blbk5vdyAhPT0gaXNPcGVuKSB7XG5cbiAgICAgICAgICAgIGRldGFpbHMuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJ0b2dnbGVcIiwge1xuICAgICAgICAgICAgICAgIGJ1YmJsZXM6IGZhbHNlXG4gICAgICAgICAgICB9KSk7XG5cbiAgICAgICAgfVxuXG4gICAgfSk7XG5cbiAgICAvLyBSZS1zZXQgdGhlIGhlaWdodCBvZiB0aGUgcGFkLlxuICAgIC8vIENTUyBgcmVzaXplYCB3b3JrcyBieSBjaGFuZ2luZyB0aGUgYGhlaWdodGAgc3R5bGUgb24gdGhlIGVsZW1lbnQgaXRzZWxmXG4gICAgLy8gd2hpY2ggaXMgd2h5IHdlJ3JlIHNldHRpbmcgaXQgbGlrZSB0aGlzIGluc3RlYWQgb2Ygc2V0dGluZyBhIENTUyBjdXN0b21cbiAgICAvLyBwcm9wZXJ0eSBhbmQgcmVmZXJyaW5nIHRvIGl0IGluIHRoZSBzdHlsZSBzaGVldC5cblxuICAgIGlmIChzdG9yZURhdGEuaGVpZ2h0KSB7XG4gICAgICAgIHBhZEVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gc3RvcmVEYXRhLmhlaWdodDtcbiAgICB9XG5cbiAgICAvLyBSZS1hZGQgYW55IGN1c3RvbSBpbmZvIHRva2Vucy5cblxuICAgIHN0b3JlRGF0YS5pbmZvVG9rZW5zLmZvckVhY2goKHJhdywgaSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IHRva2VuID0gbmV3IEluZm9Ub2tlbih7XG4gICAgICAgICAgICByYXcsXG4gICAgICAgICAgICBjdXN0b206IHRydWVcbiAgICAgICAgfSk7XG4gICAgICAgIHRva2VuLmRyYXcoKTtcblxuICAgICAgICBpbmZvVG9rZW5PYnNlcnZlci50cmlnZ2VyKFwiaW5mby10b2tlbi1hZGRlZFwiLCB7XG4gICAgICAgICAgICB0b2tlbixcbiAgICAgICAgICAgIGluZGV4OiBpXG4gICAgICAgIH0pO1xuXG4gICAgfSk7XG5cbn0pO1xuIiwiLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IHRoYXQncyBhIHNodWZmbGVkIHZlcnNpb24gb2YgdGhlIGdpdmVuIGFycmF5LiBUaGUgb3JpZ2luYWxcbiAqIGFycmF5IGlzIG5vdCBtb2RpZmllZC5cbiAqIFNjaHdhcnR6aWFuIHRyYW5zZm9ybS5cbiAqXG4gKiBAcGFyYW0gIHtBcnJheX0gYXJyYXlcbiAqICAgICAgICAgQXJyYXkgdG8gc2h1ZmZsZS5cbiAqIEByZXR1cm4ge0FycmF5fVxuICogICAgICAgICBTaHVmZmxlZCBhcnJheS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNodWZmbGUoYXJyYXkpIHtcblxuICAgIGNvbnN0IG51bWJlcnMgPSB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhcbiAgICAgICAgbmV3IFVpbnQxNkFycmF5KGFycmF5Lmxlbmd0aClcbiAgICApO1xuXG4gICAgcmV0dXJuIEFycmF5LmZyb20oYXJyYXksICh2YWx1ZSwgaSkgPT4gKHtcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgc29ydDogbnVtYmVyc1tpXVxuICAgICAgICB9KSlcbiAgICAgICAgLnNvcnQoKGEsIGIpID0+IGEuc29ydCAtIGIuc29ydClcbiAgICAgICAgLm1hcCgoeyB2YWx1ZSB9KSA9PiB2YWx1ZSk7XG5cbn1cblxuLyoqXG4gKiBHcm91cHMgdGhlIGl0ZW1zIGluIHRoZSBnaXZlbiBhcnJheSBiYXNlZCBvbiB0aGUgdGhlIGdldEdyb3VwIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSAge0FycmF5fSBhcnJheVxuICogICAgICAgICBBcnJheSB3aG9zZSBpdGVtcyBzaG91bGQgYmUgZ3JvdXBlZCB1cC5cbiAqIEBwYXJhbSAge0Z1bmN0aW9ufSBnZXRHcm91cFxuICogICAgICAgICBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGNyZWF0ZSB0aGUgbmFtZSBvZiB0aGUgZ3JvdXAuIEl0J3MgcGFzc2VkIHRoZVxuICogICAgICAgICBpdGVtIGFuZCB0aGUgaW5kZXguXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiAgICAgICAgIEFuIG9iamVjdCB3aXRoIHRoZSBncm91cHMgYXMga2V5cyBhbmQgYWxsIHRoZSBtYXRjaGluZyBpdGVtcyBhc1xuICogICAgICAgICB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBncm91cEJ5KGFycmF5LCBnZXRHcm91cCkge1xuXG4gICAgcmV0dXJuIGFycmF5LnJlZHVjZSgoZ3JvdXBlZCwgaXRlbSwgaSkgPT4ge1xuXG4gICAgICAgIGNvbnN0IGdyb3VwID0gZ2V0R3JvdXAoaXRlbSwgaSk7XG5cbiAgICAgICAgaWYgKCFncm91cGVkW2dyb3VwXSkge1xuICAgICAgICAgICAgZ3JvdXBlZFtncm91cF0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGdyb3VwZWRbZ3JvdXBdLnB1c2goaXRlbSk7XG5cbiAgICAgICAgcmV0dXJuIGdyb3VwZWQ7XG5cbiAgICB9LCBPYmplY3QuY3JlYXRlKG51bGwpKTtcblxufVxuIiwiLyoqXG4gKiBGZXRjaGVzIGluZm9ybWF0aW9uIGZyb20gdGhlIGdpdmVuIFVSTCBhbmQgc3RvcmVzIGl0IGluIHRoZSBnaXZlbiBzdG9yZS4gVGhlXG4gKiBVUkwgaXMgY2hlY2tlZCBhZ2FpbnN0IHRoZSBzdG9yZSB0byBzZWUgaWYgdGhlIGRhdGEgYWxyZWFkeSBleGlzdHMgYW5kIG9ubHlcbiAqIHBlcmZvcm1zIGEgbG9va3VwIGlmIGl0IG5lZWRzIHRvLlxuICpcbiAqIEBwYXJhbSAge1N0cmluZ30ga2V5XG4gKiAgICAgICAgIFRoZSBrZXkgZm9yIGlkZW50aWZ5aW5nIHRoZSBVUkwuIFRoaXMgYWxsb3dzIHRoZSBVUkwgdG8gYmUgdXBkYXRlZFxuICogICAgICAgICB3aXRoIGEgaGFzaCwgbWFraW5nIGl0IHVuaXF1ZSwgd2hpbGUgYWxzbyBhbGxvd2luZyBpdCB0byBiZSBjYWNoZWQuXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHVybFxuICogICAgICAgICBVUkwgZnJvbSB3aGljaCB0byBnZXQgdGhlIGRhdGEuXG4gKiBAcGFyYW0gIHtTdG9yZX0gc3RvcmVcbiAqICAgICAgICAgU3RvcmUgdGhhdCB3aWxsIHN0b3JlIHRoZSByZXN1bHRzLlxuICogQHJldHVybiB7UHJvbWlzZX1cbiAqICAgICAgICAgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGRhdGEgZnJvbSB0aGUgbG9va3VwLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmV0Y2hGcm9tU3RvcmUoa2V5LCB1cmwsIHN0b3JlKSB7XG5cbiAgICBjb25zdCByZXN1bHRzID0gc3RvcmUuZ2V0TG9va3VwKGtleSk7XG5cbiAgICBpZiAocmVzdWx0cyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0cyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZldGNoKHVybClcbiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS5qc29uKCkpXG4gICAgICAgIC50aGVuKChqc29uKSA9PiB7XG5cbiAgICAgICAgICAgIHN0b3JlLnNldExvb2t1cChrZXksIGpzb24pO1xuICAgICAgICAgICAgcmV0dXJuIGpzb247XG5cbiAgICAgICAgfSk7XG5cbn1cblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gZm9yIFBPU1RpbmcgSlNPTiBkYXRhIHRvIHRoZSBnaXZlbiBVUkwuXG4gKlxuICogQHBhcmFtICB7U3RyaW5nfSB1cmxcbiAqICAgICAgICAgVVJMIHRvIFBPU1QgdGhlIGRhdGEgdG8uXG4gKiBAcGFyYW0gIHtBcnJheXxPYmplY3R8U3RyaW5nfEJvb2xlYW58TnVtYmVyfG51bGx9IGRhdGFcbiAqICAgICAgICAgSlNPTiBkYXRhIHRvIFBPU1QuXG4gKiBAcmV0dXJuIHtQcm9taXNlfVxuICogICAgICAgICBBIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIsIGNvbnZlcnRlZFxuICogICAgICAgICBpbnRvIEpTT04uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwb3N0KHVybCwgZGF0YSkge1xuXG4gICAgcmV0dXJuIGZldGNoKHVybCwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBtb2RlOiBcImNvcnNcIixcbiAgICAgICAgY2FjaGU6IFwibm8tY2FjaGVcIixcbiAgICAgICAgY3JlZGVudGlhbHM6IFwic2FtZS1vcmlnaW5cIixcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgXCJBY2NlcHRcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgICAgICBcIkNvbnRlbnQtdHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgICAgICB9LFxuICAgICAgICByZWRpcmVjdDogXCJmb2xsb3dcIixcbiAgICAgICAgcmVmZXJyZXJQb2xpY3k6IFwibm8tcmVmZXJyZXJcIixcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KS50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UuanNvbigpKTtcblxufVxuIiwiLyoqXG4gKiBBIG5vLW9wZXJhdGlvbiBmdW5jdGlvbi4gSXQgdGFrZXMgbm8gcGFyYW1ldGVycyBhbmQgcmV0dXJucyBubyB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG5vb3AoKSB7XG4gICAgcmV0dXJuO1xufVxuXG4vKipcbiAqIFRocm90dGxlcyB0aGUgZ2l2ZW4gZnVuY3Rpb24gdXNpbmcgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgpXG4gKlxuICogQHBhcmFtICB7RnVuY3Rpb259IGZ1bmNcbiAqICAgICAgICAgRnVuY3Rpb24gdGhhdCBzaG91bGQgYmUgdGhyb3R0bGVkLlxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKiAgICAgICAgIFRocm90dGxlZCBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJhZlRocm90dGxlKGZ1bmMpIHtcblxuICAgIGxldCBjb250ZXh0ID0gdGhpcztcbiAgICBsZXQgYWN0aXZlID0gdHJ1ZTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAoLi4uYXJncykge1xuXG4gICAgICAgIGlmICghYWN0aXZlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cbiAgICAgICAgICAgIGFjdGl2ZSA9IHRydWU7XG4gICAgICAgICAgICBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxufTtcbiIsIi8qKlxuICogQ2xhbXBzIHRoZSBnaXZlbiB2YWx1ZSBzbyB0aGF0IGl0IHdpbGwgYmUgYmV0d2VlbiB0aGUgZ2l2ZW4gbWluIGFuZCBtYXhcbiAqIHZhbHVlcy5cbiAqXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IG1pblxuICogICAgICAgICBNaW5pbXVtIHBvc3NpYmxlIHZhbHVlLlxuICogQHBhcmFtICB7TnVtYmVyfSB2YWx1ZVxuICogICAgICAgICBWYWx1ZSB0byBjbGFtcC5cbiAqIEBwYXJhbSAge051bWJlcn0gbWF4XG4gKiAgICAgICAgIE1heGltdW0gcG9zc2libGUgdmFsdWUuXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiAgICAgICAgIENsYW1wZWQgdmFsdWUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGFtcChtaW4sIHZhbHVlLCBtYXgpIHtcbiAgICByZXR1cm4gTWF0aC5tYXgobWluLCBNYXRoLm1pbih2YWx1ZSwgbWF4KSk7XG59XG5cbi8qKlxuICogUGFyc2VzIGEgdmVyc2lvbiBudW1iZXIsIGluIHNlbXZlciwgaW50byBhbiBhcnJheSBvZiBudW1iZXJzLlxuICpcbiAqIEBwYXJhbSAge1N0cmluZ30gc2VtdmVyXG4gKiAgICAgICAgIEEgdmVyc2lvbiBudW1iZXIgaW4gc2VtdmVyLCBzdWNoIGFzIFwiMS4yLjNcIiBvciBcIjQuNVwiLlxuICogQHJldHVybiB7QXJyYXkuPE51bWJlcj59XG4gKiAgICAgICAgIFRoZSB2ZXJzaW9uIG51bWJlciBhcyBhbiBhcnJheSBvZiBudW1iZXJzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VWZXJzaW9uKHNlbXZlcikge1xuICAgIHJldHVybiBPYmplY3QuYXNzaWduKFswLCAwLCAwXSwgc2VtdmVyLnNwbGl0KFwiLlwiKS5tYXAoTnVtYmVyKSk7XG59XG5cbi8qKlxuICogQ29tcGFyZXMgdHdvIHNlbXZlciB2ZXJzaW9ucy4gVGhlIGZ1bmN0aW9uIHdpbGwgcmV0dXJuIG9uZSBvZiB0aHJlZSBudW1iZXJzOlxuICogLTEgaWYgdmVyc2lvbjEgaXMgbGVzcyB0aGFuIHZlcnNpb24yLlxuICogMCBpZiB2ZXJzaW9uMSBhbmQgdmVyc2lvbjIgYXJlIHRoZSBzYW1lLlxuICogMSBpZiB2ZXJzaW9uMSBpcyBtb3JlIHRoYW4gdmVyc2lvbjIuXG4gKiBUaGlzIGlzIGNvbnNpc3RlbnQgd2l0aCBBcnJheSNzb3J0KClcbiAqXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHZlcnNpb24xXG4gKiAgICAgICAgIFZlcnNpb24gbnVtYmVyIDEuXG4gKiBAcGFyYW0gIHtTdHJpbmd9IHZlcnNpb24yXG4gKiAgICAgICAgIFZlcnNpb24gbnVtYmVyIDIuXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiAgICAgICAgIENvbXBhcmlzb24gbnVtYmVyLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFyZVZlcnNpb25zKHZlcnNpb24xLCB2ZXJzaW9uMikge1xuXG4gICAgY29uc3QgcGFydHMxID0gcGFyc2VWZXJzaW9uKHZlcnNpb24xKTtcbiAgICBjb25zdCBwYXJ0czIgPSBwYXJzZVZlcnNpb24odmVyc2lvbjIpO1xuXG4gICAgY29uc3QgbnVtYmVyID0gcGFydHMxLnJlZHVjZSgobnVtYmVyLCBwYXJ0LCBpKSA9PiB7XG5cbiAgICAgICAgaWYgKG51bWJlciA9PT0gMCkge1xuICAgICAgICAgICAgbnVtYmVyID0gcGFydCAtIHBhcnRzMltpXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBudW1iZXI7XG5cbiAgICB9LCAwKTtcblxuICAgIHJldHVybiBjbGFtcCgtMSwgbnVtYmVyLCAxKTtcblxufVxuXG4vKipcbiAqIENvbnZlcnRzIHRoZSBnaXZlbiBudW1iZXIgdG8gaXRzIHBvc2l0aXZlIGludGVnZXIuXG4gKlxuICogQHBhcmFtICB7TnVtYmVyfSBudW1iZXJcbiAqICAgICAgICAgTnVtYmVyIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKiAgICAgICAgIFBvc2l0aXZlIGludGVnZXIsIG9yIE5hTiBpZiB0aGUgbnVtYmVyIGNhbid0IGJlIHBhcnNlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRvUG9zSW50KG51bWJlcikge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGguYWJzKG51bWJlcikpO1xufVxuXG4vKipcbiAqIEV4ZWN1dGVzIGEgaGFuZGxlciBhIHNldCBudW1iZXIgb2YgdGltZXMuIFRoZSBudW1iZXIgb2YgdGltZXMgaXMgY29udmVydGVkXG4gKiBpbnRvIGEgcG9zaXRpdmUgaW50ZWdlciAoc2VzIHtAbGluayB0b1Bvc0ludH0pIGFuZCByZXR1cm5lZC4gVGhlIGhhbmRsZXIgaXNcbiAqIHBhc3NlZCB0aGUgY3VycmVudCBpbmRleCBhbmQgdGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRoYXQgdGhlIGhhbmRsZXJcbiAqIHdpbGwgYmUgY2FsbGVkLlxuICpcbiAqIEBwYXJhbSAge051bWJlcn0gbnVtYmVyXG4gKiAgICAgICAgIE51bWJlciBvZiB0aW1lcyB0byBleGVjdXRlIHRoZSBnaXZlbiBoYW5kbGVyLlxuICogQHBhcmFtICB7RnVuY3Rpb259IGhhbmRsZXJcbiAqICAgICAgICAgSGFuZGxlciB0byBleGVjdXRlLlxuICogQHBhcmFtICB7P30gW2NvbnRleHRdXG4gKiAgICAgICAgIE9wdGlvbmFsIGNvbnRleHQgZm9yIHRoZSBoYW5kbGVyLlxuICogQHJldHVybiB7TnVtYmVyfVxuICogICAgICAgICBUaGUgbnVtYmVyIG9mIHRpbWVzIHRoYXQgdGhlIGhhbmRsZXIgd2FzIGV4ZWN1dGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gdGltZXMobnVtYmVyLCBoYW5kbGVyLCBjb250ZXh0KSB7XG5cbiAgICBjb25zdCBtYXggPSB0b1Bvc0ludChudW1iZXIpIHx8IDA7XG4gICAgbGV0IGluZGV4ID0gMDtcblxuICAgIHdoaWxlIChpbmRleCA8IG1heCkge1xuXG4gICAgICAgIGhhbmRsZXIuY2FsbChjb250ZXh0LCBpbmRleCwgbWF4KTtcbiAgICAgICAgaW5kZXggKz0gMTtcblxuICAgIH1cblxuICAgIHJldHVybiBtYXg7XG5cbn1cblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgZ2l2ZW4gZGVncmVlcyBpbnRvIHJhZGlhbnNcbiAqXG4gKiBAcGFyYW0gIHtOdW1iZXJ9IGRlZ3JlZXNcbiAqICAgICAgICAgRGVncmVlcyB0byBjb252ZXJ0LlxuICogQHJldHVybiB7TnVtYmVyfVxuICogICAgICAgICBFcXVpdmFsZW50IHJhZGlhbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0b1JhZGlhbnMoZGVncmVlcykge1xuICAgIHJldHVybiAoTWF0aC5QSSAvIDE4MCkgKiBkZWdyZWVzO1xufVxuXG4vKipcbiAqIENoZWNrcyB0byBzZWUgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIG51bWVyaWMuIFRoaXMgaXMgbm90IG5lY2Vzc2FyaWx5IHRoZSBzYW1lXG4gKiBhcyBiZWluZyBhIG51bWJlciBiZWNhdXNlIGEgbnVtZXJpYyBzdHJpbmcgd291bGQgcmV0dXJuIHRydWUuXG4gKlxuICogQHBhcmFtICB7P30gdmFsdWVcbiAqICAgICAgICAgVmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICogICAgICAgICB0cnVlIGlmIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIG51bWJlciBvciBudW1lcmljIHN0cmluZywgZmFsc2VcbiAqICAgICAgICAgb3RoZXJ3aXNlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNOdW1lcmljKHZhbHVlKSB7XG5cbiAgICBjb25zdCBwYXJzZWQgPSB3aW5kb3cucGFyc2VGbG9hdCh2YWx1ZSk7XG5cbiAgICByZXR1cm4gIU51bWJlci5pc05hTihwYXJzZWQpICYmIE51bWJlci5pc0Zpbml0ZShwYXJzZWQpO1xuXG59XG4iLCIvKipcbiAqIENsb25lcyBhbiBvYmplY3QsIGluY2x1ZGluZyBhbnkgbmVzdGVkIG9iamVjdHMuXG4gKlxuICogQHBhcmFtICB7T2JqZWN0fEFycmF5fFN0cmluZ3xOdW1iZXJ8Qm9vbGVhbnxudWxsfSBvYmplY3RcbiAqICAgICAgICAgT2JqZWN0IHRvIGNsb25lLlxuICogQHJldHVybiB7T2JqZWN0fEFycmF5fFN0cmluZ3xOdW1iZXJ8Qm9vbGVhbnxudWxsfVxuICogICAgICAgICBDbG9uZWQgb2JqZWN0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVlcENsb25lKG9iamVjdCkge1xuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iamVjdCkpO1xufVxuXG4vKipcbiAqIEZyZWV6ZXMgdGhlIGdpdmVuIG9iamVjdCBhbmQgYW55IG5lc3RlZCBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSAge09iamVjdH0gb2JqZWN0XG4gKiAgICAgICAgIE9iamVjdCB0byBmcmVlemUuXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKiAgICAgICAgIEZyb3plbiBvYmplY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWVwRnJlZXplKG9iamVjdCkge1xuXG4gICAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIE9iamVjdC52YWx1ZXMob2JqZWN0KS5mb3JFYWNoKChpdGVtKSA9PiBkZWVwRnJlZXplKGl0ZW0pKTtcbiAgICB9XG5cbiAgICByZXR1cm4gT2JqZWN0LmZyZWV6ZShvYmplY3QpO1xuXG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwgdGhlIHByb3BlcnRpZXMgZnJvbSBhbiBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdFxuICogICAgICAgIE9iamVjdCB0byBlbXB0eS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVtcHR5KG9iamVjdCkge1xuICAgIE9iamVjdC5rZXlzKG9iamVjdCkuZm9yRWFjaCgoa2V5KSA9PiBkZWxldGUgb2JqZWN0W2tleV0pO1xufVxuIiwiLyoqXG4gKiBDcmVhdGVzIGEgUHJvbWlzZSB0aGF0IGNhbiBiZSByZXNvbHZlZCBleHRlcm5hbGx5LlxuICpcbiAqIEByZXR1cm4ge1Byb21pc2V9XG4gKiAgICAgICAgIEEgUHJvbWlzZSB0aGF0IGNhbiBiZSBleHRlcm5hbGx5IHJlc29sdmVkIG9yIHJlamVjdGVkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVmZXIoKSB7XG5cbiAgICBsZXQgcmVzID0gKCkgPT4ge307XG4gICAgbGV0IHJlaiA9ICgpID0+IHt9O1xuXG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgcmVzID0gcmVzb2x2ZTtcbiAgICAgICAgcmVqID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgcHJvbWlzZS5yZXNvbHZlID0gKHZhbHVlKSA9PiB7XG4gICAgICAgIHJlcyh2YWx1ZSk7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH07XG5cbiAgICBwcm9taXNlLnJlamVjdCA9IChyZWFzb24pID0+IHtcbiAgICAgICAgcmVqKHJlYXNvbik7XG4gICAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH07XG5cbiAgICByZXR1cm4gcHJvbWlzZTtcblxufVxuIiwiLyoqXG4gKiBJbnRlcnByZXRzIHRoZSBieXRlcyB3aXRoaW4gYSBzdHJpbmcgYXMgVVRGLTguIFdlIG5lZWQgdGhpcyB3aGVuIGltcG9ydGluZ1xuICogSlNPTiAtIGZvciBzb21lIHJlYXNvbiBpdCBzdHJ1Z2dsZXMgdG8gdW5kZXJzdGFuZCBhY2NlbnRlZCBjaGFyYWN0ZXJzLlxuICpcbiAqIEBwYXJhbSAge1N0cmluZ30gYnl0ZXNcbiAqICAgICAgICAgU3RyaW5nIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiAgICAgICAgIENvbnZlcnRlZCBzdHJpbmcuXG4gKiBAc2VlICAgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNDI4Mjg3My81NTcwMTlcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWFkVVRGOChieXRlcykge1xuXG4gICAgY29uc3Qge1xuICAgICAgICBsZW5ndGhcbiAgICB9ID0gYnl0ZXM7XG4gICAgbGV0IGluZGV4ID0gYnl0ZXMuc2xpY2UoMCwgMykgPT09IFwiXFx4RUZcXHhCQlxceEJGXCIgPyAzIDogMDtcbiAgICBsZXQgc3RyaW5nID0gXCJcIjtcblxuICAgIHdoaWxlIChpbmRleCA8IGxlbmd0aCkge1xuXG4gICAgICAgIGNvbnN0IGJ5dGUxID0gKGJ5dGVzW2luZGV4XSB8fCBcIlwiKS5jaGFyQ29kZUF0KDApO1xuICAgICAgICBjb25zdCBieXRlMiA9IChieXRlc1tpbmRleCArIDFdIHx8IFwiXCIpLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIGNvbnN0IGJ5dGUzID0gKGJ5dGVzW2luZGV4ICsgMl0gfHwgXCJcIikuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgY29uc3QgYnl0ZTQgPSAoYnl0ZXNbaW5kZXggKyAzXSB8fCBcIlwiKS5jaGFyQ29kZUF0KDApO1xuXG4gICAgICAgIGlmIChieXRlMSA8IDB4ODApIHtcbiAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGUxKTtcbiAgICAgICAgfSBlbHNlIGlmIChieXRlMSA+PSAweEMyICYmIGJ5dGUxIDwgMHhFMCkge1xuXG4gICAgICAgICAgICBzdHJpbmcgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShcbiAgICAgICAgICAgICAgICAoKGJ5dGUxICYgMHgxRikgPDwgNilcbiAgICAgICAgICAgICAgICArIChieXRlMiAmIDB4M0YpXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaW5kZXggKz0gMTtcblxuICAgICAgICB9IGVsc2UgaWYgKGJ5dGUxID4gMFhFMCAmJiBieXRlMSA8IDB4RjApIHtcblxuICAgICAgICAgICAgc3RyaW5nICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgICAgICAgICAgICAgKChieXRlMSAmIDB4RkYpIDw8IDEyKVxuICAgICAgICAgICAgICAgICsgKChieXRlMiAmIDB4M0YpIDw8IDYpXG4gICAgICAgICAgICAgICAgKyAoYnl0ZTMgJiAweDNGKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGluZGV4ICs9IDI7XG5cbiAgICAgICAgfSBlbHNlIGlmIChieXRlMSA+PSAweEYwICYmIGJ5dGUxIDwgMHhGNSkge1xuXG4gICAgICAgICAgICBsZXQgY29kZXBvaW50ID0gKFxuICAgICAgICAgICAgICAgICgoYnl0ZTEgJiAweDA3KSA8PCAxOClcbiAgICAgICAgICAgICAgICArICgoYnl0ZTIgJiAweDNGKSA8PCAxMilcbiAgICAgICAgICAgICAgICArICgoYnl0ZTMgJiAweDNGKSA8PCA2KVxuICAgICAgICAgICAgICAgICsgKGJ5dGU0ICYgMHgzRilcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgICBjb2RlcG9pbnQgLT0gMHgxMDAwMDtcbiAgICAgICAgICAgIHN0cmluZyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKFxuICAgICAgICAgICAgICAgIChjb2RlcG9pbnQgPj4gMTApICsgMHhEODAwLFxuICAgICAgICAgICAgICAgIChjb2RlcG9pbnQgJiAweDNGRikgKyAweERDMDAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgaW5kZXggKz0gMztcblxuICAgICAgICB9XG5cbiAgICAgICAgaW5kZXggKz0gMTtcblxuICAgIH1cblxuICAgIHJldHVybiBzdHJpbmc7XG5cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFueSBIVE1MIG1hcmt1cCBmcm9tIHRoZSBnaXZlbiBzdHJpbmcuXG4gKlxuICogQHBhcmFtICB7U3RyaW5nfSBzdHJpbmdcbiAqICAgICAgICAgU3RyaW5nIGZyb20gd2hpY2ggSFRNTCBtYXJrdXAgc2hvdWxkIGJlIHJlbW92ZWQuXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKiAgICAgICAgIFN0cmluZyB3aXRob3V0IGFueSBIVE1MIG1hcmt1cC5cbiAqIEBzZWUgICAgaHR0cHM6Ly9jc3MtdHJpY2tzLmNvbS9zbmlwcGV0cy9qYXZhc2NyaXB0L3N0cmlwLWh0bWwtdGFncy1pbi1qYXZhc2NyaXB0L1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3RyaXB0YWdzKHN0cmluZykge1xuICAgIHJldHVybiBTdHJpbmcoc3RyaW5nKS5yZXBsYWNlKC8oPChbXj5dKyk+KS9naSwgXCJcIik7XG59XG5cbi8qKlxuICogQSBzaW1wbGUgZnVuY3Rpb24gdGhhdCBjb252ZXJ0cyB0aGUgZG91YmxlIGFzdGVyaXN0cyBpbnRvIHN0cm9uZyB0YWdzLlxuICpcbiAqIEBwYXJhbSAge1N0cmluZ30gc3RyaW5nXG4gKiAgICAgICAgIFRleHQgdG8gY29udmVydC5cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqICAgICAgICAgQ29udmVydGVkIHRleHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtYXJrZG93bjJodG1sKHN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcucmVwbGFjZSgvXFwqXFwqKFteKl0qKVxcKlxcKi9nLCBcIjxzdHJvbmc+JDE8L3N0cm9uZz5cIik7XG59XG5cbi8qKlxuICogUmVwbGFjZXMgcGxhY2Vob2xkZXJzIGluIHRoZSBnaXZlbiBzdHJpbmcgd2l0aCB0aGUgcmVwbGFjZW1lbnRzIHByb3ZpZGVkLlxuICpcbiAqIEBwYXJhbSAge1N0cmluZ30gdGVtcGxhdGVcbiAqICAgICAgICAgU3RyaW5nIHdpdGggcGxhY2Vob2xkZXJzIHRvIHJlcGxhY2UuXG4gKiBAcGFyYW0gIHtBcnJheXxPYmplY3R9IHJlcGxhY2VtZW50c1xuICogICAgICAgICBSZXBsYWNlbWVudHMgdG8gcG9wdWxhdGUgdGhlIHN0cmluZy5cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqICAgICAgICAgU3RyaW5nIHdpdGggcmVwbGFjZW1lbnRzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3VwcGxhbnQodGVtcGxhdGUsIHJlcGxhY2VtZW50cykge1xuXG4gICAgcmV0dXJuIHRlbXBsYXRlLnJlcGxhY2UoL1xceyhbXnt9XSopXFx9L2csICh3aG9sZSwgaW5kZXgpID0+IChcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHJlcGxhY2VtZW50cywgaW5kZXgpXG4gICAgICAgID8gcmVwbGFjZW1lbnRzW2luZGV4XVxuICAgICAgICA6IHdob2xlXG4gICAgKSk7XG5cbn1cbiJdLCJuYW1lcyI6WyJEaWFsb2ciLCJDaGFyYWN0ZXJUb2tlbiIsImxvb2t1cE9uZUNhY2hlZCIsIkJsdWZmRGlhbG9nIiwiY2hhcmFjdGVyIiwiaXNPcnBoYW4iLCJkaWFsb2ciLCJzaG93VG9rZW5CdXR0b24iLCJ0ZXh0Q29udGVudCIsImdldE5hbWUiLCJnZXRBYmlsaXR5IiwiaGlkZGVuIiwiZGlzYWJsZWQiLCJpc0VtcHR5IiwiZGF0YXNldCIsImNoYXJhY3RlcklkIiwiZ2V0SWQiLCJ0cmlnZ2VyIiwiYmx1ZmZEaWFsb2ciLCJCbHVmZlNldCIsImNoYXJhY3RlcnMiLCJnZXRFbXB0eUNoYXJhY3RlciIsImluZGV4IiwiZW1wdHlDaGFyYWN0ZXIiLCJjb25zdHJ1Y3RvciIsIkVycm9yIiwiY2xvbmUiLCJOdW1iZXIiLCJsZW5ndGgiLCJSYW5nZUVycm9yIiwidmFsaWRhdGVJbmRleCIsInVuc2V0Q2hhcmFjdGVyQnlJbmRleCIsImluZGV4T2YiLCJtYXAiLCJUZW1wbGF0ZSIsIlNldHRhYmxlVGl0bGUiLCJlbXB0eSIsImxvb2t1cE9uZSIsIkJsdWZmc0dyb3VwIiwiYmx1ZmZTZXQiLCJlbGVtZW50IiwiZ3JvdXBJZCIsInNldHRhYmxlVGl0bGUiLCJuYW1lIiwiZ2V0VGl0bGUiLCJzZXQiLCJzZXJpYWxpc2UiLCJ0ZW1wbGF0ZSIsImRyYXciLCJnZXRJbmRleCIsInNldEluZGV4Iiwic2V0Q2hhcmFjdGVyIiwiZ2V0Q2hhcmFjdGVyIiwic2Nyb2xsSW50b1ZpZXciLCJibG9jayIsIlJFQURZIiwiZGlzcGxheSIsImdldENoYXJhY3RlcnMiLCJmb3JFYWNoIiwiYnV0dG9uIiwiYXBwZW5kIiwiZHJhd1Rva2VuIiwiZGlzcGF0Y2hFdmVudCIsIkN1c3RvbUV2ZW50IiwiYnViYmxlcyIsImNhbmNlbGFibGUiLCJkZXRhaWwiLCJibHVmZkdyb3VwIiwicmVtb3ZlIiwic2V0dGFibGVUaXRsZVRpdGxlIiwic2V0VGl0bGUiLCJ0aXRsZSIsImRlZXBDbG9uZSIsIkJsdWZmc0dyb3VwcyIsImNvbnRhaW5lciIsImdyb3VwcyIsInZpc2libGVHcm91cEluZGV4IiwiYW5ub3VuY2VVcGRhdGVzIiwib2JzZXJ2ZXIiLCJJbnRlcnNlY3Rpb25PYnNlcnZlciIsImVudHJpZXMiLCJ0YXJnZXQiLCJpbnRlcnNlY3Rpb25SYXRpbyIsIlZJU0lCTEUiLCJyb290IiwidGhyZXNob2xkIiwiYWRkIiwiY3JlYXRlRW1wdHlHcm91cCIsImdyb3VwIiwiaGFzIiwicHVzaCIsInNldEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZ2V0U2VsZWN0b3IiLCJvYnNlcnZlIiwiZ2V0RWxlbWVudCIsInJlYWR5IiwibWF5YmVBbm5vdW5jZVVwZGF0ZSIsImluY2x1ZGVzIiwicmVtb3ZlQnlJbmRleCIsInVub2JzZXJ2ZSIsInNwbGljZSIsInVwZGF0ZUluZGljaWVzIiwiZ2V0VmlzaWJsZUdyb3VwIiwic2V0U2V0SW5kZXgiLCJnZXRTZXRJbmRleCIsInJlZHJhd0J1dHRvbiIsImFubm91bmNlVXBkYXRlIiwiaWQiLCJyZW1vdmVBbGwiLCJjb252ZXJ0SWQiLCJzZXRWaXNpYmxlR3JvdXBJbmRleCIsImluc3RhbmNlIiwiYmx1ZmZzIiwiYXJncyIsIlRva2VuIiwiSmlueCIsIlJlbWluZGVyVG9rZW4iLCJpZGVudGlmeSIsImVtcHR5UHJvcGVydHkiLCJTeW1ib2wiLCJjdXN0b21Qcm9wZXJ0eSIsImRhdGEiLCJlZGl0aW9uIiwidGVhbSIsImZpcnN0TmlnaHQiLCJmaXJzdE5pZ2h0UmVtaW5kZXIiLCJvdGhlck5pZ2h0Iiwib3RoZXJOaWdodFJlbWluZGVyIiwicmVtaW5kZXJzIiwic2V0dXAiLCJhYmlsaXR5IiwiaW1hZ2UiLCJzcGVjaWFsIiwiaXNEZWFkIiwiaXNVcHNpZGVEb3duIiwiaGFzR2hvc3RWb3RlIiwiamlueGVzIiwiZ2V0UmVtaW5kZXJzIiwicmVtaW5kZXIiLCJhZGRSZW1pbmRlciIsImdldEppbnhlcyIsImppbngiLCJhZGRKaW54Iiwic3RhdGUiLCJ1bmRlZmluZWQiLCJ0b2dnbGVHaG9zdFZvdGUiLCJnZXRJc0RlYWQiLCJCb29sZWFuIiwiZ2V0SXNVcHNpZGVEb3duIiwiZ2V0SGFzR2hvc3RWb3RlIiwic2V0VGFyZ2V0IiwidG9nZ2xlSmlueFJlYWR5IiwidG9nZ2xlUmVhZHkiLCJtYXRjaGVzIiwidHJpY2siLCJ0b2dnbGVUcmljayIsInRvZ2dsZVRhcmdldCIsImZpbHRlciIsImlzUmVhZHkiLCJpc0FjdGl2ZSIsInR5cGUiLCJpc0FycmF5IiwiQXJyYXkiLCJmaW5kIiwiZ2V0U3BlY2lhbERhdGEiLCJyZW1pbmRlcnNHbG9iYWwiLCJ0ZW1wbGF0ZXMiLCJ0b2tlbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsInRvcCIsInNyYyIsImxpc3QiLCJ0b2tlbklkIiwic2VsZWN0IiwidmFsdWUiLCJjbG9zZXN0IiwiaHRtbEZvciIsImlzRmlyc3QiLCJuaWdodE9yZGVyIiwib3JkZXIiLCJEcmFnZ2FibGUiLCJzZXR0aW5ncyIsIk9iamVjdCIsImFzc2lnbiIsImRlZmF1bHRzIiwiY2hpbGRyZW4iLCJTZXQiLCJkcmFnZ2VkIiwiY3JlYXRlSGFuZGxlcnMiLCJhZGRFdmVudExpc3RlbmVycyIsImRyYWdDbGFzcyIsImRyYWdTZWxlY3RvciIsIm9uQ2hpbGREcmFnU3RhcnQiLCJldmVudCIsImRhdGFUcmFuc2ZlciIsImNoaWxkIiwiZWZmZWN0QWxsb3dlZCIsInNldERhdGEiLCJvbkNoaWxkRHJhZ0VuZCIsIngiLCJ5IiwicmVkdWNlIiwiYm94IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwieERpc3RhbmNlIiwibGVmdCIsIndpZHRoIiwieURpc3RhbmNlIiwiaGVpZ2h0Iiwib2Zmc2V0IiwiTWF0aCIsInNxcnQiLCJQT1NJVElWRV9JTkZJTklUWSIsInNvdXJjZSIsInBhcmVudE5vZGUiLCJjdXJyZW50IiwicHJldmlvdXNTaWJsaW5nIiwibm9kZVR5cGUiLCJOb2RlIiwiRE9DVU1FTlRfTk9ERSIsInRhcmdldFRvdWNoZXMiLCJwb2ludGVyIiwicHJldmVudERlZmF1bHQiLCJkcm9wRWZmZWN0IiwiZ2V0Q2xvc2VzdEVsZW1lbnQiLCJjbGllbnRYIiwiY2xpZW50WSIsImluc2VydEJlZm9yZSIsImlzQmVmb3JlIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJtb3ZlIiwiY2hpbGRDbGFzcyIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZW1vdmVDaGlsZCIsIm1hcmtkb3duMmh0bWwiLCJzdHJpcHRhZ3MiLCJJbmZvVG9rZW4iLCJpbnRlcnByZXQiLCJkcmF3VHJpZ2dlciIsImRyYXdEaWFsb2ciLCJ0ZXh0IiwiY29sb3VyIiwiY3VzdG9tIiwiaG9sZGVycyIsImhvbGRlciIsInN0eWxlIiwic2V0UHJvcGVydHkiLCJsYXN0RWxlbWVudENoaWxkIiwibWFya3VwIiwiaW5uZXJIVE1MIiwicmF3IiwibG93ZXIiLCJyZXBsYWNlIiwidG9Mb3dlckNhc2UiLCJJRF9QUkVGSVgiLCJtYWtlSWQiLCJwcmVmaXgiLCJzdGFydHNXaXRoIiwiT2JzZXJ2ZXIiLCJyZWFzb24iLCJhY3RpdmUiLCJmb3JjZVN0YXRlIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiUmVmZXJlbmNlRXJyb3IiLCJ0b2dnbGVTdGF0ZSIsImFjdGl2YXRlIiwiaXNIb21lYnJldyIsImRyYXdJbWciLCJnZXRJbWFnZSIsImFsdCIsIkxBTkdVQUdFIiwiTmFtZXMiLCJuYW1lcyIsImFscGhhYmV0aXNlIiwic29ydCIsImEiLCJiIiwibG9jYWxlQ29tcGFyZSIsImV2ZW50TmFtZSIsImhhbmRsZXIiLCJvbiIsIk5pZ2h0T3JkZXIiLCJzaG93RGVhZCIsInNob3dOb3RJblBsYXkiLCJmaXJzdCIsIm90aGVyIiwicGxhY2Vob2xkZXIiLCJkcmF3QWxsQ2hhcmFjdGVycyIsImFsaXZlIiwiaW5QbGF5IiwiZ2V0Rmlyc3ROaWdodCIsImdldE90aGVyTmlnaHQiLCJkb2N1bWVudCIsImNyZWF0ZUNvbW1lbnQiLCJkcmF3TmlnaHRPcmRlciIsImZpcnN0RWxlbWVudENoaWxkIiwiZ2V0RGF0YUluZGV4IiwicHJvcGVydHkiLCJtZXRob2QiLCJuZXh0IiwiZGF0dW0iLCJpbnNlcnRhYmxlIiwic2hvdWxkU2hvdyIsInBhcmVudEVsZW1lbnQiLCJpc0ZpcnN0TmlnaHQiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJkcmF3Q2hhcmFjdGVyQnlEYXRhIiwiZ2V0RGF0YSIsImlzSW5QbGF5IiwicmVwbGFjZVdpdGgiLCJmaW5kSW5kZXgiLCJhZGp1c3RJblBsYXkiLCJhZGp1c3RBbGl2ZSIsInF1YW50aXR5IiwibWluIiwibWF4IiwiZHVtbXkiLCJjcmVhdGVFbGVtZW50IiwiY3JlYXRlIiwib2JzZXJ2ZXJzIiwiVG9rZW5zIiwiUG9zaXRpb25lciIsIlRva2VuU3RvcmUiLCJpc051bWVyaWMiLCJQYWQiLCJ0b2tlbnMiLCJwb3NpdGlvbmVyIiwiY29vcmRzIiwidG9rZW5TdG9yZSIsImluZm8iLCJmcmVlemUiLCJkcmF3Q2hhcmFjdGVyIiwiT0ZGU0VUIiwiYWRkQ2hhcmFjdGVyIiwibW92ZVRvIiwiYWR2YW5jZVpJbmRleCIsInpJbmRleCIsImdldFBvc2l0aW9uIiwicHJlc2VydmVSZWZlcmVuY2UiLCJ1bmRyYXdDaGFyYWN0ZXIiLCJyZW1vdmVDaGFyYWN0ZXIiLCJnZXRDaGFyYWN0ZXJCeVRva2VuIiwiZGVhZFN0YXRlIiwiZ2V0SW5mb0J5Q2hhcmFjdGVyIiwidG9nZ2xlRGVhZCIsImdldFRva2VuIiwic2V0R2hvc3RWb3RlIiwicm90YXRlU3RhdGUiLCJyb3RhdGUiLCJuYW1lVGFnIiwiZ2V0UGxheWVyTmFtZSIsInRyaW0iLCJzZXRQbGF5ZXJOYW1lIiwiZ2hvc3RWb3RlU3RhdGUiLCJyZW1vdmVSZW1pbmRlciIsImdldFJlbWluZGVyQnlUb2tlbiIsInJlc2V0IiwidXBkYXRlUGFkRGltZW5zaW9ucyIsInNldFpJbmRleCIsImdlbmVyYXRlQ29vcmRzIiwiZGltZW5zaW9ucyIsImNvbnNvbGUiLCJ3YXJuIiwibm9DaGFyYWN0ZXIiLCJ0b2tlbldpZHRoIiwidG9rZW5IZWlnaHQiLCJzY2FsZSIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJnZXRQcm9wZXJ0eVZhbHVlIiwidG9rZW5DaGFyYWN0ZXIiLCJzdHlsZXMiLCJzaGFkb3dPZmZzZXQiLCJzaGFkb3dBbW91bnQiLCJwYXJzZUZsb2F0IiwidG90YWwiLCJsYXlvdXQiLCJnZW5lcmF0ZSIsInNldENvbnRhaW5lclNpemUiLCJnZXRQYWREaW1lbnNpb25zIiwic2V0VG9rZW5TaXplIiwiZ2V0VG9rZW5EaW1lbnNpb25zIiwic2V0TGF5b3V0Iiwic2V0VG90YWwiLCJ0aW1lcyIsInNldERlZmF1bHRzIiwidG9wTGVmdCIsImxheW91dHMiLCJlbGxpcHNlIiwiY29vcmRpbmF0ZXMiLCJyYWRpdXNYIiwicmFkaXVzWSIsImRwIiwicmFkaWFucyIsInNpbiIsImNvcyIsInByZWNpc2lvbiIsIlBJIiwiY2lyYyIsIm5leHRQb2ludCIsInJ1biIsInBvaW50WCIsInBvaW50WSIsImRpYWdvbmFsIiwieEluY3JlbWVudCIsInlJbmNyZW1lbnQiLCJob3Jpem9udGFsIiwidmVydGljYWwiLCJQcm9jZXNzTGlzdCIsIml0ZW0iLCJwcm9jZXNzIiwiY2hhcmFjdGVyTmFtZSIsImlzR2xvYmFsIiwicmVtaW5kZXJJZCIsImdsb2JhbCIsIlNlbGVjdERpYWxvZyIsInByb2Nlc3NMaXN0IiwiYWRkVW5pcXVlIiwiZXhlY3V0ZSIsImxhc3QiLCJISURFIiwiaW5wdXQiLCJmb3JtIiwic3RhcnQiLCJwcmV2aW91cyIsImFkZExpc3RlbmVycyIsInNob3dJbnB1dCIsImZvY3VzIiwiaGlkZUlucHV0IiwidXBkYXRlUHJldmlvdXMiLCJzdG9wUHJvcGFnYXRpb24iLCJibHVyIiwiaXNTaG93aW5nSW5wdXQiLCJ0b2dnbGVJbnB1dCIsImdldFN0YXJ0VGV4dCIsImRlZXBGcmVlemUiLCJsb29rdXAiLCJTdG9yZSIsImtleSIsInJlYWQiLCJpbmZvVG9rZW5zIiwibGlzdGVuZXIiLCJsb2NhbFN0b3JhZ2UiLCJzZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldCIsInBhcnNlIiwiZ2V0SXRlbSIsIndyaXRlIiwia2V5cyIsInVybCIsInJlc3VsdHMiLCJnYW1lIiwiYWRkVG9rZW4iLCJwbGF5ZXJOYW1lIiwiZ2hvc3RWb3RlIiwiY2hlY2tlZCIsIm5vZGVOYW1lIiwic2VsZWN0b3IiLCJpc0NoZWNrYm94IiwiaGFzQXR0cmlidXRlIiwiZm9ybUlkIiwiaW5wdXRzIiwiZnJvbUVudHJpZXMiLCJkZXRhaWxzIiwib3BlbiIsImluZm9Ub2tlbiIsImdldFJhdyIsInZlcnNpb24iLCJ1c2VyIiwiY2FjaGUiLCJwb3B1bGF0ZXMiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwicG9wdWxhdGUiLCJwcm9jZXNzRGF0YSIsIlByb3h5IiwiY29udmVydFByb3BlcnR5IiwiaGFzRGF0YSIsImNsaXBwZWQiLCJjaGFyQXQiLCJzbGljZSIsInJlcGxhY2VDb250ZW50c01hbnkiLCJUb2tlbkRpYWxvZyIsImVudHJ5VGVtcGxhdGUiLCJzZXRJZHMiLCJkaXNjb3ZlckVsZW1lbnRzIiwiYWN0aXZhdGVTZXR0YWJsZVRpdGxlIiwiYWN0aXZhdGVEcmFnZ2FibGUiLCJTSE9XIiwiZHJhd0NoYXJhY3RlcnMiLCJzZXRNdWx0aXBsZVRpdGxlIiwicmVtb3ZlQnV0dG9uIiwicmVtb3ZlSXRlbSIsInJlbW92ZUlkQnlJbmRleCIsImRyYWdnYWJsZSIsImlkcyIsImV4aXN0aW5nSWQiLCJtdWx0aXBsZVRpdGxlIiwiZ2V0Rm9ybSIsIm11bHRpcGxlIiwiaXNNdWx0aXBsZSIsInJlbW92ZUFsbENoaWxkcmVuIiwidGl0bGVUZXh0IiwiZ2V0TXVsdGlwbGVUaXRsZSIsInNldFN0YXJ0VGV4dCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJhZGRDaGlsZCIsImRlZmVyIiwiY3JlYXRlQ2hhcmFjdGVyIiwiYWRkR2xvYmFsIiwiY3JlYXRlUmVtaW5kZXIiLCJ0cmlja0NoYXJhY3RlciIsIm5ld0ppbngiLCJub3JtYWxpc2VJZCIsImNvbmNhdCIsImlzQ3VzdG9tIiwidmFsdWVzIiwiZ2V0Q2hhcmFjdGVyQ2xvbmUiLCJFTVBUWSIsImdldFJlbWluZGVyIiwiZ2V0SXNIb21lYnJldyIsInByb21pc2UiLCJyZXNvbHZlIiwiaXNSZW1pbmRlcklkIiwidGVzdCIsInRoZW4iLCJjbGFtcCIsIm5vb3AiLCJyYWZUaHJvdHRsZSIsInBhZCIsImRyYWdIYW5kbGVyIiwiaXNEcmFnZ2luZyIsInhPZmZzZXQiLCJ5T2Zmc2V0IiwicmVjdCIsInBhZExlZnQiLCJwYWRUb3AiLCJwYWRXaWR0aCIsInBhZEhlaWdodCIsInN0eWxlT2JzZXJ2ZXIiLCJNdXRhdGlvbk9ic2VydmVyIiwiYXR0cmlidXRlcyIsImF0dHJpYnV0ZUZpbHRlciIsInNjb2xsSGFuZGxlciIsIm9uU2Nyb2xsIiwib25Nb3VzZWRvd24iLCJvbk1vdXNldXAiLCJvbkNsaWNrIiwib25SZXNpemUiLCJzdGFydERyYWciLCJlbmREcmFnZ2luZyIsInRva2VuVHlwZSIsImRyYWdPYmplY3QiLCJwYXNzaXZlIiwibGVmdFZhbHVlIiwidG9wVmFsdWUiLCJpc05hTiIsImNvb3JkIiwieiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsImRvY3VtZW50RWxlbWVudCIsImxhbmciLCJWRVJTSU9OIiwiZ2FtZU9ic2VydmVyIiwidG9rZW5PYnNlcnZlciIsInJlY2VudFJlbWluZGVycyIsImNoYXJhY3RlclNob3dEaWFsb2ciLCJ0b2tlbkRpYWxvZyIsInNldEVudHJ5VGVtcGxhdGUiLCJnZXRUb2tlblBvc2l0aW9uIiwic2hvdyIsIml0ZW1zIiwiZXhpc3RpbmciLCJwcmVwZW5kIiwiZHJhd0xpc3QiLCJoaWRlRGlhbG9nIiwiaGlkZSIsInRvZ2dsZURlYWRCeVRva2VuIiwicm90YXRlQnlUb2tlbiIsImNoYXJhY3Rlckxpc3REaWFsb2ciLCJhZGRQcm9jZXNzIiwiY2xpY2siLCJyZXBsYWNlT25QYWRQcm9jZXNzIiwibmV3VG9rZW4iLCJvbGRDaGFyYWN0ZXIiLCJtb3ZlVG9rZW4iLCJyZW1vdmVQcm9jZXNzIiwiYWRkVG9EaWFsb2dQcm9jZXNzIiwiYWRkSWQiLCJjaGFyYWN0ZXJOYW1lSW5wdXQiLCJzZXRQbGF5ZXJOYW1lRm9yVG9rZW4iLCJnaG9zdFZvdGVCdXR0b24iLCJzZXRHaG9zdEJ1dHRvblN0YXRlIiwic2V0R2hvc3RWb3RlRm9yVG9rZW4iLCJnZXRQbGF5ZXJOYW1lRm9yVG9rZW4iLCJjb250YWlucyIsImRlZmF1bHRWYWx1ZSIsInJlbW92ZUNoYXJhY3RlckJ5VG9rZW4iLCJnZXRTb3J0ZWRLZXlzIiwib2JqZWN0IiwiYXNzaWduQ291bnRzIiwiZGF0YUtleSIsImNvdW50IiwidXBkYXRlVG9rZW5zIiwiZmlyc3RBcnJheSIsIm90aGVyQXJyYXkiLCJ0b2tlbkxpc3RUZW1wbGF0ZSIsInRva2VuTGlzdCIsImdldFRlYW0iLCJzdG9yZSIsImNoYXIiLCJnZXRDaGFyYWN0ZXJJZCIsInNldFRva2VuU3RvcmUiLCJ0b2tlbkxpc3REaWFsb2ciLCJzZXRUZW1wbGF0ZSIsInNldEVtcHR5Q2hhcmFjdGVyIiwiYmx1ZmZHcm91cHNDb250YWluZXIiLCJibHVmZkdyb3VwcyIsInNldElubmVySW5kZXgiLCJjcmVhdGVGcm9tVHJpZ2dlciIsInNldFNldHRhYmxlVGl0bGUiLCJkaXNhYmxlQW5ub3VuY2VtZW50cyIsImdldEVtcHR5RGF0YSIsImVuYWJsZUFubm91bmNlbWVudHMiLCJhZGRFbXB0eSIsImNoYXJhY3RlclRlbXBsYXRlIiwidG9nZ2xlQmx1ZmZMaXN0Q2xhc3MiLCJjbGFzc05hbWUiLCJyb2xlc0luUGxheSIsImJsdWZmTGlzdERpYWxvZyIsInJlZHJhdyIsImNoYXJJbmRleCIsImdhbWVEYXRhIiwiYWRkTGlzdGVuZXIiLCJzY3JpcHQiLCJkYXRlIiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZGF5IiwicGxheWVycyIsIm1lIiwiZGVhZCIsImNyeXB0byIsInJhbmRvbVVVSUQiLCJzdXNwZWN0ZWRSb2xlIiwiZmV0Y2giLCJoZWFkZXJzIiwiYm9keSIsInJlc3BvbnNlIiwianNvbiIsInFyIiwiaG9tZWJyZXdGYWJsZWQiLCJvZmZpY2lhbEZhYmxlZCIsInBvcHVsYXRlRmFibGVkIiwiZmFibGVkIiwiZmFibGUiLCJnZXRBbGxDaGFyYWN0ZXJzIiwiZmFibGVkQ291bnQiLCJwYWRFbGVtZW50IiwibXV0YXRpb25zIiwidXBkYXRlRGltZW5zaW9ucyIsImdldEdsb2JhbCIsImFkZE5ld0NoYXJhY3RlciIsImh0bWwiLCJzZXRQb3NpdGlvbmVyIiwidG9rZW5MYXlvdXQiLCJ1cGRhdGVQb3NpdGlvbmVyIiwiZ3JpbW9pcmVTZWN0aW9uIiwiaXNPcGVuIiwicmVtaW5kZXJMaXN0IiwicmVtaW5kZXJMaXN0RGlhbG9nIiwiZ2V0Q29vcmRzIiwiYWRkUmVtaW5kZXJRdWljayIsImdldFJlbWluZGVyQ2xvbmUiLCJ0b2dnbGVSZW1pbmRlciIsImNoZWNrYm94IiwiaXNBZGRNdWx0aXBsZSIsIm11bHRpcGxlUmVtaW5kZXJzIiwiYWRkQWxsUmVtaW5kZXJzIiwiaXNOb3dBZGRNdWx0aXBsZSIsInJlbWluZGVyRGlhbG9nIiwicmVtaW5kZXJIb2xkZXIiLCJyZW1vdmVSZW1pbmRlckJ5VG9rZW4iLCJjb3VudHMiLCJjb25maXJtIiwib2ZmaWNpYWxUcmF2ZWxsZXJzIiwiaG9tZWJyZXdUcmF2ZWxsZXJzIiwicG9wdWxhdGVUcmF2ZWxsZXJzIiwidHJhdmVsbGVycyIsInRyYXZlbGxlciIsInRyYXZlbGxlcklEcyIsInRyYXZlbGxlckNvdW50IiwiYnV0dG9uSG9sZGVyIiwiZGlhbG9nSG9sZGVyIiwic2V0VGVtcGxhdGVzIiwic2V0SG9sZGVycyIsInByb21wdCIsIkkxOE4iLCJjdXN0b21JbmZvVG9rZW4iLCJkaWFsb2cydG9rZW4iLCJXZWFrTWFwIiwiZ2V0RGlhbG9nIiwiZWRpdFRva2VuIiwidXBkYXRlUmF3IiwiZGVsZXRlVG9rZW4iLCJhY3Rpb24iLCJ0cmlja1RvVGFyZ2V0IiwiamlueFRlbXBsYXRlIiwicmVnaXN0ZXJKaW54IiwidHJpY2tJZCIsImdldFRyaWNrIiwiZ2V0VGFyZ2V0IiwidW5yZWdpc3RlckppbngiLCJhY3RpdmF0ZUppbngiLCJzZXRPYnNlcnZlciIsImdldEFsbEppbnhlcyIsImdldEFsbEhvbWVicmV3SmlueGVzIiwicmVtb3ZlQWxsSG9tZWJyZXdKaW54ZXMiLCJzZXRJc0hvbWVicmV3IiwicmVhZHlBbGxKaW54ZXMiLCJhbGxKaW54ZXMiLCJ0b2dnbGVKaW54VGFyZ2V0IiwidGFyZ2V0SWQiLCJ0b2dnbGVKaW54VHJpY2siLCJqaW54U2VjdGlvbiIsImppbnhUYWJsZSIsImdldElzR2xvYmFsIiwiZW5kc1dpdGgiLCJoYXNTcGVjaWFsRGF0YSIsImFubm91bmNlSW5wdXQiLCJzZXRDaGFyYWN0ZXJzIiwiZHJhd0FsbE5pZ2h0T3JkZXJzIiwic2Nyb2xsTGVmdCIsInNwZWNpYWxSb2xlcyIsInBsYWNlSW5PcmRlciIsImhhc0NoYXJhY3RlciIsInVuc2V0Q2hhcmFjdGVyIiwic2V0U2hvd0RlYWQiLCJzaG93QWxsIiwic2V0U2hvd05vdEluUGxheSIsImZpZWxkIiwid2FybmluZyIsIlFSQ29kZSIsImNoYXJhY3RlclN0b3JlIiwiZHJhd1FSQ29kZSIsImluY2x1ZGVUcmF2ZWxsZXJzIiwiaW5jbHVkZUZhYmxlZCIsInFyQ29kZSIsImFuY2hvciIsIlVSTCIsImhyZWYiLCJzZWFyY2hQYXJhbXMiLCJ0ZWFtcyIsIm1zZyIsInRvU3RyaW5nIiwiZWNsIiwibG9va3VwQ2FjaGVkIiwiY2xlYXJzIiwibG9jYXRpb24iLCJyZWxvYWQiLCJmZXRjaEZyb21TdG9yZSIsIlVSTFMiLCJicmVha2Rvd24iLCJQcm9taXNlIiwiYWxsIiwiZW1wdHlDaGFyYWN0ZXJBYmlsaXR5IiwiZ29vZFRlYW0iLCJldmlsVGVhbSIsImZpbHRlckxpc3QiLCJyZXF1ZXN0U3VibWl0Iiwic2V0VHJhY2tXaWR0aCIsInJhbmdlT2JzZXJ2ZXIiLCJvdXRwdXQiLCJzaHVmZmxlIiwiZ3JvdXBCeSIsInN1cHBsYW50Iiwic2V0VG90YWxzIiwiaGlnaGxpZ2h0UmFuZG9tSW5UZWFtIiwiY2hvc2VuIiwiaXNDaGVja2VkIiwicGxheWVyQ291bnQiLCJnZXRCcmVha2Rvd24iLCJ3cmFwcGVyIiwiaXNUZWFtUG9wdWxhdGVkIiwiZHJhd1NlbGVjdCIsImNvdW50SW5wdXRzIiwibWF4UGxheWVycyIsImRlbHRhIiwicXVhbnRpdHlBbW91bnQiLCJhbW91bnQiLCJ2YWxpZGF0aW9uSW5wdXQiLCJjb3VudEVsZW1lbnQiLCJzZXRDdXN0b21WYWxpZGl0eSIsImZpbHRlcmVkIiwiZHVwbGljYXRlcyIsImZsYXQiLCJiYWdEaXNhYmxlZCIsImpvaW4iLCJyZXBvcnRWYWxpZGl0eSIsImlzU2hvd0FsbCIsInN1Ym1pdHRlciIsImJyZWFrZG93blRhYmxlIiwiaGlnaGxpZ2h0QnJlYWtkb3duIiwibnVtYmVyIiwiU3RyaW5nIiwiY2VsbCIsInJvdyIsImdldExhYmVsVGV4dCIsInBvc3QiLCJpc1NjcmlwdEpzb24iLCJldmVyeSIsImNvbnRhaW5zSG9tZWJyZXciLCJzb21lIiwiYW5ub3VuY2VTY3JpcHQiLCJzaG93SW5wdXRFcnJvciIsImVycm9yIiwibm9ybWFsTWFwIiwibm9ybWFsaXNlSG9tZWJyZXciLCJlbnRyeSIsImV4dHJhY3RNZXRhRW50cnkiLCJtZXRhSW5kZXgiLCJzZXRGb3JtTG9hZGluZ1N0YXRlIiwiaXNMb2FkaW5nIiwic3VibWl0IiwicHJvZ3Jlc3MiLCJnZXRBdHRyaWJ1dGUiLCJjb252ZXJ0Q2hhcmFjdGVySWQiLCJwcm9jZXNzSlNPTiIsImludmFsaWRTY3JpcHQiLCJub3JtYWxpc2VkIiwiaG9tZWJyZXciLCJzdWNjZXNzIiwibWVzc2FnZSIsInJlYXNvbnMiLCJnZXRPZmZpY2lhbENoYXJhY3RlciIsImNyZWF0ZUN1c3RvbUNoYXJhY3RlciIsIm5vQ2hhcmFjdGVycyIsInNldEZpZWxkc1ZhbGlkaXR5IiwiZmllbGRzIiwiaXNWaXNpYmxlIiwiaW5wdXR0ZWQiLCJyZXF1aXJlZCIsImZpbGVJbnB1dCIsImZpbGVJbnB1dFJlbmRlciIsInVybElucHV0IiwicGFzdGVJbnB1dCIsInVwbG9hZGVyIiwicmFkaW9zIiwiY3VzdG9tSW5wdXRzIiwicmFkaW8iLCJteVVSTCIsImRlY29kZVVSSUNvbXBvbmVudCIsImVuY29kZVVSSUNvbXBvbmVudCIsImZpbGVzIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsInJlc3VsdCIsInJlYWRBc1RleHQiLCJnZXRFZGl0aW9uIiwibGFzdEluZGV4T2YiLCJjaGFyYWN0ZXJEZWNpc2lvbkRpYWxvZyIsImkiLCJpc0F1dG9BZGQiLCJ0cmltbWVkIiwiY29tcGFyZVZlcnNpb25zIiwiaW5mb1Rva2VuT2JzZXJ2ZXIiLCJnZXRBbGxEYXRhIiwicmVtb3ZlU3RhbGVJbnB1dHMiLCJzZXRIZWlnaHQiLCJyZW1vdmVUb2tlbiIsImFsaWduVG9rZW4iLCJzZXRCbHVmZnMiLCJzYXZlSW5mb1Rva2VuIiwidXBkYXRlSW5mb1Rva2VuIiwicmVtb3ZlSW5mb1Rva2VuIiwic2F2ZWRWZXJzaW9uIiwiZ2V0VmVyc2lvbiIsInZlcnNpb25DaGFuZ2UiLCJzZXRWZXJzaW9uIiwic2F2ZUlucHV0Iiwic2F2ZURldGFpbHMiLCJjYXB0dXJlIiwic3RvcmVEYXRhIiwiZmluYWxaSW5kZXgiLCJpc0NoYXJhY3RlciIsImlzQ2hhcmFjdGVySWQiLCJpc1JhZGlvIiwiaXNPcGVuTm93IiwiRXZlbnQiLCJhcnJheSIsIm51bWJlcnMiLCJnZXRSYW5kb21WYWx1ZXMiLCJVaW50MTZBcnJheSIsImZyb20iLCJnZXRHcm91cCIsImdyb3VwZWQiLCJnZXRMb29rdXAiLCJzZXRMb29rdXAiLCJtb2RlIiwiY3JlZGVudGlhbHMiLCJyZWRpcmVjdCIsInJlZmVycmVyUG9saWN5IiwiZnVuYyIsImNvbnRleHQiLCJhcHBseSIsInBhcnNlVmVyc2lvbiIsInNlbXZlciIsInNwbGl0IiwidmVyc2lvbjEiLCJ2ZXJzaW9uMiIsInBhcnRzMSIsInBhcnRzMiIsInBhcnQiLCJ0b1Bvc0ludCIsImZsb29yIiwiYWJzIiwidG9SYWRpYW5zIiwiZGVncmVlcyIsInBhcnNlZCIsImlzRmluaXRlIiwicmVzIiwicmVqIiwicmVqZWN0IiwicmVhZFVURjgiLCJieXRlcyIsInN0cmluZyIsImJ5dGUxIiwiY2hhckNvZGVBdCIsImJ5dGUyIiwiYnl0ZTMiLCJieXRlNCIsImZyb21DaGFyQ29kZSIsImNvZGVwb2ludCIsInJlcGxhY2VtZW50cyIsIndob2xlIl0sInNvdXJjZVJvb3QiOiIifQ==